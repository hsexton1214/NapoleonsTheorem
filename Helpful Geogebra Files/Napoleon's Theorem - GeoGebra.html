<!DOCTYPE html>
<!-- saved from url=(0052)https://tube.geogebra.org/material/simple/id/3177287 -->
<html lang="en" dir="ltr" class="wf-geogebrasansserif-n4-active wf-geogebraserif-n4-active wf-active"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Napoleon's Theorem - GeoGebra</title>        
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">

                <!-- Chrome, Firefox OS and Opera -->
        <meta name="theme-color" content="#6161FF">
        <!-- Windows Phone -->
        <meta name="msapplication-navbutton-color" content="#6161FF">
        <!-- iOS Safari -->
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="#6161FF">

        <meta property="og:title" content="Napoleon&#39;s Theorem">
<meta property="og:description" content="">
<meta property="og:site_name" content="GeoGebra">
<meta property="og:type" content="article">
<meta property="og:image" content="https://tube.geogebra.org/files/00/03/17/72/material-3177289-thumb.png?v=1460575040">
<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@geogebra">
<meta property="fb:app_id" content="185307058177853">
<meta property="article:published_time" content="2016-04-13">
<meta property="article:publisher" content="https://www.facebook.com/geogebra">
        <link rel="stylesheet" type="text/css" href="./Napoleon&#39;s Theorem - GeoGebra_files/structure.ltr.css">
        <link rel="stylesheet" type="text/css" href="./Napoleon&#39;s Theorem - GeoGebra_files/screen.ltr.css" media="screen and (min-width: 769px)">
        <link rel="stylesheet" type="text/css" href="./Napoleon&#39;s Theorem - GeoGebra_files/tablet.ltr.css" media="screen and (min-width: 641px) and (max-width: 768px)">
        <link rel="stylesheet" type="text/css" href="./Napoleon&#39;s Theorem - GeoGebra_files/phone.ltr.css" media="screen and (min-width: 0px) and (max-width: 640px)">
        <link rel="stylesheet" type="text/css" href="./Napoleon&#39;s Theorem - GeoGebra_files/general.ltr.css">
        <link rel="stylesheet" type="text/css" href="./Napoleon&#39;s Theorem - GeoGebra_files/ws.view.ltr.css">

        <link href="./Napoleon&#39;s Theorem - GeoGebra_files/wbbtheme.css" media="screen" rel="stylesheet" type="text/css">
<link href="./Napoleon&#39;s Theorem - GeoGebra_files/wysibb.css" media="screen" rel="stylesheet" type="text/css">
<link href="./Napoleon&#39;s Theorem - GeoGebra_files/groups.ltr.css" media="screen" rel="stylesheet" type="text/css">
<link href="./Napoleon&#39;s Theorem - GeoGebra_files/materials.ltr.css" media="screen" rel="stylesheet" type="text/css">
<link href="./Napoleon&#39;s Theorem - GeoGebra_files/compiled.css" media="screen" rel="stylesheet" type="text/css">
                    <link rel="shortcut icon" type="image/x-icon" href="https://static.geogebra.org/static/img/favicon.ico">
            <script type="text/javascript" async="" src="./Napoleon&#39;s Theorem - GeoGebra_files/ga.js"></script><script type="text/javascript" src="./Napoleon&#39;s Theorem - GeoGebra_files/jquery.min.js"></script>
        
        <script type="text/javascript" src="./Napoleon&#39;s Theorem - GeoGebra_files/jquery.simplemodal.js"></script>
        <script type="text/javascript" src="./Napoleon&#39;s Theorem - GeoGebra_files/ws-header-footer.js"></script>

                    
<script type="text/javascript">
    //<![CDATA[
                var ga_domainName = 'geogebra.org';
        var ga_trackingId = 'UA-1780044-1';
    var ga_userId = 3344311;
    //]]>
</script>
<script type="text/javascript" src="./Napoleon&#39;s Theorem - GeoGebra_files/gastats.js"></script>

        
        <script type="text/javascript">
    //<![CDATA[
    
            var ga_material_id = 3177287;
            gaTrackMaterialView(ga_material_id, GA_MATERIAL_VIEW_SIMPLE);

            $(function($) {
                $("#close-student-view").click(function() {
                   window.close();
                });
            });
            //]]>
</script>
<script type="text/javascript" src="./Napoleon&#39;s Theorem - GeoGebra_files/texthandlers.js"></script>
<script type="text/javascript" src="./Napoleon&#39;s Theorem - GeoGebra_files/jlatexmath.js"></script>
<script type="text/javascript" src="./Napoleon&#39;s Theorem - GeoGebra_files/jlatexmath-tube.js"></script>
<script type="text/javascript">
    //<![CDATA[
    window.GGBT_texthandlers.setLatexRenderer("jlatexmath");    //]]>
</script>
<script type="text/javascript">
    //<![CDATA[
    
                function escapeHtml(text) {
                  return text
                      .replace(/&/g, "&amp;")
                      .replace(/</g, "&lt;")
                      .replace(/>/g, "&gt;")
                      .replace(/"/g, "&quot;")
                      .replace(/'/g, "&#039;");
                  }

                function GGBT_parseLatexes() {
                  if (window.GGBT_texthandlers.isLatexRenderer("mathquill")) {
                        $(".mathquill-embedded-latex").mathquill();
                    } else {
                        window.GGBT_jlatexmath.drawLatexOnjQuery($(".jlatexmath"));
                    }
                }
                jQuery(document).ready(function(e) {
                    var content = $(".bbcode-text");
                    content.each(function(index) {
                        var html = window.GGBT_texthandlers.getHTMLFromBBCode(escapeHtml($(this).text())),
                            t = $(this);
                            t.removeClass(".bbcode-text");
                            t.html(html);
                    });
                    if (window.GGBT_ws_header_footer) {
                        window.GGBT_ws_header_footer.setWsScrollerHeight();
                    }
                });
                window.addEventListener("load",function(e) {
                    GGBT_parseLatexes();
                });
                 window.addEventListener("resize",function(e) {
                    GGBT_parseLatexes();
                });
                //]]>
</script>
<script type="text/javascript" src="./Napoleon&#39;s Theorem - GeoGebra_files/general.original.js"></script>
<script type="text/javascript" src="./Napoleon&#39;s Theorem - GeoGebra_files/general.js"></script>
<script type="text/javascript" src="./Napoleon&#39;s Theorem - GeoGebra_files/view.js"></script>
<script type="text/javascript" src="./Napoleon&#39;s Theorem - GeoGebra_files/deployggb.js"></script>
    <link rel="stylesheet" href="./Napoleon&#39;s Theorem - GeoGebra_files/fonts.css"><script>(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.opentype = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";exports.argument=function(r,t){if(!r)throw new Error(t)},exports.assert=exports.argument;


},{}],2:[function(require,module,exports){
"use strict";function line(e,i,n,o,t){e.beginPath(),e.moveTo(i,n),e.lineTo(o,t),e.stroke()}exports.line=line;


},{}],3:[function(require,module,exports){
"use strict";function DefaultEncoding(e){this.font=e}function CmapEncoding(e){this.cmap=e}function CffEncoding(e,l){this.encoding=e,this.charset=l}function GlyphNames(e){var l;switch(e.version){case 1:this.names=exports.standardNames.slice();break;case 2:for(this.names=new Array(e.numberOfGlyphs),l=0;l<e.numberOfGlyphs;l++)this.names[l]=e.glyphNameIndex[l]<exports.standardNames.length?exports.standardNames[e.glyphNameIndex[l]]:e.names[e.glyphNameIndex[l]-exports.standardNames.length];break;case 2.5:for(this.names=new Array(e.numberOfGlyphs),l=0;l<e.numberOfGlyphs;l++)this.names[l]=exports.standardNames[l+e.glyphNameIndex[l]];break;case 3:this.names=[]}}function addGlyphNames(e){for(var l,r=e.tables.cmap.glyphIndexMap,a=Object.keys(r),s=0;s<a.length;s+=1){var i=a[s],o=r[i];l=e.glyphs[o],l.addUnicode(parseInt(i))}for(s=0;s<e.glyphs.length;s+=1)l=e.glyphs[s],l.name=e.cffEncoding?e.cffEncoding.charset[s]:e.glyphNames.glyphIndexToName(s)}var cffStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],cffStandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],cffExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],standardNames=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];DefaultEncoding.prototype.charToGlyphIndex=function(e){var l=e.charCodeAt(0),r=this.font.glyphs;if(!r)return null;for(var a=0;a<r.length;a+=1)for(var s=r[a],i=0;i<s.unicodes.length;i+=1)if(s.unicodes[i]===l)return a},CmapEncoding.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.charCodeAt(0)]||0},CffEncoding.prototype.charToGlyphIndex=function(e){var l=e.charCodeAt(0),r=this.encoding[l];return this.charset.indexOf(r)},GlyphNames.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},GlyphNames.prototype.glyphIndexToName=function(e){return this.names[e]},exports.cffStandardStrings=cffStandardStrings,exports.cffStandardEncoding=cffStandardEncoding,exports.cffExpertEncoding=cffExpertEncoding,exports.standardNames=standardNames,exports.DefaultEncoding=DefaultEncoding,exports.CmapEncoding=CmapEncoding,exports.CffEncoding=CffEncoding,exports.GlyphNames=GlyphNames,exports.addGlyphNames=addGlyphNames;


},{}],4:[function(require,module,exports){
"use strict";function Font(t){t=t||{},this.familyName=t.familyName||" ",this.styleName=t.styleName||" ",this.designer=t.designer||" ",this.designerURL=t.designerURL||" ",this.manufacturer=t.manufacturer||" ",this.manufacturerURL=t.manufacturerURL||" ",this.license=t.license||" ",this.licenseURL=t.licenseURL||" ",this.version=t.version||"Version 0.1",this.description=t.description||" ",this.copyright=t.copyright||" ",this.trademark=t.trademark||" ",this.unitsPerEm=t.unitsPerEm||1e3,this.ascender=t.ascender,this.descender=t.descender,this.supported=!0,this.glyphs=t.glyphs||[],this.encoding=new encoding.DefaultEncoding(this),this.tables={}}var path=require("./path"),sfnt=require("./tables/sfnt"),encoding=require("./encoding");Font.prototype.hasChar=function(t){return null!==this.encoding.charToGlyphIndex(t)},Font.prototype.charToGlyphIndex=function(t){return this.encoding.charToGlyphIndex(t)},Font.prototype.charToGlyph=function(t){var e=this.charToGlyphIndex(t),n=this.glyphs[e];return n||(n=this.glyphs[0]),n},Font.prototype.stringToGlyphs=function(t){for(var e=[],n=0;n<t.length;n+=1){var i=t[n];e.push(this.charToGlyph(i))}return e},Font.prototype.nameToGlyphIndex=function(t){return this.glyphNames.nameToGlyphIndex(t)},Font.prototype.nameToGlyph=function(t){var e=this.nametoGlyphIndex(t),n=this.glyphs[e];return n||(n=this.glyphs[0]),n},Font.prototype.glyphIndexToName=function(t){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(t):""},Font.prototype.getKerningValue=function(t,e){t=t.index||t,e=e.index||e;var n=this.getGposKerningValue;return n?n(t,e):this.kerningPairs[t+","+e]||0},Font.prototype.forEachGlyph=function(t,e,n,i,o,r){if(this.supported){e=void 0!==e?e:0,n=void 0!==n?n:0,i=void 0!==i?i:72,o=o||{};for(var s=void 0===o.kerning?!0:o.kerning,h=1/this.unitsPerEm*i,a=this.stringToGlyphs(t),p=0;p<a.length;p+=1){var c=a[p];if(r(c,e,n,i,o),c.advanceWidth&&(e+=c.advanceWidth*h),s&&p<a.length-1){var u=this.getKerningValue(c,a[p+1]);e+=u*h}}}},Font.prototype.getPath=function(t,e,n,i,o){var r=new path.Path;return this.forEachGlyph(t,e,n,i,o,function(t,e,n,i){var o=t.getPath(e,n,i);r.extend(o)}),r},Font.prototype.draw=function(t,e,n,i,o,r){this.getPath(e,n,i,o,r).draw(t)},Font.prototype.drawPoints=function(t,e,n,i,o,r){this.forEachGlyph(e,n,i,o,r,function(e,n,i,o){e.drawPoints(t,n,i,o)})},Font.prototype.drawMetrics=function(t,e,n,i,o,r){this.forEachGlyph(e,n,i,o,r,function(e,n,i,o){e.drawMetrics(t,n,i,o)})},Font.prototype.validate=function(){function t(t,e){t||n.push(e)}function e(e){t(i[e]&&i[e].trim().length>0,"No "+e+" specified.")}var n=[],i=this;e("familyName"),e("weightName"),e("manufacturer"),e("copyright"),e("version"),t(this.unitsPerEm>0,"No unitsPerEm specified.")},Font.prototype.toTables=function(){return sfnt.fontToTable(this)},Font.prototype.toBuffer=function(){for(var t=this.toTables(),e=t.encode(),n=new ArrayBuffer(e.length),i=new Uint8Array(n),o=0;o<e.length;o++)i[o]=e[o];return n},Font.prototype.download=function(){var t=this.familyName.replace(/\s/g,"")+"-"+this.styleName+".otf",e=this.toBuffer();window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,e.byteLength,function(n){n.root.getFile(t,{create:!0},function(t){t.createWriter(function(n){var i=new DataView(e),o=new Blob([i],{type:"font/opentype"});n.write(o),n.addEventListener("writeend",function(){location.href=t.toURL()},!1)})})},function(t){throw t})},exports.Font=Font;


},{"./encoding":3,"./path":8,"./tables/sfnt":23}],5:[function(require,module,exports){
"use strict";function Glyph(t){this.font=t.font||null,this.index=t.index||0,this.name=t.name||null,this.unicode=t.unicode||void 0,this.unicodes=t.unicodes||void 0!==t.unicode?[t.unicode]:[],this.xMin=t.xMin||0,this.yMin=t.yMin||0,this.xMax=t.xMax||0,this.yMax=t.yMax||0,this.advanceWidth=t.advanceWidth||0,this.path=t.path||null}var check=require("./check"),draw=require("./draw"),path=require("./path");Glyph.prototype.addUnicode=function(t){0===this.unicodes.length&&(this.unicode=t),this.unicodes.push(t)},Glyph.prototype.getPath=function(t,i,e){t=void 0!==t?t:0,i=void 0!==i?i:0,e=void 0!==e?e:72;for(var n=1/this.font.unitsPerEm*e,h=new path.Path,a=this.path.commands,o=0;o<a.length;o+=1){var r=a[o];"M"===r.type?h.moveTo(t+r.x*n,i+-r.y*n):"L"===r.type?h.lineTo(t+r.x*n,i+-r.y*n):"Q"===r.type?h.quadraticCurveTo(t+r.x1*n,i+-r.y1*n,t+r.x*n,i+-r.y*n):"C"===r.type?h.curveTo(t+r.x1*n,i+-r.y1*n,t+r.x2*n,i+-r.y2*n,t+r.x*n,i+-r.y*n):"Z"===r.type&&h.closePath()}return h},Glyph.prototype.getContours=function(){if(void 0===this.points)return[];for(var t=[],i=[],e=0;e<this.points.length;e+=1){var n=this.points[e];i.push(n),n.lastPointOfContour&&(t.push(i),i=[])}return check.argument(0===i.length,"There are still points left in the current contour."),t},Glyph.prototype.getMetrics=function(){for(var t=this.path.commands,i=[],e=[],n=0;n<t.length;n+=1){var h=t[n];"Z"!==h.type&&(i.push(h.x),e.push(h.y)),("Q"===h.type||"C"===h.type)&&(i.push(h.x1),e.push(h.y1)),"C"===h.type&&(i.push(h.x2),e.push(h.y2))}var a={xMin:Math.min.apply(null,i),yMin:Math.min.apply(null,e),xMax:Math.max.apply(null,i),yMax:Math.max.apply(null,e),leftSideBearing:0};return a.rightSideBearing=this.advanceWidth-a.leftSideBearing-(a.xMax-a.xMin),a},Glyph.prototype.draw=function(t,i,e,n){this.getPath(i,e,n).draw(t)},Glyph.prototype.drawPoints=function(t,i,e,n){function h(i,e,n,h){var a=2*Math.PI;t.beginPath();for(var o=0;o<i.length;o+=1)t.moveTo(e+i[o].x*h,n+i[o].y*h),t.arc(e+i[o].x*h,n+i[o].y*h,2,0,a,!1);t.closePath(),t.fill()}i=void 0!==i?i:0,e=void 0!==e?e:0,n=void 0!==n?n:24;for(var a=1/this.font.unitsPerEm*n,o=[],r=[],s=this.path,l=0;l<s.commands.length;l+=1){var p=s.commands[l];void 0!==p.x&&o.push({x:p.x,y:-p.y}),void 0!==p.x1&&r.push({x:p.x1,y:-p.y1}),void 0!==p.x2&&r.push({x:p.x2,y:-p.y2})}t.fillStyle="blue",h(o,i,e,a),t.fillStyle="red",h(r,i,e,a)},Glyph.prototype.drawMetrics=function(t,i,e,n){var h;i=void 0!==i?i:0,e=void 0!==e?e:0,n=void 0!==n?n:24,h=1/this.font.unitsPerEm*n,t.lineWidth=1,t.strokeStyle="black",draw.line(t,i,-1e4,i,1e4),draw.line(t,-1e4,e,1e4,e),t.strokeStyle="blue",draw.line(t,i+this.xMin*h,-1e4,i+this.xMin*h,1e4),draw.line(t,i+this.xMax*h,-1e4,i+this.xMax*h,1e4),draw.line(t,-1e4,e+-this.yMin*h,1e4,e+-this.yMin*h),draw.line(t,-1e4,e+-this.yMax*h,1e4,e+-this.yMax*h),t.strokeStyle="green",draw.line(t,i+this.advanceWidth*h,-1e4,i+this.advanceWidth*h,1e4)},exports.Glyph=Glyph;


},{"./check":1,"./draw":2,"./path":8}],6:[function(require,module,exports){
"use strict";function toArrayBuffer(e){for(var a=new ArrayBuffer(e.length),r=new Uint8Array(a),s=0;s<e.length;s+=1)r[s]=e[s];return a}function loadFromFile(e,a){var r=require("fs");r.readFile(e,function(e,r){return e?a(e.message):void a(null,toArrayBuffer(r))})}function loadFromUrl(e,a){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){return 200!==r.status?a("Font could not be loaded: "+r.statusText):a(null,r.response)},r.send()}function parseBuffer(e){var a,r,s,t,n,o,p,l=new _font.Font,i=new DataView(e,0),u=parse.getFixed(i,0);if(1===u)l.outlinesFormat="truetype";else{if(u=parse.getTag(i,0),"OTTO"!==u)throw new Error("Unsupported OpenType version "+u);l.outlinesFormat="cff"}for(var c=parse.getUShort(i,4),f=12,h=0;c>h;h+=1){var d=parse.getTag(i,f),m=parse.getULong(i,f+8);switch(d){case"cmap":l.tables.cmap=cmap.parse(i,m),l.encoding=new encoding.CmapEncoding(l.tables.cmap),l.encoding||(l.supported=!1);break;case"head":l.tables.head=head.parse(i,m),l.unitsPerEm=l.tables.head.unitsPerEm,a=l.tables.head.indexToLocFormat;break;case"hhea":l.tables.hhea=hhea.parse(i,m),l.ascender=l.tables.hhea.ascender,l.descender=l.tables.hhea.descender,l.numberOfHMetrics=l.tables.hhea.numberOfHMetrics;break;case"hmtx":r=m;break;case"maxp":l.tables.maxp=maxp.parse(i,m),l.numGlyphs=l.tables.maxp.numGlyphs;break;case"name":l.tables.name=_name.parse(i,m),l.familyName=l.tables.name.fontFamily,l.styleName=l.tables.name.fontSubfamily;break;case"OS/2":l.tables.os2=os2.parse(i,m);break;case"post":l.tables.post=post.parse(i,m),l.glyphNames=new encoding.GlyphNames(l.tables.post);break;case"glyf":s=m;break;case"loca":t=m;break;case"CFF ":n=m;break;case"kern":o=m;break;case"GPOS":p=m}f+=16}if(s&&t){var b=0===a,g=loca.parse(i,t,l.numGlyphs,b);l.glyphs=glyf.parse(i,s,g,l),hmtx.parse(i,r,l.numberOfHMetrics,l.numGlyphs,l.glyphs),encoding.addGlyphNames(l)}else n?(cff.parse(i,n,l),encoding.addGlyphNames(l)):l.supported=!1;return l.supported&&(l.kerningPairs=o?kern.parse(i,o):{},p&&gpos.parse(i,p,l)),l}function load(e,a){var r="undefined"==typeof window,s=r?loadFromFile:loadFromUrl;s(e,function(e,r){if(e)return a(e);var s=parseBuffer(r);return s.supported?a(null,s):a("Font is not supported (is this a Postscript font?)")})}var encoding=require("./encoding"),_font=require("./font"),glyph=require("./glyph"),parse=require("./parse"),path=require("./path"),cmap=require("./tables/cmap"),cff=require("./tables/cff"),glyf=require("./tables/glyf"),gpos=require("./tables/gpos"),head=require("./tables/head"),hhea=require("./tables/hhea"),hmtx=require("./tables/hmtx"),kern=require("./tables/kern"),loca=require("./tables/loca"),maxp=require("./tables/maxp"),_name=require("./tables/name"),os2=require("./tables/os2"),post=require("./tables/post");exports._parse=parse,exports.Font=_font.Font,exports.Glyph=glyph.Glyph,exports.Path=path.Path,exports.parse=parseBuffer,exports.load=load;
},{"./encoding":3,"./font":4,"./glyph":5,"./parse":7,"./path":8,"./tables/cff":10,"./tables/cmap":11,"./tables/glyf":12,"./tables/gpos":13,"./tables/head":14,"./tables/hhea":15,"./tables/hmtx":16,"./tables/kern":17,"./tables/loca":18,"./tables/maxp":19,"./tables/name":20,"./tables/os2":21,"./tables/post":22,"fs":undefined}],7:[function(require,module,exports){
"use strict";function Parser(t,e){this.data=t,this.offset=e,this.relativeOffset=0}exports.getByte=function(t,e){return t.getUint8(e)},exports.getCard8=exports.getByte,exports.getUShort=function(t,e){return t.getUint16(e,!1)},exports.getCard16=exports.getUShort,exports.getShort=function(t,e){return t.getInt16(e,!1)},exports.getULong=function(t,e){return t.getUint32(e,!1)},exports.getFixed=function(t,e){var r=t.getInt16(e,!1),s=t.getUint16(e+2,!1);return r+s/65535},exports.getTag=function(t,e){for(var r="",s=e;e+4>s;s+=1)r+=String.fromCharCode(t.getInt8(s));return r},exports.getOffset=function(t,e,r){for(var s=0,o=0;r>o;o+=1)s<<=8,s+=t.getUint8(e+o);return s},exports.getBytes=function(t,e,r){for(var s=[],o=e;r>o;o+=1)s.push(t.getUint8(o));return s},exports.bytesToString=function(t){for(var e="",r=0;r<t.length;r+=1)e+=String.fromCharCode(t[r]);return e};var typeOffsets={"byte":1,uShort:2,"short":2,uLong:4,fixed:4,longDateTime:8,tag:4};Parser.prototype.parseByte=function(){var t=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t},Parser.prototype.parseChar=function(){var t=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t},Parser.prototype.parseCard8=Parser.prototype.parseByte,Parser.prototype.parseUShort=function(){var t=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t},Parser.prototype.parseCard16=Parser.prototype.parseUShort,Parser.prototype.parseSID=Parser.prototype.parseUShort,Parser.prototype.parseOffset16=Parser.prototype.parseUShort,Parser.prototype.parseShort=function(){var t=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t},Parser.prototype.parseF2Dot14=function(){var t=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,t},Parser.prototype.parseULong=function(){var t=exports.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t},Parser.prototype.parseFixed=function(){var t=exports.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t},Parser.prototype.parseOffset16List=Parser.prototype.parseUShortList=function(t){for(var e=new Array(t),r=this.data,s=this.offset+this.relativeOffset,o=0;t>o;o++)e[o]=exports.getUShort(r,s),s+=2;return this.relativeOffset+=2*t,e},Parser.prototype.parseString=function(t){var e=this.data,r=this.offset+this.relativeOffset,s="";this.relativeOffset+=t;for(var o=0;t>o;o++)s+=String.fromCharCode(e.getUint8(r+o));return s},Parser.prototype.parseTag=function(){return this.parseString(4)},Parser.prototype.parseLongDateTime=function(){var t=exports.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,t},Parser.prototype.parseFixed=function(){var t=exports.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t/65536},Parser.prototype.parseVersion=function(){var t=exports.getUShort(this.data,this.offset+this.relativeOffset),e=exports.getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,t+e/4096/10},Parser.prototype.skip=function(t,e){void 0===e&&(e=1),this.relativeOffset+=typeOffsets[t]*e},exports.Parser=Parser;


},{}],8:[function(require,module,exports){
"use strict";function Path(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}Path.prototype.moveTo=function(t,o){this.commands.push({type:"M",x:t,y:o})},Path.prototype.lineTo=function(t,o){this.commands.push({type:"L",x:t,y:o})},Path.prototype.curveTo=Path.prototype.bezierCurveTo=function(t,o,e,i,s,h){this.commands.push({type:"C",x1:t,y1:o,x2:e,y2:i,x:s,y:h})},Path.prototype.quadTo=Path.prototype.quadraticCurveTo=function(t,o,e,i){this.commands.push({type:"Q",x1:t,y1:o,x:e,y:i})},Path.prototype.close=Path.prototype.closePath=function(){this.commands.push({type:"Z"})},Path.prototype.extend=function(t){t.commands&&(t=t.commands),Array.prototype.push.apply(this.commands,t)},Path.prototype.draw=function(t){t.beginPath();for(var o=0;o<this.commands.length;o+=1){var e=this.commands[o];"M"===e.type?t.moveTo(e.x,e.y):"L"===e.type?t.lineTo(e.x,e.y):"C"===e.type?t.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y):"Q"===e.type?t.quadraticCurveTo(e.x1,e.y1,e.x,e.y):"Z"===e.type&&t.closePath()}this.fill&&(t.fillStyle=this.fill,t.fill()),this.stroke&&(t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke())},Path.prototype.toPathData=function(t){function o(o){return Math.round(o)===o?""+Math.round(o):o.toFixed(t)}function e(){for(var t="",e=0;e<arguments.length;e+=1){var i=arguments[e];i>=0&&e>0&&(t+=" "),t+=o(i)}return t}t=void 0!==t?t:2;for(var i="",s=0;s<this.commands.length;s+=1){var h=this.commands[s];"M"===h.type?i+="M"+e(h.x,h.y):"L"===h.type?i+="L"+e(h.x,h.y):"C"===h.type?i+="C"+e(h.x1,h.y1,h.x2,h.y2,h.x,h.y):"Q"===h.type?i+="Q"+e(h.x1,h.y1,h.x,h.y):"Z"===h.type&&(i+="Z")}return i},Path.prototype.toSVG=function(t){var o='<path d="';return o+=this.toPathData(t),o+='"',this.fill&"black"!==this.fill&&(o+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(o+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),o+="/>"},exports.Path=Path;


},{}],9:[function(require,module,exports){
"use strict";function Table(e,t,i){var s;for(s=0;s<t.length;s+=1){var r=t[s];this[r.name]=r.value}if(this.tableName=e,this.fields=t,i){var f=Object.keys(i);for(s=0;s<f.length;s+=1){var n=f[s],o=i[n];void 0!==this[n]&&(this[n]=o)}}}var check=require("./check"),encode=require("./types").encode,sizeOf=require("./types").sizeOf;Table.prototype.sizeOf=function(){for(var e=0,t=0;t<this.fields.length;t+=1){var i=this.fields[t],s=this[i.name];if(void 0===s&&(s=i.value),"function"==typeof s.sizeOf)e+=s.sizeOf();else{var r=sizeOf[i.type];check.assert("function"==typeof r,"Could not find sizeOf function for field"+i.name),e+=r(s)}}return e},Table.prototype.encode=function(){return encode.TABLE(this)},exports.Table=Table;


},{"./check":1,"./types":24}],10:[function(require,module,exports){
"use strict";function equals(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a+=1)if(!equals(e[a],t[a]))return!1;return!0}return!1}function parseCFFIndex(e,t,a){var r,n,s,i=[],h=[],o=parse.getCard16(e,t);if(0!==o){var f=parse.getByte(e,t+2);n=t+(o+1)*f+2;var p=t+3;for(r=0;o+1>r;r+=1)i.push(parse.getOffset(e,p,f)),p+=f;s=n+i[o]}else s=t+2;for(r=0;r<i.length-1;r+=1){var u=parse.getBytes(e,n+i[r],n+i[r+1]);a&&(u=a(u)),h.push(u)}return{objects:h,startOffset:t,endOffset:s}}function parseFloatOperand(e){for(var t="",a=15,r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var n=e.parseByte(),s=n>>4,i=15&n;if(s===a)break;if(t+=r[s],i===a)break;t+=r[i]}return parseFloat(t)}function parseOperand(e,t){var a,r,n,s;if(28===t)return a=e.parseByte(),r=e.parseByte(),a<<8|r;if(29===t)return a=e.parseByte(),r=e.parseByte(),n=e.parseByte(),s=e.parseByte(),a<<24|r<<16|n<<8|s;if(30===t)return parseFloatOperand(e);if(t>=32&&246>=t)return t-139;if(t>=247&&250>=t)return a=e.parseByte(),256*(t-247)+a+108;if(t>=251&&254>=t)return a=e.parseByte(),256*-(t-251)-a-108;throw new Error("Invalid b0 "+t)}function entriesToObject(e){for(var t={},a=0;a<e.length;a+=1){var r,n=e[a][0],s=e[a][1];if(r=1===s.length?s[0]:s,t.hasOwnProperty(n))throw new Error("Object "+t+" already has key "+n);t[n]=r}return t}function parseCFFDict(e,t,a){t=void 0!==t?t:0;var r=new parse.Parser(e,t),n=[],s=[];for(a=void 0!==a?a:e.length;r.relativeOffset<a;){var i=r.parseByte();21>=i?(12===i&&(i=1200+r.parseByte()),n.push([i,s]),s=[]):s.push(parseOperand(r,i))}return entriesToObject(n)}function getCFFString(e,t){return t=390>=t?encoding.cffStandardStrings[t]:e[t-391]}function interpretDict(e,t,a){for(var r={},n=0;n<t.length;n+=1){var s=t[n],i=e[s.op];void 0===i&&(i=void 0!==s.value?s.value:null),"SID"===s.type&&(i=getCFFString(a,i)),r[s.name]=i}return r}function parseCFFHeader(e,t){var a={};return a.formatMajor=parse.getCard8(e,t),a.formatMinor=parse.getCard8(e,t+1),a.size=parse.getCard8(e,t+2),a.offsetSize=parse.getCard8(e,t+3),a.startOffset=t,a.endOffset=t+4,a}function parseCFFTopDict(e,t){var a=parseCFFDict(e,0,e.byteLength);return interpretDict(a,TOP_DICT_META,t)}function parseCFFPrivateDict(e,t,a,r){var n=parseCFFDict(e,t,a);return interpretDict(n,PRIVATE_DICT_META,r)}function parseCFFCharset(e,t,a,r){var n,s,i,h=new parse.Parser(e,t);a-=1;var o=[".notdef"],f=h.parseCard8();if(0===f)for(n=0;a>n;n+=1)s=h.parseSID(),o.push(getCFFString(r,s));else if(1===f)for(;o.length<=a;)for(s=h.parseSID(),i=h.parseCard8(),n=0;i>=n;n+=1)o.push(getCFFString(r,s)),s+=1;else{if(2!==f)throw new Error("Unknown charset format "+f);for(;o.length<=a;)for(s=h.parseSID(),i=h.parseCard16(),n=0;i>=n;n+=1)o.push(getCFFString(r,s)),s+=1}return o}function parseCFFEncoding(e,t,a){var r,n,s={},i=new parse.Parser(e,t),h=i.parseCard8();if(0===h){var o=i.parseCard8();for(r=0;o>r;r+=1)n=i.parseCard8(),s[n]=r}else{if(1!==h)throw new Error("Unknown encoding format "+h);var f=i.parseCard8();for(n=1,r=0;f>r;r+=1)for(var p=i.parseCard8(),u=i.parseCard8(),l=p;p+u>=l;l+=1)s[l]=n,n+=1}return new encoding.CffEncoding(s,a)}function parseCFFCharstring(e,t,a){function r(e,t){v&&p.closePath(),p.moveTo(e,t),v=!0}function n(){var e;e=u.length%2!==0,e&&!c&&(d=u.shift()+t.nominalWidthX),l+=u.length>>1,u.length=0,c=!0}function s(e){for(var y,b,T,C,I,F,D,x,k,S,E,B,w=0;w<e.length;){var M=e[w];switch(w+=1,M){case 1:n();break;case 3:n();break;case 4:u.length>1&&!c&&(d=u.shift()+t.nominalWidthX,c=!0),g+=u.pop(),r(m,g);break;case 5:for(;u.length>0;)m+=u.shift(),g+=u.shift(),p.lineTo(m,g);break;case 6:for(;u.length>0&&(m+=u.shift(),p.lineTo(m,g),0!==u.length);)g+=u.shift(),p.lineTo(m,g);break;case 7:for(;u.length>0&&(g+=u.shift(),p.lineTo(m,g),0!==u.length);)m+=u.shift(),p.lineTo(m,g);break;case 8:for(;u.length>0;)i=m+u.shift(),h=g+u.shift(),o=i+u.shift(),f=h+u.shift(),m=o+u.shift(),g=f+u.shift(),p.curveTo(i,h,o,f,m,g);break;case 10:I=u.pop()+t.subrsBias,F=t.subrs[I],F&&s(F);break;case 11:return;case 12:switch(M=e[w],w+=1,M){case 35:i=m+u.shift(),h=g+u.shift(),o=i+u.shift(),f=h+u.shift(),D=o+u.shift(),x=f+u.shift(),k=D+u.shift(),S=x+u.shift(),E=k+u.shift(),B=S+u.shift(),m=E+u.shift(),g=B+u.shift(),u.shift(),p.curveTo(i,h,o,f,D,x),p.curveTo(k,S,E,B,m,g);break;case 34:i=m+u.shift(),h=g,o=i+u.shift(),f=h+u.shift(),D=o+u.shift(),x=f,k=D+u.shift(),S=f,E=k+u.shift(),B=g,m=E+u.shift(),p.curveTo(i,h,o,f,D,x),p.curveTo(k,S,E,B,m,g);break;case 36:i=m+u.shift(),h=g+u.shift(),o=i+u.shift(),f=h+u.shift(),D=o+u.shift(),x=f,k=D+u.shift(),S=f,E=k+u.shift(),B=S+u.shift(),m=E+u.shift(),p.curveTo(i,h,o,f,D,x),p.curveTo(k,S,E,B,m,g);break;case 37:i=m+u.shift(),h=g+u.shift(),o=i+u.shift(),f=h+u.shift(),D=o+u.shift(),x=f+u.shift(),k=D+u.shift(),S=x+u.shift(),E=k+u.shift(),B=S+u.shift(),Math.abs(E-m)>Math.abs(B-g)?m=E+u.shift():g=B+u.shift(),p.curveTo(i,h,o,f,D,x),p.curveTo(k,S,E,B,m,g);break;default:console.log("Glyph "+a+": unknown operator 1200"+M),u.length=0}break;case 14:u.length>0&&!c&&(d=u.shift()+t.nominalWidthX,c=!0),v&&(p.closePath(),v=!1);break;case 18:n();break;case 19:case 20:n(),w+=l+7>>3;break;case 21:u.length>2&&!c&&(d=u.shift()+t.nominalWidthX,c=!0),g+=u.pop(),m+=u.pop(),r(m,g);break;case 22:u.length>1&&!c&&(d=u.shift()+t.nominalWidthX,c=!0),m+=u.pop(),r(m,g);break;case 23:n();break;case 24:for(;u.length>2;)i=m+u.shift(),h=g+u.shift(),o=i+u.shift(),f=h+u.shift(),m=o+u.shift(),g=f+u.shift(),p.curveTo(i,h,o,f,m,g);m+=u.shift(),g+=u.shift(),p.lineTo(m,g);break;case 25:for(;u.length>6;)m+=u.shift(),g+=u.shift(),p.lineTo(m,g);i=m+u.shift(),h=g+u.shift(),o=i+u.shift(),f=h+u.shift(),m=o+u.shift(),g=f+u.shift(),p.curveTo(i,h,o,f,m,g);break;case 26:for(u.length%2&&(m+=u.shift());u.length>0;)i=m,h=g+u.shift(),o=i+u.shift(),f=h+u.shift(),m=o,g=f+u.shift(),p.curveTo(i,h,o,f,m,g);break;case 27:for(u.length%2&&(g+=u.shift());u.length>0;)i=m+u.shift(),h=g,o=i+u.shift(),f=h+u.shift(),m=o+u.shift(),g=f,p.curveTo(i,h,o,f,m,g);break;case 28:y=e[w],b=e[w+1],u.push((y<<24|b<<16)>>16),w+=2;break;case 29:I=u.pop()+t.gsubrsBias,F=t.gsubrs[I],F&&s(F);break;case 30:for(;u.length>0&&(i=m,h=g+u.shift(),o=i+u.shift(),f=h+u.shift(),m=o+u.shift(),g=f+(1===u.length?u.shift():0),p.curveTo(i,h,o,f,m,g),0!==u.length);)i=m+u.shift(),h=g,o=i+u.shift(),f=h+u.shift(),g=f+u.shift(),m=o+(1===u.length?u.shift():0),p.curveTo(i,h,o,f,m,g);break;case 31:for(;u.length>0&&(i=m+u.shift(),h=g,o=i+u.shift(),f=h+u.shift(),g=f+u.shift(),m=o+(1===u.length?u.shift():0),p.curveTo(i,h,o,f,m,g),0!==u.length);)i=m,h=g+u.shift(),o=i+u.shift(),f=h+u.shift(),m=o+u.shift(),g=f+(1===u.length?u.shift():0),p.curveTo(i,h,o,f,m,g);break;default:32>M?console.log("Glyph "+a+": unknown operator "+M):247>M?u.push(M-139):251>M?(y=e[w],w+=1,u.push(256*(M-247)+y+108)):255>M?(y=e[w],w+=1,u.push(256*-(M-251)-y-108)):(y=e[w],b=e[w+1],T=e[w+2],C=e[w+3],w+=4,u.push((y<<24|b<<16|T<<8|C)/65536))}}}var i,h,o,f,p=new path.Path,u=[],l=0,c=!1,d=t.defaultWidthX,v=!1,m=0,g=0;s(e);var y=new _glyph.Glyph({font:t,index:a});return y.path=p,y.advanceWidth=d,y}function calcCFFSubroutineBias(e){var t;return t=e.length<1240?107:e.length<33900?1131:32768}function parseCFFTable(e,t,a){a.tables.cff={};var r=parseCFFHeader(e,t),n=parseCFFIndex(e,r.endOffset,parse.bytesToString),s=parseCFFIndex(e,n.endOffset),i=parseCFFIndex(e,s.endOffset,parse.bytesToString),h=parseCFFIndex(e,i.endOffset);a.gsubrs=h.objects,a.gsubrsBias=calcCFFSubroutineBias(a.gsubrs);var o=new DataView(new Uint8Array(s.objects[0]).buffer),f=parseCFFTopDict(o,i.objects);a.tables.cff.topDict=f;var p=t+f["private"][1],u=parseCFFPrivateDict(e,p,f["private"][0],i.objects);if(a.defaultWidthX=u.defaultWidthX,a.nominalWidthX=u.nominalWidthX,0!==u.subrs){var l=p+u.subrs,c=parseCFFIndex(e,l);a.subrs=c.objects,a.subrsBias=calcCFFSubroutineBias(a.subrs)}else a.subrs=[],a.subrsBias=0;var d=parseCFFIndex(e,t+f.charStrings);a.nGlyphs=d.objects.length;var v=parseCFFCharset(e,t+f.charset,a.nGlyphs,i.objects);a.cffEncoding=0===f.encoding?new encoding.CffEncoding(encoding.cffStandardEncoding,v):1===f.encoding?new encoding.CffEncoding(encoding.cffExpertEncoding,v):parseCFFEncoding(e,t+f.encoding,v),a.encoding=a.encoding||a.cffEncoding,a.glyphs=[];for(var m=0;m<a.nGlyphs;m+=1){var g=d.objects[m];a.glyphs.push(parseCFFCharstring(g,a,m))}}function encodeString(e,t){var a,r=encoding.cffStandardStrings.indexOf(e);return r>=0&&(a=r),r=t.indexOf(e),r>=0?a=r+encoding.cffStandardStrings.length:(a=encoding.cffStandardStrings.length+t.length,t.push(e)),a}function makeHeader(){return new table.Table("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function makeNameIndex(e){var t=new table.Table("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var a=0;a<e.length;a+=1)t.names.push({name:"name_"+a,type:"NAME",value:e[a]});return t}function makeDict(e,t,a){for(var r={},n=0;n<e.length;n+=1){var s=e[n],i=t[s.name];void 0===i||equals(i,s.value)||("SID"===s.type&&(i=encodeString(i,a)),r[s.op]={name:s.name,type:s.type,value:i})}return r}function makeTopDict(e,t){var a=new table.Table("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return a.dict=makeDict(TOP_DICT_META,e,t),a}function makeTopDictIndex(e){var t=new table.Table("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function makeStringIndex(e){var t=new table.Table("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var a=0;a<e.length;a+=1)t.strings.push({name:"string_"+a,type:"STRING",value:e[a]});return t}function makeGlobalSubrIndex(){return new table.Table("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function makeCharsets(e,t){for(var a=new table.Table("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<e.length;r+=1){var n=e[r],s=encodeString(n,t);a.fields.push({name:"glyph_"+r,type:"SID",value:s})}return a}function glyphToOps(e){var t=[],a=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var r=0,n=0,s=0;s<a.commands.length;s+=1){var i,h,o=a.commands[s];if("Q"===o.type){var f=1/3,p=2/3;o={type:"C",x:o.x,y:o.y,x1:f*r+p*o.x1,y1:f*n+p*o.y1,x2:f*o.x+p*o.x1,y2:f*o.y+p*o.y1}}if("M"===o.type)i=Math.round(o.x-r),h=Math.round(o.y-n),t.push({name:"dx",type:"NUMBER",value:i}),t.push({name:"dy",type:"NUMBER",value:h}),t.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(o.x),n=Math.round(o.y);else if("L"===o.type)i=Math.round(o.x-r),h=Math.round(o.y-n),t.push({name:"dx",type:"NUMBER",value:i}),t.push({name:"dy",type:"NUMBER",value:h}),t.push({name:"rlineto",type:"OP",value:5}),r=Math.round(o.x),n=Math.round(o.y);else if("C"===o.type){var u=Math.round(o.x1-r),l=Math.round(o.y1-n),c=Math.round(o.x2-o.x1),d=Math.round(o.y2-o.y1);i=Math.round(o.x-o.x2),h=Math.round(o.y-o.y2),t.push({name:"dx1",type:"NUMBER",value:u}),t.push({name:"dy1",type:"NUMBER",value:l}),t.push({name:"dx2",type:"NUMBER",value:c}),t.push({name:"dy2",type:"NUMBER",value:d}),t.push({name:"dx",type:"NUMBER",value:i}),t.push({name:"dy",type:"NUMBER",value:h}),t.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(o.x),n=Math.round(o.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}function makeCharStringsIndex(e){for(var t=new table.Table("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),a=0;a<e.length;a+=1){var r=e[a],n=glyphToOps(r);t.charStrings.push({name:r.name,type:"CHARSTRING",value:n})}return t}function makePrivateDict(e,t){var a=new table.Table("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return a.dict=makeDict(PRIVATE_DICT_META,e,t),a}function makePrivateDictIndex(e){var t=new table.Table("Private DICT INDEX",[{name:"privateDicts",type:"INDEX",value:[]}]);return t.privateDicts=[{name:"privateDict_0",type:"TABLE",value:e}],t}function makeCFFTable(e,t){for(var a=new table.Table("CFF ",[{name:"header",type:"TABLE"},{name:"nameIndex",type:"TABLE"},{name:"topDictIndex",type:"TABLE"},{name:"stringIndex",type:"TABLE"},{name:"globalSubrIndex",type:"TABLE"},{name:"charsets",type:"TABLE"},{name:"charStringsIndex",type:"TABLE"},{name:"privateDictIndex",type:"TABLE"}]),r=1/t.unitsPerEm,n={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontMatrix:[r,0,0,r,0,0],charset:999,encoding:0,charStrings:999,"private":[0,999]},s={},i=[],h=1;h<e.length;h+=1)i.push(e[h].name);var o=[];a.header=makeHeader(),a.nameIndex=makeNameIndex([t.postScriptName]);var f=makeTopDict(n,o);a.topDictIndex=makeTopDictIndex(f),a.globalSubrIndex=makeGlobalSubrIndex(),a.charsets=makeCharsets(i,o),a.charStringsIndex=makeCharStringsIndex(e);var p=makePrivateDict(s,o);a.privateDictIndex=makePrivateDictIndex(p),a.stringIndex=makeStringIndex(o);var u=a.header.sizeOf()+a.nameIndex.sizeOf()+a.topDictIndex.sizeOf()+a.stringIndex.sizeOf()+a.globalSubrIndex.sizeOf();return n.charset=u,n.encoding=0,n.charStrings=n.charset+a.charsets.sizeOf(),n.private[1]=n.charStrings+a.charStringsIndex.sizeOf(),f=makeTopDict(n,o),a.topDictIndex=makeTopDictIndex(f),a}var encoding=require("../encoding"),_glyph=require("../glyph"),parse=require("../parse"),path=require("../path"),table=require("../table"),TOP_DICT_META=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}],PRIVATE_DICT_META=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];exports.parse=parseCFFTable,exports.make=makeCFFTable;


},{"../encoding":3,"../glyph":5,"../parse":7,"../path":8,"../table":9}],11:[function(require,module,exports){
"use strict";function parseCmapTable(e,a){var t,r={};r.version=parse.getUShort(e,a),check.argument(0===r.version,"cmap table version should be 0."),r.numTables=parse.getUShort(e,a+2);var n=-1;for(t=0;t<r.numTables;t+=1){var s=parse.getUShort(e,a+4+8*t),l=parse.getUShort(e,a+4+8*t+2);if(3===s&&(1===l||0===l)){n=parse.getULong(e,a+4+8*t+4);break}}if(-1===n)return null;var o=new parse.Parser(e,a+n);r.format=o.parseUShort(),check.argument(4===r.format,"Only format 4 cmap tables are supported."),r.length=o.parseUShort(),r.language=o.parseUShort();var p;r.segCount=p=o.parseUShort()>>1,o.skip("uShort",3),r.glyphIndexMap={};var g=new parse.Parser(e,a+n+14),m=new parse.Parser(e,a+n+16+2*p),u=new parse.Parser(e,a+n+16+4*p),h=new parse.Parser(e,a+n+16+6*p),c=a+n+16+8*p;for(t=0;p-1>t;t+=1)for(var f,d=g.parseUShort(),S=m.parseUShort(),i=u.parseShort(),v=h.parseUShort(),U=S;d>=U;U+=1)0!==v?(c=h.offset+h.relativeOffset-2,c+=v,c+=2*(U-S),f=parse.getUShort(e,c),0!==f&&(f=f+i&65535)):f=U+i&65535,r.glyphIndexMap[U]=f;return r}function addSegment(e,a,t){e.segments.push({end:a,start:a,delta:-(a-t),offset:0})}function addTerminatorSegment(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}function makeCmapTable(e){var a,t=new table.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);for(t.segments=[],a=0;a<e.length;a+=1){for(var r=e[a],n=0;n<r.unicodes.length;n+=1)addSegment(t,r.unicodes[n],a);t.segments=t.segments.sort(function(e,a){return e.start-a.start})}addTerminatorSegment(t);var s;s=t.segments.length,t.segCountX2=2*s,t.searchRange=2*Math.pow(2,Math.floor(Math.log(s)/Math.log(2))),t.entrySelector=Math.log(t.searchRange/2)/Math.log(2),t.rangeShift=t.segCountX2-t.searchRange;var l=[],o=[],p=[],g=[],m=[];for(a=0;s>a;a+=1){var u=t.segments[a];l=l.concat({name:"end_"+a,type:"USHORT",value:u.end}),o=o.concat({name:"start_"+a,type:"USHORT",value:u.start}),p=p.concat({name:"idDelta_"+a,type:"SHORT",value:u.delta}),g=g.concat({name:"idRangeOffset_"+a,type:"USHORT",value:u.offset}),void 0!==u.glyphId&&(m=m.concat({name:"glyph_"+a,type:"USHORT",value:u.glyphId}))}return t.fields=t.fields.concat(l),t.fields.push({name:"reservedPad",type:"USHORT",value:0}),t.fields=t.fields.concat(o),t.fields=t.fields.concat(p),t.fields=t.fields.concat(g),t.fields=t.fields.concat(m),t.length=14+2*l.length+2+2*o.length+2*p.length+2*g.length+2*m.length,t}var check=require("../check"),parse=require("../parse"),table=require("../table");exports.parse=parseCmapTable,exports.make=makeCmapTable;


},{"../check":1,"../parse":7,"../table":9}],12:[function(require,module,exports){
"use strict";function parseGlyphCoordinate(r,e,t,o,n){var a;return(e&o)>0?(a=r.parseByte(),0===(e&n)&&(a=-a),a=t+a):a=(e&n)>0?t:t+r.parseShort(),a}function parseGlyph(r,e,t,o){var n=new parse.Parser(r,e),a=new _glyph.Glyph({font:o,index:t});a.numberOfContours=n.parseShort(),a.xMin=n.parseShort(),a.yMin=n.parseShort(),a.xMax=n.parseShort(),a.yMax=n.parseShort();var s,p;if(a.numberOfContours>0){var u,i=a.endPointIndices=[];for(u=0;u<a.numberOfContours;u+=1)i.push(n.parseUShort());for(a.instructionLength=n.parseUShort(),a.instructions=[],u=0;u<a.instructionLength;u+=1)a.instructions.push(n.parseByte());var l=i[i.length-1]+1;for(s=[],u=0;l>u;u+=1)if(p=n.parseByte(),s.push(p),(8&p)>0)for(var h=n.parseByte(),f=0;h>f;f+=1)s.push(p),u+=1;if(check.argument(s.length===l,"Bad flags."),i.length>0){var y,c=[];if(l>0){for(u=0;l>u;u+=1)p=s[u],y={},y.onCurve=!!(1&p),y.lastPointOfContour=i.indexOf(u)>=0,c.push(y);var v=0;for(u=0;l>u;u+=1)p=s[u],y=c[u],y.x=parseGlyphCoordinate(n,p,v,2,16),v=y.x;var x=0;for(u=0;l>u;u+=1)p=s[u],y=c[u],y.y=parseGlyphCoordinate(n,p,x,4,32),x=y.y}a.points=c}else a.points=[]}else if(0===a.numberOfContours)a.points=[];else{a.isComposite=!0,a.points=[],a.components=[];for(var C=!0;C;){s=n.parseUShort();var g={glyphIndex:n.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&s)>0?(g.dx=n.parseShort(),g.dy=n.parseShort()):(g.dx=n.parseChar(),g.dy=n.parseChar()),(8&s)>0?g.xScale=g.yScale=n.parseF2Dot14():(64&s)>0?(g.xScale=n.parseF2Dot14(),g.yScale=n.parseF2Dot14()):(128&s)>0&&(g.xScale=n.parseF2Dot14(),g.scale01=n.parseF2Dot14(),g.scale10=n.parseF2Dot14(),g.yScale=n.parseF2Dot14()),a.components.push(g),C=!!(32&s)}}return a}function transformPoints(r,e){for(var t=[],o=0;o<r.length;o+=1){var n=r[o],a={x:e.xScale*n.x+e.scale01*n.y+e.dx,y:e.scale10*n.x+e.yScale*n.y+e.dy,onCurve:n.onCurve,lastPointOfContour:n.lastPointOfContour};t.push(a)}return t}function getContours(r){for(var e=[],t=[],o=0;o<r.length;o+=1){var n=r[o];t.push(n),n.lastPointOfContour&&(e.push(t),t=[])}return check.argument(0===t.length,"There are still points left in the current contour."),e}function getPath(r){var e=new path.Path;if(!r)return e;for(var t=getContours(r),o=0;o<t.length;o+=1){var n,a,s=t[o],p=s[0],u=s[s.length-1];p.onCurve?(n=null,a=!0):(p=u.onCurve?u:{x:(p.x+u.x)/2,y:(p.y+u.y)/2},n=p,a=!1),e.moveTo(p.x,p.y);for(var i=a?1:0;i<s.length;i+=1){var l=s[i],h=0===i?p:s[i-1];if(h.onCurve&&l.onCurve)e.lineTo(l.x,l.y);else if(h.onCurve&&!l.onCurve)n=l;else if(h.onCurve||l.onCurve){if(h.onCurve||!l.onCurve)throw new Error("Invalid state.");e.quadraticCurveTo(n.x,n.y,l.x,l.y),n=null}else{var f={x:(h.x+l.x)/2,y:(h.y+l.y)/2};e.quadraticCurveTo(h.x,h.y,f.x,f.y),n=l}}p!==u&&(n?e.quadraticCurveTo(n.x,n.y,p.x,p.y):e.lineTo(p.x,p.y))}return e.closePath(),e}function parseGlyfTable(r,e,t,o){var n,a=[];for(n=0;n<t.length-1;n+=1){var s=t[n],p=t[n+1];a.push(s!==p?parseGlyph(r,e+s,n,o):new _glyph.Glyph({font:o,index:n}))}for(n=0;n<a.length;n+=1){var u=a[n];if(u.isComposite)for(var i=0;i<u.components.length;i+=1){var l=u.components[i],h=a[l.glyphIndex];if(h.points){var f=transformPoints(h.points,l);u.points=u.points.concat(f)}}u.path=getPath(u.points)}return a}var check=require("../check"),_glyph=require("../glyph"),parse=require("../parse"),path=require("../path");exports.parse=parseGlyfTable;


},{"../check":1,"../glyph":5,"../parse":7,"../path":8}],13:[function(require,module,exports){
"use strict";function parseTaggedListTable(r,e){for(var a=new parse.Parser(r,e),s=a.parseUShort(),t=[],o=0;s>o;o++)t[a.parseTag()]={offset:a.parseUShort()};return t}function parseCoverageTable(r,e){var a=new parse.Parser(r,e),s=a.parseUShort(),t=a.parseUShort();if(1===s)return a.parseUShortList(t);if(2===s){for(var o=[];t--;)for(var p=a.parseUShort(),n=a.parseUShort(),f=a.parseUShort(),i=p;n>=i;i++)o[f++]=i;return o}}function parseClassDefTable(r,e){var a=new parse.Parser(r,e),s=a.parseUShort();if(1===s){var t=a.parseUShort(),o=a.parseUShort(),p=a.parseUShortList(o);return function(r){return p[r-t]||0}}if(2===s){for(var n=a.parseUShort(),f=[],i=[],h=[],S=0;n>S;S++)f[S]=a.parseUShort(),i[S]=a.parseUShort(),h[S]=a.parseUShort();return function(r){for(var e=0,a=f.length-1;a>e;){var s=e+a+1>>1;r<f[s]?a=s-1:e=s}return f[e]<=r&&r<=i[e]?h[e]||0:0}}}function parsePairPosSubTable(r,e){var a,s,t=new parse.Parser(r,e),o=t.parseUShort(),p=t.parseUShort(),n=parseCoverageTable(r,e+p),f=t.parseUShort(),i=t.parseUShort();if(4===f&&0===i){var h={};if(1===o){for(var S=t.parseUShort(),u=[],v=t.parseOffset16List(S),U=0;S>U;U++){var l=v[U],g=h[l];if(!g){g={},t.relativeOffset=l;for(var T=t.parseUShort();T--;){var c=t.parseUShort();f&&(a=t.parseShort()),i&&(s=t.parseShort()),g[c]=a}}u[n[U]]=g}return function(r,e){var a=u[r];return a?a[e]:void 0}}if(2===o){for(var b=t.parseUShort(),P=t.parseUShort(),L=t.parseUShort(),k=t.parseUShort(),d=parseClassDefTable(r,e+b),w=parseClassDefTable(r,e+P),O=[],C=0;L>C;C++)for(var G=O[C]=[],K=0;k>K;K++)f&&(a=t.parseShort()),i&&(s=t.parseShort()),G[K]=a;var V={};for(C=0;C<n.length;C++)V[n[C]]=1;return function(r,e){if(V[r]){var a=d(r),s=w(e),t=O[a];return t?t[s]:void 0}}}}}function parseLookupTable(r,e){var a=new parse.Parser(r,e),s=a.parseUShort(),t=a.parseUShort(),o=16&t,p=a.parseUShort(),n=a.parseOffset16List(p),f={lookupType:s,lookupFlag:t,markFilteringSet:o?a.parseUShort():-1};if(2===s){for(var i=[],h=0;p>h;h++)i.push(parsePairPosSubTable(r,e+n[h]));f.getKerningValue=function(r,e){for(var a=i.length;a--;){var s=i[a](r,e);if(void 0!==s)return s}return 0}}return f}function parseGposTable(r,e,a){var s=new parse.Parser(r,e),t=s.parseFixed();check.argument(1===t,"Unsupported GPOS table version."),parseTaggedListTable(r,e+s.parseUShort()),parseTaggedListTable(r,e+s.parseUShort());var o=s.parseUShort();s.relativeOffset=o;for(var p=s.parseUShort(),n=s.parseOffset16List(p),f=e+o,i=0;p>i;i++){var h=parseLookupTable(r,f+n[i]);2!==h.lookupType||a.getGposKerningValue||(a.getGposKerningValue=h.getKerningValue)}}var check=require("../check"),parse=require("../parse");exports.parse=parseGposTable;


},{"../check":1,"../parse":7}],14:[function(require,module,exports){
"use strict";function parseHeadTable(e,a){var r={},t=new parse.Parser(e,a);return r.version=t.parseVersion(),r.fontRevision=Math.round(1e3*t.parseFixed())/1e3,r.checkSumAdjustment=t.parseULong(),r.magicNumber=t.parseULong(),check.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=t.parseUShort(),r.unitsPerEm=t.parseUShort(),r.created=t.parseLongDateTime(),r.modified=t.parseLongDateTime(),r.xMin=t.parseShort(),r.yMin=t.parseShort(),r.xMax=t.parseShort(),r.yMax=t.parseShort(),r.macStyle=t.parseUShort(),r.lowestRecPPEM=t.parseUShort(),r.fontDirectionHint=t.parseShort(),r.indexToLocFormat=t.parseShort(),r.glyphDataFormat=t.parseShort(),r}function makeHeadTable(e){return new table.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:0},{name:"modified",type:"LONGDATETIME",value:0},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}var check=require("../check"),parse=require("../parse"),table=require("../table");exports.parse=parseHeadTable,exports.make=makeHeadTable;


},{"../check":1,"../parse":7,"../table":9}],15:[function(require,module,exports){
"use strict";function parseHheaTable(e,a){var r={},t=new parse.Parser(e,a);return r.version=t.parseVersion(),r.ascender=t.parseShort(),r.descender=t.parseShort(),r.lineGap=t.parseShort(),r.advanceWidthMax=t.parseUShort(),r.minLeftSideBearing=t.parseShort(),r.minRightSideBearing=t.parseShort(),r.xMaxExtent=t.parseShort(),r.caretSlopeRise=t.parseShort(),r.caretSlopeRun=t.parseShort(),r.caretOffset=t.parseShort(),t.relativeOffset+=8,r.metricDataFormat=t.parseShort(),r.numberOfHMetrics=t.parseUShort(),r}function makeHheaTable(e){return new table.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}var parse=require("../parse"),table=require("../table");exports.parse=parseHheaTable,exports.make=makeHheaTable;


},{"../parse":7,"../table":9}],16:[function(require,module,exports){
"use strict";function parseHmtxTable(e,a,r,t,s){for(var i,l,n=new parse.Parser(e,a),p=0;t>p;p+=1){r>p&&(i=n.parseUShort(),l=n.parseShort());var d=s[p];d.advanceWidth=i,d.leftSideBearing=l}}function makeHmtxTable(e){for(var a=new table.Table("hmtx",[]),r=0;r<e.length;r+=1){var t=e[r],s=t.advanceWidth||0,i=t.leftSideBearing||0;a.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:s}),a.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:i})}return a}var parse=require("../parse"),table=require("../table");exports.parse=parseHmtxTable,exports.make=makeHmtxTable;


},{"../parse":7,"../table":9}],17:[function(require,module,exports){
"use strict";function parseKernTable(r,e){var a={},s=new parse.Parser(r,e),p=s.parseUShort();check.argument(0===p,"Unsupported kern table version."),s.skip("uShort",1);var t=s.parseUShort();check.argument(0===t,"Unsupported kern sub-table version."),s.skip("uShort",2);var o=s.parseUShort();s.skip("uShort",3);for(var n=0;o>n;n+=1){var h=s.parseUShort(),u=s.parseUShort(),c=s.parseShort();a[h+","+u]=c}return a}var check=require("../check"),parse=require("../parse");exports.parse=parseKernTable;


},{"../check":1,"../parse":7}],18:[function(require,module,exports){
"use strict";function parseLocaTable(r,a,e,s){for(var p=new parse.Parser(r,a),o=s?p.parseUShort:p.parseULong,t=[],c=0;e+1>c;c+=1){var n=o.call(p);s&&(n*=2),t.push(n)}return t}var parse=require("../parse");exports.parse=parseLocaTable;


},{"../parse":7}],19:[function(require,module,exports){
"use strict";function parseMaxpTable(e,a){var r={},s=new parse.Parser(e,a);return r.version=s.parseVersion(),r.numGlyphs=s.parseUShort(),1===r.version&&(r.maxPoints=s.parseUShort(),r.maxContours=s.parseUShort(),r.maxCompositePoints=s.parseUShort(),r.maxCompositeContours=s.parseUShort(),r.maxZones=s.parseUShort(),r.maxTwilightPoints=s.parseUShort(),r.maxStorage=s.parseUShort(),r.maxFunctionDefs=s.parseUShort(),r.maxInstructionDefs=s.parseUShort(),r.maxStackElements=s.parseUShort(),r.maxSizeOfInstructions=s.parseUShort(),r.maxComponentElements=s.parseUShort(),r.maxComponentDepth=s.parseUShort()),r}function makeMaxpTable(e){return new table.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}var parse=require("../parse"),table=require("../table");exports.parse=parseMaxpTable,exports.make=makeMaxpTable;


},{"../parse":7,"../table":9}],20:[function(require,module,exports){
"use strict";function parseNameTable(e,a){var r={},n=new parse.Parser(e,a);r.format=n.parseUShort();for(var t=n.parseUShort(),s=n.offset+n.parseUShort(),o=0,m=0;t>m;m++){var l=n.parseUShort(),p=n.parseUShort(),u=n.parseUShort(),i=n.parseUShort(),d=nameTableNames[i],c=n.parseUShort(),f=n.parseUShort();if(3===l&&1===p&&1033===u){for(var h=[],T=c/2,g=0;T>g;g++,f+=2)h[g]=parse.getShort(e,s+f);var S=String.fromCharCode.apply(null,h);d?r[d]=S:(o++,r["unknown"+o]=S)}}return 1===r.format&&(r.langTagCount=n.parseUShort()),r}function makeNameRecord(e,a,r,n,t,s){return new table.Table("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:a},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:t},{name:"offset",type:"USHORT",value:s}])}function addMacintoshNameRecord(e,a,r,n){var t=encode.STRING(r);return e.records.push(makeNameRecord(1,0,0,a,t.length,n)),e.strings.push(t),n+=t.length}function addWindowsNameRecord(e,a,r,n){var t=encode.UTF16(r);return e.records.push(makeNameRecord(3,1,1033,a,t.length,n)),e.strings.push(t),n+=t.length}function makeNameTable(e){var a=new table.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:0},{name:"stringOffset",type:"USHORT",value:0}]);a.records=[],a.strings=[];var r,n,t=0;for(r=0;r<nameTableNames.length;r+=1)void 0!==e[nameTableNames[r]]&&(n=e[nameTableNames[r]],t=addMacintoshNameRecord(a,r,n,t));for(r=0;r<nameTableNames.length;r+=1)void 0!==e[nameTableNames[r]]&&(n=e[nameTableNames[r]],t=addWindowsNameRecord(a,r,n,t));for(a.count=a.records.length,a.stringOffset=6+12*a.count,r=0;r<a.records.length;r+=1)a.fields.push({name:"record_"+r,type:"TABLE",value:a.records[r]});for(r=0;r<a.strings.length;r+=1)a.fields.push({name:"string_"+r,type:"LITERAL",value:a.strings[r]});return a}var encode=require("../types").encode,parse=require("../parse"),table=require("../table"),nameTableNames=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","licence","licenceURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"];exports.parse=parseNameTable,exports.make=makeNameTable;


},{"../parse":7,"../table":9,"../types":24}],21:[function(require,module,exports){
"use strict";function getUnicodeRange(e){for(var n=0;n<unicodeRanges.length;n+=1){var a=unicodeRanges[n];if(e>=a.begin&&e<a.end)return n}return-1}function parseOS2Table(e,n){var a={},i=new parse.Parser(e,n);a.version=i.parseUShort(),a.xAvgCharWidth=i.parseShort(),a.usWeightClass=i.parseUShort(),a.usWidthClass=i.parseUShort(),a.fsType=i.parseUShort(),a.ySubscriptXSize=i.parseShort(),a.ySubscriptYSize=i.parseShort(),a.ySubscriptXOffset=i.parseShort(),a.ySubscriptYOffset=i.parseShort(),a.ySuperscriptXSize=i.parseShort(),a.ySuperscriptYSize=i.parseShort(),a.ySuperscriptXOffset=i.parseShort(),a.ySuperscriptYOffset=i.parseShort(),a.yStrikeoutSize=i.parseShort(),a.yStrikeoutPosition=i.parseShort(),a.sFamilyClass=i.parseShort(),a.panose=[];for(var t=0;10>t;t++)a.panose[t]=i.parseByte();return a.ulUnicodeRange1=i.parseULong(),a.ulUnicodeRange2=i.parseULong(),a.ulUnicodeRange3=i.parseULong(),a.ulUnicodeRange4=i.parseULong(),a.achVendID=String.fromCharCode(i.parseByte(),i.parseByte(),i.parseByte(),i.parseByte()),a.fsSelection=i.parseUShort(),a.usFirstCharIndex=i.parseUShort(),a.usLastCharIndex=i.parseUShort(),a.sTypoAscender=i.parseShort(),a.sTypoDescender=i.parseShort(),a.sTypoLineGap=i.parseShort(),a.usWinAscent=i.parseUShort(),a.usWinDescent=i.parseUShort(),a.version>=1&&(a.ulCodePageRange1=i.parseULong(),a.ulCodePageRange2=i.parseULong()),a.version>=2&&(a.sxHeight=i.parseShort(),a.sCapHeight=i.parseShort(),a.usDefaultChar=i.parseUShort(),a.usBreakChar=i.parseUShort(),a.usMaxContent=i.parseUShort()),a}function makeOS2Table(e){return new table.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)}var parse=require("../parse"),table=require("../table"),unicodeRanges=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];exports.unicodeRanges=unicodeRanges,exports.getUnicodeRange=getUnicodeRange,exports.parse=parseOS2Table,exports.make=makeOS2Table;


},{"../parse":7,"../table":9}],22:[function(require,module,exports){
"use strict";function parsePostTable(e,a){var r,n={},s=new parse.Parser(e,a);switch(n.version=s.parseVersion(),n.italicAngle=s.parseFixed(),n.underlinePosition=s.parseShort(),n.underlineThickness=s.parseShort(),n.isFixedPitch=s.parseULong(),n.minMemType42=s.parseULong(),n.maxMemType42=s.parseULong(),n.minMemType1=s.parseULong(),n.maxMemType1=s.parseULong(),n.version){case 1:n.names=encoding.standardNames.slice();break;case 2:for(n.numberOfGlyphs=s.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs),r=0;r<n.numberOfGlyphs;r++)n.glyphNameIndex[r]=s.parseUShort();for(n.names=[],r=0;r<n.numberOfGlyphs;r++)if(n.glyphNameIndex[r]>=encoding.standardNames.length){var p=s.parseChar();n.names.push(s.parseString(p))}break;case 2.5:for(n.numberOfGlyphs=s.parseUShort(),n.offset=new Array(n.numberOfGlyphs),r=0;r<n.numberOfGlyphs;r++)n.offset[r]=s.parseChar()}return n}function makePostTable(){return new table.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var encoding=require("../encoding"),parse=require("../parse"),table=require("../table");exports.parse=parsePostTable,exports.make=makePostTable;


},{"../encoding":3,"../parse":7,"../table":9}],23:[function(require,module,exports){
"use strict";function log2(e){return Math.log(e)/Math.log(2)|0}function computeCheckSum(e){for(;e.length%4!==0;)e.push(0);for(var a=0,n=0;n<e.length;n+=4)a+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];return a%=Math.pow(2,32)}function makeTableRecord(e,a,n,r){return new table.Table("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==a?a:0},{name:"offset",type:"ULONG",value:void 0!==n?n:0},{name:"length",type:"ULONG",value:void 0!==r?r:0}])}function makeSfntTable(e){var a=new table.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);a.tables=e,a.numTables=e.length;var n=Math.pow(2,log2(a.numTables));a.searchRange=16*n,a.entrySelector=log2(n),a.rangeShift=16*a.numTables-a.searchRange;for(var r=[],t=[],i=a.sizeOf()+makeTableRecord().sizeOf()*a.numTables;i%4!==0;)i+=1,t.push({name:"padding",type:"BYTE",value:0});for(var l=0;l<e.length;l+=1){var s=e[l];check.argument(4===s.tableName.length,"Table name"+s.tableName+" is invalid.");var m=s.sizeOf(),u=makeTableRecord(s.tableName,computeCheckSum(s.encode()),i,m);for(r.push({name:u.tag+" Table Record",type:"TABLE",value:u}),t.push({name:s.tableName+" table",type:"TABLE",value:s}),i+=m,check.argument(!isNaN(i),"Something went wrong calculating the offset.");i%4!==0;)i+=1,t.push({name:"padding",type:"BYTE",value:0})}return r.sort(function(e,a){return e.value.tag>a.value.tag?1:-1}),a.fields=a.fields.concat(r),a.fields=a.fields.concat(t),a}function metricsForChar(e,a,n){for(var r=0;r<a.length;r+=1){var t=e.charToGlyphIndex(a[r]);if(t>0){var i=e.glyphs[t];return i.getMetrics()}}return n}function average(e){for(var a=0,n=0;n<e.length;n+=1)a+=e[n];return a/e.length}function fontToSfntTable(e){for(var a=[],n=[],r=[],t=[],i=[],l=[],s=[],m=null,u=0,c=0,h=0,o=0,d=0,p=0;p<e.glyphs.length;p+=1){var f=e.glyphs[p],g=0|f.unicode;(m>g||null===m)&&(m=g),g>u&&(u=g);var y=os2.getUnicodeRange(g);if(32>y)c|=1<<y;else if(64>y)h|=1<<y-32;else if(96>y)o|=1<<y-64;else{if(!(123>y))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");d|=1<<y-96}if(".notdef"!==f.name){var v=f.getMetrics();a.push(v.xMin),n.push(v.yMin),r.push(v.xMax),t.push(v.yMax),l.push(v.leftSideBearing),s.push(v.rightSideBearing),i.push(f.advanceWidth)}}var x={xMin:Math.min.apply(null,a),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,r),yMax:Math.max.apply(null,t),advanceWidthMax:Math.max.apply(null,i),advanceWidthAvg:average(i),minLeftSideBearing:Math.min.apply(null,l),maxLeftSideBearing:Math.max.apply(null,l),minRightSideBearing:Math.min.apply(null,s)};x.ascender=void 0!==e.ascender?e.ascender:x.yMax,x.descender=void 0!==e.descender?e.descender:x.yMin;var M=head.make({unitsPerEm:e.unitsPerEm,xMin:x.xMin,yMin:x.yMin,xMax:x.xMax,yMax:x.yMax}),T=hhea.make({ascender:x.ascender,descender:x.descender,advanceWidthMax:x.advanceWidthMax,minLeftSideBearing:x.minLeftSideBearing,minRightSideBearing:x.minRightSideBearing,xMaxExtent:x.maxLeftSideBearing+(x.xMax-x.xMin),numberOfHMetrics:e.glyphs.length}),S=maxp.make(e.glyphs.length),b=os2.make({xAvgCharWidth:Math.round(x.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:m,usLastCharIndex:u,ulUnicodeRange1:c,ulUnicodeRange2:h,ulUnicodeRange3:o,ulUnicodeRange4:d,sTypoAscender:x.ascender,sTypoDescender:x.descender,sTypoLineGap:0,usWinAscent:x.ascender,usWinDescent:-x.descender,sxHeight:metricsForChar(e,"xyvw",{yMax:0}).yMax,sCapHeight:metricsForChar(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",x).yMax,usBreakChar:e.hasChar(" ")?32:0}),k=hmtx.make(e.glyphs),R=cmap.make(e.glyphs),N=e.familyName+" "+e.styleName,U=e.familyName.replace(/\s/g,"")+"-"+e.styleName,L=_name.make({copyright:e.copyright,fontFamily:e.familyName,fontSubfamily:e.styleName,uniqueID:e.manufacturer+":"+N,fullName:N,version:e.version,postScriptName:U,trademark:e.trademark,manufacturer:e.manufacturer,designer:e.designer,description:e.description,manufacturerURL:e.manufacturerURL,designerURL:e.designerURL,license:e.license,licenseURL:e.licenseURL,preferredFamily:e.familyName,preferredSubfamily:e.styleName}),C=post.make(),B=cff.make(e.glyphs,{version:e.version,fullName:N,familyName:e.familyName,weightName:e.styleName,postScriptName:U,unitsPerEm:e.unitsPerEm}),O=[M,T,S,b,L,R,C,B,k],w=makeSfntTable(O),q=w.encode(),E=computeCheckSum(q),W=w.fields,A=!1;for(p=0;p<W.length;p+=1)if("head table"===W[p].name){W[p].value.checkSumAdjustment=2981146554-E,A=!0;break}if(!A)throw new Error("Could not find head table with checkSum to adjust.");return w}var check=require("../check"),table=require("../table"),cmap=require("./cmap"),cff=require("./cff"),head=require("./head"),hhea=require("./hhea"),hmtx=require("./hmtx"),maxp=require("./maxp"),_name=require("./name"),os2=require("./os2"),post=require("./post");exports.computeCheckSum=computeCheckSum,exports.make=makeSfntTable,exports.fontToTable=fontToSfntTable;


},{"../check":1,"../table":9,"./cff":10,"./cmap":11,"./head":14,"./hhea":15,"./hmtx":16,"./maxp":19,"./name":20,"./os2":21,"./post":22}],24:[function(require,module,exports){
"use strict";function constant(e){return function(){return e}}var check=require("./check"),LIMIT16=32768,LIMIT32=2147483648,decode={},encode={},sizeOf={};encode.BYTE=function(e){return check.argument(e>=0&&255>=e,"Byte value should be between 0 and 255."),[e]},sizeOf.BYTE=constant(1),encode.CHAR=function(e){return[e.charCodeAt(0)]},sizeOf.BYTE=constant(1),encode.CHARARRAY=function(e){for(var n=[],t=0;t<e.length;t+=1)n.push(e.charCodeAt(t));return n},sizeOf.CHARARRAY=function(e){return e.length},encode.USHORT=function(e){return[e>>8&255,255&e]},sizeOf.USHORT=constant(2),encode.SHORT=function(e){return e>=LIMIT16&&(e=-(2*LIMIT16-e)),[e>>8&255,255&e]},sizeOf.SHORT=constant(2),encode.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},sizeOf.UINT24=constant(3),encode.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},sizeOf.ULONG=constant(4),encode.LONG=function(e){return e>=LIMIT32&&(e=-(2*LIMIT32-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},sizeOf.LONG=constant(4),encode.FIXED=encode.ULONG,sizeOf.FIXED=sizeOf.ULONG,encode.FWORD=encode.SHORT,sizeOf.FWORD=sizeOf.SHORT,encode.UFWORD=encode.USHORT,sizeOf.UFWORD=sizeOf.USHORT,encode.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]},sizeOf.LONGDATETIME=constant(8),encode.TAG=function(e){return check.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},sizeOf.TAG=constant(4),encode.Card8=encode.BYTE,sizeOf.Card8=sizeOf.BYTE,encode.Card16=encode.USHORT,sizeOf.Card16=sizeOf.USHORT,encode.OffSize=encode.BYTE,sizeOf.OffSize=sizeOf.BYTE,encode.SID=encode.USHORT,sizeOf.SID=sizeOf.USHORT,encode.NUMBER=function(e){return e>=-107&&107>=e?[e+139]:e>=108&&1131>=e?(e-=108,[(e>>8)+247,255&e]):e>=-1131&&-108>=e?(e=-e-108,[(e>>8)+251,255&e]):e>=-32768&&32767>=e?encode.NUMBER16(e):encode.NUMBER32(e)},sizeOf.NUMBER=function(e){return encode.NUMBER(e).length},encode.NUMBER16=function(e){return[28,e>>8&255,255&e]},sizeOf.NUMBER16=constant(2),encode.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},sizeOf.NUMBER32=constant(4),encode.REAL=function(e){var n=e.toString(),t=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(n);if(t){var o=parseFloat("1e"+((t[2]?+t[2]:0)+t[1].length));n=(Math.round(e*o)/o).toString()}var c,r,f="";for(c=0,r=n.length;r>c;c+=1){var d=n[c];f+="e"===d?"-"===n[++c]?"c":"b":"."===d?"a":"-"===d?"e":d}f+=1&f.length?"f":"ff";var i=[30];for(c=0,r=f.length;r>c;c+=2)i.push(parseInt(f.substr(c,2),16));return i},sizeOf.REAL=function(e){return encode.REAL(e).length},encode.NAME=encode.CHARARRAY,sizeOf.NAME=sizeOf.CHARARRAY,encode.STRING=encode.CHARARRAY,sizeOf.STRING=sizeOf.CHARARRAY,encode.UTF16=function(e){for(var n=[],t=0;t<e.length;t+=1)n.push(0),n.push(e.charCodeAt(t));return n},sizeOf.UTF16=function(e){return 2*e.length},encode.INDEX=function(e){var n,t=1,o=[t],c=[],r=0;for(n=0;n<e.length;n+=1){var f=encode.OBJECT(e[n]);Array.prototype.push.apply(c,f),r+=f.length,t+=f.length,o.push(t)}if(0===c.length)return[0,0];var d=[],i=1+Math.floor(Math.log(r)/Math.log(2))/8|0,a=[void 0,encode.BYTE,encode.USHORT,encode.UINT24,encode.ULONG][i];for(n=0;n<o.length;n+=1){var u=a(o[n]);Array.prototype.push.apply(d,u)}return Array.prototype.concat(encode.Card16(e.length),encode.OffSize(i),d,c)},sizeOf.INDEX=function(e){return encode.INDEX(e).length},encode.DICT=function(e){for(var n=[],t=Object.keys(e),o=t.length,c=0;o>c;c+=1){var r=parseInt(t[c],0),f=e[r];n=n.concat(encode.OPERAND(f.value,f.type)),n=n.concat(encode.OPERATOR(r))}return n},sizeOf.DICT=function(e){return encode.DICT(e).length},encode.OPERATOR=function(e){return 1200>e?[e]:[12,e-1200]},encode.OPERAND=function(e,n){var t=[];if(Array.isArray(n))for(var o=0;o<n.length;o+=1)check.argument(e.length===n.length,"Not enough arguments given for type"+n),t=t.concat(encode.OPERAND(e[o],n[o]));else if("SID"===n)t=t.concat(encode.NUMBER(e));else if("offset"===n)t=t.concat(encode.NUMBER32(e));else if("number"===n)t=t.concat(encode.NUMBER(e));else{if("real"!==n)throw new Error("Unknown operand type "+n);t=t.concat(encode.REAL(e))}return t},encode.OP=encode.BYTE,sizeOf.OP=sizeOf.BYTE;var wmm="function"==typeof WeakMap&&new WeakMap;encode.CHARSTRING=function(e){if(wmm&&wmm.has(e))return wmm.get(e);for(var n=[],t=e.length,o=0;t>o;o+=1){var c=e[o];n=n.concat(encode[c.type](c.value))}return wmm&&wmm.set(e,n),n},sizeOf.CHARSTRING=function(e){return encode.CHARSTRING(e).length},encode.OBJECT=function(e){var n=encode[e.type];return check.argument(void 0!==n,"No encoding function for type "+e.type),n(e.value)},encode.TABLE=function(e){for(var n=[],t=e.fields.length,o=0;t>o;o+=1){var c=e.fields[o],r=encode[c.type];check.argument(void 0!==r,"No encoding function for field type "+c.type);var f=e[c.name];void 0===f&&(f=c.value);var d=r(f);n=n.concat(d)}return n},encode.LITERAL=function(e){return e},sizeOf.LITERAL=function(e){return e.length},exports.decode=decode,exports.encode=encode,exports.sizeOf=sizeOf;


},{"./check":1}]},{},[6])(6)
});</script><script src="./Napoleon&#39;s Theorem - GeoGebra_files/081A64A7E3A2B8734BBA38C3704B0872.cache.js"></script><script language="javascript" id="propertiesKeysJS" class="ggw_resource">/*
 * Copyright (c) GeoGebra Group, office@geogebra.org
 * The GeoGebra language files are licensed to you under the terms of the
 * Creative Commons Attribution-NonCommercial-ShareAlike licence (version 3.0 or later),
 * the current text of which can be found via this link:
 * http://creativecommons.org/licenses/by-nc-sa/3.0/legalcode.
 * Attribution (as required by that Creative Commons license) should take the form of
 * (at least) a mention of our name, an appropriate copyright notice and a link to our
 * website located at http://www.geogebra.org.
 * For further details, please see http://www.geogebra.org/license
 */
/*
 * THIS FILE IS AUTOMATICALLY GENERATED - DO NOT EDIT THIS FILE!
 *
 * Keys translations for English (US)
 */

if (!window.__GGB__keysVar) {
    __GGB__keysVar = {};
}

__GGB__keysVar.en = {}


/***********************************************
 * Translations for colors
 ***********************************************/

__GGB__keysVar.en.colors = {
    "aqua": "Aqua",
    "black": "Black",
    "blue": "Blue",
    "brown": "Brown",
    "crimson": "Crimson",
    "cyan": "Cyan",
    "darkblue": "Dark Blue",
    "darkgray": "Dark Gray",
    "darkgreen": "Dark Green",
    "gold": "Gold",
    "gray": "Gray",
    "green": "Green",
    "indigo": "Indigo",
    "lightblue": "Light Blue",
    "lightgray": "Light Gray",
    "lightgreen": "Light Green",
    "lightorange": "Light Orange",
    "lightpurple": "Light Purple",
    "lightviolet": "Light Violet",
    "lightyellow": "Light Yellow",
    "lime": "Lime",
    "magenta": "Magenta",
    "maroon": "Maroon",
    "orange": "Orange",
    "pink": "Pink",
    "purple": "Purple",
    "red": "Red",
    "silver": "Silver",
    "turquoise": "Turquoise",
    "violet": "Violet",
    "white": "White",
    "yellow": "Yellow",
}


/***********************************************
 * Translations for command
 ***********************************************/

__GGB__keysVar.en.command = {
    "ANOVA": "ANOVA",
    "ANOVA.Syntax": "[ <List>, <List>, ... ]",
    "AffineRatio": "AffineRatio",
    "AffineRatio.Syntax": "[ <Point>, <Point>, <Point> ]",
    "Angle": "Angle",
    "Angle.Syntax": "[ <Object> ]\n[ <Vector>, <Vector> ]\n[ <Line>, <Line> ]\n[ <Point>, <Apex>, <Point> ]\n[ <Point>, <Apex>, <Angle> ]",
    "Angle.Syntax3D": "[ <Object> ]\n[ <Vector>, <Vector> ]\n[ <Line>, <Line> ]\n[ <Line>, <Plane> ]\n[ <Plane>, <Plane> ]\n[ <Point>, <Apex>, <Point> ]\n[ <Point>, <Apex>, <Angle> ]\n[ <Point>, <Point>, <Point>, <Direction> ]",
    "AngularBisector": "AngleBisector",
    "AngularBisector.Syntax": "[ <Line>, <Line> ]\n[ <Point>, <Point>, <Point> ]",
    "Append": "Append",
    "Append.Syntax": "[ <List>, <Object> ]\n[ <Object>, <List> ]",
    "ApplyMatrix": "ApplyMatrix",
    "ApplyMatrix.Syntax": "[ <Matrix>, <Object> ]",
    "Arc": "Arc",
    "Arc.Syntax": "[ <Circle>, <Point>, <Point> ]\n[ <Ellipse>, <Point>, <Point> ]\n[ <Circle>, <Parameter Value>, <Parameter Value> ]\n[ <Ellipse>, <Parameter Value>, <Parameter Value> ]",
    "AreCollinear": "AreCollinear",
    "AreCollinear.Syntax": "[ <Point>, <Point>, <Point> ]",
    "AreConcurrent": "AreConcurrent",
    "AreConcurrent.Syntax": "[ <Line>, <Line>, <Line> ]",
    "AreConcyclic": "AreConcyclic",
    "AreConcyclic.Syntax": "[ <Point>, <Point>, <Point>, <Point> ]",
    "AreCongruent": "AreCongruent",
    "AreCongruent.Syntax": "[ <Object>, <Object> ]",
    "AreEqual": "AreEqual",
    "AreEqual.Syntax": "[ <Object>, <Object> ]",
    "AreParallel": "AreParallel",
    "AreParallel.Syntax": "[ <Line>, <Line> ]",
    "ArePerpendicular": "ArePerpendicular",
    "ArePerpendicular.Syntax": "[ <Line>, <Line> ]",
    "Area": "Area",
    "Area.Syntax": "[ <Conic> ]\n[ <Polygon> ]\n[ <Point>, ..., <Point> ]",
    "Asymptote": "Asymptote",
    "Asymptote.Syntax": "[ <Conic> ]\n[ <Function> ]\n[ <Implicit Curve> ]",
    "AttachCopyToView": "AttachCopyToView",
    "AttachCopyToView.Syntax": "[ <Object>, <View 0|1|2> ]\n[ <Object>, <View 0|1|2>, <Point 1>, <Point 2>, <Screen Point 1>, <Screen Point 2> ]",
    "Axes": "Axes",
    "Axes.Syntax": "[ <Conic> ]",
    "Axes.Syntax3D": "[ <Conic> ]\n[ <Quadric> ]",
    "AxisStepX": "AxisStepX",
    "AxisStepX.Syntax": "[ ]",
    "AxisStepY": "AxisStepY",
    "AxisStepY.Syntax": "[ ]",
    "BarChart": "BarChart",
    "BarChart.Syntax": "[ <List of Data>, <List of Frequencies> ]\n[ <List of Raw Data>, <Width of Bars>, <Vertical Scale Factor (optional)> ]\n[ <List of Data>, <List of Frequencies>, <Width of Bars> ]\n[ <Start Value>, <End Value>, <List of Heights> ]\n[ <Start Value>, <End Value>, <Expression>, <Variable>, <From Number>, <To Number> ]\n[ <Start Value>, <End Value>, <Expression>, <Variable>, <From Number>, <To Number>, <Step Width> ]",
    "BarCode": "BarCode",
    "BarCode.Syntax": "[ ]\n[ <Image> ]\n[ <Text or Number>, \"<Format (optional)>\" , \"<Error Correction (optional)>\", <Width (optional)>, <Height (optional)> ]",
    "Barycenter": "Barycenter",
    "Barycenter.Syntax": "[ <List of Points>, <List of Weights> ]",
    "Bernoulli": "Bernoulli",
    "Bernoulli.Syntax": "[ <Probability>, <Boolean Cumulative> ]",
    "Binomial": "BinomialCoefficient",
    "Binomial.Syntax": "[ <Number n>, <Number r> ]",
    "Binomial.SyntaxCAS": "[ <Number>, <Number> ]",
    "BinomialDist": "BinomialDist",
    "BinomialDist.Syntax": "[ <Number of Trials>, <Probability of Success> ]\n[ <Number of Trials>, <Probability of Success>, <Boolean Cumulative> ]\n[ <Number of Trials>, <Probability of Success>, <Variable Value>, <Boolean Cumulative> ]",
    "BinomialDist.SyntaxCAS": "[ <Number of Trials>, <Probability of Success>, <Variable Value>, <Boolean Cumulative> ]",
    "Bottom": "Bottom",
    "Bottom.Syntax": "[ <Quadric> ]",
    "BoxPlot": "BoxPlot",
    "BoxPlot.Syntax": "[ <yOffset>, <yScale>, <List of Raw Data> ]\n[ <yOffset>, <yScale>, <List of Raw Data>, <Boolean Outliers> ]\n[ <yOffset>, <yScale>, <List of Data>, <List of Frequencies>, <Boolean Outliers> ]\n[ <yOffset>, <yScale>, <Start Value>, <Q1>, <Median>, <Q3>, <End Value> ]",
    "Button": "Button",
    "Button.Syntax": "[ ]\n[ <Caption> ]",
    "CFactor": "CFactor",
    "CFactor.SyntaxCAS": "[ <Expression> ]\n[ <Expression>, <Variable> ]",
    "CIFactor": "CIFactor",
    "CIFactor.SyntaxCAS": "[ <Expression> ]\n[ <Expression>, <Variable> ]",
    "CSolutions": "CSolutions",
    "CSolutions.SyntaxCAS": "[ <Equation> ]\n[ <Equation>, <Variable> ]\n[ <List of Equations>, <List of Variables> ]",
    "CSolve": "CSolve",
    "CSolve.SyntaxCAS": "[ <Equation> ]\n[ <Equation>, <Variable> ]\n[ <List of Equations>, <List of Variables> ]",
    "Cauchy": "Cauchy",
    "Cauchy.Syntax": "[ <Median>, <Scale>, x ]\n[ <Median>, <Scale>, <Variable Value> ]\n[ <Median>, <Scale>, x, <Boolean Cumulative> ]",
    "Cauchy.SyntaxCAS": "[ <Median>, <Scale>, <Variable Value> ]",
    "Cell": "Cell",
    "Cell.Syntax": "[ <Column>, <Row> ]",
    "CellRange": "CellRange",
    "CellRange.Syntax": "[ <Start Cell>, <End Cell> ]",
    "Center": "Center",
    "Center.Syntax": "[ <Conic> ]",
    "Center.Syntax3D": "[ <Conic> ]\n[ <Quadric> ]",
    "CenterView": "CenterView",
    "CenterView.Syntax": "[ <Center Point> ]",
    "Centroid": "Centroid",
    "Centroid.Syntax": "[ <Polygon> ]",
    "Checkbox": "Checkbox",
    "Checkbox.Syntax": "[ ]\n[ <Caption> ]\n[ <List> ]\n[ <Caption>, <List> ]",
    "ChiSquared": "ChiSquared",
    "ChiSquared.Syntax": "[ <Degrees of Freedom>, x ]\n[ <Degrees of Freedom>, <Variable Value> ]\n[ <Degrees of Freedom>, x, <Boolean Cumulative> ]",
    "ChiSquared.SyntaxCAS": "[ <Degrees of Freedom>, <Variable> ]",
    "ChiSquaredTest": "ChiSquaredTest",
    "ChiSquaredTest.Syntax": "[ <Matrix> ]\n[ <List>, <List> ]\n[ <Matrix>, <Matrix> ]",
    "Circle": "Circle",
    "Circle.Syntax": "[ <Point>, <Radius Number> ]\n[ <Point>, <Segment> ]\n[ <Point>, <Point> ]\n[ <Point>, <Point>, <Point> ]",
    "Circle.Syntax3D": "[ <Point>, <Radius Number> ]\n[ <Point>, <Segment> ]\n[ <Point>, <Point> ]\n[ <Point>, <Point>, <Point> ]\n[ <Line>, <Point> ]\n[ <Point>, <Radius>, <Direction> ]\n[ <Point>, <Point>, <Direction> ]",
    "CircleArc": "CircularArc",
    "CircleArc.Syntax": "[ <Midpoint>, <Point>, <Point> ]",
    "CircleSector": "CircularSector",
    "CircleSector.Syntax": "[ <Midpoint>, <Point>, <Point> ]",
    "CircumcircleArc": "CircumcircularArc",
    "CircumcircleArc.Syntax": "[ <Point>, <Point>, <Point> ]",
    "CircumcircleSector": "CircumcircularSector",
    "CircumcircleSector.Syntax": "[ <Point>, <Point>, <Point> ]",
    "Circumference": "Circumference",
    "Circumference.Syntax": "[ <Conic> ]",
    "Classes": "Classes",
    "Classes.Syntax": "[ <List of Data>, <Number of Classes> ]\n[ <List of Data>, <Start>, <Width of Classes> ]",
    "ClosestPoint": "ClosestPoint",
    "ClosestPoint.Syntax": "[ <Path>, <Point> ]\n[ <Line>, <Line> ]",
    "ClosestPointRegion": "ClosestPointRegion",
    "ClosestPointRegion.Syntax": "[ <Region>, <Point> ]",
    "Coefficients": "Coefficients",
    "Coefficients.Syntax": "[ <Polynomial> ]\n[ <Conic> ]",
    "Coefficients.SyntaxCAS": "[ <Polynomial> ]\n[ <Polynomial>, <Variable> ]",
    "Column": "Column",
    "Column.Syntax": "[ <Spreadsheet Cell> ]",
    "ColumnName": "ColumnName",
    "ColumnName.Syntax": "[ <Spreadsheet Cell> ]",
    "Command": "Command",
    "CommonDenominator": "CommonDenominator",
    "CommonDenominator.Syntax": "[ <Expression>, <Expression> ]",
    "CompetitionRank": "CompetitionRank",
    "CompetitionRank.Syntax": "[ <List> ]",
    "CompleteSquare": "CompleteSquare",
    "CompleteSquare.Syntax": "[ <Quadratic Function> ]",
    "ComplexRoot": "ComplexRoot",
    "ComplexRoot.Syntax": "[ <Polynomial> ]",
    "Cone": "Cone",
    "Cone.Syntax": "[ <Circle>, <Height> ]\n[ <Point>, <Point>, <Radius> ]\n[ <Point>, <Vector>, <Angle> ]",
    "Conic": "Conic",
    "Conic.Syntax": "[ <Point>, <Point>, <Point>, <Point>, <Point> ]\n[ <Number>, <Number>, <Number>, <Number>, <Number>, <Number> ]",
    "ConstructionStep": "ConstructionStep",
    "ConstructionStep.Syntax": "[ ]\n[ <Object> ]",
    "ContingencyTable": "ContingencyTable",
    "ContingencyTable.Syntax": "[ <List of Text>, <List of Text> ]\n[ <List of Text>, <List of Text>, <Options> ]\n[ <List of Row Values>, <List of Column Values>, <Frequency Table> ]\n[ <List of Row Values>, <List of Column Values>, <Frequency Table> , <Options> ]",
    "ContinuedFraction": "ContinuedFraction",
    "ContinuedFraction.Syntax": "[ <Number> ]\n[ <Number>, <Level> ]\n[ <Number>, <Level>, <Shorthand true|false> ]",
    "ContourPlot": "ContourPlot",
    "ConvexHull": "ConvexHull",
    "ConvexHull.Syntax": "[ <List of Points> ]",
    "CopyFreeObject": "CopyFreeObject",
    "CopyFreeObject.Syntax": "[ <Object> ]",
    "Corner": "Corner",
    "Corner.Syntax": "[ <Number of Corner> ]\n[ <Image>, <Number of Corner> ]\n[ <Text>, <Number of Corner> ]\n[ <Graphics View>, <Number of Corner> ]",
    "CountIf": "CountIf",
    "CountIf.Syntax": "[ <Condition>, <List> ]\n[ <Condition>, <Variable>, <List> ]",
    "Covariance": "Covariance",
    "Covariance.Syntax": "[ <List of Points> ]\n[ <List of Numbers>, <List of Numbers> ]",
    "Cross": "Cross",
    "Cross.SyntaxCAS": "[ <Vector>, <Vector> ]",
    "CrossRatio": "CrossRatio",
    "CrossRatio.Syntax": "[ <Point>, <Point>, <Point>, <Point> ]",
    "Cube": "Cube",
    "Cube.Syntax": "[ <Point>, <Point> ]\n[ <Point>, <Point>, <Point> ]\n[ <Point>, <Point>, <Direction> ]",
    "Cubic": "Cubic",
    "Cubic.Syntax": "[ <Point>, <Point>, <Point>, <Number> ]",
    "Curvature": "Curvature",
    "Curvature.Syntax": "[ <Point>, <Object> ]",
    "CurvatureVector": "CurvatureVector",
    "CurvatureVector.Syntax": "[ <Point>, <Object> ]",
    "CurveCartesian": "Curve",
    "CurveCartesian.Syntax": "[ <Expression>, <Expression>, <Parameter Variable>, <Start Value>, <End Value> ]",
    "CurveCartesian.Syntax3D": "[ <Expression>, <Expression>, <Parameter Variable>, <Start Value>, <End Value> ]\n[ <Expression>, <Expression>, <Expression>, <Parameter Variable>, <Start Value>, <End Value> ]",
    "Cylinder": "Cylinder",
    "Cylinder.Syntax": "[ <Circle>, <Height> ]\n[ <Point>, <Point>, <Radius> ]",
    "DataFunction": "DataFunction",
    "DataFunction.Syntax": "[ <List of Numbers>, <List of Numbers> ]",
    "Defined": "IsDefined",
    "Defined.Syntax": "[ <Object> ]",
    "Degree": "Degree",
    "Degree.Syntax": "[ <Polynomial> ]",
    "Degree.SyntaxCAS": "[ <Polynomial> ]\n[ <Polynomial>, <Variable> ]",
    "DelauneyTriangulation": "DelaunayTriangulation",
    "DelauneyTriangulation.Syntax": "[ <List of Points> ]",
    "Delete": "Delete",
    "Delete.Syntax": "[ <Object> ]",
    "Denominator": "Denominator",
    "Denominator.Syntax": "[ <Number> ]\n[ <Function> ]",
    "Denominator.SyntaxCAS": "[ <Expression> ]",
    "DensityPlot": "DensityPlot",
    "Derivative": "Derivative",
    "Derivative.Syntax": "[ <Function> ]\n[ <Curve> ]\n[ <Function>, <Number> ]\n[ <Function>, <Variable> ]\n[ <Curve>, <Number> ]\n[ <Function>, <Variable>, <Number> ]",
    "Derivative.SyntaxCAS": "[ <Expression> ]\n[ <Expression>, <Variable> ]\n[ <Expression>, <Variable>, <Number> ]",
    "Determinant": "Determinant",
    "Determinant.Syntax": "[ <Matrix> ]",
    "Diameter": "ConjugateDiameter",
    "Diameter.Syntax": "[ <Vector>, <Conic> ]\n[ <Line>, <Conic> ]",
    "Dilate": "Dilate",
    "Dilate.Syntax": "[ <Object>, <Dilation Factor> ]\n[ <Object>, <Dilation Factor>, <Dilation Center Point> ]",
    "Dimension": "Dimension",
    "Dimension.Syntax": "[ <Object> ]",
    "Direction": "Direction",
    "Direction.Syntax": "[ <Line> ]",
    "Directrix": "Directrix",
    "Directrix.Syntax": "[ <Conic> ]",
    "Distance": "Distance",
    "Distance.Syntax": "[ <Point>, <Object> ]\n[ <Line>, <Line> ]",
    "Div": "Div",
    "Div.Syntax": "[ <Dividend Number>, <Divisor Number> ]\n[ <Dividend Polynomial>, <Divisor Polynomial> ]",
    "Division": "Division",
    "Division.Syntax": "[ <Dividend Number>, <Divisor Number> ]\n[ <Dividend Polynomial>, <Divisor Polynomial> ]",
    "Divisors": "Divisors",
    "Divisors.Syntax": "[ <Number> ]",
    "DivisorsList": "DivisorsList",
    "DivisorsList.Syntax": "[ <Number> ]",
    "DivisorsSum": "DivisorsSum",
    "DivisorsSum.Syntax": "[ <Number> ]",
    "Dodecahedron": "Dodecahedron",
    "Dodecahedron.Syntax": "[ <Point>, <Point> ]\n[ <Point>, <Point>, <Point> ]\n[ <Point>, <Point>, <Direction> ]",
    "Dot": "Dot",
    "Dot.Syntax": "[ <Vector>, <Vector> ]",
    "DotPlot": "DotPlot",
    "DotPlot.Syntax": "[ <List of Raw Data>, <Stack Adjacent Dots (optional)>, <Scale Factor (optional)>]",
    "DynamicCoordinates": "DynamicCoordinates",
    "DynamicCoordinates.Syntax": "[ <Point>, <Number>, <Number> ]",
    "Eccentricity": "Eccentricity",
    "Eccentricity.Syntax": "[ <Conic> ]",
    "Element": "Element",
    "Element.Syntax": "[ <List>, <Position of Element> ]\n[ <Matrix>, <Row>, <Column> ]\n[ <List>, <Index1>, <Index2>, ... ]",
    "Element.SyntaxCAS": "[ <List>, <Position of Element> ]\n[ <Matrix>, <Row>, <Column> ]",
    "Eliminate": "Eliminate",
    "Eliminate.Syntax": "[ <List of Polynomials>, <List of Variables> ]",
    "Ellipse": "Ellipse",
    "Ellipse.Syntax": "[ <Focus>, <Focus>, <Semimajor Axis Length> ]\n[ <Focus>, <Focus>, <Segment> ]\n[ <Focus>, <Focus>, <Point> ]",
    "Ends": "Ends",
    "Ends.Syntax": "[ <Quadric> ]",
    "Envelope": "Envelope",
    "Envelope.Syntax": "[ <Path>, <Point> ]",
    "Erlang": "Erlang",
    "Erlang.Syntax": "[ <Shape>, <Rate>, x ]\n[ <Shape>, <Rate>, <Variable Value> ]\n[ <Shape>, <Rate>, x, <Boolean Cumulative> ]",
    "Evaluate": "Evaluate",
    "Excentricity": "LinearEccentricity",
    "Excentricity.Syntax": "[ <Conic> ]",
    "Execute": "Execute",
    "Execute.Syntax": "[ <List of Text> ]\n[ <List of Text>, <Parameter>, <Parameter>, ... ]",
    "Expand": "Expand",
    "Expand.Syntax": "[ <Expression> ]",
    "Exponential": "Exponential",
    "Exponential.Syntax": "[ <Lambda>, x ]\n[ <Lambda>, <Variable Value> ]\n[ <Lambda>, x, <Boolean Cumulative> ]",
    "Exponential.SyntaxCAS": "[ <Lambda>, <Variable Value> ]",
    "Extremum": "Extremum",
    "Extremum.Syntax": "[ <Polynomial> ]\n[ <Function>, <Start x-Value>, <End x-Value> ]",
    "FDistribution": "FDistribution",
    "FDistribution.Syntax": "[ <Numerator Degrees of Freedom>, <Denominator Degrees of Freedom>, x ]\n[ <Numerator Degrees of Freedom>, <Denominator Degrees of Freedom>, <Variable Value> ]\n[ <Numerator Degrees of Freedom>, <Denominator Degrees of Freedom>, x, <Boolean Cumulative> ]",
    "FDistribution.SyntaxCAS": "[ <Numerator Degrees of Freedom>, <Denominator Degrees of Freedom>, <Variable Value> ]",
    "Factor": "Factor",
    "Factor.Syntax": "[ <Polynomial> ]",
    "Factor.SyntaxCAS": "[ <Polynomial> ]\n[ <Expression>, <Variable> ]",
    "Factors": "Factors",
    "Factors.Syntax": "[ <Polynomial> ]\n[ <Number> ]",
    "FillCells": "FillCells",
    "FillCells.Syntax": "[ <CellRange>, <Object> ]\n[ <Cell>, <List> ]\n[ <Cell>, <Matrix> ]",
    "FillColumn": "FillColumn",
    "FillColumn.Syntax": "[ <Column>, <List> ]",
    "FillRow": "FillRow",
    "FillRow.Syntax": "[ <Row>, <List> ]",
    "First": "First",
    "First.Syntax": "[ <List> ]\n[ <Text> ]\n[ <List>, <Number of Elements> ]\n[ <Text>, <Number of Elements> ]\n[ <Locus>, <Number of Elements> ]",
    "First.SyntaxCAS": "[ <List> ]\n[ <List>, <Number of Elements> ]",
    "FirstAxis": "MajorAxis",
    "FirstAxis.Syntax": "[ <Conic> ]",
    "FirstAxisLength": "SemiMajorAxisLength",
    "FirstAxisLength.Syntax": "[ <Conic> ]",
    "Fit": "Fit",
    "Fit.Syntax": "[ <List of Points>, <List of Functions> ]\n[ <List of Points>, <Function> ]",
    "FitExp": "FitExp",
    "FitExp.Syntax": "[ <List of Points> ]",
    "FitGrowth": "FitGrowth",
    "FitGrowth.Syntax": "[ <List of Points> ]",
    "FitImplicit": "FitImplicit",
    "FitImplicit.Syntax": "[ <List of Points>, <Order> ]",
    "FitLineX": "FitLineX",
    "FitLineX.Syntax": "[ <List of Points> ]",
    "FitLineY": "FitLine",
    "FitLineY.Syntax": "[ <List of Points> ]",
    "FitLog": "FitLog",
    "FitLog.Syntax": "[ <List of Points> ]",
    "FitLogistic": "FitLogistic",
    "FitLogistic.Syntax": "[ <List of Points> ]",
    "FitPoly": "FitPoly",
    "FitPoly.Syntax": "[ <List of Points>, <Degree of Polynomial> ]",
    "FitPow": "FitPow",
    "FitPow.Syntax": "[ <List of Points> ]",
    "FitSin": "FitSin",
    "FitSin.Syntax": "[ <List of Points> ]",
    "Flatten": "Flatten",
    "Flatten.Syntax": "[ <List> ]",
    "Focus": "Focus",
    "Focus.Syntax": "[ <Conic> ]",
    "FractionText": "FractionText",
    "FractionText.Syntax": "[ <Number> ]\n[ <Point> ]",
    "Frequency": "Frequency",
    "Frequency.Syntax": "[ <List of Raw Data> ]\n[ <Boolean Cumulative>, <List of Raw Data> ]\n[ <List of Class Boundaries>, <List of Raw Data> ]\n[ <List of Text>, <List of Text> ]\n[ <Boolean Cumulative>, <List of Class Boundaries>, <List of Raw Data> ]\n[ <List of Class Boundaries>, <List of Raw Data>, <Use Density>, <Density Scale Factor (optional)> ]\n[ <Boolean Cumulative>, <List of Class Boundaries>, <List of Raw Data>, <Use Density>, <Density Scale Factor (optional)> ]",
    "FrequencyPolygon": "FrequencyPolygon",
    "FrequencyPolygon.Syntax": "[ <List of Class Boundaries>, <List of Heights> ]\n[ <List of Class Boundaries>, <List of Raw Data>, <Boolean Use Density>, <Density Scale Factor (optional)> ]\n[ <Boolean Cumulative>, <List of Class Boundaries>, <List of Raw Data>, <Boolean Use Density>, <Density Scale Factor (optional)> ]",
    "FrequencyTable": "FrequencyTable",
    "FrequencyTable.Syntax": "[ <List of Raw Data>, <Scale Factor (optional)> ]\n[ <Boolean Cumulative>, <List of Raw Data> ]\n[ <List of Class Boundaries>, <List of Raw Data> ]\n[ <Boolean Cumulative>, <List of Class Boundaries>, <List of Raw Data> ]\n[ <List of Class Boundaries>, <List of Raw Data>, <Use Density>, <Density Scale Factor (optional)> ]\n[ <Boolean Cumulative>, <List of Class Boundaries>, <List of Raw Data>, <Use Density>, <Density Scale Factor (optional)> ]",
    "FromBase": "FromBase",
    "FromBase.Syntax": "[ \"<Number as Text>\", <Base> ]",
    "Function": "Function",
    "Function.Syntax": "[ <Function>, <Start x-Value>, <End x-Value> ]\n[ <List of Numbers> ]",
    "Function.Syntax3D": "[ <List of Numbers> ]\n[ <Function>, <Start x-Value>, <End x-Value> ]\n[ <Expression>, <Parameter Variable 1>, <Start Value>, <End Value>, <Parameter Variable 2>, <Start Value>, <End Value> ]",
    "Function.SyntaxCAS": "[ <Function>, <Start x-Value>, <End x-Value> ]",
    "FutureValue": "FutureValue",
    "FutureValue.Syntax": "[ <Rate>, <Number of Periods>, <Payment>, <Present Value (optional)>, <Type (optional)> ]",
    "GCD": "GCD",
    "GCD.Syntax": "[ <List of Numbers> ]\n[ <Number>, <Number> ]",
    "GCD.SyntaxCAS": "[ <List of Numbers> ]\n[ <List of Polynomials> ]\n[ <Number>, <Number> ]\n[ <Polynomial>, <Polynomial> ]",
    "Gamma": "Gamma",
    "Gamma.Syntax": "[ <Alpha>, <Beta>, x ]\n[ <Alpha>, <Beta>, <Variable Value> ]\n[ <Alpha>, <Beta>, x, <Boolean Cumulative> ]",
    "Gamma.SyntaxCAS": "[ <Alpha>, <Beta>, <Variable Value> ]",
    "GeometricMean": "GeometricMean",
    "GeometricMean.Syntax": "[ <List of Numbers> ]",
    "GetTime": "GetTime",
    "GetTime.Syntax": "[]\n[ \"<Format>\" ]",
    "GroebnerDegRevLex": "GroebnerDegRevLex",
    "GroebnerDegRevLex.Syntax": "[ <List of Polynomials> ]\n[ <List of Polynomials>, <List of Variables> ]",
    "GroebnerLex": "GroebnerLex",
    "GroebnerLex.Syntax": "[ <List of Polynomials> ]\n[ <List of Polynomials>, <List of Variables> ]",
    "GroebnerLexDeg": "GroebnerLexDeg",
    "GroebnerLexDeg.Syntax": "[ <List of Polynomials> ]\n[ <List of Polynomials>, <List of Variables> ]",
    "HarmonicMean": "HarmonicMean",
    "HarmonicMean.Syntax": "[ <List of Numbers> ]",
    "Height": "Height",
    "Height.Syntax": "[ <Solid> ]",
    "HideLayer": "HideLayer",
    "HideLayer.Syntax": "[ <Number> ]",
    "Histogram": "Histogram",
    "Histogram.Syntax": "[ <List of Class Boundaries>, <List of Heights> ]\n[ <List of Class Boundaries>, <List of Raw Data>, <Use Density>, <Density Scale Factor (optional)> ]\n[ <Boolean Cumulative>, <List of Class Boundaries>, <List of Raw Data>, <Use Density>, <Density Scale Factor (optional)> ]",
    "HistogramRight": "HistogramRight",
    "HistogramRight.Syntax": "[ <List of Class Boundaries>, <List of Heights> ]\n[ <List of Class Boundaries>, <List of Raw Data>, <Use Density>, <Density Scale Factor (optional)>  ]\n[ <Boolean Cumulative>, <List of Class Boundaries>, <List of Raw Data>, <Use Density>, <Density Scale Factor (optional)> ]",
    "Hull": "Hull",
    "Hull.Syntax": "[ <List of Points>, <Percentage> ]",
    "HyperGeometric": "HyperGeometric",
    "HyperGeometric.Syntax": "[ <Population Size>, <Number of Successes>, <Sample Size> ]\n[ <Population Size>, <Number of Successes>, <Sample Size>, <Boolean Cumulative> ]\n[ <Population Size>, <Number of Successes>, <Sample Size>, <Variable Value>, <Boolean Cumulative> ]",
    "HyperGeometric.SyntaxCAS": "[ <Population Size>, <Number of Successes>, <Sample Size>, <Variable Value>, <Boolean Cumulative> ]",
    "Hyperbola": "Hyperbola",
    "Hyperbola.Syntax": "[ <Focus>, <Focus>, <Semimajor Axis Length> ]\n[ <Focus>, <Focus>, <Segment> ]\n[ <Focus>, <Focus>, <Point> ]",
    "IFactor": "IFactor",
    "IFactor.Syntax": "[ <Polynomial> ]",
    "IFactor.SyntaxCAS": "[ <Expression> ]\n[ <Expression>, <Variable> ]",
    "Icosahedron": "Icosahedron",
    "Icosahedron.Syntax": "[ <Point>, <Point> ]\n[ <Point>, <Point>, <Point> ]\n[ <Point>, <Point>, <Direction> ]",
    "Identity": "Identity",
    "Identity.Syntax": "[ <Number> ]",
    "If": "If",
    "If.Syntax": "[ <Condition>, <Then> ]\n[ <Condition>, <Then>, <Else> ]",
    "ImplicitCurve": "ImplicitCurve",
    "ImplicitCurve.Syntax": "[ <List of Points> ]\n[ <f(x, y)> ]",
    "ImplicitDerivative": "ImplicitDerivative",
    "ImplicitDerivative.Syntax": "[ <f(x, y)> ]",
    "ImplicitDerivative.SyntaxCAS": "[ <f(x, y)> ]\n[ <Expression>, <Dependent Variable>, <Independent Variable> ]",
    "Incircle": "Incircle",
    "Incircle.Syntax": "[ <Point>, <Point>, <Point> ]",
    "IndexOf": "IndexOf",
    "IndexOf.Syntax": "[ <Object>, <List> ]\n[ <Text>, <Text> ]\n[ <Object>, <List>, <Start Index> ]\n[ <Text>, <Text>, <Start Index> ]",
    "InfiniteCone": "InfiniteCone",
    "InfiniteCone.Syntax": "[ <Point>, <Vector>, <Angle> ]\n[ <Point>, <Point>, <Angle> ]\n[ <Point>, <Line>, <Angle> ]",
    "InfiniteCylinder": "InfiniteCylinder",
    "InfiniteCylinder.Syntax": "[ <Line>, <Radius> ]\n[ <Point>, <Vector>, <Radius> ]\n[ <Point>, <Point>, <Radius> ]",
    "Insert": "Insert",
    "Insert.Syntax": "[ <List>, <List>, <Position> ]\n[ <Object>, <List>, <Position> ]",
    "Integral": "Integral",
    "Integral.Syntax": "[ <Function> ]\n[ <Function>, <Variable> ]\n[ <Function>, <Start x-Value>, <End x-Value> ]\n[ <Function>, <Start x-Value>, <End x-Value>, <Boolean Evaluate> ]",
    "Integral.SyntaxCAS": "[ <Function> ]\n[ <Function>, <Variable> ]\n[ <Function>, <Start x-Value>, <End x-Value> ]\n[ <Function>, <Variable>, <Start Value>, <End Value> ]",
    "IntegralBetween": "IntegralBetween",
    "IntegralBetween.Syntax": "[ <Function>, <Function>, <Start x-Value>, <End x-Value> ]\n[ <Function>, <Function>, <Start x-Value>, <End x-Value>, <Boolean Evaluate> ]",
    "IntegralBetween.SyntaxCAS": "[ <Function>, <Function>, <Start x-Value>, <End x-Value> ]\n[ <Function>, <Function>, <Variable>, <Start Value>, <End Value> ]",
    "Intersect": "Intersect",
    "Intersect.Syntax": "[ <Object>, <Object> ]\n[ <Object>, <Object>, <Index of Intersection Point> ]\n[ <Object>, <Object>, <Initial Point> ]\n[ <Function>, <Function>, <Start x-Value>, <End x-Value> ]\n[ <Curve 1>, <Curve 2>, <Parameter 1>, <Parameter 2> ]",
    "Intersect.SyntaxCAS": "[ <Function>, <Function> ]",
    "IntersectConic": "IntersectConic",
    "IntersectConic.Syntax": "[ <Plane>, <Quadric> ]\n[ <Quadric>, <Quadric> ]",
    "IntersectPath": "IntersectPath",
    "IntersectPath.Syntax": "[ <Line>, <Polygon> ]\n[ <Polygon>, <Polygon> ]",
    "IntersectPath.Syntax3D": "[ <Line>, <Polygon> ]\n[ <Polygon>, <Polygon> ]\n[ <Plane>, <Polygon> ]\n[ <Plane>, <Quadric> ]",
    "Intersection": "Intersection",
    "Intersection.Syntax": "[ <List>, <List> ]",
    "InverseBinomial": "InverseBinomial",
    "InverseBinomial.Syntax": "[ <Number of Trials>, <Probability of Success>, <Probability> ]",
    "InverseCauchy": "InverseCauchy",
    "InverseCauchy.Syntax": "[ <Median>, <Scale>, <Probability> ]",
    "InverseChiSquared": "InverseChiSquared",
    "InverseChiSquared.Syntax": "[ <Degrees of Freedom>, <Probability> ]",
    "InverseExponential": "InverseExponential",
    "InverseExponential.Syntax": "[ <Lambda>, <Probability> ]",
    "InverseFDistribution": "InverseFDistribution",
    "InverseFDistribution.Syntax": "[ <Numerator Degrees of Freedom>, <Denominator Degrees of Freedom>, <Probability> ]",
    "InverseGamma": "InverseGamma",
    "InverseGamma.Syntax": "[ <Alpha>, <Beta>, <Probability> ]",
    "InverseHyperGeometric": "InverseHyperGeometric",
    "InverseHyperGeometric.Syntax": "[ <Population Size>, <Number of Successes>, <Sample Size>, <Probability> ]",
    "InverseLaplace": "InverseLaplace",
    "InverseLaplace.Syntax": "[ <Function> ]\n[ <Function>, <Variable> ]\n[ <Function>, <Variable>, <Variable> ]",
    "InverseLogNormal": "InverseLogNormal",
    "InverseLogNormal.Syntax": "[ <Mean>, <Standard Deviation>, <Probability> ]",
    "InverseLogistic": "InverseLogistic",
    "InverseLogistic.Syntax": "[ <Mean>, <Scale>, <Probability> ]",
    "InverseNormal": "InverseNormal",
    "InverseNormal.Syntax": "[ <Mean>, <Standard Deviation>, <Probability> ]",
    "InversePascal": "InversePascal",
    "InversePascal.Syntax": "[ <Number of Successes>, <Probability of Success>, <Probability> ]",
    "InversePoisson": "InversePoisson",
    "InversePoisson.Syntax": "[ <Mean>, <Probability> ]",
    "InverseTDistribution": "InverseTDistribution",
    "InverseTDistribution.Syntax": "[ <Degrees of Freedom>, <Probability> ]",
    "InverseWeibull": "InverseWeibull",
    "InverseWeibull.Syntax": "[ <Shape>, <Scale>, <Probability> ]",
    "InverseZipf": "InverseZipf",
    "InverseZipf.Syntax": "[ <Number of Elements>, <Exponent>, <Probability> ]",
    "Invert": "Invert",
    "Invert.Syntax": "[ <Matrix> ]\n[ <Function> ]",
    "IsInRegion": "IsInRegion",
    "IsInRegion.Syntax": "[ <Point>, <Region> ]",
    "IsInteger": "IsInteger",
    "IsInteger.Syntax": "[ <Number> ]",
    "IsPrime": "IsPrime",
    "IsPrime.Syntax": "[ <Number> ]",
    "Iteration": "Iteration",
    "Iteration.Syntax": "[ <Function>, <Start Value>, <Number of Iterations> ]\n[ <Expression>, <Variables>, <Start Values>, <Count> ]",
    "IterationList": "IterationList",
    "IterationList.Syntax": "[ <Function>, <Start Value>, <Number of Iterations> ]\n[ <Expression>, <Variables>, <Start Values>, <Count> ]",
    "Join": "Join",
    "Join.Syntax": "[ <List of Lists> ]\n[ <List>, <List>, ... ]",
    "KeepIf": "KeepIf",
    "KeepIf.Syntax": "[ <Condition>, <List> ]\n[ <Condition>, <Variable>, <List> ]",
    "LCM": "LCM",
    "LCM.Syntax": "[ <List of Numbers> ]\n[ <Number>, <Number> ]",
    "LCM.SyntaxCAS": "[ <List of Numbers> ]\n[ <List of Polynomials> ]\n[ <Number>, <Number> ]\n[ <Polynomial>, <Polynomial> ]",
    "LaTeX": "FormulaText",
    "LaTeX.Syntax": "[ <Object> ]\n[ <Object>, <Boolean for Substitution of Variables> ]\n[ <Object>, <Boolean for Substitution of Variables>, <Boolean Show Name> ]",
    "Laplace": "Laplace",
    "Laplace.Syntax": "[ <Function> ]\n[ <Function>, <Variable> ]\n[ <Function>, <Variable>, <Variable> ]",
    "Last": "Last",
    "Last.Syntax": "[ <List> ]\n[ <Text> ]\n[ <List>, <Number of Elements> ]\n[ <Text>, <Number of Elements> ]",
    "Last.SyntaxCAS": "[ <List> ]\n[ <List>, <Number of Elements> ]",
    "LeftSide": "LeftSide",
    "LeftSide.Syntax": "[ <Equation> ]",
    "LeftSide.SyntaxCAS": "[ <Equation> ]\n[ <List of Equations> ]\n[ <List of Equations>, <Index> ]",
    "LeftSum": "LeftSum",
    "LeftSum.Syntax": "[ <Function>, <Start x-Value>, <End x-Value>, <Number of Rectangles> ]",
    "Length": "Length",
    "Length.Syntax": "[ <Object> ]\n[ <Function>, <Start x-Value>, <End x-Value> ]\n[ <Function>, <Start Point>, <End Point> ]\n[ <Curve>, <Start t-Value>, <End t-Value> ]\n[ <Curve>, <Start Point>, <End Point> ]",
    "Length.SyntaxCAS": "[ <List> ]\n[ <Function>, <Start x-Value>, <End x-Value> ]\n[ <Function>, <Variable>, <Start x-Value>, <End x-Value> ]",
    "LetterToUnicode": "LetterToUnicode",
    "LetterToUnicode.Syntax": "[ \"<Letter>\" ]",
    "Limit": "Limit",
    "Limit.Syntax": "[ <Function>, <Value> ]",
    "Limit.SyntaxCAS": "[ <Expression>, <Value> ]\n[ <Expression>, <Variable>, <Value> ]",
    "LimitAbove": "LimitAbove",
    "LimitAbove.Syntax": "[ <Function>, <Value> ]",
    "LimitAbove.SyntaxCAS": "[ <Expression>, <Value> ]\n[ <Expression>, <Variable>, <Value> ]",
    "LimitBelow": "LimitBelow",
    "LimitBelow.Syntax": "[ <Function>, <Value> ]",
    "LimitBelow.SyntaxCAS": "[ <Expression>, <Value> ]\n[ <Expression>, <Variable>, <Value> ]",
    "Line": "Line",
    "Line.Syntax": "[ <Point>, <Point> ]\n[ <Point>, <Parallel Line> ]\n[ <Point>, <Direction Vector> ]",
    "LineBisector": "PerpendicularBisector",
    "LineBisector.Syntax": "[ <Segment> ]\n[ <Point>, <Point> ]",
    "LineBisector.Syntax3D": "[ <Segment> ]\n[ <Point>, <Point> ]\n[ <Point>, <Point>, <Direction> ]",
    "Locus": "Locus",
    "Locus.Syntax": "[ <Point Creating Locus Line>, <Point> ]\n[ <Point Creating Locus Line>, <Slider> ]\n[ <Slopefield>, <Point> ]\n[ <f(x, y)>, <Point> ]",
    "LocusEquation": "LocusEquation",
    "LocusEquation.Syntax": "[ <Locus> ]\n[ <Locus Point>, <Moving Point> ]\n[ <Boolean Expression>, <Free Point> ]",
    "LogNormal": "LogNormal",
    "LogNormal.Syntax": "[ <Mean>, <Standard Deviation>, x ]\n[ <Mean>, <Standard Deviation>, <Variable Value> ]\n[ <Mean>, <Standard Deviation>, x, <Boolean Cumulative> ]",
    "Logistic": "Logistic",
    "Logistic.Syntax": "[ <Mean>, <Scale>, x ]\n[ <Mean>, <Scale>, <Variable Value> ]\n[ <Mean>, <Scale>, x, <Boolean Cumulative> ]",
    "LowerSum": "LowerSum",
    "LowerSum.Syntax": "[ <Function>, <Start x-Value>, <End x-Value>, <Number of Rectangles> ]",
    "MatrixPlot": "MatrixPlot",
    "MatrixRank": "MatrixRank",
    "MatrixRank.Syntax": "[ <Matrix> ]",
    "Max": "Max",
    "Max.Syntax": "[ <Interval> ]\n[ <Number>, <Number> ]\n[ <List> ]\n[ <List of Data>, <List of Frequencies> ]\n[ <Function>, <Start x-Value>, <End x-Value> ]",
    "Max.SyntaxCAS": "[ <List> ]\n[ <Number>, <Number> ]",
    "Maximize": "Maximize",
    "Maximize.Syntax": "[ <Dependent Number>, <Free Number> ]\n[ <Dependent Number>, <Point on Path> ]",
    "Mean": "Mean",
    "Mean.Syntax": "[ <List of Raw Data> ]\n[ <List of Numbers>, <List of Frequencies> ]",
    "Mean.SyntaxCAS": "[ <List of Numbers> ]",
    "MeanX": "MeanX",
    "MeanX.Syntax": "[ <List of Points> ]",
    "MeanY": "MeanY",
    "MeanY.Syntax": "[ <List of Points> ]",
    "Median": "Median",
    "Median.Syntax": "[ <List of Raw Data> ]\n[ <List of Numbers>, <List of Frequencies> ]",
    "Median.SyntaxCAS": "[ <List of Numbers> ]",
    "Midpoint": "Midpoint",
    "Midpoint.Syntax": "[ <Segment> ]\n[ <Conic> ]\n[ <Interval> ]\n[ <Point>, <Point> ]",
    "Min": "Min",
    "Min.Syntax": "[ <Interval> ]\n[ <Number>, <Number> ]\n[ <List> ]\n[ <List of Data>, <List of Frequencies> ]\n[ <Function>, <Start x-Value>, <End x-Value> ]",
    "Min.SyntaxCAS": "[ <List> ]\n[ <Number>, <Number> ]",
    "Minimize": "Minimize",
    "Minimize.Syntax": "[ <Dependent Number>, <Free Number> ]\n[ <Dependent Number>, <Point on Path> ]",
    "MinimumSpanningTree": "MinimumSpanningTree",
    "MinimumSpanningTree.Syntax": "[ <List of Points> ]",
    "Mirror": "Reflect",
    "Mirror.Syntax": "[ <Object>, <Point> ]\n[ <Object>, <Line> ]\n[ <Object>, <Circle> ]",
    "Mirror.Syntax3D": "[ <Object>, <Point> ]\n[ <Object>, <Line> ]\n[ <Object>, <Plane> ]\n[ <Object>, <Circle> ]",
    "MixedNumber": "MixedNumber",
    "MixedNumber.SyntaxCAS": "[ <Number> ]",
    "Mod": "Mod",
    "Mod.Syntax": "[ <Dividend Number>, <Divisor Number> ]\n[ <Dividend Polynomial>, <Divisor Polynomial> ]",
    "Mode": "Mode",
    "Mode.Syntax": "[ <List of Numbers> ]",
    "NDerivative": "NDerivative",
    "NDerivative.Syntax": "[ <Function> ]",
    "NIntegral": "NIntegral",
    "NIntegral.Syntax": "[ <Function> ]\n[ <Function>, <Start x-Value>, <End x-Value> ]",
    "NIntegral.SyntaxCAS": "[ <Function>, <Start x-Value>, <End x-Value> ]\n[ <Function>, <Variable>, <Start Value>, <End Value> ]",
    "NSolutions": "NSolutions",
    "NSolutions.SyntaxCAS": "[ <Equation> ]\n[ <Equation>, <Variable> ]\n[ <Equation>, <Variable = starting value> ]\n[ <List of Equations>, <List of Variables> ]",
    "NSolve": "NSolve",
    "NSolve.SyntaxCAS": "[ <Equation> ]\n[ <Equation>, <Variable> ]\n[ <Equation>, <Variable = starting value> ]\n[ <List of Equations>, <List of Variables> ]",
    "NSolveODE": "NSolveODE",
    "NSolveODE.Syntax": "[ <List of Derivatives>, <Initial x-coordinate>, <List of Initial y-coordinates>, <Final x-coordinate> ]",
    "Name": "Name",
    "Name.Syntax": "[ <Object> ]",
    "Net": "Net",
    "Net.Syntax": "[ <Polyhedron>, <Number> ]\n[ <Polyhedron>, <Number>, <Face>, <Edge>, <Edge>, ... ]",
    "NextPrime": "NextPrime",
    "NextPrime.Syntax": "[ <Number> ]",
    "Normal": "Normal",
    "Normal.Syntax": "[ <Mean>, <Standard Deviation>, x ]\n[ <Mean>, <Standard Deviation>, <Variable Value> ]\n[ <Mean>, <Standard Deviation>, x, <Boolean Cumulative> ]",
    "Normal.SyntaxCAS": "[ <Mean>, <Standard Deviation>, <Variable Value> ]",
    "NormalQuantilePlot": "NormalQuantilePlot",
    "NormalQuantilePlot.Syntax": "[ <List of Raw Data> ]",
    "Normalize": "Normalize",
    "Normalize.Syntax": "[ <List of Numbers> ]\n[ <List of Points> ]",
    "Numerator": "Numerator",
    "Numerator.Syntax": "[ <Number> ]\n[ <Function> ]",
    "Numerator.SyntaxCAS": "[ <Expression> ]",
    "Numeric": "Numeric",
    "Numeric.SyntaxCAS": "[ <Expression> ]\n[ <Expression>, <Significant Figures> ]",
    "Object": "Object",
    "Object.Syntax": "[ <Name of Object as Text> ]",
    "Octahedron": "Octahedron",
    "Octahedron.Syntax": "[ <Point>, <Point> ]\n[ <Point>, <Point>, <Point> ]\n[ <Point>, <Point>, <Direction> ]",
    "Ordinal": "Ordinal",
    "Ordinal.Syntax": "[ <Integer> ]",
    "OrdinalRank": "OrdinalRank",
    "OrdinalRank.Syntax": "[ <List> ]",
    "OrthogonalLine": "PerpendicularLine",
    "OrthogonalLine.Syntax": "[ <Point>, <Line> ]\n[ <Point>, <Segment> ]\n[ <Point>, <Vector> ]",
    "OrthogonalLine.Syntax3D": "[ <Point>, <Line> ]\n[ <Point>, <Segment> ]\n[ <Point>, <Vector> ]\n[ <Point>, <Plane> ]\n[ <Line>, <Line> ]\n[ <Point>, <Direction>, <Direction> ]\n[ <Point>, <Line>, <Context> ]",
    "OrthogonalPlane": "PerpendicularPlane",
    "OrthogonalPlane.Syntax": "[ <Point>, <Line> ]\n[ <Point>, <Vector> ]",
    "OrthogonalVector": "PerpendicularVector",
    "OrthogonalVector.Syntax": "[ <Line> ]\n[ <Segment> ]\n[ <Vector> ]",
    "OrthogonalVector.Syntax3D": "[ <Line> ]\n[ <Segment> ]\n[ <Vector> ]\n[ <Plane> ]",
    "OrthogonalVector.SyntaxCAS": "[ <Vector> ]",
    "OsculatingCircle": "OsculatingCircle",
    "OsculatingCircle.Syntax": "[ <Point>, <Object> ]",
    "PMCC": "CorrelationCoefficient",
    "PMCC.Syntax": "[ <List of Points> ]\n[ <List of x-coordinates>, <List of y-coordinates> ]",
    "Pan": "Pan",
    "Pan.Syntax": "[ <x>, <y> ]",
    "Pan.Syntax3D": "[ <x>, <y> ]\n[ <x>, <y>, <z> ]",
    "Parabola": "Parabola",
    "Parabola.Syntax": "[ <Point>, <Line> ]",
    "Parameter": "Parameter",
    "Parameter.Syntax": "[ <Parabola> ]",
    "ParametricDerivative": "ParametricDerivative",
    "ParametricDerivative.Syntax": "[ <Curve> ]",
    "ParseToFunction": "ParseToFunction",
    "ParseToFunction.Syntax": "[ <Function>, <String> ]",
    "ParseToNumber": "ParseToNumber",
    "ParseToNumber.Syntax": "[ <Number>, <String> ]",
    "PartialFractions": "PartialFractions",
    "PartialFractions.Syntax": "[ <Function> ]",
    "PartialFractions.SyntaxCAS": "[ <Function> ]\n[ <Function>, <Variable> ]",
    "Pascal": "Pascal",
    "Pascal.Syntax": "[ <Number of Successes>, <Probability of Success> ]\n[ <Number of Successes>, <Probability of Success>, <Boolean Cumulative> ]\n[ <Number of Successes>, <Probability of Success>, <Variable Value>, <Boolean Cumulative> ]",
    "Pascal.SyntaxCAS": "[ <Number of Successes>, <Probability of Success>, <Variable Value>, <Boolean Cumulative> ]",
    "PathParameter": "PathParameter",
    "PathParameter.Syntax": "[ <Point On Path> ]",
    "Payment": "Payment",
    "Payment.Syntax": "[ <Rate>, <Number of Periods>, <Present Value>, <Future Value (optional)>, <Type (optional)> ]",
    "Percentile": "Percentile",
    "Percentile.Syntax": "[ <List of Numbers>, <Percent> ]",
    "Perimeter": "Perimeter",
    "Perimeter.Syntax": "[ <Polygon> ]\n[ <Conic> ]\n[ <Locus> ]",
    "Periods": "Periods",
    "Periods.Syntax": "[ <Rate>, <Payment>, <Present Value>, <Future Value (optional)>, <Type (optional)> ]",
    "Plane": "Plane",
    "Plane.Syntax": "[ <Polygon> ]\n[ <Conic> ]\n[ <Point>, <Plane> ]\n[ <Point>, <Line> ]\n[ <Line>, <Line> ]\n[ <Point>, <Point>, <Point> ]\n[ <Point>, <Vector>, <Vector> ]",
    "PlaneBisector": "PlaneBisector",
    "PlaneBisector.Syntax": "[ <Segment> ]\n[ <Point>, <Point> ]",
    "PlaySound": "PlaySound",
    "PlaySound.Syntax": "[ <URL> ]\n[ <Boolean Play> ]\n[ <Note Sequence>, <Instrument> ]\n[ <Note>, <Duration>, <Instrument> ]\n[ <Function>, <Min Value>, <Max Value> ]\n[ <Function>, <Min Value>, <Max Value>, <Sample Rate>, <Sample Depth> ]",
    "Point": "Point",
    "Point.Syntax": "[ <Object> ]\n[ <Object>, <Parameter> ]\n[ <Point>, <Vector> ]\n[ <List> ]",
    "PointIn": "PointIn",
    "PointIn.Syntax": "[ <Region> ]",
    "PointList": "PointList",
    "PointList.Syntax": "[ <List> ]",
    "Poisson": "Poisson",
    "Poisson.Syntax": "[ <Mean> ]\n[ <Mean>, <Boolean Cumulative> ]\n[ <Mean>, <Variable Value>, <Boolean Cumulative> ]",
    "Poisson.SyntaxCAS": "[ <Mean>, <Variable Value>, <Boolean Cumulative> ]",
    "Polar": "Polar",
    "Polar.Syntax": "[ <Point>, <Conic> ]\n[ <Line>, <Conic> ]",
    "PolyLine": "Polyline",
    "PolyLine.Syntax": "[ <List of Points> ]\n[ <Point>, ..., <Point> ]",
    "Polygon": "Polygon",
    "Polygon.Syntax": "[ <List of Points> ]\n[ <Point>, ..., <Point> ]\n[ <Point>, <Point>, <Number of Vertices> ]",
    "Polygon.Syntax3D": "[ <List of Points> ]\n[ <Point>, ..., <Point> ]\n[ <Point>, <Point>, <Number of Vertices> ]\n[ <Point>, <Point>, <Number of Vertices>, <Direction> ]",
    "Polynomial": "Polynomial",
    "Polynomial.Syntax": "[ <Function> ]\n[ <List of Points> ]",
    "Polynomial.SyntaxCAS": "[ <Function> ]\n[ <Function>, <Variable> ]",
    "PresentValue": "PresentValue",
    "PresentValue.Syntax": "[ <Rate>, <Number of Periods>, <Payment>, <Future Value (optional)>, <Type (optional)> ]",
    "PreviousPrime": "PreviousPrime",
    "PreviousPrime.Syntax": "[ <Number> ]",
    "PrimeFactors": "PrimeFactors",
    "PrimeFactors.Syntax": "[ <Number> ]",
    "Prism": "Prism",
    "Prism.Syntax": "[ <Polygon>, <Point> ]\n[ <Polygon>, <Height value> ]\n[ <Point>, <Point>, ... ]",
    "Product": "Product",
    "Product.Syntax": "[ <List of Raw Data> ]\n[ <List of Numbers>, <Number of Elements> ]\n[ <List of Numbers>, <List of Frequencies> ]",
    "Product.SyntaxCAS": "[ <List of Expressions> ]\n[ <Expression>, <Variable>, <Start Index>, <End Index> ]",
    "Prove": "Prove",
    "Prove.Syntax": "[ <Boolean Expression> ]",
    "ProveDetails": "ProveDetails",
    "ProveDetails.Syntax": "[ <Boolean Expression> ]",
    "Pyramid": "Pyramid",
    "Pyramid.Syntax": "[ <Polygon>, <Point> ]\n[ <Polygon>, <Height> ]\n[ <Point>, <Point>, <Point>, <Point>, ... ]",
    "Q1": "Q1",
    "Q1.Syntax": "[ <List of Raw Data> ]\n[ <List of Numbers>, <List of Frequencies> ]",
    "Q3": "Q3",
    "Q3.Syntax": "[ <List of Raw Data> ]\n[ <List of Numbers>, <List of Frequencies> ]",
    "QuadricSide": "Side",
    "QuadricSide.Syntax": "[ <Quadric> ]",
    "RSquare": "RSquare",
    "RSquare.Syntax": "[ <List of Points>, <Function> ]",
    "Radius": "Radius",
    "Radius.Syntax": "[ <Conic> ]",
    "Random": "RandomBetween",
    "Random.Syntax": "[ <Minimum Integer>, <Maximum Integer> ]\n[ <Minimum Integer>, <Maximum Integer>, <Boolean Fixed> ]",
    "Random.SyntaxCAS": "[ <Minimum Integer>, <Maximum Integer> ]",
    "RandomBinomial": "RandomBinomial",
    "RandomBinomial.Syntax": "[ <Number of Trials>, <Probability> ]",
    "RandomDiscrete": "RandomDiscrete",
    "RandomDiscrete.Syntax": "[ <List>, <List> ]",
    "RandomElement": "RandomElement",
    "RandomElement.Syntax": "[ <List> ]",
    "RandomNormal": "RandomNormal",
    "RandomNormal.Syntax": "[ <Mean>, <Standard Deviation> ]",
    "RandomPointIn": "RandomPointIn",
    "RandomPointIn.Syntax": "[ <Polygon> ]\n[ <List of Points> ]\n[ <xMin>, <xMax>, <yMin>, <yMax> ]",
    "RandomPoisson": "RandomPoisson",
    "RandomPoisson.Syntax": "[ <Mean> ]",
    "RandomPolynomial": "RandomPolynomial",
    "RandomPolynomial.Syntax": "[ <Degree>, <Minimum for Coefficients>, <Maximum for Coefficients> ]",
    "RandomPolynomial.SyntaxCAS": "[ <Degree>, <Minimum for Coefficients>, <Maximum for Coefficients> ]\n[ <Variable>, <Degree>, <Minimum for Coefficients>, <Maximum for Coefficients> ]",
    "RandomUniform": "RandomUniform",
    "RandomUniform.Syntax": "[ <Min>, <Max> ]\n[ <Min>, <Max>, <Number of Samples> ]",
    "Rate": "Rate",
    "Rate.Syntax": "[ <Number of Periods>, <Payment>, <Present Value>, <Future Value (optional)>, <Type (optional)>, <Guess (optional)> ]",
    "Rationalize": "Rationalize",
    "Rationalize.SyntaxCAS": "[ <Number> ]",
    "Ray": "Ray",
    "Ray.Syntax": "[ <Start Point>, <Point> ]\n[ <Start Point>, <Direction Vector> ]",
    "RectangleSum": "RectangleSum",
    "RectangleSum.Syntax": "[ <Function>, <Start x-Value>, <End x-Value>, <Number of Rectangles>, <Position for rectangle start> ]",
    "ReducedRowEchelonForm": "ReducedRowEchelonForm",
    "ReducedRowEchelonForm.Syntax": "[ <Matrix> ]",
    "Relation": "Relation",
    "Relation.Syntax": "[ <Object>, <Object> ]",
    "Remove": "Remove",
    "Remove.Syntax": "[ <List>, <List> ]",
    "RemoveUndefined": "RemoveUndefined",
    "RemoveUndefined.Syntax": "[ <List> ]",
    "Rename": "Rename",
    "Rename.Syntax": "[ <Object>, <Name> ]",
    "Repeat": "Repeat",
    "Repeat.Syntax": "[ <Number>, <Scripting Command>, <Scripting Command>, ... ]",
    "ResidualPlot": "ResidualPlot",
    "ResidualPlot.Syntax": "[ <List of Points>, <Function> ]",
    "Reverse": "Reverse",
    "Reverse.Syntax": "[ <List> ]",
    "RightSide": "RightSide",
    "RightSide.Syntax": "[ <Equation> ]",
    "RightSide.SyntaxCAS": "[ <Equation> ]\n[ <List of Equations> ]\n[ <List of Equations>, <Index> ]",
    "RigidPolygon": "RigidPolygon",
    "RigidPolygon.Syntax": "[ <Polygon> ]\n[ <Polygon>, <Offset x>, <Offset y> ]\n[ <Free Point>, ..., <Free Point> ]",
    "Root": "Root",
    "Root.Syntax": "[ <Polynomial> ]\n[ <Function>, <Initial x-Value> ]\n[ <Function>, <Start x-Value>, <End x-Value> ]",
    "Root.SyntaxCAS": "[ <Polynomial> ]",
    "RootList": "RootList",
    "RootList.Syntax": "[ <List> ]",
    "RootMeanSquare": "RootMeanSquare",
    "RootMeanSquare.Syntax": "[ <List of Numbers> ]",
    "Roots": "Roots",
    "Roots.Syntax": "[ <Function>, <Start x-Value>, <End x-Value> ]",
    "Rotate": "Rotate",
    "Rotate.Syntax": "[ <Object>, <Angle> ]\n[ <Object>, <Angle>, <Point> ]",
    "Rotate.Syntax3D": "[ <Object>, <Angle> ]\n[ <Object>, <Angle>, <Point> ]\n[ <Object>, <Angle>, <Axis of Rotation> ]\n[ <Object>, <Angle>, <Point on Axis>, <Axis Direction or Plane> ]",
    "RotateText": "RotateText",
    "RotateText.Syntax": "[ <Text>, <Angle> ]",
    "Row": "Row",
    "Row.Syntax": "[ <Spreadsheet Cell> ]",
    "RunClickScript": "RunClickScript",
    "RunClickScript.Syntax": "[ <Object> ]",
    "RunUpdateScript": "RunUpdateScript",
    "RunUpdateScript.Syntax": "[ <Object> ]",
    "SD": "SD",
    "SD.Syntax": "[ <List of Raw Data> ]\n[ <List of Numbers>, <List of Frequencies> ]",
    "SDX": "SDX",
    "SDX.Syntax": "[ <List of Points> ]",
    "SDY": "SDY",
    "SDY.Syntax": "[ <List of Points> ]",
    "SVD": "SVD",
    "SVD.Syntax": "[ <Matrix> ]",
    "SXX": "Sxx",
    "SXX.Syntax": "[ <List of Numbers> ]\n[ <List of Points> ]",
    "SXY": "Sxy",
    "SXY.Syntax": "[ <List of Points> ]\n[ <List of Numbers>, <List of Numbers> ]",
    "SYY": "Syy",
    "SYY.Syntax": "[ <List of Points> ]",
    "Sample": "Sample",
    "Sample.Syntax": "[ <List>, <Size> ]\n[ <List>, <Size>, <With Replacement> ]",
    "SampleSD": "SampleSD",
    "SampleSD.Syntax": "[ <List of Raw Data> ]\n[ <List of Numbers>, <List of Frequencies> ]",
    "SampleSD.SyntaxCAS": "[ <List of Numbers> ]",
    "SampleSDX": "SampleSDX",
    "SampleSDX.Syntax": "[ <List of Points> ]",
    "SampleSDY": "SampleSDY",
    "SampleSDY.Syntax": "[ <List of Points> ]",
    "SampleVariance": "SampleVariance",
    "SampleVariance.Syntax": "[ <List of Raw Data> ]\n[ <List of Numbers>, <List of Frequencies> ]",
    "SampleVariance.SyntaxCAS": "[ <List of Numbers> ]",
    "ScientificText": "ScientificText",
    "ScientificText.Syntax": "[ <Number> ]\n[ <Number>, <Precision> ]",
    "SecondAxis": "MinorAxis",
    "SecondAxis.Syntax": "[ <Conic> ]",
    "SecondAxisLength": "SemiMinorAxisLength",
    "SecondAxisLength.Syntax": "[ <Conic> ]",
    "Sector": "Sector",
    "Sector.Syntax": "[ <Conic>, <Point>, <Point> ]\n[ <Conic>, <Parameter Value>, <Parameter Value> ]",
    "Segment": "Segment",
    "Segment.Syntax": "[ <Point>, <Point> ]\n[ <Point>, <Length> ]",
    "SelectObjects": "SelectObjects",
    "SelectObjects.Syntax": "[ ]\n[ <Object>, <Object>, ... ]",
    "SelectedElement": "SelectedElement",
    "SelectedElement.Syntax": "[ <List> ]",
    "SelectedIndex": "SelectedIndex",
    "SelectedIndex.Syntax": "[ <List> ]",
    "Semicircle": "Semicircle",
    "Semicircle.Syntax": "[ <Point>, <Point> ]",
    "Sequence": "Sequence",
    "Sequence.Syntax": "[ <End Value> ]\n[ <Start Value>, <End Value> ]\n[ <Expression>, <Variable>, <Start Value>, <End Value> ]\n[ <Expression>, <Variable>, <Start Value>, <End Value>, <Increment> ]",
    "SetActiveView": "SetActiveView",
    "SetActiveView.Syntax": "[ <View> ]\n[ <Plane> ]",
    "SetAxesRatio": "SetAxesRatio",
    "SetAxesRatio.Syntax": "[ <Number>, <Number> ]",
    "SetAxesRatio.Syntax3D": "[ <Number>, <Number> ]\n[ <Number>, <Number>, <Number> ]",
    "SetBackgroundColor": "SetBackgroundColor",
    "SetBackgroundColor.Syntax": "[ <Object>, \"<Color>\" ]\n[ <Object>, <Red>, <Green>, <Blue> ]",
    "SetCaption": "SetCaption",
    "SetCaption.Syntax": "[ <Object>, <Text> ]",
    "SetColor": "SetColor",
    "SetColor.Syntax": "[ <Object>, \"<Color>\" ]\n[ <Object>, <Red>, <Green>, <Blue> ]",
    "SetConditionToShowObject": "SetConditionToShowObject",
    "SetConditionToShowObject.Syntax": "[ <Object>, <Condition> ]",
    "SetConstructionStep": "SetConstructionStep",
    "SetConstructionStep.Syntax": "[ <Number> ]",
    "SetCoords": "SetCoords",
    "SetCoords.Syntax": "[ <Object>, <x>, <y> ]",
    "SetDynamicColor": "SetDynamicColor",
    "SetDynamicColor.Syntax": "[ <Object>, <Red>, <Green>, <Blue> ]\n[ <Object>, <Red>, <Green>, <Blue>, <Opacity> ]",
    "SetFilling": "SetFilling",
    "SetFilling.Syntax": "[ <Object>, <Number> ]",
    "SetFixed": "SetFixed",
    "SetFixed.Syntax": "[ <Object>, <true | false> ]",
    "SetLabelMode": "SetLabelMode",
    "SetLabelMode.Syntax": "[ <Object>, <Number> ]",
    "SetLayer": "SetLayer",
    "SetLayer.Syntax": "[ <Object>, <Layer> ]",
    "SetLineStyle": "SetLineStyle",
    "SetLineStyle.Syntax": "[ <Line>, <Number> ]",
    "SetLineThickness": "SetLineThickness",
    "SetLineThickness.Syntax": "[ <Line>, <Number> ]",
    "SetPerspective": "SetPerspective",
    "SetPerspective.Syntax": "[ <Text> ]",
    "SetPointSize": "SetPointSize",
    "SetPointSize.Syntax": "[ <Object>, <Number> ]",
    "SetPointStyle": "SetPointStyle",
    "SetPointStyle.Syntax": "[ <Point>, <Number> ]",
    "SetSeed": "SetSeed",
    "SetSeed.Syntax": "[ <Integer> ]",
    "SetSpinSpeed": "SetSpinSpeed",
    "SetSpinSpeed.Syntax3D": "[ <Number> ]",
    "SetTooltipMode": "SetTooltipMode",
    "SetTooltipMode.Syntax": "[ <Object>, <Number> ]",
    "SetTrace": "SetTrace",
    "SetTrace.Syntax": "[ <Object>, <true | false> ]",
    "SetValue": "SetValue",
    "SetValue.Syntax": "[ <Boolean>, <0|1> ]\n[ <Object>, <Object> ]\n[ <List>, <Number>, <Object> ]",
    "SetViewDirection": "SetViewDirection",
    "SetViewDirection.Syntax": "[ <Direction> ]",
    "SetVisibleInView": "SetVisibleInView",
    "SetVisibleInView.Syntax": "[ <Object>, <View Number 1|2>, <Boolean> ]",
    "Shear": "Shear",
    "Shear.Syntax": "[ <Object>, <Line>, <Ratio> ]",
    "ShortestDistance": "ShortestDistance",
    "ShortestDistance.Syntax": "[ <List of Segments>, <Start Point>, <End Point>, <Boolean Weighted> ]",
    "ShowAxes": "ShowAxes",
    "ShowAxes.Syntax": "[]\n[ <Boolean> ]\n[ <View>, <Boolean> ]",
    "ShowGrid": "ShowGrid",
    "ShowGrid.Syntax": "[]\n[ <Boolean> ]\n[ <View>, <Boolean> ]",
    "ShowLabel": "ShowLabel",
    "ShowLabel.Syntax": "[ <Object>, <Boolean> ]",
    "ShowLayer": "ShowLayer",
    "ShowLayer.Syntax": "[ <Number> ]",
    "Shuffle": "Shuffle",
    "Shuffle.Syntax": "[ <List> ]",
    "SigmaXX": "SigmaXX",
    "SigmaXX.Syntax": "[ <List of Points> ]\n[ <List of Raw Data> ]\n[ <List of Numbers>, <List of Frequencies> ]",
    "SigmaXY": "SigmaXY",
    "SigmaXY.Syntax": "[ <List of Points> ]\n[ <List of x-coordinates>, <List of y-coordinates> ]",
    "SigmaYY": "SigmaYY",
    "SigmaYY.Syntax": "[ <List of Points> ]",
    "Simplify": "Simplify",
    "Simplify.Syntax": "[ <Function> ]\n[ <Text> ]",
    "Simplify.SyntaxCAS": "[ <Function> ]",
    "Slider": "Slider",
    "Slider.Syntax": "[ <Min>, <Max>, <Increment>, <Speed>, <Width>, <Is Angle>, <Horizontal>, <Animating>, <Random> ]",
    "Slope": "Slope",
    "Slope.Syntax": "[ <Line> ]",
    "SlopeField": "SlopeField",
    "SlopeField.Syntax": "[ <f(x, y)> ]\n[ <f(x, y)>, <Number n> ]\n[ <f(x, y)>, <Number n>, <Length Multiplier a> ]\n[ <f(x, y)>, <Number n>, <Length Multiplier a>, <Min x>, <Min y>, <Max x>, <Max y> ]",
    "SlowPlot": "SlowPlot",
    "SlowPlot.Syntax": "[ <Function> ]",
    "Solutions": "Solutions",
    "Solutions.SyntaxCAS": "[ <Equation> ]\n[ <Equation>, <Variable> ]\n[ <List of Equations>, <List of Variables> ]",
    "Solve": "Solve",
    "Solve.SyntaxCAS": "[ <Equation in x> ]\n[ <Equation>, <Variable> ]\n[ <List of Equations>, <List of Variables> ]",
    "SolveCubic": "SolveCubic",
    "SolveCubic.Syntax": "[ <Cubic Polynomial> ]",
    "SolveODE": "SolveODE",
    "SolveODE.Syntax": "[ <f'(x, y)> ]\n[ <f'(x, y)>, <Point on f> ]\n[ <f'(x, y)>, <Start x>, <Start y>, <End x>, <Step> ]\n[ <y'>, <x'>, <Start x>, <Start y>, <End t>, <Step> ]\n[ <b(x)>, <c(x)>, <f(x)>, <Start x>, <Start y>, <Start y'>, <End x>, <Step> ]",
    "SolveODE.SyntaxCAS": "[ <Equation> ]\n[ <Equation>, <Point(s) on f> ]\n[ <Equation>, <Point(s) on f>, <Point(s) on f'> ]\n[ <Equation>, <Dependent Variable>, <Independent Variable>, <Point(s) on f> ] \n[ <Equation>, <Dependent Variable>, <Independent Variable>, <Point(s) on f>, <Point(s) on f'> ]",
    "Sort": "Sort",
    "Sort.Syntax": "[ <List> ]\n[ <Values>, <Keys> ]",
    "Spearman": "Spearman",
    "Spearman.Syntax": "[ <List of Points> ]\n[ <List of Numbers>, <List of Numbers> ]",
    "Sphere": "Sphere",
    "Sphere.Syntax": "[ <Point>, <Radius> ]\n[ <Point>, <Point> ]",
    "Spline": "Spline",
    "Spline.Syntax": "[ <List of Points> ]\n[ <List of Points>, <Order \u2265 3> ]",
    "StartAnimation": "StartAnimation",
    "StartAnimation.Syntax": "[ ]\n[ <Boolean> ]\n[ <Slider or Point>, <Slider or Point>, ... ]\n[ <Slider or Point>, <Slider or Point>, ..., <Boolean> ]",
    "StartLogging": "StartLogging",
    "StartLogging.Syntax": "[ \"<Sensor>\", <Variable>, \"<Sensor>\", <Variable>, ...]",
    "StartRecord": "StartRecord",
    "StartRecord.Syntax": "[ ]\n[ <Boolean> ]",
    "StemPlot": "StemPlot",
    "StemPlot.Syntax": "[ <List> ]\n[ <List>, <Adjustment -1|0|1> ]",
    "StepGraph": "StepGraph",
    "StepGraph.Syntax": "[ <List of Points> ]\n[ <List of Points>, <Boolean Join> ]\n[ <List of x-coordinates>, <List of y-coordinates> ]\n[ <List of Points>, <Boolean Join>, <Point Style> ]\n[ <List of x-coordinates>, <List of y-coordinates>, <Boolean Join> ]\n[ <List of x-coordinates>, <List of y-coordinates>, <Boolean Join>, <Point Style> ]",
    "StickGraph": "StickGraph",
    "StickGraph.Syntax": "[ <List of Points> ]\n[ <List of Points>, <Boolean Horizontal> ]\n[ <List of x-coordinates>, <List of y-coordinates> ]\n[ <List of x-coordinates>, <List of y-coordinates>, <Boolean Horizontal> ]",
    "StopLogging": "StopLogging",
    "StopLogging.Syntax": "[]",
    "Stretch": "Stretch",
    "Stretch.Syntax": "[ <Object>, <Vector> ]\n[ <Object>, <Line>, <Ratio> ]",
    "Substitute": "Substitute",
    "Substitute.SyntaxCAS": "[ <Expression>, <Substitution List> ]\n[ <Expression>, <from>, <to> ]",
    "Sum": "Sum",
    "Sum.Syntax": "[ <List> ]\n[ <List>, <Number of Elements> ]\n[ <List>, <List of Frequencies> ]",
    "Sum.SyntaxCAS": "[ <List> ]\n[ <Expression>, <Variable>, <Start Value>, <End Value> ]",
    "SumSquaredErrors": "SumSquaredErrors",
    "SumSquaredErrors.Syntax": "[ <List of Points>, <Function> ]",
    "SurdText": "SurdText",
    "SurdText.Syntax": "[ <Point> ]\n[ <Number> ]\n[ <Number>, <List> ]",
    "Surface": "Surface",
    "Surface.Syntax": "[ <Function>, <Angle> ]\n[ <Expression>, <Expression>, <Expression>, <Parameter Variable 1>, <Start Value>, <End Value>, <Parameter Variable 2>, <Start Value>, <End Value> ]",
    "TDistribution": "TDistribution",
    "TDistribution.Syntax": "[ <Degrees of Freedom>, x ]\n[ <Degrees of Freedom>, <Variable Value> ]\n[ <Degrees of Freedom>, x, <Boolean Cumulative> ]",
    "TDistribution.SyntaxCAS": "[ <Degrees of Freedom>, <Variable Value> ]",
    "TMean2Estimate": "TMean2Estimate",
    "TMean2Estimate.Syntax": "[ <List of Sample Data 1>, <List of Sample Data 2>, <Level>, <Boolean Pooled> ]\n[ <Sample Mean 1>, <Sample Standard Deviation 1>, <Sample Size 1>, <Sample Mean 2>, <Sample Standard Deviation 2>, <Sample Size 2>, <Level>, <Boolean Pooled> ]",
    "TMeanEstimate": "TMeanEstimate",
    "TMeanEstimate.Syntax": "[ <List of Sample Data>, <Level> ]\n[ <Sample Mean>, <Sample Standard Deviation>, <Sample Size>, <Level> ]",
    "TTest": "TTest",
    "TTest.Syntax": "[ <List of Sample Data>, <Hypothesized Mean>, <Tail> ]\n[ <Sample Mean>, <Sample Standard Deviation>, <Sample Size>, <Hypothesized Mean>, <Tail> ]",
    "TTest2": "TTest2",
    "TTest2.Syntax": "[ <List of Sample Data 1>, <List of Sample Data 2>, <Tail>, <Boolean Pooled> ]\n[ <Sample Mean 1>, <Sample Standard Deviation 1>, <Sample Size 1>, <Sample Mean 2>, <Sample Standard Deviation 2>, <Sample Size 2>, <Tail>, <Boolean Pooled> ]",
    "TTestPaired": "TTestPaired",
    "TTestPaired.Syntax": "[ <List of Sample Data 1>, <List of Sample Data 2>, <Tail> ]",
    "TableText": "TableText",
    "TableText.Syntax": "[ <List>, <List>, ... ]\n[ <List>, <List>, ..., <Alignment of Text> ]",
    "Take": "Take",
    "Take.Syntax": "[ <List>, <Start Position>, <End Position> ]\n[ <List>, <Start Position> ]\n[ <Text>, <Start Position>, <End Position> ]\n[ <Text>, <Start Position> ]",
    "Take.SyntaxCAS": "[ <List>, <Start Position> ]\n[ <List>, <Start Position>, <End Position> ]",
    "Tangent": "Tangent",
    "Tangent.Syntax": "[ <Point>, <Conic> ]\n[ <Point>, <Function> ]\n[ <Point on Curve>, <Curve> ]\n[ <x-Value>, <Function> ]\n[ <Line>, <Conic> ]\n[ <Circle>, <Circle> ]",
    "TaylorSeries": "TaylorPolynomial",
    "TaylorSeries.Syntax": "[ <Function>, <x-Value>, <Order Number> ]",
    "TaylorSeries.SyntaxCAS": "[ <Expression>, <x-Value>, <Order Number> ]\n[ <Expression>, <Variable>, <Variable Value>, <Order Number> ]",
    "Tetrahedron": "Tetrahedron",
    "Tetrahedron.Syntax": "[ <Point>, <Point> ]\n[ <Point>, <Point>, <Point> ]\n[ <Point>, <Point>, <Direction> ]",
    "Text": "Text",
    "Text.Syntax": "[ <Object> ]\n[ <Object>, <Boolean for Substitution of Variables> ]\n[ <Object>, <Point> ]\n[ <Object>, <Point>, <Boolean for Substitution of Variables> ]\n[ <Object>, <Point>, <Boolean for Substitution of Variables>, <Boolean for LaTeX formula> ]",
    "TextToUnicode": "TextToUnicode",
    "TextToUnicode.Syntax": "[ \"<Text>\" ]",
    "Textfield": "InputBox",
    "Textfield.Syntax": "[ ]\n[ <Linked Object> ]",
    "TiedRank": "TiedRank",
    "TiedRank.Syntax": "[ <List> ]",
    "ToBase": "ToBase",
    "ToBase.Syntax": "[ <Number>, <Base> ]",
    "ToComplex": "ToComplex",
    "ToComplex.Syntax": "[ <Vector> ]",
    "ToExponential": "ToExponential",
    "ToExponential.SyntaxCAS": "[ <Complex Number> ]",
    "ToPoint": "ToPoint",
    "ToPoint.Syntax": "[ <Complex Number> ]",
    "ToPolar": "ToPolar",
    "ToPolar.Syntax": "[ <Complex Number> ]\n[ <Vector> ]",
    "ToolImage": "ToolImage",
    "ToolImage.Syntax": "[ <Number> ]\n[ <Number>, <Point> ]\n[ <Number>, <Point>, <Point> ]",
    "Top": "Top",
    "Top.Syntax": "[ <Quadric> ]",
    "Translate": "Translate",
    "Translate.Syntax": "[ <Object>, <Vector> ]\n[ <Vector>, <Start Point> ]",
    "Transpose": "Transpose",
    "Transpose.Syntax": "[ <Matrix> ]",
    "TrapezoidalSum": "TrapezoidalSum",
    "TrapezoidalSum.Syntax": "[ <Function>, <Start x-Value>, <End x-Value>, <Number of Trapezoids> ]",
    "TravelingSalesman": "TravelingSalesman",
    "TravelingSalesman.Syntax": "[ <List of Points> ]",
    "TriangleCenter": "TriangleCenter",
    "TriangleCenter.Syntax": "[ <Point>, <Point>, <Point>, <Number> ]",
    "TriangleCurve": "TriangleCurve",
    "TriangleCurve.Syntax": "[ <Point>, <Point>, <Point>, <Equation> ]",
    "Triangular": "Triangular",
    "Triangular.Syntax": "[ <Lower Bound>, <Upper Bound>, <Mode>, x ]\n[ <Lower Bound>, <Upper Bound>, <Mode>, <Variable Value> ]\n[ <Lower Bound>, <Upper Bound>, <Mode>, x, <Boolean Cumulative> ]",
    "TrigCombine": "TrigCombine",
    "TrigCombine.Syntax": "[ <Expression> ]\n[ <Expression>, <Target Function> ]",
    "TrigExpand": "TrigExpand",
    "TrigExpand.Syntax": "[ <Expression> ]\n[ <Expression>, <Target Function> ]",
    "TrigExpand.SyntaxCAS": "[ <Expression> ]\n[ <Expression>, <Target Function> ]\n[ <Expression>, <Target Function>, <Target Variable> ]\n[ <Expression>, <Target Function>, <Target Variable>, <Target Variable> ]",
    "TrigSimplify": "TrigSimplify",
    "TrigSimplify.Syntax": "[ <Expression> ]",
    "Trilinear": "Trilinear",
    "Trilinear.Syntax": "[ <Point>, <Point>, <Point>, <Number>, <Number>, <Number> ]",
    "TurningPoint": "InflectionPoint",
    "TurningPoint.Syntax": "[ <Polynomial> ]",
    "Turtle": "Turtle",
    "Turtle.Syntax": "[]",
    "TurtleBack": "TurtleBack",
    "TurtleBack.Syntax": "[ <Turtle>, <Distance> ]",
    "TurtleDown": "TurtleDown",
    "TurtleDown.Syntax": "[ <Turtle> ]",
    "TurtleForward": "TurtleForward",
    "TurtleForward.Syntax": "[ <Turtle>, <Distance> ]",
    "TurtleLeft": "TurtleLeft",
    "TurtleLeft.Syntax": "[ <Turtle>, <Angle> ]",
    "TurtleRight": "TurtleRight",
    "TurtleRight.Syntax": "[ <Turtle>, <Angle> ]",
    "TurtleUp": "TurtleUp",
    "TurtleUp.Syntax": "[ <Turtle> ]",
    "UnicodeToLetter": "UnicodeToLetter",
    "UnicodeToLetter.Syntax": "[ <Integer> ]",
    "UnicodeToText": "UnicodeToText",
    "UnicodeToText.Syntax": "[ <List of Integers> ]",
    "Uniform": "Uniform",
    "Uniform.Syntax": "[ <Lower Bound>, <Upper Bound>, x ]\n[ <Lower Bound>, <Upper Bound>, <Variable Value> ]\n[ <Lower Bound>, <Upper Bound>, x, <Boolean Cumulative> ]",
    "Union": "Union",
    "Union.Syntax": "[ <List>, <List> ]\n[ <Polygon>, <Polygon> ]",
    "Unique": "Unique",
    "Unique.Syntax": "[ <List> ]",
    "UnitOrthogonalVector": "UnitPerpendicularVector",
    "UnitOrthogonalVector.Syntax": "[ <Line> ]\n[ <Segment> ]\n[ <Vector> ]",
    "UnitOrthogonalVector.Syntax3D": "[ <Line> ]\n[ <Segment> ]\n[ <Vector> ]\n[ <Plane> ]",
    "UnitOrthogonalVector.SyntaxCAS": "[ <Vector> ]",
    "UnitVector": "UnitVector",
    "UnitVector.Syntax": "[ <Object> ]",
    "UnitVector.SyntaxCAS": "[ <Vector> ]",
    "UpdateConstruction": "UpdateConstruction",
    "UpdateConstruction.Syntax": "[ ]\n[ <Number of times> ]",
    "UpperSum": "UpperSum",
    "UpperSum.Syntax": "[ <Function>, <Start x-Value>, <End x-Value>, <Number of Rectangles> ]",
    "Variance": "Variance",
    "Variance.Syntax": "[ <List of Raw Data> ]\n[ <List of Numbers>, <List of Frequencies> ]",
    "Variance.SyntaxCAS": "[ <List of Numbers> ]",
    "Vector": "Vector",
    "Vector.Syntax": "[ <Point> ]\n[ <Start Point>, <End Point> ]",
    "Vertex": "Vertex",
    "Vertex.Syntax": "[ <Conic> ]\n[ <Inequality> ]\n[ <Polygon> ]\n[ <Polygon>, <Index> ]\n[ <Segment>, <Index> ]",
    "VerticalText": "VerticalText",
    "VerticalText.Syntax": "[ <Text> ]\n[ <Text>, <Point> ]",
    "Volume": "Volume",
    "Volume.Syntax": "[ <Solid> ]",
    "Voronoi": "Voronoi",
    "Voronoi.Syntax": "[ <List of Points> ]",
    "Weibull": "Weibull",
    "Weibull.Syntax": "[ <Shape>, <Scale>, x ]\n[ <Shape>, <Scale>, <Variable Value> ]\n[ <Shape>, <Scale>, x, <Boolean Cumulative> ]",
    "Weibull.SyntaxCAS": "[ <Shape>, <Scale>, <Variable Value> ]",
    "ZMean2Estimate": "ZMean2Estimate",
    "ZMean2Estimate.Syntax": "[ <List of Sample Data 1>, <List of Sample Data 2>, <\u03c31>, <\u03c32>, <Level> ]\n[ <Sample Mean 1>, <\u03c31>, <Sample Size 1>, <Sample Mean 2>, <\u03c32>, <Sample Size 2>, <Level> ]",
    "ZMean2Test": "ZMean2Test",
    "ZMean2Test.Syntax": "[ <List of Sample Data 1>, <\u03c31>, <List of Sample Data 2>, <\u03c32>, <Tail> ]\n[ <Sample Mean 1>, <\u03c31>, <Sample Size 1>, <Sample Mean 2>, <\u03c32>, <Sample Size 2>, <Tail> ]",
    "ZMeanEstimate": "ZMeanEstimate",
    "ZMeanEstimate.Syntax": "[ <List of Sample Data>, <\u03c3>, <Level> ]\n[ <Sample Mean>, <\u03c3>, <Sample Size>, <Level> ]",
    "ZMeanTest": "ZMeanTest",
    "ZMeanTest.Syntax": "[ <List of Sample Data>, <\u03c3>, <Hypothesized Mean>, <Tail> ]\n[ <Sample Mean>, <\u03c3>, <Sample Size>, <Hypothesized Mean>, <Tail> ]",
    "ZProportion2Estimate": "ZProportion2Estimate",
    "ZProportion2Estimate.Syntax": "[ <Sample Proportion 1>, <Sample Size 1>, <Sample Proportion 2>, <Sample Size 2>, <Level> ]",
    "ZProportion2Test": "ZProportion2Test",
    "ZProportion2Test.Syntax": "[ <Sample Proportion 1 >, <Sample Size 1>, <Sample Proportion 2 >, <Sample Size 2>, <Tail> ]",
    "ZProportionEstimate": "ZProportionEstimate",
    "ZProportionEstimate.Syntax": "[ <Sample Proportion>, <Sample Size>, <Level> ]",
    "ZProportionTest": "ZProportionTest",
    "ZProportionTest.Syntax": "[ <Sample Proportion>, <Sample Size>, <Hypothesized Proportion>, <Tail> ]",
    "Zip": "Zip",
    "Zip.Syntax": "[ <Expression>, <Var1>, <List1>, <Var2>, <List2>, ... ]",
    "Zipf": "Zipf",
    "Zipf.Syntax": "[ <Number of Elements>, <Exponent> ]\n[ <Number of Elements>, <Exponent>, <Boolean Cumulative> ]\n[ <Number of Elements>, <Exponent>, <Variable Value>, <Boolean Cumulative> ]",
    "Zipf.SyntaxCAS": "[ <Number of Elements>, <Exponent>, <Variable Value>, <Boolean Cumulative> ]",
    "ZoomIn": "ZoomIn",
    "ZoomIn.Syntax": "[ <Scale Factor> ]\n[ <Scale Factor>, <Center Point> ]\n[ <Min x>, <Min y>, <Max x>, <Max y> ]",
    "ZoomOut": "ZoomOut",
    "ZoomOut.Syntax": "[ <Scale Factor> ]\n[ <Scale Factor>, <Center Point> ]",
    "nPr": "nPr",
    "nPr.Syntax": "[ <Number>, <Number> ]",
}


/***********************************************
 * Translations for error
 ***********************************************/

__GGB__keysVar.en.error = {
    "AngleMustBeConstant": "Every angle has to be constant",
    "AppletWindowClosing": "Please close the browser window to exit GeoGebra",
    "AssignmentDependentToFree": "Free objects may not be overwritten by dependent objects",
    "AssignmentToDependent": "Dependent objects may not be overwritten",
    "AssignmentToFixed": "Fixed objects may not be changed",
    "CAS.GeneralErrorMessage": "Sorry, something went wrong. Please check your input",
    "CAS.InvalidReferenceError": "One or more references are invalid",
    "CAS.SelectionStructureError": "Please check the structure of your selection",
    "CAS.TimeoutError": "Calculation took too long and was aborted",
    "CAS.VariableIsDynamicReference": "Attempt to assign dynamic reference",
    "CannotUnsnap": "Cannot unsnap the application.",
    "ChangeDependent": "Dependent objects may not be changed",
    "CircularDefinition": "Circular definition",
    "CoordinatesMustBeConstant": "Coordinates have to be constant",
    "DivisorMustBeConstant": "Every divisor has to be constant",
    "Error": "Error",
    "ExponentMustBeConstant": "Every exponent has to be constant",
    "ExponentMustBeInteger": "Every exponent has to be an integer",
    "ExportJarMissing": "Sorry, the geogebra_export.jar file is missing or corrupt",
    "FileFormatNewer": "Please upgrade to a newer version of GeoGebra\nThis file format is not supported",
    "FileFormatUnknown": "Unknown file format",
    "FileIsTooLarge": "Data file is too large",
    "FileNotFound": "File not found",
    "FunctionExpected": "Function expected",
    "HelpNotFound": "Could not find online help",
    "IllegalAddition": "Illegal addition",
    "IllegalArgument": "Illegal argument",
    "IllegalArgumentNumber": "Illegal number of arguments",
    "IllegalAssignment": "Illegal assignment",
    "IllegalBoolean": "Illegal Boolean operation",
    "IllegalComparison": "Illegal comparison",
    "IllegalComplexMultiplication": "Illegal complex multiplication",
    "IllegalDivision": "Illegal division",
    "IllegalExponent": "Illegal exponent",
    "IllegalListOperation": "Illegal list operation",
    "IllegalMultiplication": "Illegal multiplication",
    "IllegalSubtraction": "Illegal subtraction",
    "IllegalVariable": "Illegal variable",
    "IncompleteEquation": "Incomplete equation:\nPlease enter both sides of the equation",
    "InvalidEquation": "Invalid equation:\nPlease enter a polynomial equation in x and y",
    "InvalidFunction": "Invalid function:\nPlease enter an explicit function in x",
    "InvalidInequality": "Invalid inequality:\nPlease enter a linear inequality in x and y",
    "InvalidInput": "Invalid input",
    "LengthMustBeConstant": "Every length has to be constant",
    "LoadFileFailed": "Opening file failed",
    "NameUsed": "This label is already in use",
    "NumberExpected": "Number expected",
    "PasteImageFailed": "Sorry - couldn't paste bitmap from the clipboard",
    "RenameFailed": "Rename failed",
    "ReplaceFailed": "Redefinition failed",
    "SaveFileFailed": "Saving file failed",
    "Tool.CommandNameTaken": "Command name is already used by another tool",
    "Tool.CreationFailed": "Tool could not be created",
    "Tool.DeleteUsed": "Following tools were used to create selected objects and cannot be deleted:",
    "Tool.InputNotNeeded": "Input object is not needed",
    "Tool.OutputNotDependent": "Output object does not depend on input objects",
    "URLnotFound": "Opening URL failed",
    "UnbalancedBrackets": "Unbalanced brackets",
    "UndefinedVariable": "Undefined variable",
    "UnknownCommand": "Unknown command",
    "UnsupportedLAF": "The chosen look and feel is not available on your computer",
    "VectorExpected": "Point or vector expected",
}


/***********************************************
 * Translations for menu
 ***********************************************/

__GGB__keysVar.en.menu = {
    "ANOVA": "ANOVA",
    "About": "About",
    "AboutLicense": "About / License",
    "Accelerometer": "Acceleration",
    "Accents": "Accents",
    "AccentsExt": "Extended Accents",
    "ActionObjectTools": "Action Object Tools",
    "ActualFrequency": "Actual Frequency (Hz)",
    "AddCustomColor": "Add Custom Color",
    "AddFavorite": "Add Favorite",
    "AddSelection": "Add Selection",
    "AddTrace": "Add object to the trace list",
    "Adjustment": "Adjustment",
    "Advanced": "Advanced",
    "AlgebraDescriptions": "Algebra Descriptions",
    "All": "All",
    "AllCommands": "All Commands",
    "AllowRescaling": "Allow Rescaling",
    "AllowTooltips": "Allow Tooltips",
    "Alpha.short": "\u03b1",
    "AlternativeHypothesis": "Alternative Hypothesis",
    "AlternativeHypothesis.short": "Alternative",
    "Analyze": "Analyze",
    "Angle": "Angle",
    "Angle.Help": "Select three points or two lines",
    "AngleFixed": "Angle with Given Size",
    "AngleFixed.Help": "Select leg point, then vertex, and enter size",
    "AngleUnit": "Angle Unit",
    "AngularBisector": "Angle Bisector",
    "AngularBisector.Help": "Select three points or two lines",
    "ApplyDefaults": "Apply Defaults",
    "ApplyTemplate": "Apply Template",
    "Area": "Area",
    "Area.Help": "Select polygon, circle, or conic",
    "Ascending": "Ascending",
    "AskAQuestion": "Ask a Question",
    "Assignment.Edit": "Edit Task",
    "AttachDetachPoint": "Attach / Detach Point",
    "AttachDetachPoint.Help": "Click on a Point (and an Object to attach)",
    "AutoDimension": "Automatic Dimensions",
    "Axes": "Axes",
    "Back": "Back",
    "BackgroundColor": "Background Color",
    "BarChart": "Bar Chart",
    "BasicLineTools": "Line Tools",
    "Beta.short": "\u03b2",
    "BetweenGroups": "Between Groups",
    "Binomial.number": "n",
    "Binomial.probability": "p",
    "BlackboardLetters": "Blackboard Letters",
    "Blue": "Blue",
    "Bold": "Bold",
    "Bold.Short": "B",
    "Boxplot": "Boxplot",
    "Brackets": "Brackets",
    "Browser": "Browser",
    "Button.Caption": "Caption",
    "ButtonAction": "Button",
    "ButtonAction.Help": "Click in the Graphics View to insert a button",
    "ByLayering": "By layering",
    "CASPlot": "Plot",
    "CASPlot.Help": "Click input or output of a CAS cell to draw its content in the Graphics View",
    "Calculate": "Calculate",
    "CalligraphicLetters": "Calligraphic Letters",
    "Cancel": "Cancel",
    "Cartesian": "Cartesian",
    "CasCellUseAsText": "Text",
    "CheckBoxTitle": "Check Box to Show/Hide Objects",
    "CheckboxSize": "Checkbox Size",
    "CheckboxSize.Large": "Large",
    "CheckboxSize.Regular": "Regular",
    "ChiSquaredTest": "ChiSquared Test",
    "ChooseFromFile": "Choose from File",
    "Circle2": "Circle with Center through Point",
    "Circle2.Help": "Select center point, then point on circle",
    "Circle3": "Circle through 3 Points",
    "Circle3.Help": "Select three points on circle",
    "CircleArc3": "Circular Arc",
    "CircleArc3.Help": "Select center and two points",
    "CircleArcTools": "Circle & Arc Tools",
    "CircleAxisPoint": "Circle with Axis through Point",
    "CircleAxisPoint.Help": "Select axis, then point on circle",
    "CirclePointRadius": "Circle with Center and Radius",
    "CirclePointRadius.Help": "Select center point and enter radius",
    "CirclePointRadiusDirection": "Circle with Center, Radius and Direction",
    "CirclePointRadiusDirection.Help": "Select center point, direction and enter radius",
    "CircleSector3": "Circular Sector",
    "CircleSector3.Help": "Select center and two points",
    "CircumcircleArc3": "Circumcircular Arc",
    "CircumcircleArc3.Help": "Select three points on arc",
    "CircumcircleSector3": "Circumcircular Sector",
    "CircumcircleSector3.Help": "Select three points on sector",
    "ClassRule": "Class Rule",
    "ClassWithFrequency": "Class with Frequency",
    "Classes": "Classes",
    "ClearColumn": "Clear Column",
    "ClearColumns": "Clear Columns",
    "ClearRow": "Clear Row",
    "ClearRows": "Clear Rows",
    "ClearSelection": "Clear Selection",
    "ClearTrace": "Clear all traces",
    "Clipboard": "Clipboard",
    "ClipboardMessage": "Clipboard export successful.\nNow turn HTML editing on and paste into your LMS (eg Moodle)",
    "Close": "Close",
    "CloseAll": "Close All",
    "CloseFile": "Close File",
    "CmdList": "Input Help",
    "Coefficient": "Coefficient",
    "CollapseAll": "Collapse All",
    "Color": "Color",
    "Column.X": "X",
    "Column.Y": "Y",
    "ColumnHeader": "Column Header",
    "ColumnOrder": "Column Order",
    "ColumnReset": "New column on drag",
    "Columns": "Columns",
    "Comma": "Comma",
    "CommandName": "Command name",
    "Compasses": "Compass",
    "Compasses.Help": "Select segment or two points for radius, then center point",
    "ComplexNumber": "Complex Number",
    "ComplexNumber.Help": "Click in the Graphics View to create a complex number",
    "ConciseCode": "Concise Code",
    "ConciseUsingCSE5": "Concise Using cse5",
    "Condition.ShowObject": "Condition to Show Object",
    "Conditions": "Conditions",
    "Cone": "Cone",
    "Cone.Help": "Select two points (apex second), then enter radius",
    "ConfidenceInterval": "Confidence Interval",
    "ConfidenceLevel": "Confidence Level",
    "Conic": "Conic",
    "Conic5": "Conic through 5 Points",
    "Conic5.Help": "Select five points on conic",
    "ConicMenu": "Conic",
    "ConicSectionTools": "Conic Section Tools",
    "Conify": "Extrude to Pyramid or Cone",
    "Conify.Help": "Drag polygon/circle, or select polygon/circle and enter altitude to create centered pyramid/cone",
    "Connecting": "Connecting...",
    "Continuity": "Continuity",
    "Continuous": "Continuous",
    "Copy": "Copy",
    "CopyAsImage": "Copy as Image",
    "CopyAsLaTeX": "Copy as LaTeX",
    "CopyAsLibreOfficeFormula": "Copy as LibreOffice Formula",
    "CopyImage": "Copy Image",
    "CopyImageAsSVG": "Copy Image as SVG",
    "CopyInput": "Copy Input",
    "CopyToClipboard": "Copy to Clipboard",
    "CopyToGraphics": "Copy to Graphics View",
    "CopyToInputBar": "Copy to Input Bar",
    "CopyToSpreadsheet": "Copy to Spreadsheet",
    "CopyVisualStyle": "Copy Visual Style",
    "CopyVisualStyle.Help": "Select one object, then click on others",
    "CorrelationCoefficient.short": "r",
    "Count": "Count",
    "CountCells": "Count",
    "CountCells.Help": "Select a set of cells",
    "CrashReport": "Send crash reports to GeoGebra",
    "Create": "Create",
    "CreateCurveFit": "Best Fit Curve",
    "CreateCurveFit.Help": "Select cells for points then click the tool button",
    "CreateDataFunction": "Create DataFunction",
    "CreateDataList": "Create List",
    "CreateList": "List",
    "CreateList.Help": "Select cells then click the tool button",
    "CreateListGraphicsView": "List",
    "CreateListGraphicsView.Help": "Drag a rectangle around the Objects",
    "CreateListOfPoints": "List of Points",
    "CreateListOfPoints.Help": "Select cells then click the tool button",
    "CreateMatrix": "Matrix",
    "CreateMatrix.Help": "Select cells then click the tool button",
    "CreateNumber": "Create Number",
    "CreatePolyLine": "Polyline",
    "CreatePolyLine.Help": "Select cells for points then click the tool button",
    "CreateTable": "Table",
    "CreateTable.Help": "Select cells then click the tool button",
    "CreateYourOwn": "Create your own",
    "Cube": "Cube",
    "Cube.Help": "Click on a plane (optional) and then 2 points",
    "Cumulative": "Cumulative",
    "CursiveLetters": "Cursive Letters",
    "Custom": "Custom",
    "CustomTools": "Custom Tools",
    "Cut": "Cut",
    "Cylinder": "Cylinder",
    "Cylinder.Help": "Select two points, then enter radius",
    "Data": "Data",
    "DataColumn": "Data Column",
    "DataColumnName": "Data Column Name",
    "DataConnection": "Connection with GeoGebra Sensors app",
    "DataConnectionFailed": "Sorry, connection failed. Please check the sharing code and try again.",
    "DataCount": "Count",
    "DataSharingCode": "Sharing Code",
    "DataSource": "Data Source",
    "DataTitle": "Data Title",
    "DataType": "Data Type",
    "DataWithFrequency": "Data with Frequency",
    "DecimalPlaces": "Decimal Places",
    "Default.Restore": "Restore Default",
    "Default.Set": "Set as Default",
    "Degree": "Degree",
    "DegreeUnit": "degree",
    "DegreesOfFreedom.short": "df",
    "DegreesOfFreedom1.short": "df1",
    "DegreesOfFreedom2.short": "df2",
    "Delete": "Delete",
    "Delete.Help": "Select object",
    "DeleteFailed": "Delete failed.",
    "DeleteObjects": "Delete Objects",
    "DeleteTool": "Delete Tool",
    "Delimiter": "Delimiter",
    "Derivative": "Derivative",
    "Derivative.Help": "Finds the first derivative",
    "Descending": "Descending",
    "DifferenceOfMeans.short": "\u03bc\u2081 - \u03bc\u2082",
    "DifferenceOfProportions.short": "p\u2081 - p\u2082",
    "DifferenceofMeansT": "Difference of Means T",
    "Differences": "Differences",
    "Dilate.Factor": "Factor",
    "DilateFromPoint": "Dilate from Point",
    "DilateFromPoint.Help": "Select object to dilate, then center point, and enter factor",
    "Discrete": "Discrete",
    "Distance": "Distance or Length",
    "Distance.Help": "Select two points, segment, polygon, or circle",
    "Distribution": "Distribution",
    "Distribution.Binomial": "Binomial",
    "Distribution.Cauchy": "Cauchy",
    "Distribution.ChiSquare": "Chi-Squared",
    "Distribution.Exponential": "Exponential",
    "Distribution.F": "F-Distribution",
    "Distribution.Gamma": "Gamma",
    "Distribution.Hypergeometric": "Hypergeometric",
    "Distribution.Logistic": "Logistic",
    "Distribution.Lognormal": "Log-Normal",
    "Distribution.Normal": "Normal",
    "Distribution.Pascal": "Pascal",
    "Distribution.Poisson": "Poisson",
    "Distribution.Scale": "Scale",
    "Distribution.Shape": "Shape",
    "Distribution.StudentT": "Student",
    "Distribution.Weibull": "Weibull",
    "DoYouWantToSaveYourChanges": "Do you want to save your changes?",
    "DontDeleteTool": "Don't Delete Tool",
    "DontOverwrite": "Don't Overwrite",
    "DontSave": "Don't Save",
    "DotPlot": "Dot Plot",
    "Download": "Download",
    "DownloadAsGgbFile": "Download as .ggb file",
    "DrawingPadToClipboard": "Graphics View to Clipboard",
    "DynamicColors": "Dynamic Colors",
    "EMFPlus": "EMF+",
    "Edit": "Edit",
    "Ellipse3": "Ellipse",
    "Ellipse3.Help": "Select two foci and point on ellipse",
    "EnableLabelDrags": "Enable Dragging of Labels",
    "EnableRightClick": "Enable Right Click, Zooming and Keyboard Editing",
    "EndProbabilityOf": ")",
    "English": "English",
    "EnterAppletAddress": "Enter Web Address of GeoGebra Applet",
    "EnterWebAddress": "Enter Web Address",
    "EqualVariance": "Equal Variance",
    "Equation": "Equation",
    "EstimatedValue": "Estimated Value",
    "Evaluate": "Symbolic Evaluation",
    "Evaluate.Help": "Exact evaluation",
    "Exercise.CreateNew": "New Exercise",
    "Exit": "Exit",
    "ExitExamShutDown": "Shut down",
    "Expand": "Expand",
    "Expand.Help": "Expands brackets",
    "ExpandAll": "Expand All",
    "Exponential": "Exponential",
    "Export": "Export",
    "ExportAllWorksheets": "Export All Open Worksheets",
    "Extremum": "Extremum",
    "Extremum.Help": "Select a function to find its extrema",
    "Extrusion": "Extrude to Prism or Cylinder",
    "Extrusion.Help": "Drag polygon/circle, or select polygon/circle and enter altitude to create right prism/cylinder",
    "FStatistic": "F",
    "Factor": "Factor",
    "Factor.Help": "Finds factors",
    "FastHelp": "Fast Help",
    "File": "File",
    "FileBrowser": "File Browser",
    "FileSystem": "File System",
    "Files": "Files",
    "FillType": "Fill type",
    "Filling": "Filling",
    "Filling.Brick": "Bricks",
    "Filling.Chessboard": "Chessboard",
    "Filling.Crosshatch": "Cross-hatching",
    "Filling.CurrentSymbol": "Current Symbol",
    "Filling.Dotted": "Dots",
    "Filling.Hatch": "Hatching",
    "Filling.Honeycomb": "Honeycomb",
    "Filling.Image": "Image",
    "Filling.Standard": "Standard",
    "Filling.Symbol": "Symbol",
    "Filling.Weaving": "Weaving",
    "FitCurve": "Best Fit Curve",
    "FitCurve.Help": "Select points using selection rectangle, or list of points",
    "FitLine": "Best Fit Line",
    "FitLine.Help": "Select points using selection rectangle, or list of points",
    "Fix": "Fix On / Off",
    "Fix.Help": "Select object to fix / free it",
    "FixedToGrid": "Fixed to Grid",
    "FontSize": "Font Size",
    "ForegroundColor": "Foreground Color",
    "Formulas": "Formulas",
    "FrakturLetters": "Fraktur Letters",
    "FreehandCircle": "Freehand Circle",
    "FreehandCircle.Help": "Sketch a circle by dragging",
    "FreehandFunction": "Freehand Function",
    "FreehandFunction.Help": "Sketch a freehand function by dragging",
    "FreehandShape": "Freehand Shape",
    "FreehandShape.Help": "Sketch either a function or a geometric object by dragging",
    "Frequencies": "Frequencies",
    "Frequency": "Frequency",
    "FrequencyHz": "Frequency (Hz)",
    "FrequencyPolygon": "Frequency Polygon",
    "FrequencyTable": "Frequency Table",
    "FrequencyTable.Count": "Frequency",
    "FrequencyTable.Frequency": "Frequency",
    "FrequencyTable.RelativeFrequency": "Relative Frequency",
    "FrequencyType": "Frequency Type",
    "FunctionInspector": "Function Inspector",
    "FunctionInspector.Help": "Select a function",
    "Functionality": "Functionality",
    "GUIFontSize": "Menu Font Size",
    "General": "General",
    "GeneralTools": "General Tools",
    "GenerateCode": "Generate Code",
    "GeoGebraForum": "GeoGebra Forum",
    "GeogebraToAsymptoteExport": "GeoGebra to Asymptote Export",
    "Geometry": "Geometry",
    "German": "Deutsch",
    "GoodnessOfFitTest": "Goodness of Fit Test",
    "GoogleDrive": "Google Drive",
    "GoogleDriveSaveProblem": "Sorry, there was a problem saving this file to Google Drive",
    "Graph": "Graph",
    "Graphing": "Graphing",
    "Green": "Green",
    "Grid": "Grid",
    "Gridlines": "Gridlines",
    "GroupObjects": "Group Objects",
    "Growth": "Growth",
    "HSL": "HSL",
    "HSV": "HSV",
    "HTML5Only": "Export to HTML5 only",
    "HTML5WithJava": "Export to HTML5 (with Java fallback)",
    "Help": "Help",
    "Hidden.Dashed": "Dashed",
    "Hidden.Invisible": "Invisible",
    "Hidden.Unchanged": "Unchanged",
    "HiddenLineStyle": "Hidden Line Style",
    "Histogram": "Histogram",
    "HomeDirectory": "Home Directory",
    "HorizontalScrollbars": "Horizontal Scrollbars",
    "Hue": "Hue",
    "Hyperbola3": "Hyperbola",
    "Hyperbola3.Help": "Select two foci and point on hyperbola",
    "Hypergeometric.number": "n",
    "Hypergeometric.population": "population",
    "Hypergeometric.sample": "sample",
    "HypothesizedMean.short": "\u03bc",
    "HypothesizedProportion.short": "p",
    "Icon": "Icon",
    "Image": "Image",
    "Image.Help": "Click on the Graphics View or on point to specify position",
    "Images": "Images",
    "ImportDataFile": "Import Data File",
    "IncludeHTML5": "Include HTML5",
    "InputField": "Input Bar",
    "InputField.Help": "Select object to copy its name to input bar",
    "InputHelp": "Input Help",
    "InputObjects": "Input Objects",
    "InsertAbove": "Insert Above",
    "InsertBelow": "Insert Below",
    "InsertFile": "Insert File",
    "InsertImageFrom": "Insert Image from",
    "InsertLeft": "Insert Left",
    "InsertRight": "Insert Right",
    "Integral": "Integral",
    "Integral.Help": "Finds the indefinite integral",
    "Intercept": "Intercept",
    "InternalCAS": "Internal CAS",
    "Intersect": "Intersect",
    "Intersect.Help": "Select two objects or click directly on intersection",
    "IntersectionCurve": "Intersect Two Surfaces",
    "IntersectionCurve.Help": "Produce a curve by intersecting two surfaces",
    "Interval": "Interval",
    "IntervalProb": "Interval",
    "IntervalType": "Interval Type",
    "InvertSelection": "Invert Selection",
    "Isometric": "Isometric",
    "Italic.Short": "I",
    "JavaOnly": "Export to Java only",
    "JavaWithHTML5": "Export to Java (with HTML5 fallback)",
    "Join": "Line",
    "Join.Help": "Select two points",
    "KeepDotColors": "Keep Dot Colors",
    "KeepInput": "Keep Input",
    "KeepInput.Help": "Keeps and checks input",
    "Keyboard.Greek": "Greek Keyboard",
    "Keyboard.Math": "Math Keyboard",
    "Keyboard.Numeric": "Calculator",
    "Keyboard.Standard": "Standard Keyboard",
    "KinectWindow": "Kinect Window",
    "LabelColumn": "Label Column",
    "LabelColumnName": "Label Column Name",
    "Labeling": "Labeling",
    "Labeling.automatic": "Automatic",
    "Labeling.off": "No New Objects",
    "Labeling.on": "All New Objects",
    "Labeling.pointsOnly": "New Points Only",
    "Labeling.propertiesDefault": "Use Properties Default",
    "Labels": "Show or Hide Labels",
    "Landscape": "Landscape",
    "Language": "Language",
    "Layout": "Layout",
    "LeftClassRule": "\u2264 x <",
    "LeftProb": "Left Sided",
    "Length.short": "n",
    "LessThanOrEqualToX": "\u2264 X",
    "License": "License",
    "Light": "Illuminance",
    "Lightness": "Lightness",
    "LineBisector": "Perpendicular Bisector",
    "LineBisector.Help": "Select two points or one segment",
    "LineGraph": "Line Graph",
    "LineMenu": "Line",
    "LineOpacity": "Line Opacity",
    "Linear": "Linear",
    "LinkedFiles": "Linked Files",
    "List": "List",
    "ListOfPoints": "List of points",
    "Load": "Open",
    "Loading": "Loading \u2026",
    "Local": "Local",
    "Location": "Location",
    "LockView": "Lock View",
    "Locus": "Locus",
    "Locus.Help": "Select locus point, then point on object or slider",
    "Log": "Log",
    "LogIntoGoogleDrive": "Click here to log into Google Drive",
    "LogIntoSkyDrive": "Click here to log into SkyDrive",
    "LoggedIntoGoogleDrive": "You are logged into Google Drive",
    "LoggedIntoSkyDrive": "You are logged into SkyDrive",
    "Login": "Login",
    "Logistic": "Logistic",
    "LookAndFeel": "Look and Feel",
    "Loudness": "Loudness",
    "LowerLimit": "Lower Limit",
    "LowerQuartile.short": "Q1",
    "MagneticField": "Magnetic Field",
    "ManagePerspectives": "Manage Perspectives",
    "Manual": "Manual",
    "MarginOfError": "Margin of Error",
    "MarginOfError.short": "ME",
    "MathematicalFunctions": "Mathematical Functions",
    "Matrices": "Matrices",
    "Matrix": "Matrix",
    "MaxCells": "Maximum",
    "MaxCells.Help": "Select a set of cells",
    "Maximum.short": "Max",
    "Mean": "Mean",
    "Mean.short": "\u03bc",
    "MeanCells": "Mean",
    "MeanCells.Help": "Select a set of cells",
    "MeanDifference": "Mean Difference",
    "MeanSquare.short": "MS",
    "MeanX": "MeanX",
    "MeanY": "MeanY",
    "MeasurementTools": "Measurement Tools",
    "Median": "Median",
    "Metal": "Metal",
    "Midpoint": "Midpoint or Center",
    "Midpoint.Help": "Select two points, one segment, circle, or conic",
    "MinCells": "Minimum",
    "MinCells.Help": "Select a set of cells",
    "Minimum.short": "Min",
    "MirrorAtCircle": "Reflect about Circle",
    "MirrorAtCircle.Help": "Select object to reflect, then circle",
    "MirrorAtLine": "Reflect about Line",
    "MirrorAtLine.Help": "Select object to reflect, then line of reflection",
    "MirrorAtPlane": "Reflect about Plane",
    "MirrorAtPlane.Help": "Select object to reflect, then plane of reflection",
    "MirrorAtPoint": "Reflect about Point",
    "MirrorAtPoint.Help": "Select object to reflect, then center point",
    "Mode": "Mode",
    "Motif": "Motif",
    "Move": "Move",
    "Move.Help": "Drag or select objects",
    "MoveRotate": "Move around Point",
    "MoveRotate.Help": "Select rotation center point, then drag object",
    "MovementTools": "Movement Tools",
    "MultiVarStats": "Multiple Variable Analysis",
    "MultiVarStats.Help": "Analyze two or more data sets from selected columns",
    "MultiVariableStatistics": "Multivariable Statistics",
    "MyProfile": "My Profile",
    "NSolve": "Solve Numerically",
    "NSolve.Help": "Solves one or more equations numerically",
    "Name": "Name",
    "NameIcon": "Name & Icon",
    "NavigationBar": "Navigation Bar",
    "Net": "Net",
    "Net.Help": "Select a polyhedron",
    "New": "New",
    "NewWindow": "New Window",
    "Next": "Next",
    "None": "None",
    "NormalCurve": "Normal Curve",
    "NormalQuantilePlot": "Normal Quantile Plot",
    "Normalized": "Normalized",
    "NullHypothesis": "Null Hypothesis",
    "NullHypothesis.short": "Null",
    "Number": "Number",
    "Numeric": "Numeric Evaluation",
    "Numeric.Help": "Numeric evaluation",
    "Objects": "Objects",
    "Offline": "Offline",
    "OneVarStats": "One Variable Analysis",
    "OneVarStats.Help": "Analyze number values from selected cells",
    "OneVariable": "One Variable",
    "OneVariableStatistics": "One Variable Statistics",
    "OnlyOpaqueFills": "Only opaque fills",
    "Opacity": "Opacity",
    "OpenFileFolder": "Open File Folder",
    "OpenFromGeoGebraTube": "Open from GeoGebraTube",
    "OpenFromGoogleDrive": "Open from Google Drive",
    "OpenFromSkyDrive": "Open from SkyDrive",
    "OpenFromWebpage": "Open from Webpage",
    "OpenTutorial": "Open Tutorial",
    "OpenWebpage": "Open Webpage",
    "Operation": "Operation",
    "OperationTable": "Operation Table",
    "Options": "Options",
    "Orientation": "Orientation",
    "Orthogonal": "Perpendicular Line",
    "Orthogonal.Help": "Select point and perpendicular line",
    "OrthogonalPlane": "Perpendicular Plane",
    "OrthogonalPlane.Help": "Select point and perpendicular line",
    "OrthogonalThreeD": "Perpendicular Line",
    "OrthogonalThreeD.Help": "Select point and perpendicular line or plane",
    "Other": "Other",
    "OutputObjects": "Output Objects",
    "Overlay": "Overlay",
    "OverlayFrequencyPolygon": "Overlay Frequency Polygon",
    "OverlayNormalCurve": "Overlay Normal Curve",
    "Overwrite": "Overwrite",
    "PValue": "P",
    "PairedT": "Paired T",
    "Parabola": "Parabola",
    "Parabola.Help": "Select point and directrix",
    "Parallel": "Parallel Line",
    "Parallel.Help": "Select point and parallel line",
    "ParallelPlane": "Parallel Plane",
    "ParallelPlane.Help": "Select point and parallel plane",
    "Paste": "Paste",
    "PasteDataFromClipboard": "Paste Data from Clipboard",
    "PasteSpecial": "Paste Special",
    "Pen": "Pen",
    "Pen.Help": "Write in the Graphics View. Change color using the Stylebar",
    "Pencil": "Pencil",
    "Pencil.Help": "Draw in the Graphics View. Change color using the Stylebar",
    "PerformToolOn": "Perform Tool on",
    "Perspective.3DGraphics": "3D Graphics",
    "Perspective.AlgebraAndGraphics": "Algebra",
    "Perspective.CAS": "CAS",
    "Perspective.CASAndGraphics": "CAS & Graphics",
    "Perspective.Geometry": "Geometry",
    "Perspective.Primary": "Primary",
    "Perspective.Probability": "Probability",
    "Perspective.Spreadsheet": "Spreadsheet",
    "Perspective.TableAndGraphics": "Spreadsheet & Graphics",
    "Perspective.Whiteboard": "Whiteboard",
    "PerspectivePanel": "Perspective Panel",
    "Perspectives": "Perspectives",
    "Pixels.short": "px",
    "Plane": "Plane",
    "Plane.Help": "Select three points, or point and line, or two lines, or a polygon",
    "PlaneThreePoint": "Plane through 3 Points",
    "PlaneThreePoint.Help": "Select three points",
    "Point": "Point",
    "Point.Help": "Click on the Graphics View or on line, function, or curve",
    "PointCapturing": "Point Capturing",
    "PointInside": "Point in Region",
    "PointMenu": "Point",
    "PointOnObject": "Point on Object",
    "PointOnObject.Help": "Click inside an object or on its perimeter to make a Point",
    "PointStyle": "Point Style",
    "PointTools": "Point Tools",
    "Polar": "Polar",
    "PolarDiameter": "Polar or Diameter Line",
    "PolarDiameter.Help": "Select point or line, then circle or conic",
    "PolyLine": "Polyline",
    "PolyLine.Help": "Select all vertices, then click first vertex again",
    "Polygon": "Polygon",
    "Polygon.Help": "Select all vertices, then click first vertex again",
    "PolygonTools": "Polygon Tools",
    "Polynomial": "Polynomial",
    "Pooled": "Pooled",
    "Portrait": "Portrait",
    "Power": "Power",
    "Preview": "Preview",
    "Print": "Print",
    "PrintPreview": "Print Preview",
    "Prism": "Prism",
    "Prism.Help": "Select or create a polygon for bottom, then select or create first top point",
    "Private": "Private",
    "Probability": "Probability",
    "ProbabilityCalculator": "Probability Calculator",
    "ProbabilityCalculator.Help": "Dialog to compute probabilities",
    "ProbabilityOf": "P(",
    "ProductTour": "Product Tour",
    "Properties.Algebra": "Algebra",
    "Properties.Basic": "Basic",
    "Properties.Position": "Position",
    "Properties.Style": "Style",
    "Proportion.short": "p",
    "Proximity": "Distance",
    "Public": "Public",
    "Pyramid": "Pyramid",
    "Pyramid.Help": "Select or create a polygon for bottom, then select or create top point",
    "PythonWindow": "Python Window",
    "RGB": "RGB",
    "RSquare.Short": "R\xb2",
    "Radiant": "Radians",
    "RawData": "Raw Data",
    "Ray": "Ray",
    "Ray.Help": "Select starting point, then point on ray",
    "RealSense.DetectedMessage": "Congratulations, your Intel\xae RealSense\u2122 Camera can be used with GeoGebra!",
    "RealSense.Tutorial": "Intel\xae RealSense\u2122 Tutorial",
    "ReceivedData": "Received Data",
    "Recent": "Open Recent",
    "RecentColor": "Recent",
    "RecomputeAllViews": "Recompute All Objects",
    "RecordToSpreadsheet": "Record to Spreadsheet",
    "RecordToSpreadsheet.Help": "Select object to trace, then change the construction",
    "Recover": "Recover",
    "RecoverUnsaved": "Recover Unsaved Changes",
    "RecoveryCancel": "Abort",
    "RecoveryCancelQuestion": "Are you sure you want to cancel the recovery? Unsaved files will be lost.",
    "RecoveryOpen": "Open",
    "RecoverySave": "Save",
    "RecoveryText": "The following GeoGebra-files can be recovered.",
    "RecoveryTitle": "Crash Recovery",
    "Red": "Red",
    "Redo": "Redo",
    "Refresh": "Refresh Views",
    "RegressionAnalysis": "Regression Analysis",
    "RegressionModel": "Regression Model",
    "RegularPolygon": "Regular Polygon",
    "RegularPolygon.Help": "Select two points and enter number of vertices",
    "Relation": "Relation",
    "Relation.Help": "Select two objects",
    "Relative": "Relative",
    "RemoveFavorite": "Remove Favorite",
    "RemoveLineBreaks": "Remove Line Breaks",
    "RemoveTrace": "Remove object from trace list",
    "Rename": "Rename",
    "ReplaceAll": "Replace all cells",
    "ReportBug": "Report Bug",
    "RequireEquals": "Require \"=\" Before Commands",
    "Reset": "Reset",
    "ResidualPlot": "Residual Plot",
    "Result": "Result",
    "ResultsFor": "Results for %0",
    "ReturnAngleInverseTrig": "Return angle from inverse trigonometric functions",
    "RightAngleStyle": "Right Angle Style",
    "RightClassRule": "< x \u2264",
    "RightProb": "Right Sided",
    "RigidPolygon": "Rigid Polygon",
    "RigidPolygon.Help": "Select all vertices, then click first vertex again (or just click on a Polygon to make a rigid copy)",
    "Roots": "Roots",
    "Roots.Help": "Select a function to find its roots",
    "RootsAndFractions": "Roots and Fractions",
    "RotateAroundLine": "Rotate around Line",
    "RotateAroundLine.Help": "Select object to rotate, then line, and enter angle",
    "RotateByAngle": "Rotate around Point",
    "RotateByAngle.Help": "Select object to rotate, then center point, and enter angle",
    "RotateView": "Rotate 3D Graphics View",
    "RotateView.Help": "Drag the 3D Graphics View",
    "Rounding": "Rounding",
    "RowHeader": "Row Header",
    "RowLimit": "Row limit",
    "RowOrder": "Row Order",
    "Rows": "Rows",
    "Sample": "Sample",
    "Sample1": "Sample 1",
    "Sample2": "Sample 2",
    "SampleStandardDeviation.short": "s",
    "SansSerif": "Sans-Serif",
    "Saturation": "Saturation",
    "Save": "Save",
    "SaveAs": "Save As",
    "SaveCurrentFileQuestion": "Do you want to save the current file?",
    "SaveCurrentPerspective": "Save Current Perspective",
    "SavePrintUndo": "Enable Save & Print",
    "SaveToGoogleDrive": "Save to Google Drive",
    "SaveToSkyDrive": "Save to OneDrive",
    "SaveToXML": "Save to XML",
    "SavedSuccessfully": "Saved successfully.",
    "Saving": "Saving \u2026",
    "Scatterplot": "Scatterplot",
    "Scripting": "Scripting",
    "Segment": "Segment",
    "Segment.Help": "Select two points",
    "SegmentFixed": "Segment with Given Length",
    "SegmentFixed.Help": "Select point and enter segment length",
    "Select": "Select Object",
    "Select.Help": "Click on object to select it",
    "SelectACurve": "Select a curve",
    "SelectAll": "Select All",
    "SelectAnObjectToTrace": "Select an object to trace",
    "SelectAncestors": "Select Ancestors",
    "SelectAnother": "Select Another",
    "SelectCurrentLayer": "Select Current Layer",
    "SelectDescendants": "Select Descendants",
    "Semicircle": "Semicircle through 2 Points",
    "Semicircle.Help": "Select two end points",
    "Semicolon": "Semicolon",
    "Sensors": "Sensors",
    "Separator": "Separator",
    "Serif": "Serif",
    "SetClasssesManually": "Set Classes Manually",
    "SetToCurrentLocation": "Set To Current Location",
    "Settings": "Settings",
    "Settings.ResetDefault": "Restore Default Settings",
    "Settings.Save": "Save Settings",
    "Share": "Share",
    "ShareDialogDescription": "Send via email, upload to GeoGebraTube or other repositories.",
    "ShareDialogTitle": "Share Construction",
    "Shared": "Shared",
    "Show": "Show",
    "ShowAtTop": "Show at the Top",
    "ShowAxesGrid": "Show Axes/Grid",
    "ShowCheckBox": "Check Box",
    "ShowCheckBox.Help": "Click on the Graphics View to specify position",
    "ShowColumnHeader": "Show Column Header",
    "ShowCornerCoordinates": "Show Corner Coordinates",
    "ShowData": "Show Data",
    "ShowFileBrowser": "Show File Browser",
    "ShowGridlines": "Show Gridlines",
    "ShowHide": "Show / Hide Objects",
    "ShowHideLabel": "Show / Hide Label",
    "ShowHideLabel.Help": "Select object",
    "ShowHideLabels": "Show / Hide Labels",
    "ShowHideObject": "Show / Hide Object",
    "ShowHideObject.Help": "Select objects to hide, then switch to another tool",
    "ShowHorizontalScrollbars": "Show Horizontal Scrollbars",
    "ShowInToolBar": "Show in Toolbar",
    "ShowInputField": "Show Inputbar",
    "ShowMenuBar": "Show Menubar",
    "ShowMouseCoordinates": "Show Mouse Coordinates",
    "ShowPlot2": "Show 2nd Plot",
    "ShowResetIcon": "Show Icon to Reset Construction",
    "ShowRowHeader": "Show Row Header",
    "ShowSidebar": "Show Sidebar",
    "ShowStatistics": "Show Statistics",
    "ShowToolBar": "Show Toolbar",
    "ShowToolBarHelp": "Show Toolbar Help",
    "ShowVerticalScrollbars": "Show Vertical Scrollbars",
    "Sidebar": "Sidebar",
    "SignIn": "Sign in\u2026",
    "SignIn.Help": "Sign in to GeoGebraTube",
    "SignInError": "Sign in failed - Please try again",
    "SignInProgress": "Signing in",
    "SignOut": "Sign out",
    "Sin": "Sin",
    "SingleFile": "Single File",
    "SingleFileTabs": "Single File (Tabs)",
    "Slider": "Slider",
    "Slider.Help": "Click on the Graphics View to specify position",
    "Slope": "Slope",
    "Slope.Help": "Select line",
    "SnapToGrid": "Snap to Grid",
    "SnapToObjects": "Snap to Objects",
    "SnapToPoints": "Snap to Points",
    "Solution": "Solution",
    "Solution.Help": "Finds solutions of one or more equations",
    "Solve": "Solve",
    "Solve.Help": "Solves one or more equations",
    "Sort": "Sort cells",
    "Sort.Help": "Select cells to sort",
    "SortBy": "Sort by",
    "Source": "Source",
    "Space": "Space",
    "SpaceBetweenThousands": "Space between thousands",
    "Spacing": "Spacing",
    "Spearman.short": "\u03c1",
    "SpecialLineTools": "Special Line Tools",
    "SpecialObjectTools": "Special Object Tools",
    "Sphere2": "Sphere with Center through Point",
    "Sphere2.Help": "Select center point, then point on sphere",
    "SpherePointRadius": "Sphere with Center and Radius",
    "SpherePointRadius.Help": "Select the sphere's center point, and enter radius",
    "Split": "Split cell columns",
    "Split.Help": "Select columns to split",
    "SpreadsheetOptions": "Spreadsheet Options",
    "Stack": "Stack cell columns",
    "Stack.Help": "Select columns to stack",
    "StackedBoxPlots": "Stacked BoxPlots",
    "StandardDeviation.short": "\u03c3",
    "StandardError": "Standard Error",
    "StandardError.short": "SE",
    "Start": "Start",
    "StartRow": "Start row",
    "Statistics": "Statistics",
    "Statistics2": "Statistics2",
    "StemPlot": "Stem and Leaf Plot",
    "Step": "Step",
    "StepGraph": "Step Graph",
    "StickyTools": "Sticky Tools",
    "Stop": "Stop",
    "Substitute": "Substitute",
    "Substitute.Help": "Replaces part of an expression",
    "SubstituteDialog": "Substitute Dialog",
    "Successes": "Successes",
    "Sum": "\u03a3x",
    "Sum2": "\u03a3x\xb2",
    "SumCells": "Sum",
    "SumCells.Help": "Select a set of cells",
    "SumSquaredErrors.short": "SSE",
    "SumSquares.short": "SS",
    "SumsAndIntegrals": "Sums and Integrals",
    "Sx": "Sx",
    "Sxx": "Sxx",
    "Sxy": "Sxy",
    "Sy": "Sy",
    "Symbol.And": "And",
    "Symbol.Angle": "Angle",
    "Symbol.AngleMeasure": "Angle measure",
    "Symbol.Assignment": "Assignment",
    "Symbol.BooleanEqual": "Boolean equal",
    "Symbol.Cube": "Cube",
    "Symbol.Degree": "Degree",
    "Symbol.DynamicReference": "Dynamic Reference",
    "Symbol.ElementOf": "Element",
    "Symbol.GreaterThanEqualTo": "Greater than or equal to",
    "Symbol.Implication": "Implication",
    "Symbol.Infinity": "Infinity",
    "Symbol.LessThanEqualTo": "Less than or equal to",
    "Symbol.NBSP": "Non-breaking space",
    "Symbol.Negation": "Negation",
    "Symbol.NotEqual": "Not equal",
    "Symbol.Or": "Or",
    "Symbol.Parallel": "Parallel",
    "Symbol.Perpendicular": "Perpendicular",
    "Symbol.Square": "Square",
    "Symbol.StaticReference": "Static Reference",
    "Symbol.StrictSubset": "Strict Subset",
    "Symbol.Subset": "Subset",
    "Symbol.VectorProduct": "Vector product",
    "Symbols": "Symbols",
    "Syy": "Syy",
    "TEstimateDifferenceOfMeans": "T Estimate, Difference of Means",
    "TEstimatePairedDifferences": "T Estimate, Paired Differences",
    "TMeanInterval": "T Estimate of a Mean",
    "TMeanTest": "T Test of a Mean",
    "TStatistic": "t",
    "TTestDifferenceOfMeans": "T Test, Difference of Means",
    "TTestPairedDifferences": "T Test, Paired Differences",
    "Tab": "Tab",
    "Table": "Table",
    "Tangent": "Tangents",
    "Tangent.Help": "Select point or line, then circle, conic, or function",
    "Tetrahedron": "Regular Tetrahedron",
    "Tetrahedron.Help": "Click on a plane (optional) and then 2 points",
    "Text": "Text",
    "Text.Help": "Click on the Graphics View or on point to specify position",
    "TextFieldAction": "Input Box",
    "TextFieldAction.Help": "Click in the Graphics View to insert an Input Box",
    "ThenBy": "Then by",
    "TimeExpired": "Your session has expired, please log in again",
    "Timestamp": "Timestamp",
    "Tool": "Tool",
    "Tool.CreateNew": "Create New Tool",
    "Tool.CreationSuccess": "New tool created successfully!",
    "Tool.DeleteQuestion": "Do you really want to delete the selected tools?",
    "Tool.Manage": "Manage Tools",
    "Tool.SelectObjects": "Select objects in construction or choose from list",
    "ToolHelp": "Tool help",
    "ToolName": "Tool name",
    "Toolbar": "Toolbar",
    "Toolbar.Customize": "Customize Toolbar",
    "Toolbar.ResetDefault": "Restore Default Toolbar",
    "Tools": "Tools",
    "Tooltip": "Tooltip",
    "Total": "Total",
    "Trace": "Trace On / Off",
    "Trace.Help": "Select object to show / hide its trace",
    "TraceToList": "Trace to List",
    "TraceToSpreadsheet": "Trace to spreadsheet",
    "TraceToSpreadsheet.Help": "Dialog for tracing objects to the spreadsheet",
    "TransformationTools": "Transformation Tools",
    "TranslateByVector": "Translate by Vector",
    "TranslateByVector.Help": "Select object to translate, then vector",
    "TranslateView": "Move Graphics View",
    "TranslateView.Help": "Drag the Graphics View or one axis (Shift + Drag)",
    "Transparent": "Transparent",
    "Transpose": "Transpose",
    "Tutorial": "Tutorial",
    "Tutorials": "Tutorials",
    "TwoVarStats": "Two Variable Regression Analysis",
    "TwoVarStats.Help": "Analyze paired number values from selected cells",
    "TwoVariable": "Two Variable",
    "Type.3D": "3D",
    "Type.Algebra": "Algebra",
    "Type.CAS": "CAS-Specific Syntaxes",
    "Type.Chart": "Chart",
    "Type.Conic": "Conic",
    "Type.DiscreteMath": "Discrete Math",
    "Type.Financial": "Financial",
    "Type.FunctionsAndCalculus": "Functions & Calculus",
    "Type.GeoGebra": "GeoGebra",
    "Type.Geometry": "Geometry",
    "Type.List": "List",
    "Type.Logic": "Logic",
    "Type.OptimizationCommands": "Optimization Commands",
    "Type.Probability": "Probability",
    "Type.Scripting": "Scripting",
    "Type.Spreadsheet": "Spreadsheet",
    "Type.Statistics": "Statistics",
    "Type.Text": "Text",
    "Type.Transformation": "Transformation",
    "Type.VectorAndMatrix": "Vector & Matrix",
    "URL": "URL",
    "Undo": "Undo",
    "UngroupObjectes": "Ungroup Objects",
    "UnsavedChangesFound": "GeoGebra found unsaved changes. Do you want to recover or delete them?",
    "Untitled": "Untitled",
    "UploadGeoGebraTube": "Upload to GeoGebraTube",
    "UpperLimit": "Upper Limit",
    "UpperQuartile.short": "Q3",
    "UseAutoComplete": "Use Auto-complete",
    "UseBrowserForJS": "Use Browser for JavaScript scripts",
    "UseButtonsAndCheckboxes": "Use Buttons and Checkboxes",
    "UseHeaderAsTitle": "Use Header as Title",
    "UseHeaderRow": "Use Header Row",
    "UsePairNames": "Use Pair Names",
    "UsePathAndRegionParameters": "Use Path and Region Parameters",
    "UserInterface": "User Interface",
    "Value": "Value",
    "Values": "Values",
    "ValuesAndFrequency": "Values and Frequency",
    "Vector": "Vector",
    "Vector.Help": "Select starting point, then end point",
    "VectorFromPoint": "Vector from Point",
    "VectorFromPoint.Help": "Select starting point and vector",
    "VectorMenu": "Vector",
    "VectorPolygon": "Vector Polygon",
    "VectorPolygon.Help": "Select all vertices, then click first vertex again",
    "VerticalScrollbars": "Vertical Scrollbars",
    "View": "View",
    "ViewInFrontOf": "View in front of",
    "ViewInFrontOf.Help": "Change the view in front of the object clicked",
    "ViewMaterial": "View",
    "ViewPanel": "View Panel",
    "VisualStyle": "Visual Style",
    "VisualStyle.Help": "Click on objects or drag a rectangle to change their properties",
    "Volume": "Volume",
    "Volume.Help": "Select pyramid, prism, sphere, cone, cylinder, etc.",
    "Webcam": "Webcam",
    "Webcam.Chrome": "Please click 'Allow' in the pop-up bar",
    "Webcam.Edge": "Please click 'Yes' in the pop-up bar",
    "Webcam.Firefox": "Please click 'Share Selected Device' in the pop-up",
    "Webcam.Problem": "Problem communicating with the Webcam",
    "WelcomeExam": "Please wait until your teacher asks you to start the exam.",
    "Width": "Width",
    "Window": "Window",
    "Windows": "Windows",
    "WithOpacityPen": "With opacity pen",
    "WithinGroups": "Within Groups",
    "Worksheets": "Worksheets",
    "X->Y": "X \u2192 Y",
    "XBetween": "\u2264 X \u2264",
    "XLessThanOrEqual": "X \u2264",
    "Y<-X": "Y \u2190 X",
    "ZEstimateDifferenceOfMeans": "Z Estimate, Difference of Means",
    "ZEstimateDifferenceOfProportions": "Z Estimate, Difference of Proportions",
    "ZMeanInterval": "Z Estimate of a Mean",
    "ZMeanTest": "Z Test of a Mean",
    "ZProportionInterval": "Z Estimate of a Proportion",
    "ZProportionTest": "Z Test of a Proportion",
    "ZSpace.DetectedMessage": "Congratulations, your zSpace station can be used with GeoGebra!",
    "ZStatistic": "Z",
    "ZTestDifferenceOfMeans": "Z Test, Difference of Means",
    "ZTestDifferenceOfProportions": "Z Test, Difference of Proportions",
    "Zoom": "Zoom",
    "ZoomIn": "Zoom In",
    "ZoomIn.Help": "Click on the Graphics View to zoom in (Mouse Wheel)",
    "ZoomOut": "Zoom Out",
    "ZoomOut.Help": "Click on the Graphics View to zoom out (Mouse Wheel)",
    "exam_custom_description": "Please decide whether the following GeoGebra Views should be available in Exam Mode.",
    "exam_custom_header": "GeoGebra Exam Mode",
    "exam_end_time": "Exam End Time",
    "exam_ended": "Exam Mode ended",
    "exam_exit_confirmation": "Do you really want to exit GeoGebra Exam?",
    "exam_exit_header": "Exit Exam Mode?",
    "exam_log_header": "GeoGebra Exam Log",
    "exam_log_window_entered": "Exam window re-entered",
    "exam_log_window_left": "Exam window left",
    "exam_menu_enter": "Enter Exam Mode",
    "exam_menu_exit": "Exit Exam Mode",
    "exam_start_button": "Start Exam",
    "exam_start_date": "Exam Start Date",
    "exam_start_time": "Exam Start Time",
    "exam_started": "Exam Mode started",
    "exam_views_deactivated": "Deactivated Views",
    "insert_worksheet": "Insert Worksheet",
    "off": "Off",
    "on": "On",
    "phone_loading_materials_failed": "We are sorry, but the Materials are currently not available.",
    "phone_loading_materials_offline": "Please check your Internet connection.",
    "phone_no_materials_found": "No Materials found",
    "phone_tour_done": "Done",
    "phone_try_again_loading": "Try again",
    "search_geogebra_materials": "Search GeoGebra Materials",
}


/***********************************************
 * Translations for plain
 ***********************************************/

__GGB__keysVar.en.plain = {
    "ACommand": "%0 Command",
    "ADecimalPlace": "%0 Decimal Place",
    "ADecimalPlaces": "%0 Decimal Places",
    "ADerivativeOfB": "%0 derivative of %1",
    "ADilatedByFactorBfromC": "%0 dilated by factor %1 from %2",
    "ADoesNotIntersectWithB": "%0 does not intersect with %1",
    "AGray": "%0 Gray",
    "AIntersectsWithB": "%0 intersects with %1",
    "AMirroredAtB": "%0 mirrored at %1",
    "APixelsOnScreen": "%0 pixels on screen",
    "ARotatedByAngleB": "%0 rotated by angle %1",
    "ARotatedByAngleBAboutC": "%0 rotated by angle %1 about %2",
    "ARotatedByAngleBAboutCThroughD": "%0 rotated by angle %1 about an axis parallel to %2 passing through %3",
    "ARotatedByAngleBAboutPlaneCThroughD": "%0 rotated by angle %1 about an axis perpendicular to %2 and passing through %3",
    "ASignificantFigure": "%0 Significant Figure",
    "ASignificantFigures": "%0 Significant Figures",
    "ATouchesB": "%0 touches %1",
    "AandB": "%0 and %1",
    "AandBareEqual": "%0 and %1 are equal",
    "AandBareLinearlyDependent": "%0 and %1 are linearly dependent",
    "AandBareLinearlyIndependent": "%0 and %1 are linearly independent",
    "AandBareNotEqual": "%0 and %1 are not equal",
    "AandBareNotPerpendicular": "%0 and %1 are not perpendicular",
    "AandBareParallel": "%0 and %1 are parallel",
    "AandBarePerpendicular": "%0 and %1 are perpendicular",
    "AandBcannotBeCompared": "%0 and %1 cannot be compared",
    "AbsoluteScreenLocation": "Absolute Position on Screen",
    "AddColumn": "Add Column",
    "AddRow": "Add Row",
    "AddToolOrBoolean": "Add Tool or Boolean Variable",
    "AdoesNotLieOnB": "%0 does not lie on %1",
    "AdoesNotLieOnThePerimeterOfB": "%0 does not lie on the perimeter of %1",
    "AdoesNothaveTheSameAreaAsB": "%0 does not have the same area as %1",
    "AdoesNothaveTheSameLengthAsB": "%0 does not have the same length as %1",
    "AhasTheSameAreaAsB": "%0 has the same area as %1",
    "AhasTheSameLengthAsB": "%0 has the same length as %1",
    "AintersectsWithBOnce": "%0 intersects with %1 once",
    "AintersectsWithBTwice": "%0 intersects with %1 twice",
    "AisAnAsymptoteToB": "%0 is an asymptote to %1",
    "AisNotDefined": "%0 is not defined",
    "AisaDegenerateBranchOfB": "%0 is a degenerate branch of %1",
    "AisaTangentToB": "%0 is a tangent to %1",
    "Algebra": "Algebra",
    "AlgebraWindow": "Algebra",
    "AliesOnB": "%0 lies on %1",
    "AliesOnThePerimeterOfB": "%0 lies on the perimeter of %1",
    "AllBars": "All Bars",
    "AllViews": "All Views",
    "AllowOfflineUse": "Allow Offline Use",
    "AllowStyleBar": "Allow Style Bar",
    "Alt": "Alt",
    "AltGr": "AltG",
    "Altitude": "Altitude",
    "AlwaysTrue": "(always true)",
    "Anaglyph": "Anaglyph",
    "Angle": "Angle",
    "AngleBetween": "Angle Between:",
    "AngleBetweenAB": "Angle between %0, %1",
    "AngleBetweenAB.short": "%0 to %1",
    "AngleBetweenABC": "Angle between %0, %1, %2",
    "AngleBetweenABCofD": "Angle between %0, %1, %2 of %3",
    "AngleBisectorOfAB": "Angle bisector of %0, %1",
    "AngleBisectorOfABC": "Angle bisector of %0, %1, %2",
    "AngleOfA": "Angle of %0",
    "Angles": "Angles",
    "AnimatedGIF": "Animated GIF",
    "AnimatedGIF.Calculating": "Calculating\u2026",
    "AnimatedGIF.ErrorA": "Error: %0",
    "AnimatedGIF.Processing": "Processing\u2026",
    "AnimatedGIF.Success": "Export successful",
    "AnimatedGIFExport": "Animated GIF Export",
    "Animating": "Animation On",
    "Animation": "Animation",
    "AnimationLoop": "As Loop?",
    "AnimationSpeed": "Speed",
    "AnimationStep": "Increment",
    "ApplicationName": "GeoGebra",
    "Apply": "Apply",
    "ApplyToSelectedObjects": "Apply to selected objects",
    "Apt": "%0 pt",
    "Arc": "Arc",
    "ArcLengthOfA": "Arc Length of %0",
    "AreaOfA": "Area of %0",
    "AsymptoteToA": "Asymptote to %0",
    "Ath": "%0th",
    "Author": "Author",
    "Automatic": "Automatic",
    "AuxiliaryObject": "Auxiliary Object",
    "AuxiliaryObjects": "Auxiliary Objects",
    "AxisLabel": "Label",
    "AxisOfA": "Axis of %0",
    "AxisTicks": "Ticks",
    "AxisUnitLabel": "Unit",
    "Back": "Back",
    "BackgroundColor": "Background Color",
    "BackgroundImage": "Background Image",
    "BarA": "Bar %0",
    "Bold": "Bold",
    "Boolean": "Boolean Value",
    "BoxSize": "Clipping box size",
    "BoxSize.large": "Large",
    "BoxSize.medium": "Medium",
    "BoxSize.small": "Small",
    "Breakpoint": "Breakpoint",
    "Breakpoint.short": "BP",
    "ButNotGenerallyTrue": "(but not generally true)",
    "Button": "Button",
    "ButtonSize": "Button Size",
    "CAS": "CAS",
    "CAS.AutomaticRename": "The name %0 is already in use and has been changed to %1",
    "CASFieldHelp": "<html><body><p><b>Using the CAS View</b></p><table border=\"1\"><tr><td>Enter </td><td>Evaluate input</td></tr><tr><td>; </td><td>Suppress output</td></tr><tr><td>Ctrl + Enter </td><td>Evaluate in numeric mode</td></tr><tr><td>Alt + Enter </td><td>Check input</td></tr><tr><td>Escape</td><td>Clear input</td></tr><tr><td>$</td><td>Previous output (dynamic reference)</td></tr><tr><td>#</td><td>Previous output (static reference)</td></tr><tr><td>$3</td><td>Output of 3rd cell (dynamic reference)</td></tr><tr><td>#3</td><td>Output of 3rd cell (static reference)</td></tr><tr><td>F1</td><td>Help for current command</td></tr><tr><td>TAB</td><td>Show next matching command</td></tr></table><p><br><b>Auto-Completion of Commands</b><br>After typing the first two letters of a command<br>GeoGebra will complete the command for you.</p><table border=\"1\"><tr><td>Enter </td><td>Accept proposed command</td></tr><tr><td>Another letter</td><td>Adapts proposed command</td></tr></table></body></html>",
    "CASInitializing": "CAS Initializing",
    "CASShowRationalExponentsAsRoots": "Show Rational Exponents as Roots",
    "CASTimedOut": "CAS timed out",
    "CASViewOnly": "Command \"%0\" is available only in the CAS view",
    "Cancel": "Cancel",
    "Caption": "Caption",
    "CartesianCoords": "Cartesian Coordinates",
    "CartesianCoords3D": "3D Cartesian Coordinates",
    "CasCell": "CAS Cell",
    "CasTimeout": "CAS Timeout (in seconds)",
    "CellAisNotDefined": "Cell %0 is not defined",
    "CenterOfA": "Center of %0",
    "CentroidOfA": "Centroid of %0",
    "CheckOutTutorial": "Check out our %0 tutorial!",
    "CheckedNumerically": "(checked numerically)",
    "ChiSquaredContribution": "\u03a7\xb2 Contribution",
    "ChooseColor": "Choose a color",
    "ChooseObject": "Choose one object",
    "Circle": "Circle",
    "CircleEquation": "(x - m)\xb2 + (y - n)\xb2 = r\xb2",
    "CircleOfAxisAThroughB": "Circle of axis %0 through %1",
    "CircleThroughABC": "Circle through %0, %1, %2",
    "CircleThroughAwithCenterB": "Circle through %0 with center %1",
    "CircleWithCenterARadiusBParallelToC": "Circle with center %0 and radius %1, parallel to %2",
    "CircleWithCenterAThroughBAxisParallelToC": "Circle with center %0 through %1, axis parallel to %2",
    "CircleWithCenterAThroughBParallelToC": "Circle with center %0 through %1, parallel to %2",
    "CircleWithCenterAandRadiusB": "Circle with center %0 and radius %1",
    "CircleWithCenterAandRadiusBAxisParallelToC": "Circle with center %0 and radius %1, axis parallel to %2",
    "CircumferenceOfA": "Circumference of %0",
    "ClickHereToGetHelp": "Click here to get help",
    "Clipboard.Blackboard": "Clipboard: Blackboard",
    "Clipboard.Google": "Clipboard: Google Gadget",
    "Clipboard.HTML": "Clipboard: html",
    "Clipboard.MediaWiki": "Clipboard: MediaWiki",
    "Clipboard.Moodle": "Clipboard: Moodle",
    "Clipboard.iframe": "Clipboard: <iframe>",
    "Clipping": "Clipping",
    "CloseApplicationLoseUnsavedData": "Now you are about to close the GeoGebra application and lose all unsaved data.",
    "CollapseRows": "Collapse Rows",
    "ColorfulConstructionProtocol": "Colorful construction protocol",
    "ColumnPercent": "Column %",
    "Command": "Command",
    "CommonTangentOfCirclesAandB": "Common tangent of circles %0 and %1",
    "ComplexNumber": "Complex Number",
    "Cone": "Cone",
    "ConeWithCenterAAxisParallelToBAngleC": "Cone with center %0, axis parallel to %1, angle %2",
    "Conic": "Conic",
    "ConicFromCoeffListA": "Conic from %0",
    "ConicLinesEquation": "(a x + b y + c) (d x + e y + f) = 0",
    "ConicThroughABCDE": "Conic through %0, %1, %2, %3, %4",
    "Conics": "Conics",
    "ConstructionOrder": "Construction Order",
    "ConstructionProtocol": "Construction Protocol",
    "ConstructionProtocolButton": "Button to open construction protocol",
    "ConstructionProtocolHelp": "<html><body><p><b>Using the Construction Protocol</b></p><p><br><b>Keyboard</b></p><table border=\"1\"><tr><td>&#8593;</td><td>Previous construction step</td></tr><tr><td>&#8595;</td><td>Next construction step</td></tr><tr><td>Home</td><td>Start of construction</td></tr><tr><td>End</td><td>End of construction</td></tr><tr><td>Del</td><td>Delete construction step</td></tr></table><p><b><br>Mouse</b></p><table border=\"1\"><tr><td>Double click row</td><td>Choose construction step</td></tr><tr><td>Double click header</td><td>Start of construction</td></tr><tr><td>Drag &amp; drop row</td><td>Move construction step</td></tr><tr><td>Right click row</td><td>Context menu</td></tr></table></body></html>",
    "ConstructionProtocolNavigation": "Navigation Bar for Construction Steps",
    "Coordinates": "Coordinates",
    "CopyOfA": "Copy of %0",
    "CopyToClipboard": "Copy to Clipboard",
    "CornerPoint": "Corner",
    "CreateSliders": "Create Sliders",
    "CreateSlidersForA": "Create slider(s) for: %0",
    "CreatedWith": "Created with",
    "CreatedWithGeoGebra": "Created with GeoGebra",
    "CreatingAnimatedGIF": "Creating Animated GIF:",
    "CrossAt": "Cross at",
    "Ctrl": "Ctrl",
    "Cube": "Cube",
    "Curve": "Curve",
    "CurveCartesian": "Parametric Curve",
    "Cylinder": "Cylinder",
    "CylinderBetweenABRadiusC": "Cylinder between %0 and %1 with radius %2",
    "CylinderWithAxisARadiusB": "Cylinder with axis %0 and radius %1",
    "DataAnalysis": "Data Analysis",
    "Date": "Date",
    "Day.1": "Sunday",
    "Day.2": "Monday",
    "Day.3": "Tuesday",
    "Day.4": "Wednesday",
    "Day.5": "Thursday",
    "Day.6": "Friday",
    "Day.7": "Saturday",
    "Decoration": "Decoration",
    "Decreasing": "Decreasing",
    "Default": "Default",
    "DefaultPointStyle": "Default Point Style",
    "Defaults": "Defaults",
    "Definition": "Definition",
    "DefinitionAndValue": "Definition & Value",
    "Delete": "Delete",
    "DeleteARows": "Delete %0 rows",
    "DeleteColumnA": "Delete Column %0",
    "DeleteColumnsAtoB": "Delete Columns %0 to %1",
    "DeleteRowA": "Delete Row %0",
    "DeleteRowsAtoB": "Delete Rows %0 to %1",
    "Dependency": "Dependency",
    "DependentObjects": "Dependent Objects",
    "DepthScaleFactor": "Depth Scale Factor",
    "DerivativeOfA": "Derivative of %0",
    "Description": "Description",
    "DiameterOfAConjugateToB": "Conjugate diameter of %0 to %1",
    "Dimensions": "Dimensions",
    "DirectionOfA": "Direction of %0",
    "Directrix": "Directrix",
    "DirectrixOfA": "Directrix of %0",
    "Display": "Display",
    "DisplayPointSymbol": "Display the symbol for points",
    "DistanceAB.LaTeX": "\"\\overline{\" + %0 + %1 + \"} \\, = \\, \" + %2",
    "DistanceOfAandB": "Distance of %0 and %1",
    "Dodecahedron": "Dodecahedron",
    "DoubleClickToOpen": "Double Click Opens GeoGebra Window",
    "DoubleLine": "Double line",
    "DoubleLineEquation": "(a x + b y + c)\xb2 = 0",
    "Down": "Down",
    "DrawAsDropDownList": "Draw as drop-down list",
    "DrawingPad": "Graphics",
    "DrawingPad2": "Graphics 2",
    "DrawingPadA": "Graphics %0",
    "DrawingPadAsPSTricks": "Graphics View as PSTricks",
    "DrawingPadAsPicture": "Graphics View as Picture",
    "DrawingPagAsPGF": "Graphics View as PGF/TikZ",
    "DynamicCoordinatesOfA": "Dynamic Coordinates of %0",
    "DynamicWorksheet": "Dynamic Worksheet",
    "DynamicWorksheetAsWebpage": "Dynamic Worksheet as Webpage",
    "DynamicWorksheetExport": "Dynamic Worksheet Export (html)",
    "EccentricityOfA": "Eccentricity of %0",
    "Edit": "Edit",
    "Ellipse": "Ellipse",
    "EllipseEquation": "(x - m)\xb2 / a\xb2 + (y - n)\xb2 / b\xb2 = 1",
    "EllipseWithFociABPassingThroughC": "Ellipse with foci %0, %1 passing through %2",
    "EllipseWithFociABPassingThroughCParallelToD": "Ellipse with foci %0, %1 passing through %2 parallel to %3",
    "EllipseWithFociABandFirstAxisLengthC": "Ellipse with foci %0, %1 and first axis' length %2",
    "Ellipsoid": "Ellipsoid",
    "Email": "E-mail",
    "Embed": "Embed",
    "EmphasizeRightAngle": "Emphasize Right Angle",
    "EmptyBox": "(empty box)",
    "EmptySet": "Empty set",
    "EnableScripting": "Enable Scripting",
    "EnterPercentage": "Enter percentage",
    "Equation": "Equation",
    "ErrorAtLine": "Error at line:",
    "ErrorInJavaScript": "Error in JavaScript",
    "ErrorInJavaScriptAtLineA": "Error in JavaScript at line %0",
    "ErrorInScriptAtLineAFromObjectB": "Error in script at line %0 (called from %1)",
    "Esc": "Esc",
    "ExpectedCount": "Expected Count",
    "ExplicitConicEquation": "y = a x\xb2 + b x + c",
    "ExplicitLineEquation": "y = m x + b",
    "ExplicitLineGradient": "m",
    "ExportAnimatedGIF": "Graphics View as Animated GIF",
    "ExportAsPicture": "Export as Picture",
    "ExportAsWebpage": "Export as Webpage",
    "ExportTextAsShapes": "Export Text as Shapes",
    "ExtendedForm": "Extended form",
    "ExtraLarge": "Extra Large",
    "ExtraSmall": "Extra Small",
    "ExtraViews": "Extra Views",
    "ExtremumOfA": "Extremum of %0",
    "EyeDistance": "Distance from screen",
    "EyeSeparation": "Eye Separation",
    "EyesSeparation": "Distance between eyes",
    "Fading": "Fading",
    "File.HTML": "File: html",
    "File.SCORM": "File: SCORM",
    "File.epub": "File: epub",
    "File.iBook": "File: iBook",
    "Filename": "Filename",
    "Filling": "Filling",
    "Finish": "Finish",
    "FirstAxisLengthOfA": "Length of %0's semi-major axis",
    "FirstAxisOfA": "Major axis of %0",
    "FixCheckbox": "Fix Checkbox",
    "FixObject": "Fix Object",
    "FixedSize": "Fixed Size",
    "FocusOfA": "Focus of %0",
    "ForceGnuplotPgf": "Use Gnuplot to plot functions",
    "Format": "Format",
    "Fraction": "Fraction",
    "FractionTotal": "Total Fraction",
    "FreeObjects": "Free Objects",
    "FreehandFunctionOnIntervalAB": "Freehand function on interval [%0, %1]",
    "Function": "Function",
    "Function.acos": "acos",
    "Function.acosh": "acosh",
    "Function.asin": "asin",
    "Function.asinh": "asinh",
    "Function.atan": "atan",
    "Function.atanh": "atanh",
    "Function.conjugate": "conjugate",
    "Function.cos": "cos",
    "Function.cosh": "cosh",
    "Function.cot": "cot",
    "Function.coth": "coth",
    "Function.csc": "csc",
    "Function.csch": "csch",
    "Function.fractionalPart": "fractionalPart",
    "Function.freehand": "freehand",
    "Function.imaginary": "imaginary",
    "Function.nroot": "nroot",
    "Function.real": "real",
    "Function.sec": "sec",
    "Function.sech": "sech",
    "Function.sin": "sin",
    "Function.sinh": "sinh",
    "Function.tan": "tan",
    "Function.tanh": "tanh",
    "FunctionAonIntervalBC": "Function %0 on interval [%1, %2]",
    "FunctionNVar": "Function",
    "General": "General",
    "GenerallyTrue": "(generally true)",
    "GenerallyTrueAcondB": "It is generally true that: %0 under the condition: %1",
    "GeneratePgf": "Generate PGF/TikZ code",
    "GeneratePstricks": "Generate code",
    "GeoGebraProperties": "GeoGebra Properties",
    "GeometricObjects": "Geometric objects",
    "Glasses": "Glasses",
    "GlobalJavaScript": "Global JavaScript",
    "GoToDownloadPage": "Go to download page",
    "GraphicsView3D": "3D Graphics",
    "GraphicsViewAsAsymptote": "Graphics View as Asymptote",
    "GraphicsViewForPlaneA": "View of %0",
    "GraphingCalculator": "Graphing Calculator",
    "GrayScale": "Gray-scale",
    "GreekCharacterA": "Greek character: %0",
    "GridType": "Grid Type",
    "Height": "Height",
    "HeightOfA": "Height of %0",
    "Hexagon": "Hexagon",
    "Hide": "Hide",
    "Hint": "Hint",
    "Home": "Home",
    "HorizontalSplit": "Horizontal Splitting",
    "Hyperbola": "Hyperbola",
    "HyperbolaEquation": "(x - m)\xb2 / a\xb2 - (y - n)\xb2 / b\xb2 = 1",
    "HyperbolaWithFociABPassingThroughC": "Hyperbola with foci %0, %1 passing through %2",
    "HyperbolaWithFociABandFirstAxisLengthC": "Hyperbola with foci %0, %1 and first axis' length %2",
    "HyperbolicCylinder": "Hyperbolic Cylinder",
    "HyperbolicParaboloid": "Hyperbolic Paraboloid",
    "HyperboloidOneSheet": "Hyperboloid of one sheet",
    "HyperboloidTwoSheets": "Hyperboloid of two sheets",
    "Icosahedron": "Icosahedron",
    "IgnoreDocumentLayout": "Ignore Document Layout",
    "IllegalArgumentAinCustomToolB": "Illegal Argument %0 in Custom Tool %1",
    "Image": "Image",
    "ImplicitConicEquation": "a x\xb2 + b xy + c y\xb2 + d x + e y = f",
    "ImplicitLineEquation": "a x + b y = c",
    "ImplicitPoly": "Implicit Curve",
    "ImplicitSurface": "Implicit Surface",
    "IncircleOfTriangleABC": "Incircle of triangle %0%1%2",
    "Increasing": "Increasing",
    "IncreasingOnce": "Increasing (Once)",
    "Inequality": "Inequality",
    "InfiniteConePointAVectorBNumberC": "Cone with center %0, axis parallel to %1, angle %2",
    "InfiniteConePointsABNumberC": "Cone with center %0, axis through %1, angle %2",
    "InfiniteCylinderPointAVectorBNumberC": "Cylinder with axis through %0 and parallel to %1, radius %2",
    "InfiniteCylinderPointsABNumberC": "Cylinder with axis through %0 and %1, radius %2",
    "InflectionPointofA": "Inflection point of %0",
    "InputFieldHelp": "<html><body><p><b>Using the Input Bar</b></p><table border=\"1\"><tr><td>Enter </td><td>Execute input</td></tr><tr><td>Escape</td><td>Clear input bar</td></tr><tr><td>&#8593;</td><td>Previous input</td></tr><tr><td>&#8595;</td><td>Next input</td></tr><tr><td>F1</td><td>Help for current command</td></tr><tr><td>TAB</td><td>Show next matching command</td></tr></table><p><br><b>Auto-Completion of Commands</b><br>After typing the first two letters of a command<br>GeoGebra will complete the command for you.</p><table border=\"1\"><tr><td>Enter </td><td>Accept proposed command</td></tr><tr><td>Another letter</td><td>Adapts proposed command</td></tr></table></body></html>",
    "InputForm": "Input form",
    "InputLabel": "Input",
    "InputLabelToolTip": "Type a command",
    "Insert": "Insert",
    "InsertCommand": "Insert command",
    "InsertPictureOfAllOpenViews": "Insert picture of all open views",
    "InsertPictureOfConstruction": "Insert picture of Graphics View",
    "Integer": "Integer",
    "IntegralOfA": "Integral of %0",
    "IntegralOfAfromBtoC": "Integral of %0 from %1 to %2",
    "Interpolate": "Draw with interpolation",
    "IntersectingLines": "Intersecting lines",
    "IntersectionCircleOfAB": "Intersection circle of %0, %1",
    "IntersectionCurveOfAB": "Intersection curve of %0, %1",
    "IntersectionLineOfAB": "Intersection line of %0, %1",
    "IntersectionOfAandB": "Intersection of %0 and %1",
    "IntersectionPointOfAB": "Intersection point of %0, %1",
    "IntersectionPointOfABNearC": "Intersection point of %0, %1 near to point %2",
    "IntersectionPointOfABWithInitialValueC": "Intersection point of %0, %1 with initial value %2",
    "Interval": "Interval",
    "InverseFilling": "Inverse Filling",
    "Italic": "Italic",
    "JavaScript": "JavaScript",
    "Keyboard": "Keyboard",
    "Keyboard.row1": "qQwWeErRtTyYuUiIoOpP",
    "Keyboard.row2": "aAsSdDfFgGhHjJkKlL''",
    "Keyboard.row3": "zZxXcCvVbBnNmM",
    "LaTeXFormula": "LaTeX formula",
    "LaTeXHelp": "Latex help",
    "LabelStyle": "Label Style",
    "Large": "Large",
    "LatexFontSize": "Document font size:",
    "Layer": "Layer",
    "LayerA": "Layer %0",
    "Length": "Length",
    "LengthOfA": "Length of %0",
    "Lengths": "Lengths",
    "LevelOfDetail": "Level of Detail",
    "Line": "Line",
    "LineBisectorAB": "Perpendicular Bisector of %0%1",
    "LineBisectorOfA": "Perpendicular Bisector of %0",
    "LinePerpendicularToAandB": "Line perpendicular to %0 and %1",
    "LineStyle": "Line Style",
    "LineThroughAB": "Line through %0, %1",
    "LineThroughAParallelToB": "Line through %0 parallel to %1",
    "LineThroughAParallelToBPerpendicularToC": "Line through %0 parallel to %1 and perpendicular to %2",
    "LineThroughAPerpendicularToB": "Line through %0 perpendicular to %1",
    "LineThroughAPerpendicularToBAndC": "Line through %0 perpendicular to %1 and %2",
    "LineThroughAPerpendicularToBParallelToC": "Line through %0 perpendicular to %1 and parallel to %2",
    "LineThroughAPerpendicularToBinSpace": "Line in 3D space through %0, perpendicular to and intersecting %1",
    "LineThroughAwithDirectionB": "Line through %0 with direction %1",
    "LinearEccentricityOfA": "Linear eccentricity of %0",
    "LinearInequality": "Linear inequality",
    "Lines": "Lines",
    "Link": "Link",
    "LinkedObject": "Linked Object",
    "List": "List",
    "LocalizedDigits": "Use Localized Digits",
    "LocalizedLabels": "Use Localized Point Names",
    "LockObject": "Lock Object",
    "Locus": "Locus",
    "LoggingError": "Problem starting logging",
    "Medium": "Medium",
    "Midpoint": "Midpoint",
    "MidpointOfA": "Midpoint of %0",
    "MidpointOfAB": "Midpoint of %0, %1",
    "Miscellaneous": "Miscellaneous",
    "Monochrome": "Monochrome",
    "Month.1": "January",
    "Month.10": "October",
    "Month.11": "November",
    "Month.12": "December",
    "Month.2": "February",
    "Month.3": "March",
    "Month.4": "April",
    "Month.5": "May",
    "Month.6": "June",
    "Month.7": "July",
    "Month.8": "August",
    "Month.9": "September",
    "More": "More",
    "MultivariableFunction": "Multivariable Function",
    "Name": "Name",
    "Name.ImplicitSurface": "Implicit Surface",
    "Name.button": "button",
    "Name.edge": "edge",
    "Name.face": "face",
    "Name.graph": "graph",
    "Name.list": "list",
    "Name.locus": "loc",
    "Name.matrix": "matrix",
    "Name.numericalIntegral": "numericalIntegral",
    "Name.penStroke": "stroke",
    "Name.picture": "pic",
    "Name.polygon": "poly",
    "Name.slopefield": "slopefield",
    "Name.text": "text",
    "Name.textfield": "InputBox",
    "Name.turtle": "turtle",
    "NameAndValue": "Name & Value",
    "Net": "Net",
    "NewExpression": "New expression",
    "NewNameForA": "New name for %0",
    "NewToGeoGebra": "New to GeoGebra?",
    "NewerVersionA": "A newer version of GeoGebra is available.\nWould you like to get GeoGebra %0 now?",
    "Next": "Next",
    "NextCell": "Next Cell",
    "No.": "No.",
    "NoJavaMessage": "This is a Java Applet created using GeoGebra from www.geogebra.org - it looks like you don't have Java installed, please go to www.java.com",
    "NoWebGL": "Please enable WebGL in your browser",
    "NotAvailable": "Not Available",
    "NotIncluded": "not included",
    "Numeric": "Number",
    "NumericObjects": "Numeric objects",
    "OK": "OK",
    "ObjectType": "Object Type",
    "Objects": "Objects",
    "Oblique": "Oblique",
    "ObliqueProjection": "Oblique Projection",
    "ObservedCount": "Observed Count",
    "Octahedron": "Octahedron",
    "Off": "Off",
    "OldExpression": "Old expression",
    "OmitGreen": "Omit Green",
    "On": "On",
    "OnClick": "On Click",
    "OnMouseOver": "On Mouse-Over",
    "OnUpdate": "On Update",
    "Open": "Open",
    "OpenButton": "Button to Open GeoGebra Window",
    "Orthographic": "Orthographic",
    "Oscillating": "Oscillating",
    "OutlineColor": "Outline Color",
    "OverwriteFile": "Do you want to overwrite this file?",
    "PGFExport.Grayscale": "Grayscale",
    "Parabola": "Parabola",
    "ParabolaEquation": "y\xb2 = or x\xb2 =",
    "ParabolaWithFocusAandDirectrixB": "Parabola with focus %0 and directrix %1",
    "ParabolicCylinder": "Parabolic cylinder",
    "Paraboloid": "Paraboloid",
    "ParallelLines": "Parallel lines",
    "ParallelProjection": "Parallel Projection",
    "ParameterOfA": "Parameter of %0",
    "ParametricDerivativeOfA": "Parametric Derivative of %0",
    "ParametricForm": "Parametric Form",
    "Pause": "Pause",
    "PenStroke": "PenStroke",
    "Pentagon": "Pentagon",
    "PerimeterOfA": "Perimeter of %0",
    "PerpendicularBisectorOfAParallelToB": "Perpendicular Bisector of %0 Parallel to %1",
    "PerpendicularBisectorOfAPerpendicularToB": "Perpendicular Bisector of %0 Perpendicular to %1",
    "Perspective": "Perspective",
    "PerspectiveName": "Name of Perspective",
    "PerspectiveProjection": "Perspective projection",
    "Picture": "Picture",
    "PictureHeight": "Picture height",
    "PictureWidth": "Picture width",
    "PiecewiseFunction": "Piecewise function",
    "Plane": "Plane",
    "PlaneA": "plane %0",
    "PlaneContainingA": "Plane containing %0",
    "PlaneFromA": "plane created from %0",
    "PlaneThroughAB": "Plane through %0, %1",
    "PlaneThroughABC": "Plane through %0, %1, %2",
    "PlaneThroughAParallelToB": "Plane through %0 parallel to %1",
    "PlaneThroughAPerpendicularToB": "Plane through %0 perpendicular to %1",
    "Play": "Play",
    "PlayButton": "Play button",
    "PleaseWait": "Please wait\u2026",
    "Point": "Point",
    "PointAplusB": "Point %0 + %1",
    "PointDep": "Dependent",
    "PointFree": "Free",
    "PointInA": "Point in %0",
    "PointInside": "In Region",
    "PointOn": "Point on",
    "PointOnA": "Point on %0",
    "PointOnAClosestToB": "Point on %0 closest to %1",
    "PointOnPath": "On Path",
    "PointSize": "Point Size",
    "Points": "Vertices",
    "PolarCoords": "Polar Coordinates",
    "PolarLineOfARelativeToB": "Polar line of %0 relative to %1",
    "Polarized": "Polarized",
    "PoleOfLineARelativeToB": "Pole of Line %0 Relative to %1",
    "PolyLine": "Polyline",
    "Polygon": "Polygon",
    "PolygonA": "Polygon %0",
    "PolygonAParallelToB": "Polygon %0 parallel to %1",
    "PositiveDirectionOnly": "Positive Direction Only",
    "PositiveValuesFollowTheView": "Positive values follow the view",
    "PossiblyGenerallyTrue": "(possibly generally true)",
    "Preferences": "Preferences",
    "PreferencesOfA": "Preferences - %0",
    "PreviewUnavailable": "Preview Unavailable",
    "Prism": "Prism",
    "ProbabilityCalculator": "Probability Calculator",
    "Projection": "Projection",
    "Properties": "Object Properties",
    "PropertiesOfA": "Properties - %0",
    "Pyramid": "Pyramid",
    "Quadrangle": "Quadrilateral",
    "Quadric": "Quadric",
    "Quadrilateral": "Quadrilateral",
    "Quality": "Quality",
    "Question": "Question",
    "Radius": "Radius",
    "RadiusOfA": "Radius of %0",
    "Random": "Random",
    "Range": "Range",
    "Ray": "Ray",
    "RayThroughAB": "Ray through %0, %1",
    "RayThroughAWithDirectionB": "Ray through %0 with direction %1",
    "RealSense.DownloadRuntimes": "An updated module for the Intel\xae RealSense\u2122 Camera needs to be installed",
    "RealSense.DownloadUpdate": "We advise that you upgrade to the latest F200 Camera DCM drivers here:",
    "RealSense.NotUpToDate": "Your Intel\xae RealSense\u2122 installation is not up to date (%0)",
    "RealSense.UpdatedRuntimes": "New modules for the Intel\xae RealSense\u2122 Camera are now installed",
    "RealSenseNotUpToDate1": "Your Intel\xae RealSense\u2122 Camera drivers are not up to date, we'll download and install new ones.",
    "RealSenseNotUpToDate2": "This may take a few minutes, you will be notified when it's finished.",
    "RealSenseUpdated1": "Your Intel\xae RealSense\u2122 Camera drivers are now up to date.",
    "RealSenseUpdated2": "Please restart GeoGebra to use the Camera.",
    "ReallySignOut": "Do you really want to sign out?",
    "RecentlyUsed": "Recently used",
    "Redefine": "Redefine",
    "Remove": "Remove",
    "RemoveColumn": "Remove Column",
    "RemoveRow": "Remove Row",
    "Rename": "Rename",
    "Repeat": "Repeat",
    "ResizeAngle": "Automatically resize angle",
    "ResolutionInDPI": "Resolution in dpi",
    "Result": "Result",
    "ReverseMouseWheel": "Reverse mouse wheel",
    "RootOfA": "Root of %0",
    "RootOfAWithInitialValueB": "Root of %0 with initial value %1",
    "RootOfAonIntervalBC": "Root of %0 on interval [%1, %2]",
    "RowPercent": "Row %",
    "SMARTBoardConnectionError": "Could not connect to a SMART board. Are the drivers installed?",
    "SMARTBoardDLLErrorA": "Could not find necessary file \"%0\"",
    "ScaleInCentimeter": "Scale in cm",
    "Script": "GeoGebra Script",
    "SearchCommands": "Search Commands",
    "SearchInA": "Search in %0",
    "SecondAxisLengthOfA": "Length of %0's semi-minor axis",
    "SecondAxisOfA": "Minor axis of %0",
    "Sector": "Sector",
    "Segment": "Segment",
    "SegmentAB": "Segment [%0, %1]",
    "SegmentABofC": "Segment [%0, %1] of %2",
    "SelectedBar": "Selected Bar",
    "Selection": "Selection",
    "SelectionAllowed": "Selection Allowed",
    "Semicircle": "Semicircle",
    "SemicircleThroughAandB": "Semicircle through %0 and %1",
    "SendFeedback": "Send Feedback",
    "SeveralVersionsOfA": "Note that there are several versions of: %0",
    "SharedByA": "Shared by: %0",
    "Show": "Show",
    "ShowAas2DView": "Create 2D view from %0",
    "ShowAllObjects": "Show All Objects",
    "ShowAutomatically": "Show Automatically",
    "ShowAxes": "Show Axes",
    "ShowAxisNumbers": "Show Numbers",
    "ShowClipping": "Show clipping",
    "ShowCoordinatesIn3D": "Show coordinates in 3D",
    "ShowCoordinatesProjectedOntoA": "Show coordinates projected onto %0",
    "ShowCoordinatesProjectedOntoXYPlane": "Show coordinates projected onto xy-plane",
    "ShowDataSource": "Show Data Source",
    "ShowGrid": "Show Grid",
    "ShowInterval": "Show Interval",
    "ShowLabel": "Show Label",
    "ShowObject": "Show Object",
    "ShowOnXAxis": "Show on x-axis",
    "ShowOnlineHelp": "Show Online Help",
    "ShowOnlyBreakpoints": "Show Only Breakpoints",
    "ShowOutliers": "Show Outliers",
    "ShowSliderInAlgebraView": "Show slider in Algebra View",
    "ShowTitleBar": "Show Title Bar",
    "ShowTrace": "Show Trace",
    "ShowTrimmed": "Show trimmed intersection lines",
    "ShowValueIn3D": "Show value in 3D",
    "ShowValueProjectedOntoXYPlane": "Show value projected onto xy-plane",
    "ShowxAxis": "Show xAxis",
    "ShowyAxis": "Show yAxis",
    "ShowzAxis": "Show zAxis",
    "ShutDownGreen": "Omit Green Channel",
    "Shutter": "Shutter",
    "SignInInProgress": "Signing in",
    "SignInSuccessful": "Sign in successful",
    "SignInToGGT": "Sign in to GeoGebraTube",
    "SignedInAsA": "Signed in as %0",
    "SimpleFormulas": "Simple Formulas",
    "Size": "Size",
    "SizeInPixels": "Size in pixels",
    "Slider": "Slider",
    "SlopeOfA": "Slope of %0",
    "Small": "Small",
    "SortBy": "Sort by",
    "SortObjectsBy": "Sort Objects By\u2026",
    "Speed": "Speed",
    "Sphere": "Sphere",
    "SphereThroughAwithCenterB": "Sphere through %0 with center %1",
    "SphereWithCenterAandRadiusB": "Sphere with center %0 and radius %1",
    "Spherical": "Spherical Coordinates",
    "Spreadsheet": "Spreadsheet",
    "StandardObject": "Standard Object",
    "StandardView": "Standard View",
    "StartingPoint": "Starting Point",
    "StemPlot.KeyAMeansB": "Key: %0 means %1",
    "StemPlot.high": "high",
    "StemPlot.low": "low",
    "StickToEdge": "Stick to Edge",
    "StopScript": "Stop Script",
    "Substitute": "Substitute",
    "SubstituteForAinB": "Substitute for %0 in %1",
    "SubstituteSimplify": "Substitute & Simplify",
    "Surface": "Surface",
    "Syntax": "Syntax",
    "SyntaxErrorAisNotAList": "Syntax Error: %0 is not a list",
    "SystemInformation": "System Information",
    "SystemInformationMessage": "System Information successfully copied to the clipboard",
    "TangentToAParallelToB": "Tangent to %0 parallel to %1",
    "TangentToAThroughB": "Tangent to %0 through %1",
    "TangentToAatB": "Tangent to %0 at %1",
    "Tetrahedron": "Tetrahedron",
    "Text": "Text",
    "TextAfterConstruction": "Text below the construction",
    "TextBeforeConstruction": "Text above the construction",
    "TextField": "Input Box",
    "TextfieldLength": "Input Box Length",
    "ThanksForSigningIn": "Thank you for signing in to GeoGebraTube!",
    "Thickness": "Line Thickness",
    "TickDistance": "Distance",
    "TimeBetweenFrames": "Time between Frames",
    "Title": "Title",
    "TitleExportPgf": "GeoGebra to PGF Export",
    "TitleExportPstricks": "GeoGebra to PSTricks Export",
    "ToggleStyleBar": "Toggle Style Bar",
    "Tool.DontReplace": "Don't Replace",
    "Tool.NotCompatible": "Sorry, the output(s) of this Tool are not compatible with the old Tool - please choose a different name.",
    "Tool.Replace": "Replace",
    "Tool.ReplaceQuestion": "Do you really want to replace the existing tool \"%0\"?",
    "ToolbarIcon": "Toolbar Icon",
    "ToolbarIconsConstructionProtocolExport": "Display Toolbar Icons",
    "TooltipLanguage": "Tooltip Language",
    "TooltipTimeout": "Tooltip Timeout (in seconds)",
    "Tooltips": "Tooltips",
    "Total": "Total",
    "TotalPercent": "Total %",
    "TraceMode": "Trace:",
    "TraceOff": "Trace Off",
    "TraceOn": "Trace On",
    "TraceToSpreadsheet": "Trace to Spreadsheet",
    "TranslationOfAbyB": "Translation of %0 by %1",
    "TranslationOfAtoB": "Translation of %0 to %1",
    "TreeModeDependency": "Sort Objects by Dependency",
    "TreeModeLayer": "Sort Objects by Layer",
    "TreeModeType": "Sort Objects by Type",
    "TreeModeView": "Sort Objects by View",
    "Triangle": "Triangle",
    "TriangleABCnonDegenerate": "Triangle %0 is non-degenerate",
    "Turtle": "Turtle",
    "UncollapseRows": "Uncollapse Rows",
    "Undefined": "undefined",
    "UnderCertainConditionsA": "Under certain conditions: %0",
    "UnitVectorOfA": "Unit vector of %0",
    "UnitVectorPerpendicularToA": "Unit vector perpendicular to %0",
    "UntitledA": "Untitled%0",
    "UntitledConstruction": "Untitled Construction",
    "Up": "Up",
    "Upload": "Upload",
    "UploadError": "Could not access GeoGebraTube. Abort Upload. (Error Code: %0)",
    "UploadPrepare": "Preparing Upload",
    "UseClipping": "Use clipping",
    "UseJavaFontsForLaTeX": "Use Java fonts for LaTeX texts",
    "UseLighting": "Use Lighting",
    "Value": "Value",
    "ValueOfA": "Value of %0",
    "ValuesOfA": "Values of %0",
    "Vector": "Vector",
    "VectorPerpendicularToA": "Vector perpendicular to %0",
    "Vectors": "Vectors",
    "VertexOfA": "Vertex of %0",
    "VeryLarge": "Very Large",
    "VerySmall": "Very Small",
    "ViewCloseExtraWindow": "Show View in Main Window",
    "ViewOpenExtraWindow": "Show View in New Window",
    "VirtualKeyboard": "Virtual Keyboard",
    "VirtualKeyboardLanguage": "Virtual Keyboard Language",
    "VolumeOfA": "Volume of %0",
    "Width": "Width",
    "WindowOpened": "Window opened",
    "XMLTagANotFound": "Invalid file: XML tag %0 not found",
    "XUnits": "X units (cm)",
    "YAxisVertical": "y-axis is vertical",
    "YUnits": "Y units (cm)",
    "ZoomIn": "Zoom in",
    "ZoomOut": "Zoom out",
    "allowOutlyingIntersections": "Allow Outlying Intersections",
    "allowReflexAngle": "Allow Reflex Angle",
    "back": "Back",
    "cartesian": "Cartesian",
    "clockwise": "clockwise",
    "counterClockwise": "counter clockwise",
    "dependent": "dependent",
    "emf": "Enhanced Metafile",
    "eps": "Encapsulated Postscript",
    "equal": "equal",
    "firstAxisLength": "first axis' length",
    "fixed": "Fixed",
    "fncInspector.Curvature": "Curvature",
    "fncInspector.Derivative": "Derivative",
    "fncInspector.Derivative2": "2nd Derivative",
    "fncInspector.Difference": "Difference",
    "fncInspector.Interval": "Interval",
    "fncInspector.MultipleRoots": "Multiple Roots",
    "fncInspector.NoRoots": "No Roots",
    "fncInspector.Points": "Points",
    "fncInspector.Property": "Property",
    "fncInspector.ShowArea": "Show Area",
    "fncInspector.Value": "Value",
    "fncInspector.addColumn": "Add a column",
    "fncInspector.removeColumn": "Remove last column",
    "fncInspector.showOscCircle": "Show osculating circle",
    "fncInspector.showTable": "Show table of points",
    "fncInspector.showTangent": "Show tangent line",
    "fncInspector.showXYLines": "Show x,y position lines",
    "fncInspector.step": "Step size for x values",
    "forceReflexAngle": "Force Reflex Angle",
    "forward": "forward",
    "free": "free",
    "horizontal": "Horizontal",
    "html": "Webpage",
    "jpg": "JPG Format",
    "materials": "Materials",
    "max": "Max",
    "min": "Min",
    "off": "off",
    "otherwise": "otherwise",
    "parallel": "parallel",
    "pdf": "Portable Document Format",
    "phone_change_visibility": "Change Visibility",
    "phone_change_visibility_text": "If you share this private material, its visibility status will be changed to \"Shared with Link\".",
    "png": "Portable Network Graphics",
    "polar": "polar",
    "resetConstruction": "Reset construction",
    "share_message": "Message",
    "share_message_text": "Enter a short personal message",
    "share_recipient": "Recipient",
    "share_to": "To",
    "space": "space",
    "stylebar.Align": "Set horizontal alignment",
    "stylebar.AlignCenter": "Center",
    "stylebar.AlignLeft": "Align Left",
    "stylebar.AlignRight": "Align Right",
    "stylebar.Axes": "Show or hide the axes",
    "stylebar.BgColor": "Set background color",
    "stylebar.Bold": "Set font style to bold",
    "stylebar.Border": "Set border",
    "stylebar.Bracket": "Set bracket style",
    "stylebar.Caption": "Set caption style",
    "stylebar.Capture": "Set point capture style",
    "stylebar.Clipping": "Toggle Clipping Box",
    "stylebar.Color": "Set color",
    "stylebar.ColorTransparency": "Set Color and Transparency",
    "stylebar.CopyVisualStyle": "Copy visual style",
    "stylebar.Eraser": "Erase pen stroke",
    "stylebar.GlassesProjection": "Projection for glasses",
    "stylebar.Grid": "Show or hide the grid",
    "stylebar.Hidden": "Hidden",
    "stylebar.HorizontalLine": "Hide or show horizontal lines",
    "stylebar.Italic": "Set font style to italic",
    "stylebar.Label": "Set label style",
    "stylebar.LineStyle": "Set line style",
    "stylebar.ObliqueProjection": "Oblique projection",
    "stylebar.OrthographicProjection": "Orthographic Projection",
    "stylebar.ParallelProjection": "Parallel projection",
    "stylebar.Pen": "Draw with pen",
    "stylebar.PerspectiveProjection": "Perspective projection",
    "stylebar.PointStyle": "Set point style",
    "stylebar.RotateView": "Start or stop rotating the view",
    "stylebar.TextColor": "Set text color",
    "stylebar.TextSize": "Set text size",
    "stylebar.VerticalLine": "Hide or show vertical lines",
    "stylebar.ViewDefault": "Back to default view",
    "stylebar.ViewDefaultRotate": "Rotate back to default view",
    "stylebar.ViewDirection": "View Direction",
    "stylebar.ViewProjection": "Choose type of projection",
    "stylebar.ViewXY": "View towards xOy plane",
    "stylebar.ViewXZ": "View towards xOz plane",
    "stylebar.ViewYZ": "View towards yOz plane",
    "stylebar.xOyPlane": "Show or hide xOy plane",
    "svg": "Scalable Vector Graphics",
    "unequal": "unequal",
    "units": "unit(s)",
    "vertical": "Vertical",
    "xAxis": "xAxis",
    "xOyPlane": "xOyPlane",
    "xmax": "x Max",
    "xmin": "x Min",
    "xstep": "X Step",
    "yAxis": "yAxis",
    "ymax": "y Max",
    "ymin": "y Min",
    "ystep": "Y Step",
    "zAxis": "zAxis",
}


/***********************************************
 * Translations for symbols
 ***********************************************/

__GGB__keysVar.en.symbols = {
    "S.1": "",
    "S.10": "",
    "S.11": "",
    "S.12": "",
    "S.13": "",
    "S.14": "",
    "S.15": "",
    "S.16": "",
    "S.17": "",
    "S.18": "",
    "S.19": "",
    "S.2": "",
    "S.3": "",
    "S.4": "",
    "S.5": "",
    "S.6": "",
    "S.7": "",
    "S.8": "",
    "S.9": "",
    "T.1": "",
    "T.10": "",
    "T.11": "",
    "T.12": "",
    "T.13": "",
    "T.14": "",
    "T.15": "",
    "T.16": "",
    "T.17": "",
    "T.18": "",
    "T.19": "",
    "T.2": "",
    "T.3": "",
    "T.4": "",
    "T.5": "",
    "T.6": "",
    "T.7": "",
    "T.8": "",
    "T.9": "",
}
</script><script language="javascript" id="zipJs" class="ggw_resource">/*
 Copyright (c) 2012 Gildas Lormeau. All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice,
 this list of conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright
 notice, this list of conditions and the following disclaimer in
 the documentation and/or other materials provided with the distribution.

 3. The names of the authors may not be used to endorse or promote products
 derived from this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,
 INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,
 INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
 OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

(function(obj) {

	var ERR_BAD_FORMAT = "File format is not recognized.";
	var ERR_ENCRYPTED = "File contains encrypted entry.";
	var ERR_ZIP64 = "File is using Zip64 (4gb+ file size).";
	var ERR_READ = "Error while reading zip file.";
	var ERR_WRITE = "Error while writing zip file.";
	var ERR_WRITE_DATA = "Error while writing file data.";
	var ERR_READ_DATA = "Error while reading file data.";
	var ERR_DUPLICATED_NAME = "File already exists.";
	var ERR_HTTP_RANGE = "HTTP Range not supported.";
	var CHUNK_SIZE = 512 * 1024;

	var INFLATE_JS = "inflate.js";
	var DEFLATE_JS = "deflate.js";

	var BlobBuilder = obj.WebKitBlobBuilder || obj.MozBlobBuilder || obj.MSBlobBuilder || obj.BlobBuilder;

	var appendABViewSupported;

	function isAppendABViewSupported() {
		if (typeof appendABViewSupported == "undefined") {
			var blobBuilder;
			blobBuilder = new BlobBuilder();
			blobBuilder.append(getDataHelper(0).view);
			appendABViewSupported = blobBuilder.getBlob().size == 0;
		}
		return appendABViewSupported;
	}

	function Crc32() {
		var crc = -1, that = this;
		that.append = function(data) {
			var offset, table = that.table;
			for (offset = 0; offset < data.length; offset++)
				crc = (crc >>> 8) ^ table[(crc ^ data[offset]) & 0xFF];
		};
		that.get = function() {
			return ~crc;
		};
	}
	Crc32.prototype.table = (function() {
		var i, j, t, table = [];
		for (i = 0; i < 256; i++) {
			t = i;
			for (j = 0; j < 8; j++)
				if (t & 1)
					t = (t >>> 1) ^ 0xEDB88320;
				else
					t = t >>> 1;
			table[i] = t;
		}
		return table;
	})();

	function blobSlice(blob, index, length) {
		if (blob.slice)
			return blob.slice(index, index + length);
		else if (blob.webkitSlice)
			return blob.webkitSlice(index, index + length);
		else if (blob.mozSlice)
			return blob.mozSlice(index, index + length);
		else if (blob.msSlice)
			return blob.msSlice(index, index + length);
	}

	function getDataHelper(byteLength, bytes) {
		var dataBuffer, dataArray;
		dataBuffer = new ArrayBuffer(byteLength);
		dataArray = new Uint8Array(dataBuffer);
		if (bytes)
			dataArray.set(bytes, 0);
		return {
			buffer : dataBuffer,
			array : dataArray,
			view : new DataView(dataBuffer)
		};
	}

	// Readers
	function Reader() {
	}

	function TextReader(text) {
		var that = this, blobReader;

		function init(callback, onerror) {
			var blobBuilder = new BlobBuilder();
			blobBuilder.append(text);
			blobReader = new BlobReader(blobBuilder.getBlob("text/plain"));
			blobReader.init(function() {
				that.size = blobReader.size;
				callback();
			}, onerror);
		}

		function readUint8Array(index, length, callback, onerror) {
			blobReader.readUint8Array(index, length, callback, onerror);
		}

		that.size = 0;
		that.init = init;
		that.readUint8Array = readUint8Array;
	}
	TextReader.prototype = new Reader();
	TextReader.prototype.constructor = TextReader;

	function Data64URIReader(dataURI) {
		var that = this, dataStart;

		function init(callback) {
			var dataEnd = dataURI.length;
			while (dataURI.charAt(dataEnd - 1) == "=")
				dataEnd--;
			dataStart = dataURI.indexOf(",") + 1;
			that.size = Math.floor((dataEnd - dataStart) * 0.75);
			callback();
		}

		function readUint8Array(index, length, callback) {
			var i, data = getDataHelper(length);
			var start = Math.floor(index / 3) * 4;
			var end = Math.ceil((index + length) / 3) * 4;
			var bytes = obj.atob(dataURI.substring(start + dataStart, end + dataStart));
			var delta = index - Math.floor(start / 4) * 3;
			for (i = delta; i < delta + length; i++)
				data.array[i - delta] = bytes.charCodeAt(i);
			callback(data.array);
		}

		that.size = 0;
		that.init = init;
		that.readUint8Array = readUint8Array;
	}
	Data64URIReader.prototype = new Reader();
	Data64URIReader.prototype.constructor = Data64URIReader;

	function BlobReader(blob) {
		var that = this;

		function init(callback) {
			this.size = blob.size;
			callback();
		}

		function readUint8Array(index, length, callback, onerror) {
			var reader = new FileReader();
			reader.onload = function(e) {
				callback(new Uint8Array(e.target.result));
			};
			reader.onerror = onerror;
			reader.readAsArrayBuffer(blobSlice(blob, index, length));
		}

		that.size = 0;
		that.init = init;
		that.readUint8Array = readUint8Array;
	}
	BlobReader.prototype = new Reader();
	BlobReader.prototype.constructor = BlobReader;

	function HttpReader(url) {
		var that = this;

		function getData(callback, onerror) {
			var request;
			if (!that.data) {
				request = new XMLHttpRequest();
				request.addEventListener("load", function() {
					//Zbynek's hack
					//if (!that.size)
					//	that.size = Number(request.getResponseHeader("Content-Length"));
					that.data = new Uint8Array(request.response);
					that.size = that.data.length + 18;
					//end of hack
					callback();
				}, false);
				request.addEventListener("error", onerror, false);
				request.open("GET", url);
				request.responseType = "arraybuffer";
				request.send();
			} else
				callback();
		}

		function init(callback, onerror) {
			var request = new XMLHttpRequest();
			request.addEventListener("load", function() {
				//Zbynek's hack
				//that.size = Number(request.getResponseHeader("Content-Length"));
				that.size = request.response.length;
				//end of hack
				callback();
			}, false);
			request.addEventListener("error", onerror, false);
			//Zbynek's hack: GET instead of HEAD
			request.open("GET", url);
			request.send();
		}

		function readUint8Array(index, length, callback, onerror) {
			getData(function() {
				callback(new Uint8Array(that.data.subarray(index, index + length)));
			}, onerror);
		}

		that.size = 0;
		that.init = init;
		that.readUint8Array = readUint8Array;
	}
	HttpReader.prototype = new Reader();
	HttpReader.prototype.constructor = HttpReader;

	function HttpRangeReader(url) {
		var that = this;

		function init(callback, onerror) {
			var request = new XMLHttpRequest();
			request.addEventListener("load", function() {
				that.size = Number(request.getResponseHeader("Content-Length"));
				if (request.getResponseHeader("Accept-Ranges") == "bytes")
					callback();
				else
					onerror(ERR_HTTP_RANGE);
			}, false);
			request.addEventListener("error", onerror, false);
			request.open("HEAD", url);
			request.send();
		}

		function readArrayBuffer(index, length, callback, onerror) {
			var request = new XMLHttpRequest();
			request.open("GET", url);
			request.responseType = "arraybuffer";
			request.setRequestHeader("Range", "bytes=" + index + "-" + (index + length - 1));
			request.addEventListener("load", function() {
				callback(request.response);
			}, false);
			request.addEventListener("error", onerror, false);
			request.send();
		}

		function readUint8Array(index, length, callback, onerror) {
			readArrayBuffer(index, length, function(arraybuffer) {
				callback(new Uint8Array(arraybuffer));
			}, onerror);
		}

		that.size = 0;
		that.init = init;
		that.readUint8Array = readUint8Array;
	}
	HttpRangeReader.prototype = new Reader();
	HttpRangeReader.prototype.constructor = HttpRangeReader;

	// Writers

	function Writer() {
	}
	Writer.prototype.getData = function(callback) {
		callback(this.data);
	};

	function TextWriter() {
		var that = this, blobBuilder;

		function init(callback) {
			blobBuilder = new BlobBuilder();
			callback();
		}

		function writeUint8Array(array, callback) {
			blobBuilder.append(isAppendABViewSupported() ? array : array.buffer);
			callback();
		}

		function getData(callback, onerror) {
			var reader = new FileReader();
			reader.onload = function(e) {
				callback(e.target.result);
			};
			reader.onerror = onerror;
			reader.readAsText(blobBuilder.getBlob("text/plain"));
		}

		that.init = init;
		that.writeUint8Array = writeUint8Array;
		that.getData = getData;
	}
	TextWriter.prototype = new Writer();
	TextWriter.prototype.constructor = TextWriter;

	function Data64URIWriter(contentType) {
		var that = this, data = "", pending = "";

		function init(callback) {
			data += "data:" + (contentType || "") + ";base64,";
			callback();
		}

		function writeUint8Array(array, callback) {
			var i, delta = pending.length, dataString = pending;
			pending = "";
			for (i = 0; i < (Math.floor((delta + array.length) / 3) * 3) - delta; i++)
				dataString += String.fromCharCode(array[i]);
			for (; i < array.length; i++)
				pending += String.fromCharCode(array[i]);
			if (dataString.length > 2)
				data += obj.btoa(dataString);
			else
				pending = dataString;
			callback();
		}

		function getData(callback) {
			callback(data + obj.btoa(pending));
		}

		that.init = init;
		that.writeUint8Array = writeUint8Array;
		that.getData = getData;
	}
	Data64URIWriter.prototype = new Writer();
	Data64URIWriter.prototype.constructor = Data64URIWriter;

	function FileWriter(fileEntry, contentType) {
		var writer, that = this;

		function init(callback, onerror) {
			fileEntry.createWriter(function(fileWriter) {
				writer = fileWriter;
				callback();
			}, onerror);
		}

		function writeUint8Array(array, callback, onerror) {
			var blobBuilder = new BlobBuilder();
			blobBuilder.append(isAppendABViewSupported() ? array : array.buffer);
			writer.onwrite = function() {
				writer.onwrite = null;
				callback();
			};
			writer.onerror = onerror;
			writer.write(blobBuilder.getBlob(contentType));
		}

		function getData(callback) {
			fileEntry.file(callback);
		}

		that.init = init;
		that.writeUint8Array = writeUint8Array;
		that.getData = getData;
	}
	FileWriter.prototype = new Writer();
	FileWriter.prototype.constructor = FileWriter;

	function BlobWriter(contentType) {
		var blobBuilder, that = this;

		function init(callback) {
			blobBuilder = new BlobBuilder();
			callback();
		}

		function writeUint8Array(array, callback) {
			blobBuilder.append(isAppendABViewSupported() ? array : array.buffer);
			callback();
		}

		function getData(callback) {
			callback(blobBuilder.getBlob(contentType));
		}

		that.init = init;
		that.writeUint8Array = writeUint8Array;
		that.getData = getData;
	}
	BlobWriter.prototype = new Writer();
	BlobWriter.prototype.constructor = BlobWriter;

	// inflate/deflate core functions

	function launchWorkerProcess(worker, reader, writer, offset, size, onappend, onprogress, onend, onreaderror, onwriteerror) {
		var chunkIndex = 0, index, outputSize;

		function onflush() {
			worker.removeEventListener("message", onmessage, false);
			onend(outputSize);
		}

		function onmessage(event) {
			var message = event.data, data = message.data;

			if (message.onappend) {
				outputSize += data.length;
				writer.writeUint8Array(data, function() {
					onappend(false, data);
					step();
				}, onwriteerror);
			}
			if (message.onflush)
				if (data) {
					outputSize += data.length;
					writer.writeUint8Array(data, function() {
						onappend(false, data);
						onflush();
					}, onwriteerror);
				} else
					onflush();
			if (message.progress && onprogress)
				onprogress(index + message.current, size);
		}

		function step() {
			index = chunkIndex * CHUNK_SIZE;
			if (index < size)
				reader.readUint8Array(offset + index, Math.min(CHUNK_SIZE, size - index), function(array) {
					worker.postMessage({
						append : true,
						data : array
					});
					chunkIndex++;
					if (onprogress)
						onprogress(index, size);
					onappend(true, array);
				}, onreaderror);
			else
				worker.postMessage({
					flush : true
				});
		}

		outputSize = 0;
		worker.addEventListener("message", onmessage, false);
		step();
	}

	function launchProcess(process, reader, writer, offset, size, onappend, onprogress, onend, onreaderror, onwriteerror) {
		var chunkIndex = 0, index, outputSize = 0;

		function step() {
			var outputData;
			index = chunkIndex * CHUNK_SIZE;
			if (index < size)
				reader.readUint8Array(offset + index, Math.min(CHUNK_SIZE, size - index), function(inputData) {
					var outputData = process.append(inputData, function() {
						if (onprogress)
							onprogress(offset + index, size);
					});
					outputSize += outputData.length;
					onappend(true, inputData);
					writer.writeUint8Array(outputData, function() {
						onappend(false, outputData);
						chunkIndex++;
						setTimeout(step, 1);
					}, onwriteerror);
					if (onprogress)
						onprogress(index, size);
				}, onreaderror);
			else {
				outputData = process.flush();
				if (outputData) {
					outputSize += outputData.length;
					writer.writeUint8Array(outputData, function() {
						onappend(false, outputData);
						onend(outputSize);
					}, onwriteerror);
				} else
					onend(outputSize);
			}
		}

		step();
	}
	
	function launchSynchronousProcess(process, reader, writer, offset, size, onappend, onprogress, onend, onreaderror, onwriteerror) {
		var chunkIndex = 0, index, outputSize = 0;

		function step() {
			var outputData;
			index = chunkIndex * CHUNK_SIZE;
			if (index < size)
				reader.readUint8Array(offset + index, Math.min(CHUNK_SIZE, size - index), function(inputData) {
					var outputData = process.append(inputData, function() {
						if (onprogress)
							onprogress(offset + index, size);
					});
					outputSize += outputData.length;
					onappend(true, inputData);
					writer.writeUint8Array(outputData, function() {
						onappend(false, outputData);
						chunkIndex++;
						step();
					}, onwriteerror);
					if (onprogress)
						onprogress(index, size);
				}, onreaderror);
			else {
				outputData = process.flush();
				if (outputData) {
					outputSize += outputData.length;
					writer.writeUint8Array(outputData, function() {
						onappend(false, outputData);
						onend(outputSize);
					}, onwriteerror);
				} else
					onend(outputSize);
			}
		}

		step();
	}

	function inflate(reader, writer, offset, size, computeCrc32, onend, onprogress, onreaderror, onwriteerror) {
		var worker, crc32 = new Crc32();

		function oninflateappend(sending, array) {
			if (computeCrc32 && !sending)
				crc32.append(array);
		}

		function oninflateend(outputSize) {
			onend(outputSize, crc32.get());
		}
		if (obj.zip.synchronous){
			launchSynchronousProcess(new obj.zip.Inflater(), reader, writer, offset, size, oninflateappend, onprogress, oninflateend, onreaderror, onwriteerror);
		}
		else if (obj.zip.useWebWorkers) {
			worker = new Worker(obj.zip.workerScriptsPath + INFLATE_JS);
			launchWorkerProcess(worker, reader, writer, offset, size, oninflateappend, onprogress, oninflateend, onreaderror, onwriteerror);
		} else
			launchProcess(new obj.zip.Inflater(), reader, writer, offset, size, oninflateappend, onprogress, oninflateend, onreaderror, onwriteerror);
		return worker;
	}

	function deflate(reader, writer, level, onend, onprogress, onreaderror, onwriteerror) {
		var worker, crc32 = new Crc32();

		function ondeflateappend(sending, array) {
			if (sending)
				crc32.append(array);
		}

		function ondeflateend(outputSize) {
			onend(outputSize, crc32.get());
		}

		function onmessage() {
			worker.removeEventListener("message", onmessage, false);
			launchWorkerProcess(worker, reader, writer, 0, reader.size, ondeflateappend, onprogress, ondeflateend, onreaderror, onwriteerror);
		}

		if(obj.zip.synchronous){
			launchSynchronousProcess(new obj.zip.Deflater(), reader, writer, 0, reader.size, ondeflateappend, onprogress, ondeflateend, onreaderror, onwriteerror);
		}
		else if (obj.zip.useWebWorkers) {
			worker = new Worker(obj.zip.workerScriptsPath + DEFLATE_JS);
			worker.addEventListener("message", onmessage, false);
			worker.postMessage({
				init : true,
				level : level
			});
		} else
			launchProcess(new obj.zip.Deflater(), reader, writer, 0, reader.size, ondeflateappend, onprogress, ondeflateend, onreaderror, onwriteerror);
		return worker;
	}

	function copy(reader, writer, offset, size, computeCrc32, onend, onprogress, onreaderror, onwriteerror) {
		var chunkIndex = 0, crc32 = new Crc32();

		function step() {
			var index = chunkIndex * CHUNK_SIZE;
			if (index < size)
				reader.readUint8Array(offset + index, Math.min(CHUNK_SIZE, size - index), function(array) {
					if (computeCrc32)
						crc32.append(array);
					if (onprogress)
						onprogress(index, size, array);
					writer.writeUint8Array(array, function() {
						chunkIndex++;
						step();
					}, onwriteerror);
				}, onreaderror);
			else
				onend(size, crc32.get());
		}

		step();
	}

	// ZipReader

	function decodeASCII(str) {
		var i, out = "", charCode, extendedASCII = [ '\u00C7', '\u00FC', '\u00E9', '\u00E2', '\u00E4', '\u00E0', '\u00E5', '\u00E7', '\u00EA', '\u00EB',
				'\u00E8', '\u00EF', '\u00EE', '\u00EC', '\u00C4', '\u00C5', '\u00C9', '\u00E6', '\u00C6', '\u00F4', '\u00F6', '\u00F2', '\u00FB', '\u00F9',
				'\u00FF', '\u00D6', '\u00DC', '\u00F8', '\u00A3', '\u00D8', '\u00D7', '\u0192', '\u00E1', '\u00ED', '\u00F3', '\u00FA', '\u00F1', '\u00D1',
				'\u00AA', '\u00BA', '\u00BF', '\u00AE', '\u00AC', '\u00BD', '\u00BC', '\u00A1', '\u00AB', '\u00BB', '_', '_', '_', '\u00A6', '\u00A6',
				'\u00C1', '\u00C2', '\u00C0', '\u00A9', '\u00A6', '\u00A6', '+', '+', '\u00A2', '\u00A5', '+', '+', '-', '-', '+', '-', '+', '\u00E3',
				'\u00C3', '+', '+', '-', '-', '\u00A6', '-', '+', '\u00A4', '\u00F0', '\u00D0', '\u00CA', '\u00CB', '\u00C8', 'i', '\u00CD', '\u00CE',
				'\u00CF', '+', '+', '_', '_', '\u00A6', '\u00CC', '_', '\u00D3', '\u00DF', '\u00D4', '\u00D2', '\u00F5', '\u00D5', '\u00B5', '\u00FE',
				'\u00DE', '\u00DA', '\u00DB', '\u00D9', '\u00FD', '\u00DD', '\u00AF', '\u00B4', '\u00AD', '\u00B1', '_', '\u00BE', '\u00B6', '\u00A7',
				'\u00F7', '\u00B8', '\u00B0', '\u00A8', '\u00B7', '\u00B9', '\u00B3', '\u00B2', '_', ' ' ];
		for (i = 0; i < str.length; i++) {
			charCode = str.charCodeAt(i) & 0xFF;
			if (charCode > 127)
				out += extendedASCII[charCode - 128];
			else
				out += String.fromCharCode(charCode);
		}
		return out;
	}

	function decodeUTF8(str_data) {
		var tmp_arr = [], i = 0, ac = 0, c1 = 0, c2 = 0, c3 = 0;

		str_data += '';

		while (i < str_data.length) {
			c1 = str_data.charCodeAt(i);
			if (c1 < 128) {
				tmp_arr[ac++] = String.fromCharCode(c1);
				i++;
			} else if (c1 > 191 && c1 < 224) {
				c2 = str_data.charCodeAt(i + 1);
				tmp_arr[ac++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));
				i += 2;
			} else {
				c2 = str_data.charCodeAt(i + 1);
				c3 = str_data.charCodeAt(i + 2);
				tmp_arr[ac++] = String.fromCharCode(((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
				i += 3;
			}
		}

		return tmp_arr.join('');
	}

	function getString(bytes) {
		var i, str = "";
		for (i = 0; i < bytes.length; i++)
			str += String.fromCharCode(bytes[i]);
		return str;
	}

	function getDate(timeRaw) {
		var date = (timeRaw & 0xffff0000) >> 16, time = timeRaw & 0x0000ffff;
		try {
			return new Date(1980 + ((date & 0xFE00) >> 9), ((date & 0x01E0) >> 5) - 1, date & 0x001F, (time & 0xF800) >> 11, (time & 0x07E0) >> 5,
					(time & 0x001F) * 2, 0);
		} catch (e) {
		}
	}

	function readCommonHeader(entry, data, index, centralDirectory, onerror) {
		entry.version = data.view.getUint16(index, true);
		entry.bitFlag = data.view.getUint16(index + 2, true);
		entry.compressionMethod = data.view.getUint16(index + 4, true);
		entry.lastModDateRaw = data.view.getUint32(index + 6, true);
		entry.lastModDate = getDate(entry.lastModDateRaw);
		if ((entry.bitFlag & 0x01) === 0x01) {
			onerror(ERR_ENCRYPTED);
			return;
		}
		if (centralDirectory || (entry.bitFlag & 0x0008) != 0x0008) {
			entry.crc32 = data.view.getUint32(index + 10, true);
			entry.compressedSize = data.view.getUint32(index + 14, true);
			entry.uncompressedSize = data.view.getUint32(index + 18, true);
		}
		if (entry.compressedSize === 0xFFFFFFFF || entry.uncompressedSize === 0xFFFFFFFF) {
			onerror(ERR_ZIP64);
			return;
		}
		entry.filenameLength = data.view.getUint16(index + 22, true);
		entry.extraFieldLength = data.view.getUint16(index + 24, true);
	}

	function createZipReader(reader, onerror) {
		function Entry() {
		}

		Entry.prototype.getData = function(writer, onend, onprogress, checkCrc32) {
			var that = this, worker;

			function terminate(callback, param) {
				if (worker)
					worker.terminate();
				worker = null;
				if (callback)
					callback(param);
			}

			function testCrc32(crc32) {
				var dataCrc32 = getDataHelper(4);
				dataCrc32.view.setUint32(0, crc32);
				return that.crc32 == dataCrc32.view.getUint32(0);
			}

			function getWriterData(uncompressedSize, crc32) {
				if (checkCrc32 && !testCrc32(crc32))
					onreaderror();
				else
					writer.getData(function(data) {
						terminate(onend, data);
					});
			}

			function onreaderror() {
				terminate(onerror, ERR_READ_DATA);
			}

			function onwriteerror() {
				terminate(onerror, ERR_WRITE_DATA);
			}

			reader.readUint8Array(that.offset, 30, function(bytes) {
				var data = getDataHelper(bytes.length, bytes), dataOffset;
				if (data.view.getUint32(0) != 0x504b0304) {
					onerror(ERR_BAD_FORMAT);
					return;
				}
				readCommonHeader(that, data, 4, false, function(error) {
					onerror(error);
					return;
				});
				dataOffset = that.offset + 30 + that.filenameLength + that.extraFieldLength;
				writer.init(function() {
					if (that.compressionMethod === 0)
						copy(reader, writer, dataOffset, that.compressedSize, checkCrc32, getWriterData, onprogress, onreaderror, onwriteerror);
					else
						worker = inflate(reader, writer, dataOffset, that.compressedSize, checkCrc32, getWriterData, onprogress, onreaderror, onwriteerror);
				}, onwriteerror);
			}, onreaderror);
		};

		function seekEOCDR(offset, entriesCallback) {
			reader.readUint8Array(reader.size - offset, offset, function(bytes) {
				var dataView = getDataHelper(bytes.length, bytes).view;
				if (dataView.getUint32(0) != 0x504b0506) {
					seekEOCDR(offset+1, entriesCallback);
				} else {
					entriesCallback(dataView);
				}
			}, function() {
				onerror(ERR_READ);
			});
		}

		return {
			getEntries : function(callback) {
				if (reader.size < 22) {
					onerror(ERR_BAD_FORMAT);
					return;
				}
				// look for End of central directory record
				seekEOCDR(22, function(dataView) {
					datalength = dataView.getUint32(16, true);
					fileslength = dataView.getUint16(8, true);
					reader.readUint8Array(datalength, reader.size - datalength, function(bytes) {
						var i, index = 0, entries = [], entry, filename, comment, data = getDataHelper(bytes.length, bytes);
						for (i = 0; i < fileslength; i++) {
							entry = new Entry();
							if (data.view.getUint32(index) != 0x504b0102) {
								onerror(ERR_BAD_FORMAT);
								return;
							}
							readCommonHeader(entry, data, index + 6, true, function(error) {
								onerror(error);
								return;
							});
							entry.commentLength = data.view.getUint16(index + 32, true);
							entry.directory = ((data.view.getUint8(index + 38) & 0x10) == 0x10);
							entry.offset = data.view.getUint32(index + 42, true);
							filename = getString(data.array.subarray(index + 46, index + 46 + entry.filenameLength));
							entry.filename = ((entry.bitFlag & 0x0800) === 0x0800) ? decodeUTF8(filename) : decodeASCII(filename);
							if (!entry.directory && entry.filename.charAt(entry.filename.length - 1) == "/")
								entry.directory = true;
							comment = getString(data.array.subarray(index + 46 + entry.filenameLength + entry.extraFieldLength, index + 46
									+ entry.filenameLength + entry.extraFieldLength + entry.commentLength));
							entry.comment = ((entry.bitFlag & 0x0800) === 0x0800) ? decodeUTF8(comment) : decodeASCII(comment);
							entries.push(entry);
							index += 46 + entry.filenameLength + entry.extraFieldLength + entry.commentLength;
						}
						callback(entries);
					}, function() {
						onerror(ERR_READ);
					});
				});
			},
			close : function(callback) {
				if (callback)
					callback();
			}
		};
	}

	// ZipWriter

	function encodeUTF8(string) {
		var n, c1, enc, utftext = [], start = 0, end = 0, stringl = string.length;
		for (n = 0; n < stringl; n++) {
			c1 = string.charCodeAt(n);
			enc = null;
			if (c1 < 128)
				end++;
			else if (c1 > 127 && c1 < 2048)
				enc = String.fromCharCode((c1 >> 6) | 192) + String.fromCharCode((c1 & 63) | 128);
			else
				enc = String.fromCharCode((c1 >> 12) | 224) + String.fromCharCode(((c1 >> 6) & 63) | 128) + String.fromCharCode((c1 & 63) | 128);
			if (enc != null) {
				if (end > start)
					utftext += string.slice(start, end);
				utftext += enc;
				start = end = n + 1;
			}
		}
		if (end > start)
			utftext += string.slice(start, stringl);
		return utftext;
	}

	function getBytes(str) {
		var i, array = [];
		for (i = 0; i < str.length; i++)
			array.push(str.charCodeAt(i));
		return array;
	}

	function createZipWriter(writer, onerror, dontDeflate) {
		var worker, files = [], filenames = [], datalength = 0;

		function terminate(callback, message) {
			if (worker)
				worker.terminate();
			worker = null;
			if (callback)
				callback(message);
		}

		function onwriteerror() {
			terminate(onerror, ERR_WRITE);
		}

		function onreaderror() {
			terminate(onerror, ERR_READ_DATA);
		}

		return {
			add : function(name, reader, onend, onprogress, options) {
				var header, filename, date;

				function writeHeader(callback) {
					var data;
					date = options.lastModDate || new Date();
					header = getDataHelper(26);
					files[name] = {
						headerArray : header.array,
						directory : options.directory,
						filename : filename,
						offset : datalength,
						comment : getBytes(encodeUTF8(options.comment || ""))
					};
					header.view.setUint32(0, 0x14000808);
					if (options.version)
						header.view.setUint8(0, options.version);
					if (!dontDeflate && options.level != 0)
						header.view.setUint16(4, 0x0800);
					header.view.setUint16(6, (((date.getHours() << 6) | date.getMinutes()) << 5) | date.getSeconds() / 2, true);
					header.view.setUint16(8, ((((date.getFullYear() - 1980) << 4) | (date.getMonth() + 1)) << 5) | date.getDate(), true);
					header.view.setUint16(22, filename.length, true);
					data = getDataHelper(30 + filename.length);
					data.view.setUint32(0, 0x504b0304);
					data.array.set(header.array, 4);
					data.array.set([], 30); // FIXME: remove when chrome 18 will be stable (14: OK, 16: KO, 17: OK)
					data.array.set(filename, 30);
					datalength += data.array.length;
					writer.writeUint8Array(data.array, callback, onwriteerror);
				}

				function writeFooter(compressedLength, crc32) {
					var footer = getDataHelper(16);
					datalength += compressedLength || 0;
					footer.view.setUint32(0, 0x504b0708);
					if (typeof crc32 != "undefined") {
						header.view.setUint32(10, crc32, true);
						footer.view.setUint32(4, crc32, true);
					}
					if (reader) {
						footer.view.setUint32(8, compressedLength, true);
						header.view.setUint32(14, compressedLength, true);
						footer.view.setUint32(12, reader.size, true);
						header.view.setUint32(18, reader.size, true);
					}
					writer.writeUint8Array(footer.array, function() {
						datalength += 16;
						terminate(onend);
					}, onwriteerror);
				}

				function writeFile() {
					options = options || {};
					name = name.trim();
					if (options.directory && name.charAt(name.length - 1) != "/")
						name += "/";
					if (files[name])
						throw ERR_DUPLICATED_NAME;
					filename = getBytes(encodeUTF8(name));
					filenames.push(name);
					writeHeader(function() {
						if (reader)
							if (dontDeflate || options.level == 0)
								copy(reader, writer, 0, reader.size, true, writeFooter, onprogress, onreaderror, onwriteerror);
							else
								worker = deflate(reader, writer, options.level, writeFooter, onprogress, onreaderror, onwriteerror);
						else
							writeFooter();
					}, onwriteerror);
				}

				if (reader)
					reader.init(writeFile, onreaderror);
				else
					writeFile();
			},
			close : function(callback) {
				var data, length = 0, index = 0;
				filenames.forEach(function(name) {
					var file = files[name];
					length += 46 + file.filename.length + file.comment.length;
				});
				data = getDataHelper(length + 22);
				filenames.forEach(function(name) {
					var file = files[name];
					data.view.setUint32(index, 0x504b0102);
					data.view.setUint16(index + 4, 0x1400);
					data.array.set(file.headerArray, index + 6);
					data.view.setUint16(index + 32, file.comment.length, true);
					if (file.directory)
						data.view.setUint8(index + 38, 0x10);
					data.view.setUint32(index + 42, file.offset, true);
					data.array.set(file.filename, index + 46);
					data.array.set(file.comment, index + 46 + file.filename.length);
					index += 46 + file.filename.length + file.comment.length;
				});
				data.view.setUint32(index, 0x504b0506);
				data.view.setUint16(index + 8, filenames.length, true);
				data.view.setUint16(index + 10, filenames.length, true);
				data.view.setUint32(index + 12, length, true);
				data.view.setUint32(index + 16, datalength, true);
				writer.writeUint8Array(data.array, function() {
					terminate(function() {
						writer.getData(callback);
					});
				}, onwriteerror);
			}
		};
	}

	if (typeof BlobBuilder == "undefined") {
		BlobBuilder = function() {
			var that = this, blobParts;

			function initBlobParts() {
				if (!blobParts) {
					blobParts = [ new Blob() ]
				}
			}

			that.append = function(data) {
				initBlobParts();
				blobParts.push(data);
			};
			that.getBlob = function(contentType) {
				initBlobParts();
				if (blobParts.length > 1 || blobParts[0].type != contentType) {
					blobParts = [ contentType ? new Blob(blobParts, {
						type : contentType
					}) : new Blob(blobParts) ];
				}
				return blobParts[0];
			};
		};
	}

	obj.zip = {
		Reader : Reader,
		Writer : Writer,
		BlobReader : BlobReader,
		HttpReader : HttpReader,
		HttpRangeReader : HttpRangeReader,
		Data64URIReader : Data64URIReader,
		TextReader : TextReader,
		BlobWriter : BlobWriter,
		FileWriter : FileWriter,
		Data64URIWriter : Data64URIWriter,
		TextWriter : TextWriter,
		createReader : function(reader, callback, onerror) {
			reader.init(function() {
				callback(createZipReader(reader, onerror));
			}, onerror);
		},
		createWriter : function(writer, callback, onerror, dontDeflate) {
			writer.init(function() {
				callback(createZipWriter(writer, onerror, dontDeflate));
			}, onerror);
		},
		workerScriptsPath : "",
		useWebWorkers : true
	};

})(this);</script><script language="javascript" id="jQueryJs" class="ggw_resource">/*! jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cu(a){if(!cj[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement)cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),cl.close();d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ck)}cj[a]=e}return cj[a]}function ct(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a});return c}function cs(){cq=b}function cr(){setTimeout(cs,0);return cq=f.now()}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function b_(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&f.type(b)==="object")for(var e in b)b_(a+"["+e+"]",b[e],c,d);else d(a,b)}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=bZ(a,c,d,e,"*",g));return l}function bY(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bB(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,g=4;if(d>0){if(c!=="border")for(;e<g;e+=2)c||(d-=parseFloat(f.css(a,"padding"+bx[e]))||0),c==="margin"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0;return d+"px"}d=by(a,b);if(d<0||d==null)d=a.style[b];if(bt.test(d))return d;d=parseFloat(d)||0;if(c)for(;e<g;e+=2)d+=parseFloat(f.css(a,"padding"+bx[e]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+bx[e]))||0);return d+"px"}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c,i[c][d])}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c)return null;var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d=="object"){for(l in d)e.access(a,c,l,d[l],1,h,f);g=1}else if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c)}):(c.call(a,f),c=null));if(c)for(;l<m;l++)c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i);g=1}return g?a:k?c.call(a):m?c(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?n(g):h==="function"&&(!a.unique||!p.has(g))&&c.push(g)},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++)if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])))},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&p.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return!!i}};return p};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement("div"),q=c.documentElement;p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=p.getElementsByTagName("*"),e=p.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=p.getElementsByTagName("input")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:p.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode==="CSS1Compat",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test}catch(r){b.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){b.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),i.setAttribute("name","t"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent)for(n in{submit:1,change:1,focusin:1})m="on"+n,o=m in p,o||(p.setAttribute(m,"return;"),o=typeof p[m]=="function"),b[n+"Bubbles"]=o;j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName("body")[0];!u||(m=1,t="padding:0;margin:0;border:",r="position:absolute;top:0;left:0;width:1px;height:1px;",s=t+"0;visibility:hidden;",n="style='"+r+t+"5px solid #000;",q="<div "+n+"display:block;'><div style='"+t+"0;display:block;overflow:hidden;'></div></div>"+"<table "+n+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",d=c.createElement("div"),d.style.cssText=s+"width:0;height:0;position:static;top:0;margin-top:"+m+"px",u.insertBefore(d,u.firstChild),p=c.createElement("div"),d.appendChild(p),p.innerHTML="<table><tr><td style='"+t+"0;display:none'></td><td>t</td></tr></table>",k=p.getElementsByTagName("td"),o=k[0].offsetHeight===0,k[0].style.display="",k[1].style.display="none",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML="",l=c.createElement("div"),l.style.width="0",l.style.marginRight="0",p.style.width="2px",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!="undefined"&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position="fixed",g.style.top="20px",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top="",e.style.overflow="hidden",e.style.position="relative",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!=="1%"),typeof d.style.zoom!="undefined"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++)h=g[k].name,h.indexOf("data-")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]));f._data(j,"parsedAttrs",!0)}}return m}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!";return f.access(this,function(c){if(c===b){m=this.triggerHandler("getData"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m));return m===b&&d[1]?this.data(d[0]):m}d[1]=c,this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d),f.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1)},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){var d=2;typeof a!="string"&&(c=a,a="fx",d--);if(arguments.length<d)return f.queue(this[0],a);return c===b?this:this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise(c)}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];{if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}if(g){c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++)e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,""),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/(?:^|\s)hover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(
a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(!i.preDispatch||i.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!=="click")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this)if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++)s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s);r.length&&j.push({elem:m,matches:r})}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace))c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()))}}i.postDispatch&&i.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));o.match.globalPOS=p;var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")[\\s/>]","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f
.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test("<"+a.nodeName+">")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}d=e=null;return h},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l=="number"&&(l+="");if(!l)continue;if(typeof l=="string")if(!_.test(l))l=b.createTextNode(l);else{l=l.replace(Y,"<$1></$2>");var m=(Z.exec(l)||["",""])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement("div"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--)p=p.lastChild;if(!f.support.tbody){var s=$.test(l),t=m==="table"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]==="<table>"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i)f.nodeName(t[i],"tbody")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i])}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}var u;if(!f.support.appendChecked)if(l[0]&&typeof (u=l.length)=="number")for(i=0;i<u;i++)bn(l[i]);else bn(l);l.nodeType?j.push(l):j=f.merge(j,l)}if(d){g=function(a){return!a.type||be.test(a.type)};for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,"script")&&(!h.type||be.test(h.type)))e.push(h.parentNode?h.parentNode.removeChild(h):h);else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName("script"),g);j.splice.apply(j,[k+1,0].concat(v))}d.appendChild(h)}}}return j},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bp=/alpha\([^)]*\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bu=/^([\-+])=([\-+.\de]+)/,bv=/^margin/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Top","Right","Bottom","Left"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(by)return by(a,c)},swap:function(a,b,c){var d={},e,f;for(f in b)d[f]=a.style[f],a.style[f]=b[f];e=c.call(a);for(f in b)a.style[f]=d[f];return e}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;b=b.replace(br,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),by=bz||bA,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d)})},set:function(a,b){return bs.test(b)?b+"px":b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bp.test(g)?g.replace(bp,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?by(a,"margin-right"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)}),f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+bx[d]+b]=e[d]||e[d-2]||e[0];return f}}});var bC=/%20/g,bD=/\[\]$/,bE=/\r?\n/g,bF=/#.*$/,bG=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\/\//,bL=/\?/,bM=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=["*/"]+["*"];try{bU=e.href}catch(bX){bU=c.createElement("a"),bU.href="",bU=bU.href}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR)return bR.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,"\r\n")}}):{name:b.name,value:c.replace(bE,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b);return a},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cb(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bF,"").replace(bK,bV[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]==="http:"?80:443))==(bV[3]||(bV[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,"$1_="+x);d.url=y+(y===d.url?(bL.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bW+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=bZ(bT,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)b_(g,a[g],c,e);return d.join("&").replace(bC,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg)cg[a](0,1)}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText}catch(a){}try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(ct("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&f.css(d,"display")==="none"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,"olddisplay",cu(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(ct("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(ct("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&"expand"in k){l=k.expand(a[g]),delete a[g];for(i in l)i in a||(a[i]=l[i])}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),q?(f._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?"":"px"),p!=="px"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:ct("show",1),slideUp:ct("hide",1),slideToggle:ct("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,"fxshow"+e.prop)===b&&(e.options.hide?f._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&f._data(e.elem,"fxshow"+e.prop,e.end))},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!f.contains(c,a))return d?{top:d.top,left:d.left}:{top:0,left:0};var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n}}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position==="fixed")break;d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d}if(j.position==="relative"||j.position==="static")k+=h.offsetTop,l+=h.offsetLeft;f.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft));return{top:k,left:l}},f.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)});var c=this[0],d=c&&c.ownerDocument;if(!d)return null;if(c===d.body)return f.offset.bodyOffset(c);return cv(c,d,d.documentElement)},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b)return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e];h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g},a,e,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null},f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a)){i=a.document,j=i.documentElement[d];return f.support.boxModel&&j||i.body&&i.body[d]||j}if(a.nodeType===9){i=a.documentElement;if(i[d]>=i[e])return i[d];return Math.max(a.body[e],i[e],a.body[g],i[g])}if(h===b){k=f.css(a,c),l=parseFloat(k);return f.isNumeric(l)?l:k}f(a).css(c,h)},c,a,arguments.length,null)}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);</script><script language="javascript" id="mathquillggbJs" class="ggw_resource">/**
 * MathQuillGGB is a fork of MathQuill used and incorporated in
 * the mobile, touch and web versions of GeoGebra.
 * 
 * 
 * Information on the original license of MathQuill:
 * Copyleft 2010-2011 Jay and Han (laughinghan@gmail.com)
 *   under the GNU Lesser General Public License
 *     http://www.gnu.org/licenses/lgpl.html
 * Project Website: http://mathquill.com
 *
 *
 * Information on MathQuillGGB:
 * This file was modified by the colleagues at GeoGebra Inc.
 * The file became part of the web version of the software GeoGebra.
 * Appropriate license terms apply.
 */

$ggbQuery = jQuery;

(function() {

var $ = $ggbQuery;
  undefined,
  mqCmdId = 'mathquillggb-command-id',
  mqBlockId = 'mathquillggb-block-id',
  min = Math.min,
  max = Math.max;

function noop() {}

function hangulJamo(str) {
  var ret = "";
  for (var ii = 0; ii < str.length; ii++) {
    ret += toHangulJamoChars(str.charAt(ii));
  }
  return ret;
}

function toHangulJamoChars(kuc) {
  switch (kuc) {
    case '\u3131': return '\u1100';
    case '\u3132': return '\u1101';
    case '\u3134': return '\u1102';
    case '\u3137': return '\u1103';
    case '\u3138': return '\u1104';
    case '\u3139': return '\u1105';
    case '\u3141': return '\u1106';
    case '\u3142': return '\u1107';
    case '\u3143': return '\u1108';
    case '\u3145': return '\u1109';
    case '\u3146': return '\u110A';
    case '\u3147': return '\u110B';
    case '\u3148': return '\u110C';
    case '\u3149': return '\u110D';
    case '\u314A': return '\u110E';
    case '\u314B': return '\u110F';
    case '\u314C': return '\u1110';
    case '\u314D': return '\u1111';
    case '\u314E': return '\u1112';
    case '\u314F': return '\u1161';
    case '\u3150': return '\u1162';
    case '\u3151': return '\u1163';
    case '\u3152': return '\u1164';
    case '\u3153': return '\u1165';
    case '\u3154': return '\u1166';
    case '\u3155': return '\u1167';
    case '\u3156': return '\u1168';
    case '\u3157': return '\u1169';
    case '\u3158': return '\u116A';
    case '\u3159': return '\u116B';
    case '\u315A': return '\u116C';
    case '\u315B': return '\u116D';
    case '\u315C': return '\u116E';
    case '\u315D': return '\u116F';
    case '\u315E': return '\u1170';
    case '\u315F': return '\u1171';
    case '\u3160': return '\u1172';
    case '\u3161': return '\u1173';
    case '\u3162': return '\u1174';
    case '\u3163': return '\u1175';
    //(a lot of duplicates after here, ignore the repeats)
    // \u3131 \u11A8 NOTE: different mapping?
    // \u3132 \u11A9 NOTE: different mapping?
    case '\u3133': return '\u11AA';
    // \u3134 \u11AB NOTE: different mapping?
    case '\u3135': return '\u11AC';
    case '\u3136': return '\u11AD';
    // \u3137 \u11AE NOTE: different mapping?
    // \u3139 \u11AF NOTE: different mapping?
    case '\u313A': return '\u11B0';
    case '\u313B': return '\u11B1';
    case '\u313C': return '\u11B2';
    case '\u313D': return '\u11B3';
    case '\u313E': return '\u11B4';
    case '\u313F': return '\u11B5';
    case '\u3140': return '\u11B6';
    // \u3141 \u11B7 NOTE: different mapping?
    // \u3142 \u11B8 NOTE: different mapping?
    case '\u3144': return '\u11B9';
    // \u3145 \u11BA NOTE: different mapping?
    // \u3146 \u11BB NOTE: different mapping?
    // \u3147 \u11BC NOTE: different mapping?
    // \u3148 \u11BD NOTE: different mapping?
    // \u314A \u11BE NOTE: different mapping?
    // \u314B \u11BF NOTE: different mapping?
    // \u314C \u11C0 NOTE: different mapping?
    // \u314D \u11C1 NOTE: different mapping?
    // \u314E \u11C2 NOTE: different mapping?
    default: return kuc;
  }
}

function adjustFixedTextarea(rootJQ) {
  // it would be good to call GWT's Element.getAbsoluteLeft,
  // Element.getAbsoluteTop from here! But documentation says
  // DOM element.getBoundingClientRect is pretty cross-browser,
  // so it can be used for our needs in modern browsers... 
  if ((rootJQ === undefined) || (rootJQ === noop)) {
    return;
  }
  var rel = rootJQ.parents('.NewRadioButtonTreeItem');
  var taa = rootJQ.find('.textarea')[0];
  if ((rel[0] !== undefined) && (taa !== undefined)) {
	// taa is position: fixed, and this way it will be hopefully on-screen
    taa.style.left = (rel[0].scrollLeft + (rel[0].offsetWidth / 2)) + 'px';
  }
}

/**
 * A utility higher-order function that makes defining variadic
 * functions more convenient by letting you essentially define functions
 * with the last argument as a splat, i.e. the last argument "gathers up"
 * remaining arguments to the function:
 *   var doStuff = variadic(function(first, rest) { return rest; });
 *   doStuff(1, 2, 3); // => [2, 3]
 */
var __slice = [].slice;
function variadic(fn) {
  var numFixedArgs = fn.length - 1;
  return function() {
    var args = __slice.call(arguments, 0, numFixedArgs);
    var varArg = __slice.call(arguments, numFixedArgs);
    return fn.apply(this, args.concat([ varArg ]));
  };
}

/**
 * A utility higher-order function that makes combining object-oriented
 * programming and functional programming techniques more convenient:
 * given a method name and any number of arguments to be bound, returns
 * a function that calls it's first argument's method of that name (if
 * it exists) with the bound arguments and any additional arguments that
 * are passed:
 *   var sendMethod = send('method', 1, 2);
 *   var obj = { method: function() { return Array.apply(this, arguments); } };
 *   sendMethod(obj, 3, 4); // => [1, 2, 3, 4]
 *   // or more specifically,
 *   var obj2 = { method: function(one, two, three) { return one*two + three; } };
 *   sendMethod(obj2, 3); // => 5
 *   sendMethod(obj2, 4); // => 6
 */
var send = variadic(function(method, args) {
  return variadic(function(obj, moreArgs) {
    if (method in obj) return obj[method].apply(obj, args.concat(moreArgs));
  });
});

/**
 * A utility higher-order function that creates "implicit iterators"
 * from "generators": given a function that takes in a sole argument,
 * a "yield" function, that calls "yield" repeatedly with an object as
 * a sole argument (presumably objects being iterated over), returns
 * a function that calls it's first argument on each of those objects
 * (if the first argument is a function, it is called repeatedly with
 * each object as the first argument, otherwise it is stringified and
 * the method of that name is called on each object (if such a method
 * exists)), passing along all additional arguments:
 *   var a = [
 *     { method: function(list) { list.push(1); } },
 *     { method: function(list) { list.push(2); } },
 *     { method: function(list) { list.push(3); } }
 *   ];
 *   a.each = iterator(function(yield) {
 *     for (var i in this) yield(this[i]);
 *   });
 *   var list = [];
 *   a.each('method', list);
 *   list; // => [1, 2, 3]
 *   // Note that the for-in loop will yield 'each', but 'each' maps to
 *   // the function object created by iterator() which does not have a
 *   // .method() method, so that just fails silently.
 */
function iterator(generator) {
  return variadic(function(fn, args) {
    if (typeof fn !== 'function') fn = send(fn);
    var yield = function(obj) { return fn.apply(obj, [ obj ].concat(args)); };
    return generator.call(this, yield);
  });
}

/**
 * sugar to make defining lots of commands easier.
 * TODO: rethink this.
 */
function bind(cons /*, args... */) {
  var args = __slice.call(arguments, 1);
  return function() {
    return cons.apply(this, args);
  };
}

var P = (function(prototype, ownProperty, undefined) {
  // helper functions that also help minification
  function isObject(o) { return typeof o === 'object'; }
  function isFunction(f) { return typeof f === 'function'; }

  function P(_superclass /* = Object */, definition) {
    // handle the case where no superclass is given
    if (definition === undefined) {
      definition = _superclass;
      _superclass = Object;
    }

    // C is the class to be returned.
    // There are three ways C will be called:
    //
    // 1) We call `new C` to create a new uninitialized object.
    //    The behavior is similar to Object.create, where the prototype
    //    relationship is set up, but the ::init method is not run.
    //    Note that in this case we have `this instanceof C`, so we don't
    //    spring the first trap. Also, `args` is undefined, so the initializer
    //    doesn't get run.
    //
    // 2) A user will simply call C(a, b, c, ...) to create a new object with
    //    initialization.  This allows the user to create objects without `new`,
    //    and in particular to initialize objects with variable arguments, which
    //    is impossible with the `new` keyword.  Note that in this case,
    //    !(this instanceof C) springs the return trap at the beginning, and
    //    C is called with the `new` keyword and one argument, which is the
    //    Arguments object passed in.
    //
    // 3) For internal use only, if new C(args) is called, where args is an
    //    Arguments object.  In this case, the presence of `new` means the
    //    return trap is not sprung, but the initializer is called if present.
    //
    //    You can also call `new C([a, b, c])`, which is equivalent to `C(a, b, c)`.
    //
    //  TODO: the Chrome inspector shows all created objects as `C` rather than `Object`.
    //        Setting the .name property seems to have no effect.  Is there a way to override
    //        this behavior?
    function C(args) {
      var self = this;
      if (!(self instanceof C)) return new C(arguments);
      if (args && isFunction(self.init)) self.init.apply(self, args);
    }

    // set up the prototype of the new class
    // note that this resolves to `new Object`
    // if the superclass isn't given
    var proto = C[prototype] = new _superclass();

    // other variables, as a minifier optimization
    var _super = _superclass[prototype];
    var extensions;

    // set the constructor property on the prototype, for convenience
    proto.constructor = C;

    C.mixin = function(def) {
      C[prototype] = P(C, def)[prototype];
      return C;
    }

    return (C.open = function(def) {
      extensions = {};

      if (isFunction(def)) {
        // call the defining function with all the arguments you need
        // extensions captures the return value.
        extensions = def.call(C, proto, _super, C, _superclass);
      }
      else if (isObject(def)) {
        // if you passed an object instead, we'll take it
        extensions = def;
      }

      // ...and extend it
      if (isObject(extensions)) {
        for (var ext in extensions) {
          if (ownProperty.call(extensions, ext)) {
            proto[ext] = extensions[ext];
          }
        }
      }

      // if there's no init, we assume we're inheriting a non-pjs class, so
      // we default to applying the superclass's constructor.
      if (!isFunction(proto.init)) {
        proto.init = function() { _superclass.apply(this, arguments); };
      }

      return C;
    })(definition);
  }

  // ship it
  return P;

  // as a minifier optimization, we've closured in a few helper functions
  // and the string 'prototype' (C[p] is much shorter than C.prototype)
})('prototype', ({}).hasOwnProperty);
/*************************************************
 * Textarea Manager
 *
 * An abstraction layer wrapping the textarea in
 * an object with methods to manipulate and listen
 * to events on, that hides all the nasty cross-
 * browser incompatibilities behind a uniform API.
 *
 * Design goal: This is a *HARD* internal
 * abstraction barrier. Cross-browser
 * inconsistencies are not allowed to leak through
 * and be dealt with by event handlers. All future
 * cross-browser issues that arise must be dealt
 * with here, and if necessary, the API updated.
 *
 * Organization:
 * - key values map and stringify()
 * - manageTextarea()
 *    + defer() and flush()
 *    + event handler logic
 *    + attach event handlers and export methods
 ************************************************/

var manageTextarea = (function() {
  // The following [key values][1] map was compiled from the
  // [DOM3 Events appendix section on key codes][2] and
  // [a widely cited report on cross-browser tests of key codes][3],
  // except for 10: 'Enter', which I've empirically observed in Safari on iOS
  // and doesn't appear to conflict with any other known key codes.
  //
  // [1]: http://www.w3.org/TR/2012/WD-DOM-Level-3-Events-20120614/#keys-keyvalues
  // [2]: http://www.w3.org/TR/2012/WD-DOM-Level-3-Events-20120614/#fixed-virtual-key-codes
  // [3]: http://unixpapa.com/js/key.html
  var KEY_VALUES = {
    8: 'Backspace',
    9: 'Tab',

    10: 'Enter', // for Safari on iOS

    13: 'Enter',

    16: 'Shift',
    17: 'Control',
    18: 'Alt',
    20: 'CapsLock',

    27: 'Esc',

    32: 'Spacebar',

    33: 'PageUp',
    34: 'PageDown',
    35: 'End',
    36: 'Home',

    37: 'Left',
    38: 'Up',
    39: 'Right',
    40: 'Down',

    45: 'Insert',

    46: 'Del',

    86: 'V',

    112: 'F1',
    144: 'NumLock'
  };

  // To the extent possible, create a normalized string representation
  // of the key combo (i.e., key code and modifier keys).
  function stringify(evt) {
    var which = evt.which || evt.keyCode;
    var keyVal = KEY_VALUES[which];
    var key;
    var modifiers = [];

    if (evt.ctrlKey) modifiers.push('Ctrl');
    if (evt.originalEvent && evt.originalEvent.metaKey) modifiers.push('Meta');
    if (evt.altKey) modifiers.push('Alt');
    if (evt.shiftKey) modifiers.push('Shift');

    // for alphanumeric characters, String.fromCharCode will
    // give the character, although it is a keyCode not charCode
    // so "A" will be "Shift-A" and "a" will be simple "A"
    key = keyVal || String.fromCharCode(which);

    if (!modifiers.length && !keyVal) return key;

    modifiers.push(key);
    return modifiers.join('-');
  }

  // create a textarea manager that calls callbacks at useful times
  // and exports useful public methods
  return function manageTextarea(el, opts) {
    var keydown = null;
    var keypress = null;

    if (!opts) opts = {};
    var textCallback = opts.text || noop;
    var keyCallback = opts.key || noop;
    var pasteCallback = opts.paste || noop;
    var onCut = opts.cut || noop;
    var onCopy = opts.copy || noop;
    var rootJQ = opts.rootJQ || noop;
    var cursorMoveLeft = opts.moveLeft || noop;

    var textarea = $(el);
    var target = $(opts.container || textarea);

    // checkTextareaFor() is called after keypress or paste events to
    // say "Hey, I think something was just typed" or "pasted" (resp.),
    // so that at all subsequent opportune times (next event or timeout),
    // will check for expected typed or pasted text.
    // Need to check repeatedly because #135: in Safari 5.1 (at least),
    // after selecting something and then typing, the textarea is
    // incorrectly reported as selected during the input event (but not
    // subsequently).
    var checkTextarea = noop;
    var checkTextarea2 = noop;

    function checkTextareaFor(checker) {
      if (checkTextarea2 === noop) {
        checkTextarea = checker;
        setTimeout(checker);
      } else {
    	checkTextarea = noop;
      }
    }

    function checkTextareaFor2(checker) {
      checkTextarea2 = function() {
    	  setTimeout(checker, 200);
      }
      checkTextarea2();
    }

    // TODO: Wondering why there is a target.bind both here and at the end...
    // It would be good to revise hard-to-understand MathQuillGGB code!
    // but key events may be necessary to remain for the ^ hat character in IE
    target.bind('keydown keypress keyup', function() {
      checkTextarea();
    });

    //working on the paste event while commenting this out, Okay
    //target.bind('paste', function() { checkTextarea2(); });

    // the input event does not fire (maybe the paste event is prevented),
    // otherwise leaving it here, maybe necessary for the ^ hat character to work
    // focusout: I don't know, but now I'm commenting it out
    // as the textarea should keep its focus, as far as I know,
    // and if not, then "focusout" should not be called before "paste" anyway
    //target.bind('input focusout', function() { checkTextarea2(); checkTextarea(); });
    target.bind('input', function() {
      // does this need some more waiting in case of Korean characters?
      checkTextareaFor(typedText);
    });


    // -*- public methods -*- //
    function select(text) {
      checkTextarea2();

      textarea.val(text);
      if (text) textarea[0].select();
    }

    // -*- helper subroutines -*- //

    // Determine whether there's a selection in the textarea.
    // This will always return false in IE < 9, which don't support
    // HTMLTextareaElement::selection{Start,End}.
    function hasSelection() {
      var dom = textarea[0];

      if (!('selectionStart' in dom)) return false;
      return dom.selectionStart !== dom.selectionEnd;
    }

    function popTextForPaste(callback) {
      var text = textarea.val();
      textarea.val('');
      if (text) callback(text);
      checkTextarea2 = noop;
    }

    function popText(callback) {
      var text = textarea.val();

      // is this too early, e.g. in case of Korean?
      if ((text !== undefined) && (text !== '')) {
    	// something really entered
    	//if (text === '^') {
    	  // in IE the two hats come separately
    	  // in Firefox keypress will contain hat-prefix
    	  // even if textarea.val('') was called,
    	  // so in Firefox, onehat is undefined
    	  // Edit: but not if Firefox is used with the
    	  // on-screen keyboard! By the way, as two
    	  // ^^ are not allowed now anyway, we can get
    	  // rid of this hacking now...
    	  //if (textarea.onehat !== undefined) {
    	  //  delete textarea.onehat;
          //  textarea.val('');
    	  //} else {
    	  //  textarea.onehat = true;
          //  textarea.val('');
          //  callback('^');
    	  //}
    	//} else {
        //  if (textarea.onehat !== undefined) {
        //	delete textarea.onehat;
        //  }
          // no ^ hat character, do the general case
    	  // or even in case of ^2 this is the way to go
    	  // to be cross-browser...
          textarea.val('');
          callback(text);
    	//}
      }
      // else textarea.val(''); do not do it to avoid deleting one hat
      if (textarea[0] && textarea[0].simulatedKeypressMore) {
        textarea[0].simulatedKeypressMore = false;
    	if (text.charAt(0) === '(') {
    		callback(')');
    		cursorMoveLeft();
    	} else if (text.charAt(0) === '|') {
    		callback('|');
    		cursorMoveLeft();
    	} else if (text.charAt(0) === '"') {
    		callback('"');
    		cursorMoveLeft();
    	}
      }
    }

    function handleKey() {
      keyCallback(stringify(keydown), keydown);
    }

    // -*- event handlers -*- //
    function onKeydown(e) {
      keydown = e;
      keypress = null;

      adjustFixedTextarea(rootJQ);

      handleKey();

      if (e.keyCode) {
    	if (e.keyCode === 229) {
    	  // this means some kind of a Korean or other special key, they say
    	  // for which keypress might not fire, so let's do its action
    	  // earlier, and make sure keypress will really not fire, for
    	  // more deterministic code...
          checkTextareaFor(typedText);

          // with preventDefault it's not good
          //e.preventDefault();
    	}
      }

      if (textarea[0] && textarea[0].disabledTextarea) {
    	// this can only happen in scenarios when
    	// stopPropagation is useful here
    	e.stopPropagation();
    	// but preventDefault is not useful!
      }
    }

    function onKeypress(e) {
      // windower is like noop: are they visible here?
      if (textarea[0] && textarea[0].simulatedKeypress) {
        // of course, this case do not handleKey,
    	// maybe we could set keypress to null,
    	// after the keypress had effect,
    	// but it is not that important...
    	keydown = null;
        textarea[0].simulatedKeypress = false;
      } else {
          // they do it in a different way
          //if (e.charCode) {
              // (why) does this matter?
              //keydown = null;

              // Korean characters need this, for imperfect
              // implementation of Windows native keyboard,
    		  // or also it's build-in on-screen keyboard

    		  //var cstr = String.fromCharCode(e.charCode);
    		  //cstr = hangulJamo(cstr);
    		  //var code = cstr.charCodeAt(0);
    	      //if ((code >= 0x1100) && (code <= 0x1112)) {
    	      //  textarea.val(cstr);
    	      //} else if ((code >= 0x1161) && (code <= 0x1175)) {
    	      //  textarea.val(cstr);
              //} else if ((code >= 0x11a8) && (code <= 0x11c2)) {
              //  textarea.val(cstr);
              //} else if ((code >= 0xac00) && (code <= 0xd7af)) {
              //  textarea.val(cstr);
              //}
    	  //}

    	  if (keydown && keypress) {

    		  // call the key handler for repeated keypresses.
    		  // This excludes keypresses that happen directly
    		  // after keydown.  In that case, there will be
    		  // no previous keypress, so we skip it here
    		  handleKey();
    	  }
      }

      keypress = e;

      checkTextareaFor(typedText);

      if (textarea[0] && textarea[0].disabledTextarea) {
      	// this can only happen in scenarios when
      	// stopPropagation is useful here
      	e.stopPropagation();
      	// but preventDefault is not useful!
      }
    }
    function onKeypressParent(e) {
      // it is not harmful to call stopPropagation
      // more times... here and in DrawEquationWeb
      // note that this is NOT stopImmediatePropagation
      e.stopPropagation();

      if (textarea[0] && textarea[0].disabledTextarea) {
    	// bluetooth keyboard case for mobile devices!
        // let's not bother with default actions either!
        e.preventDefault();

		// this will tell MathQuillGGB not to do keydown / handleKey
		// as well, for a different key pressed earlier, BUT:
        // when we simulate keydown as well as keypress,
        // then we probably don't need simulatedKeypress
		//textarea[0].simulatedKeypress = true;
        // what about event order here? TODO: make sure it's perfect
        
        var code = e.charCode || e.which || 0;
        textarea[0].lastPressCode = code;
        if(code == 13){
        	return;
        }
        // #5398 probably does not mind these lines being here
        // as it's mobile, disabled textarea case only, but still,
        // TODO you might want to check whether:
        // - these two lines are required generally to fill textarea
        // - these two lines are valid with all (e.g. Korean) chars
        // ... the second point is probably not the case when we fill
        // the textarea by program code, because we have textarea hacks
        // just for this reason! to be more perfect than e.charCode/which!
        // search for "unixpapa key" but if these two lines will be
        // removed, maybe it will just work out-of-the-box, as we
        // also have a keydown event, which might change things
        textarea.val(String.fromCharCode(code));
        textarea[0].simulatedKeypress = true;

        // but instead recreate the same event once again!
        //var e2 = $.Event(e.type, e);
        // and make sure not to clone preventDefault state,
        // so maybe it's better to just clone some props
        var e2 = $.Event(e.type, {
        	keyCode : e.keyCode,
			charCode : e.charCode,
			which : e.which,
			altKey : e.altKey,
			ctrlKey : e.ctrlKey,
			shiftKey : e.shiftKey
        });
        // and pass it to the textarea!
        textarea.trigger(e2);
        // because in theory the textarea is able to
        // convert the event object to real key values
        // especially in keypress, to real characters
      }
    }

    function onKeydownParent(e) {
      // it is not harmful to call stopPropagation
      // more times... here and in DrawEquationWeb
      // note that this is NOT stopImmediatePropagation
      e.stopPropagation();
      // in normal case, there is nothing more to do!
      if (textarea[0] && textarea[0].disabledTextarea) {
    	// but in Android case this means bluetooth keyboard!
        // let's not bother with default actions either!
    	var code = e.keyCode || e.which || 0;
    	if(code == 8 || code == 37 || code == 39){
    		e.preventDefault();
    	}
        // but instead recreate the same event once again!
        //var e2 = $.Event(e.type, e);
        // and make sure not to clone preventDefault state,
        // so maybe it's better to just clone some props
        var e2 = $.Event(e.type, {
        	keyCode : e.keyCode,
			charCode : e.charCode,
			which : e.which,
			altKey : e.altKey,
			ctrlKey : e.ctrlKey,
			shiftKey : e.shiftKey
        });
        // and pass it to the textarea!
        textarea.trigger(e2);
        // because in theory the textarea is able to
        // convert the event object to real key values
        // especially in keypress, to real characters
      }
    }
    function typedText() {
      if (checkTextarea2 !== noop) return;
      // If there is a selection, the contents of the textarea couldn't
      // possibly have just been typed in.
      // This happens in browsers like Firefox and Opera that fire
      // keypress for keystrokes that are not text entry and leave the
      // selection in the textarea alone, such as Ctrl-C.
      // Note: we assume that browsers that don't support hasSelection()
      // also never fire keypress on keystrokes that are not text entry.
      // This seems reasonably safe because:
      // - all modern browsers including IE 9+ support hasSelection(),
      //   making it extremely unlikely any browser besides IE < 9 won't
      // - as far as we know IE < 9 never fires keypress on keystrokes
      //   that aren't text entry, which is only as reliable as our
      //   tests are comprehensive, but the IE < 9 way to do
      //   hasSelection() is poorly documented and is also only as
      //   reliable as our tests are comprehensive
      // If anything like #40 or #71 is reported in IE < 9, see
      // b1318e5349160b665003e36d4eedd64101ceacd8
      if (hasSelection()) return;

      popText(textCallback);
    }

    function onBlur() { keydown = keypress = null; }

    function onPaste(e) {
      // browsers are dumb.
      //
      // In Linux, middle-click pasting causes onPaste to be called,
      // when the textarea is not necessarily focused.  We focus it
      // here to ensure that the pasted text actually ends up in the
      // textarea.
      //
      // It's pretty nifty that by changing focus in this handler,
      // we can change the target of the default action.  (This works
      // on keydown too, FWIW).
      //
      // And by nifty, we mean dumb (but useful sometimes).
      textarea.focus();
      // TODO: disabledTextarea case!

      // checkTextareaFor2 because it might clash with
      // the onText event or something like that otherwise
      checkTextareaFor2(pastedText);
      //checkTextareaFor(pastedText);

      // target is textarea itself, innermost element!
      e.stopPropagation();
      // so that preventDefault should not be called later!
      return true;
    }

    function pastedText() {
      popTextForPaste(pasteCallback);
    }

    // -*- attach event handlers -*- //
    target.bind({
      keydown: onKeydown,
      keypress: onKeypress,
      focusout: onBlur,
      cut: onCut,
      copy: onCopy,
      paste: onPaste
    });

    if (rootJQ !== noop) {
      rootJQ.bind({
        keydown: onKeydownParent,
        keypress: onKeypressParent
      });
    }

    // -*- export public methods -*- //
    return {
      select: select
    };
  };
}());

var Parser = P(function(_, _super, Parser) {
  // The Parser object is a wrapper for a parser function.
  // Externally, you use one to parse a string by calling
  //   var result = SomeParser.parse('Me Me Me! Parse Me!');
  // You should never call the constructor, rather you should
  // construct your Parser from the base parsers and the
  // parser combinator methods.

  function parseError(stream, message) {
    if (stream) {
      stream = "'"+stream+"'";
    }
    else {
      stream = 'EOF';
    }

    throw 'Parse Error: '+message+' at '+stream;
  }

  _.init = function(body) { this._ = body; };

  _.parse = function(stream) {
    return this.skip(eof)._(stream, success, parseError);

    function success(stream, result) { return result; }
  };

  // -*- primitive combinators -*- //
  _.or = function(alternative) {
    var self = this;

    return Parser(function(stream, onSuccess, onFailure) {
      return self._(stream, onSuccess, failure);

      function failure(newStream) {
        return alternative._(stream, onSuccess, onFailure);
      }
    });
  };

  _.then = function(next) {
    var self = this;

    return Parser(function(stream, onSuccess, onFailure) {
      return self._(stream, success, onFailure);

      function success(newStream, result) {
        var nextParser = (next instanceof Parser ? next : next(result));
        return nextParser._(newStream, onSuccess, onFailure);
      }
    });
  };

  // -*- optimized iterative combinators -*- //
  _.many = function() {
    var self = this;

    return Parser(function(stream, onSuccess, onFailure) {
      var xs = [];
      while (self._(stream, success, failure));
      return onSuccess(stream, xs);

      function success(newStream, x) {
        stream = newStream;
        xs.push(x);
        return true;
      }

      function failure() {
        return false;
      }
    });
  };

  _.times = function(min, max) {
    if (arguments.length < 2) max = min;
    var self = this;

    return Parser(function(stream, onSuccess, onFailure) {
      var xs = [];
      var result = true;
      var failure;

      for (var i = 0; i < min; i += 1) {
        result = self._(stream, success, firstFailure);
        if (!result) return onFailure(stream, failure);
      }

      for (; i < max && result; i += 1) {
        result = self._(stream, success, secondFailure);
      }

      return onSuccess(stream, xs);

      function success(newStream, x) {
        xs.push(x);
        stream = newStream;
        return true;
      }

      function firstFailure(newStream, msg) {
        failure = msg;
        stream = newStream;
        return false;
      }

      function secondFailure(newStream, msg) {
        return false;
      }
    });
  };

  // -*- higher-level combinators -*- //
  _.result = function(res) { return this.then(succeed(res)); };
  _.atMost = function(n) { return this.times(0, n); };
  _.atLeast = function(n) {
    var self = this;
    return self.times(n).then(function(start) {
      return self.many().map(function(end) {
        return start.concat(end);
      });
    });
  };

  _.map = function(fn) {
    return this.then(function(result) { return succeed(fn(result)); });
  };

  _.skip = function(two) {
    return this.then(function(result) { return two.result(result); });
  };

  // -*- primitive parsers -*- //
  var string = this.string = function(str) {
    var len = str.length;
    var expected = "expected '"+str+"'";

    return Parser(function(stream, onSuccess, onFailure) {
      var head = stream.slice(0, len);

      if (head === str) {
        return onSuccess(stream.slice(len), head);
      }
      else {
        return onFailure(stream, expected);
      }
    });
  };

  var regex = this.regex = function(re) {
    var expected = 'expected '+re;

    return Parser(function(stream, onSuccess, onFailure) {
      var match = re.exec(stream);

      if (match) {
        var result = match[0];
        return onSuccess(stream.slice(result.length), result);
      }
      else {
        return onFailure(stream, expected);
      }
    });
  };

  var succeed = Parser.succeed = function(result) {
    return Parser(function(stream, onSuccess) {
      return onSuccess(stream, result);
    });
  };

  var fail = Parser.fail = function(msg) {
    return Parser(function(stream, _, onFailure) {
      return onFailure(stream, msg);
    });
  };

  var letter = Parser.letter = regex(/^[a-z]/i);
  var letters = Parser.letters = regex(/^[a-z]*/i);
  var digit = Parser.digit = regex(/^[0-9]/);
  var digits = Parser.digits = regex(/^[0-9]*/);
  var whitespace = Parser.whitespace = regex(/^\s+/);
  var optWhitespace = Parser.optWhitespace = regex(/^\s*/);

  var any = Parser.any = Parser(function(stream, onSuccess, onFailure) {
    if (!stream) return onFailure(stream, 'expected any character');

    return onSuccess(stream.slice(1), stream.charAt(0));
  });

  var all = Parser.all = Parser(function(stream, onSuccess, onFailure) {
    return onSuccess('', stream);
  });

  var eof = Parser.eof = Parser(function(stream, onSuccess, onFailure) {
    if (stream) return onFailure(stream, 'expected EOF');

    return onSuccess(stream, stream);
  });
});
/*************************************************
 * Base classes of the MathQuillGGB virtual DOM tree
 *
 * Only doing tree node manipulation via these
 * adopt/ disown methods guarantees well-formedness
 * of the tree.
 ************************************************/

// L = 'left'
// R = 'right'
//
// the contract is that they can be used as object properties
// and (-L) === R, and (-R) === L.
var L = -1;
var R = 1;

// directionalizable versions of common jQuery traversals
function jQinsertAdjacent(dir, el, target) {
  return (
    dir === L ?
    el.insertBefore(target) :
    el.insertAfter(target)
  );
}

function jQappendDir(dir, el, target) {
  return (
    dir === L ?
    el.prependTo(target) :
    el.appendTo(target)
  );
}

function jQgetExtreme(dir, el) {
  return (
    dir === L ?
    el.first() :
    el.last()
  )
}

var Point = P(function(_) {
  _.parent = 0;
  _[L] = 0;
  _[R] = 0;

  _.init = function(parent, prev, next) {
    this.parent = parent;
    this[L] = prev;
    this[R] = next;
  };
});

/**
 * MathQuillGGB virtual-DOM tree-node abstract base class
 */
var Node = P(function(_) {
  _[L] = 0;
  _[R] = 0;
  _.parent = 0;
  _.textTemplate = [''];
  //_.text = function() { return ''; };// dummy default (maybe for bugfix)

  var id = 0;
  function uniqueNodeId() { return id += 1; }
  this.byId = {};

  _.init = function() {
    this.id = uniqueNodeId();
    Node.byId[this.id] = this;

    this.ch = {};
    this.ch[L] = 0;
    this.ch[R] = 0;
  };

  _.dispose = function() { delete Node.byId[this.id]; };

  _.toString = function() { return '{{ MathQuillGGB Node #'+this.id+' }}'; };

  _.jQ = $();
  _.jQadd = function(jQ) { this.jQ = this.jQ.add(jQ); };
  _.jQize = function() {
    // jQuery-ifies this.html() and links up the .jQ of all corresponding Nodes
    var jQ = $(this.html());
    jQ.find('*').andSelf().each(function() {
      var jQ = $(this),
        cmdId = jQ.attr('mathquillggb-command-id'),
        blockId = jQ.attr('mathquillggb-block-id');
      if (cmdId) Node.byId[cmdId].jQadd(jQ);
      if (blockId) Node.byId[blockId].jQadd(jQ);
    });
    return jQ;
  };

  _.createDir = function(dir, cursor) {
    var node = this;
    node.jQize();
    jQinsertAdjacent(dir, node.jQ, cursor.jQ);
    cursor[dir] = node.adopt(cursor.parent, cursor[L], cursor[R]);
    return node;
  };
  _.createBefore = function(el) { return this.createDir(L, el); };

  _.respace = noop;

  _.bubble = iterator(function(yield) {
    for (var ancestor = this; ancestor; ancestor = ancestor.parent) {
      var result = yield(ancestor);
      if (result === false) break;
    }

    return this;
  });

  _.postOrder = iterator(function(yield) {
    (function recurse(descendant) {
      descendant.eachChild(recurse);
      yield(descendant);
    })(this);

    return this;
  });

  _.preOrder = iterator(function(yield) {
    (function recurse(descendant) {
       yield(descendant);
       descendant.eachChild(recurse);
    })(this);
    return this;
  });

  _.children = function() {
    return Fragment(this.ch[L], this.ch[R]);
  };

  _.eachChild = function() {
    var children = this.children();
    children.each.apply(children, arguments);
    return this;
  };

  _.foldChildren = function(fold, fn) {
    return this.children().fold(fold, fn);
  };

  _.adopt = function(parent, prev, next) {
    Fragment(this, this).adopt(parent, prev, next);
    return this;
  };

  _.disown = function() {
    Fragment(this, this).disown();
    return this;
  };

  _.remove = function() {
    this.jQ.remove();
    this.postOrder('dispose');
    return this.disown();
  };
});

/**
 * An entity outside the virtual tree with one-way pointers (so it's only a
 * "view" of part of the tree, not an actual node/entity in the tree) that
 * delimits a doubly-linked list of sibling nodes.
 * It's like a fanfic love-child between HTML DOM DocumentFragment and the Range
 * classes: like DocumentFragment, its contents must be sibling nodes
 * (unlike Range, whose contents are arbitrary contiguous pieces of subtrees),
 * but like Range, it has only one-way pointers to its contents, its contents
 * have no reference to it and in fact may still be in the visible tree (unlike
 * DocumentFragment, whose contents must be detached from the visible tree
 * and have their 'parent' pointers set to the DocumentFragment).
 */
var Fragment = P(function(_) {
  //_.text = function() { return ''; };// dummy default (maybe for bugfix)
  _.init = function(first, last) {
    this.ends = {};

    if (!first) return;

    this.ends[L] = first;
    this.ends[R] = last;

    this.jQ = this.fold(this.jQ, function(jQ, el) { return jQ.add(el.jQ); });
  };
  _.jQ = $();

  _.adopt = function(parent, prev, next) {
    var self = this;
    self.disowned = false;

    var first = self.ends[L];
    if (!first) return this;

    var last = self.ends[R];

    if (prev) {
      // NB: this is handled in the ::each() block
      // prev[R] = first
    } else {
      parent.ch[L] = first;
    }

    if (next) {
      next[L] = last;
    } else {
      parent.ch[R] = last;
    }

    self.ends[R][R] = next;

    self.each(function(el) {
      el[L] = prev;
      el.parent = parent;
      if (prev) prev[R] = el;

      prev = el;
    });

    return self;
  };

  _.disown = function() {
    var self = this;
    var first = self.ends[L];

    // guard for empty and already-disowned fragments
    if (!first || self.disowned) return self;

    self.disowned = true;

    var last = self.ends[R]
    var parent = first.parent;

    if (first[L]) {
      first[L][R] = last[R];
    } else {
      parent.ch[L] = last[R];
    }

    if (last[R]) {
      last[R][L] = first[L];
    } else {
      parent.ch[R] = first[L];
    }

    return self;
  };

  _.remove = function() {
    this.jQ.remove();
    this.each('postOrder', 'dispose');
    return this.disown();
  };

  _.each = iterator(function(yield) {
    var self = this;
    var el = self.ends[L];
    if (!el) return self;

    for (; el !== self.ends[R][R]; el = el[R]) {
      var result = yield(el);
      if (result === false) break;
    }

    return self;
  });

  _.fold = function(fold, fn) {
    this.each(function(el) {
      fold = fn.call(this, fold, el);
    });

    return fold;
  };

  // create and return the Fragment between Point A and Point B, or if they
  // don't share a parent, between the ancestor of A and the ancestor of B
  // who share a common parent (which would be the lowest common ancestor (LCA)
  // of A and B)
  // There must exist an LCA, i.e., A and B must be in the same tree, and A
  // and B must not be the same Point.
  this.between = function(A, B) {
    // TextPiece and TextBlock selection is still not
    // implemented well, but at least let's do a quick
	// fix for the arising bug! #5291 second part
    if (A.parent instanceof TextPiece) {
      A = A.parent;
    }
    if (A.parent instanceof TextBlock) {
      A = A.parent;
      if (A.parent instanceof Quotation) {
    	A = A.parent;
      }
    }
    if (B.parent instanceof TextPiece) {
      B = B.parent;
    }
    if (B.parent instanceof TextBlock) {
      B = B.parent;
      if (B.parent instanceof Quotation) {
    	B = B.parent;
      }
    }

    var ancA = A; // an ancestor of A
    var ancB = B; // an ancestor of B
    var ancMapA = {}; // a map from the id of each ancestor of A visited
    // so far, to the child of that ancestor who is also an ancestor of B, e.g.
    // the LCA's id maps to the ancestor of the cursor whose parent is the LCA
    var ancMapB = {}; // a map of the castle and school grounds magically
    // displaying the current location of everyone within the covered area,
    // activated by pointing one's wand at it and saying "I solemnly swear
    // that I am up to no good".
    // What do you mean, you expected it to be the same as ancMapA, but
    // ancestors of B instead? That's a complete non sequitur.

    do {
      ancMapA[ancA.parent.id] = ancA;
      ancMapB[ancB.parent.id] = ancB;

      if (ancB.parent.id in ancMapA) {
        ancA = ancMapA[ancB.parent.id];
        break;
      }
      if (ancA.parent.id in ancMapB) {
        ancB = ancMapB[ancA.parent.id];
        break;
      }

      if (ancA.parent) ancA = ancA.parent;
      if (ancB.parent) ancB = ancB.parent;
    } while (ancA.parent || ancB.parent);
    // the only way for this condition to fail is if A and B are in separate
    // trees, which should be impossible, but infinite loops must never happen,
    // even under error conditions.

    // Now we have two either Nodes or Points, guaranteed to have a common
    // parent and guaranteed that if both are Points, they are not the same,
    // and we have to figure out which is on the left and which on the right
    // of the selection.
    var left, right;

    // This is an extremely subtle algorithm.
    // As a special case, ancA could be a Point and ancB a Node immediately
    // to ancA's left.
    // In all other cases,
    // - both Nodes
    // - ancA a Point and ancB a Node
    // - ancA a Node and ancB a Point
    // ancB[R] === next[R] for some next that is ancA or to its right if and
    // only if anticursorA is to the right of cursorA.
    if (ancA[L] !== ancB) {
      for (var next = ancA; next; next = next[R]) {
        if (next[R] === ancB[R]) {
          left = ancA;
          right = ancB;
          break;
        }
      }
    }
    if (!left) {
      left = ancB;
      right = ancA;
    }

    // only want to select Nodes up to Points, can't select Points themselves
    if (left instanceof Point) left = left[R];
    if (right instanceof Point) right = right[L];

    return Fragment(left, right);
  };
});
/*************************************************
 * Abstract classes of math blocks and commands.
 ************************************************/

/**
 * Math tree node base class.
 * Some math-tree-specific extensions to Node.
 * Both MathBlock's and MathCommand's descend from it.
 */
var MathElement = P(Node, function(_, _super) {
  _.finalizeInsert = function() {
    var self = this;
    self.postOrder('finalizeTree');

    // note: this order is important.
    // empty elements need the empty box provided by blur to
    // be present in order for their dimensions to be measured
    // correctly in redraw.
    self.postOrder('blur');

    // adjust context-sensitive spacing
    self.postOrder('respace');
    if (self[R].respace) self[R].respace();
    if (self[L].respace) self[L].respace();

    self.postOrder('redraw');
    self.bubble('redraw');
  };
});

/**
 * Commands and operators, like subscripts, exponents, or fractions.
 * Descendant commands are organized into blocks.
 */
var MathCommand = P(MathElement, function(_, _super) {
  _.init = function(ctrlSeq, htmlTemplate, textTemplate) {
    var cmd = this;
    _super.init.call(cmd);

    if (!cmd.ctrlSeq) cmd.ctrlSeq = ctrlSeq;
    if (htmlTemplate) cmd.htmlTemplate = htmlTemplate;
    if (textTemplate) cmd.textTemplate = textTemplate;
  };

  // obvious methods
  _.replaces = function(replacedFragment) {
    replacedFragment.disown();
    this.replacedFragment = replacedFragment;
  };
  _.isEmpty = function() {
    return this.foldChildren(true, function(isEmpty, child) {
      return isEmpty && child.isEmpty();
    });
  };

  _.parser = function() {
    var block = latexMathParser.block;
    var self = this;

    return block.times(self.numBlocks()).map(function(blocks) {
      self.blocks = blocks;

      for (var i = 0; i < blocks.length; i += 1) {
        blocks[i].adopt(self, self.ch[R], 0);
      }

      return self;
    });
  };

  // createBefore(cursor) and the methods it calls
  _.createBefore = function(cursor) {
    var cmd = this;
    var replacedFragment = cmd.replacedFragment;

    cmd.createBlocks();
    _super.createBefore.call(cmd, cursor);
    if (replacedFragment) {
      replacedFragment.adopt(cmd.ch[L], 0, 0);
      replacedFragment.jQ.appendTo(cmd.ch[L].jQ);
    }
    cmd.finalizeInsert(cursor);
    cmd.placeCursor(cursor);
  };
  _.createBlocks = function() {
    var cmd = this,
      numBlocks = cmd.numBlocks(),
      blocks = cmd.blocks = Array(numBlocks);

    for (var i = 0; i < numBlocks; i += 1) {
      var newBlock = blocks[i] = MathBlock();
      newBlock.adopt(cmd, cmd.ch[R], 0);
    }
  };
  _.placeCursor = function(cursor) {
    //append the cursor to the first empty child, or if none empty, the last one
    cursor.appendTo(this.foldChildren(this.ch[L], function(prev, child) {
      return prev.isEmpty() ? prev : child;
    }));
  };

  // editability methods: called by the cursor for editing, cursor movements,
  // and selection of the MathQuillGGB tree, these all take in a direction and
  // the cursor
  _.moveTowards = function(dir, cursor) { cursor.appendDir(-dir, this.ch[-dir]); };

  function placeCursorInDir(self, dir, cursor) {
    cursor[-dir] = self;
    cursor[dir] = self[dir];
  }

  _.createSelection = function(dir, cursor) {
    placeCursorInDir(this, dir, cursor);
    cursor.hide().selection = Selection(this);
  }

  _.expandSelection = function(dir, cursor) {
    placeCursorInDir(this, dir, cursor);
    cursor.selection.ends[dir] = this;
    jQappendDir(dir, this.jQ, cursor.selection.jQ);
  };

  _.clearSelection = function(dir, cursor) {
    placeCursorInDir(this, dir, cursor);
    cursor.clearSelection().show();
  };

  _.retractSelection = function(dir, cursor) {
    var self = this, seln = cursor.selection;

    placeCursorInDir(self, dir, cursor);
    jQinsertAdjacent(-dir, self.jQ, seln.jQ);
    seln.ends[-dir] = self[dir];
  };

  _.deleteTowards = _.createSelection;
  _.selectChildren = function(cursor) {
    cursor.selection = Selection(this);
    cursor.insertAfter(this);
  };
  _.seek = function(pageX, cursor) {
	if (this.parent) {
	  var blockofthis = this.parent;
	  if (blockofthis instanceof RootMathBlock) {
		var maybestyle = blockofthis.maybeThisMaybeStyle();
		if (maybestyle !== blockofthis) {
		  // this MathCommand seems to be the Style itself!
		  // then let's just appendTo instead!
          cursor.appendTo(maybestyle).seekHoriz(pageX, maybestyle);
          return;
		}
	  }
      cursor.insertAfter(this).seekHoriz(pageX, blockofthis);
	}
  };

  // methods involved in creating and cross-linking with HTML DOM nodes
  /*
    They all expect an .htmlTemplate like
      '<span>&0</span>'
    or
      '<span><span>&0</span><span>&1</span></span>'

    See html.test.js for more examples.

    Requirements:
    - For each block of the command, there must be exactly one "block content
      marker" of the form '&<number>' where <number> is the 0-based index of the
      block. (Like the LaTeX \newcommand syntax, but with a 0-based rather than
      1-based index, because JavaScript because C because Dijkstra.)
    - The block content marker must be the sole contents of the containing
      element, there can't even be surrounding whitespace, or else we can't
      guarantee sticking to within the bounds of the block content marker when
      mucking with the HTML DOM.
    - The HTML not only must be well-formed HTML (of course), but also must
      conform to the XHTML requirements on tags, specifically all tags must
      either be self-closing (like '<br/>') or come in matching pairs.
      Close tags are never optional.

    Note that &<number> isn't well-formed HTML; if you wanted a literal '&123',
    your HTML template would have to have '&amp;123'.
  */
  _.numBlocks = function() {
    var matches = this.htmlTemplate.match(/&\d+/g);
    return matches ? matches.length : 0;
  };
  _.html = function() {
    // Render the entire math subtree rooted at this command, as HTML.
    // Expects .createBlocks() to have been called already, since it uses the
    // .blocks array of child blocks.
    //
    // See html.test.js for example templates and intended outputs.
    //
    // Given an .htmlTemplate as described above,
    // - insert the mathquillggb-command-id attribute into all top-level tags,
    //   which will be used to set this.jQ in .jQize().
    //   This is straightforward:
    //     * tokenize into tags and non-tags
    //     * loop through top-level tokens:
    //         * add #cmdId attribute macro to top-level self-closing tags
    //         * else add #cmdId attribute macro to top-level open tags
    //             * skip the matching top-level close tag and all tag pairs
    //               in between
    // - for each block content marker,
    //     + replace it with the contents of the corresponding block,
    //       rendered as HTML
    //     + insert the mathquillggb-block-id attribute into the containing tag
    //   This is even easier, a quick regex replace, since block tags cannot
    //   contain anything besides the block content marker.
    //
    // Two notes:
    // - The outermost loop through top-level tokens should never encounter any
    //   top-level close tags, because we should have first encountered a
    //   matching top-level open tag, all inner tags should have appeared in
    //   matching pairs and been skipped, and then we should have skipped the
    //   close tag in question.
    // - All open tags should have matching close tags, which means our inner
    //   loop should always encounter a close tag and drop nesting to 0. If
    //   a close tag is missing, the loop will continue until i >= tokens.length
    //   and token becomes undefined. This will not infinite loop, even in
    //   production without pray(), because it will then TypeError on .slice().

    var cmd = this;
    var blocks = cmd.blocks;
    var cmdId = ' mathquillggb-command-id=' + cmd.id;
    var tokens = cmd.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);

    // add cmdId to all top-level tags
    for (var i = 0, token = tokens[0]; token; i += 1, token = tokens[i]) {
      // top-level self-closing tags
      if (token.slice(-2) === '/>') {
        tokens[i] = token.slice(0,-2) + cmdId + '/>';
      }
      // top-level open tags
      else if (token.charAt(0) === '<') {
        tokens[i] = token.slice(0,-1) + cmdId + '>';

        // skip matching top-level close tag and all tag pairs in between
        var nesting = 1;
        do {
          i += 1, token = tokens[i];
          // close tags
          if (token.slice(0,2) === '</') {
            nesting -= 1;
          }
          // non-self-closing open tags
          else if (token.charAt(0) === '<' && token.slice(-2) !== '/>') {
            nesting += 1;
          }
        } while (nesting > 0);
      }
    }
    return tokens.join('').replace(/>&(\d+)/g, function($0, $1) {
      return ' mathquillggb-block-id=' + blocks[$1].id + '>' + blocks[$1].join('html');
    });
  };

  // methods to export a string representation of the math tree
  _.latex = function() {
    return this.foldChildren(this.ctrlSeq, function(latex, child) {
      return latex + '{' + (child.latex() || ' ') + '}';
    });
  };
  _.textTemplate = [''];
  _.text = function() {
    var i = 0;
    var thisMathCommand = this;
    return this.foldChildren(this.textTemplate[i], function(text, child) {
      i += 1;
      var child_text = child.text();
      if (text && child_text[0] === '(' && child_text.slice(-1) === ')' &&
   		  (thisMathCommand.textTemplate[i] === '(' || // no () inside parentheses (orientation?)
            (thisMathCommand.textTemplate[i] === ')' &&
             thisMathCommand.textTemplate[i-1] !== '/') || // sin((?)), sqrt((7x)), etc.

            (thisMathCommand.textTemplate[i] === ']' && // no () inside square brackets
   		     !(child.ch[L] === child.ch[R] &&
   		       child.ch[L] instanceof Bracket)) ||
   		// except if child is about intentional brackets, e.g. Vector[(1,2)]
   		// noting that child is a MathBlock, so "(" usually comes from it

   	      thisMathCommand.textTemplate[i] === '}')) // no () inside curly braces
    	// maybe we should have used (i-1) and left parentheses/brackets/braces
        return text + child_text.slice(1, -1) + thisMathCommand.textTemplate[i];
      return text + child.text() + (thisMathCommand.textTemplate[i] || '');
    });
  };
});

/**
 * Lightweight command without blocks or children.
 */
var Symbol = P(MathCommand, function(_, _super) {
  _.init = function(ctrlSeq, html, text) {
    if (!text) text = ctrlSeq && ctrlSeq.length > 1 ? ctrlSeq.slice(1) : ctrlSeq;

    _super.init.call(this, ctrlSeq, html, [ text ]);
  };

  _.parser = function() { return Parser.succeed(this); };
  _.numBlocks = function() { return 0; };

  _.replaces = function(replacedFragment) {
    replacedFragment.remove();
  };
  _.createBlocks = noop;

  _.moveTowards = function(dir, cursor) {
    jQinsertAdjacent(dir, cursor.jQ, jQgetExtreme(dir, this.jQ));
    cursor[-dir] = this;
    cursor[dir] = this[dir];
  };
  _.deleteTowards = function(dir, cursor) {
    cursor[dir] = this.remove()[dir];
  };
  _.seek = function(pageX, cursor) {
    // insert at whichever side the click was closer to
    if (pageX - this.jQ.offset().left < this.jQ.outerWidth()/2)
      cursor.insertBefore(this);
    else
      cursor.insertAfter(this);
  };

  _.latex = function(){ return this.ctrlSeq; };
  _.text = function() {
	  return this.textTemplate[0];
  };
  _.placeCursor = noop;
  _.isEmpty = function(){ return true; };
});

/**
 * Children and parent of MathCommand's. Basically partitions all the
 * symbols and operators that descend (in the Math DOM tree) from
 * ancestor operators.
 */
var MathBlock = P(MathElement, function(_) {
  _.close = function() {
    this.closed = true;
  };
  _.join = function(methodName) {
    return this.foldChildren('', function(fold, child) {
      return fold + child[methodName]();
    });
  };
  _.html = function() { return this.join('html'); };
  _.latex = function() { return this.join('latex'); };
  _.text = function() {
    if (this.isEmpty()) {
      // For GeoGebraWeb in case of e.g. || sign, it's better
      // to return with an empty string! In other cases,
      // e.g. (), {}, sin(), sqrt(), x^(), etc. this
      // will be syntactically incorrect in theory, anyway
      return '';
    } else if (this.parent.ctrlSeq.substring(0,9) === '\\ggbtable' ||
    		   this.parent.pwtable || this.parent.prtable ||
    		   this.parent.ctrlSeq.substring(0,6) === '\\ggbtr' ||
    	       this.parent.ctrlSeq.substring(0,6) === '\\ggbtd') {
      var ret = this.ch[L].text();
      if (this.ch[L] !== this.ch[R]) {
        ret = this.join('text');
      }
      if ((ret !== undefined) && (ret.length > 0) && (ret[ret.length - 1] === ',')) {
        ret = ret.substring(0, ret.length - 1);
      }
      return ret;
    }
    return this.ch[L] === this.ch[R] ?
      this.ch[L].text() :
      '(' + this.join('text') + ')';
  };
  _.isEmpty = function() {
    return this.ch[L] === 0 && this.ch[R] === 0;
  };

  _.whetherRootStyleBlock = function() {
    if (this.parent instanceof Style) {
      var parentblock = this.parent.parent;
      if (parentblock) {
        if (parentblock instanceof RootMathBlock) {
          if (parentblock.ch[L] === parentblock.ch[R]) {
            // if the Style is the only child of MathBlock,
            // then do not do it!
            return true;
          }
        }
      }
    }
    return false;
  };
  // editability methods: called by the cursor for editing, cursor movements,
  // and selection of the MathQuillGGB tree, these all take in a direction and
  // the cursor
  _.moveOutOf = function(dir, cursor) {
	// note that appendDir waits for MathBlock,
	// while insertAdjacent waits for MathCommand!
	var thisthis = this;
    if (this[dir]) {
      // this is actually not a move out of,
      // but move to a sibling MathBlock e.g. &0 &1
      cursor.appendDir(-dir, this[dir]);
    } else {
      // in case this is a block of a Style mathcommand,
      // which is the only child of RootMathBlock, then
      // we shall not support moving out of this block!
      if (this.whetherRootStyleBlock()) {
    	return;
      }


      // this would move out of the block to
      // put the cursor beside the parent command;
      // however, we want more in case of \\ggbtd and \\ggbtr
      // \\prtable, \\pwtable, \\prcondition, \\parametric,
      // but NOT in case of \\piecewise and \\prcurve
      cursor.insertAdjacent(dir, this.parent);

      // parent block, we're inside a tr block, probably
      thisthis = this.parent.parent;
      // we have already moved out to the block of this.parent!
      if (this.parent.ctrlSeq.indexOf('\\ggbtd') > -1) {
        if (cursor[dir]) {
          // moving out of, and moving into
          // the next element immediately
          // this applies for \\ggbtd
          //cursor[dir].moveTowards(dir, cursor);
          cursor.appendDir(-dir, cursor[dir].ch[-dir]);
        // there are no sibling blocks in case of ggbtd
        //} else if (thisthis[dir]) {
        } else {
          // we probably encounter the end of a \\ggbtr,
          // so we should move out of it!
          if (thisthis.parent) {
            cursor.insertAdjacent(dir, thisthis.parent);
            // just moved inside a table block, tr's are children

            if (thisthis.parent.ctrlSeq.indexOf('\\ggbtr') > -1) {
              // child of thisthis.parent.parent
              if (cursor[dir]) {
                // moving into the next "tr"
                //cursor[dir].moveTowards(dir, cursor);
                cursor.appendDir(-dir, cursor[dir].ch[-dir]);
                // moving into its first "td"
                if (cursor[dir]) {
                  //cursor[dir].moveTowards(dir, cursor);
                  cursor.appendDir(-dir, cursor[dir].ch[-dir]);
                } //else unexpected end!
              } else if (thisthis.parent.parent) {
            	// end of \\ggbtable, probably!
            	thisthis = thisthis.parent.parent;
            	// later thisthis: child of ggbtable, parent of ggbtr
            	if (thisthis.parent) {//ggbtable
            	  // expected end!
                  cursor.insertAdjacent(dir, thisthis.parent);
                  // AND... this is still not the finish in case of:
                  // \\prtable, \\pwtable...
                  if (thisthis.parent.prtable || thisthis.parent.pwtable) {
                    // we're inside \\parametric after the operation
                	// let's move out of this by a recursive call...
                	// and later decide whether it needs anything else
                	if (thisthis.parent.parent) {
                	  // it is a MathBlock, child of \\parametric
                	  // in case of piecewise, this does no harm either
                	  var thisthis = thisthis.parent.parent;
                	  thisthis.moveOutOf(dir, cursor);
                	}
                  }
            	} // else unexpected end!
              } // else unexpected end!
            } // else unexpected end!
          }
        }
        // there are more possible cases!!!
        // TODO: can the user click between two ggbtr, for example?
        // probably not, as I did not manage to do it
      } else if (this.parent.ctrlSeq === '\\prcondition') {
        // in these cases, we've jumped out to the block of \\prcurve
        // so let's jump either outside of it, or in the other child
        // depending on the direction (same comment for \\parametric)
    	// can the user click between \\prcondition and \\parametric?
    	// probably not, as I did not manage to do it
        if (dir === L) {
          // as \\prcondition is R, move inside \\parametric,
          // also inside \\prtable, \\ggbtr, \\ggbtd
          if (cursor[dir]) {// cursor[dir] is \\parametric
            var thisthis = cursor[dir];
            cursor.appendDir(-dir, thisthis.ch[-dir]);
            // it's Okay that we're in \\parametric, but...
            thisthis = cursor[dir];//different!
            thisthis.moveTowards(dir, cursor);
          }
        } else if (dir === R) {
          if (thisthis.parent) {
       	    cursor.insertAdjacent(dir, thisthis.parent);
          }
        }
      } else if (this.parent.ctrlSeq === '\\parametric') {
        if (dir === R) {
          // as \\parametric is L, move inside \\prcondition,
          if (cursor[dir]) {// cursor[dir] is \\prcondition
            cursor.appendDir(-dir, cursor[dir].ch[-dir]);
          }
        } else if (dir === L) {
          if (thisthis.parent) {
            cursor.insertAdjacent(dir, thisthis.parent);
          }
        }
      }
    }
  };
  _.selectOutOf = function(dir, cursor) {
    // in case this is a block of a Style mathcommand,
    // which is the only child of RootMathBlock, then
    // we shall not support moving out of this block!
    if (this.whetherRootStyleBlock()) {
      return;
    }


    var cmd = this.parent;
    // for simplicity, select the whole matrix
    // in every case! thus cmd should be
    // changed in case it's matrix command:
    if (cmd.ctrlSeq.indexOf('\\ggbtd') > -1) {
      if (cmd.parent.parent) {
        cmd = cmd.parent.parent;
      }
    }
    if (cmd.ctrlSeq.indexOf('\\ggbtr') > -1) {
      if (cmd.parent.parent) {
    	cmd = cmd.parent.parent;
      }
    }
    cursor.insertAdjacent(dir, cmd);

    var seln = cursor.selection;
    // no selection, create one
    if (!seln) cursor.hide().selection = Selection(cmd);
    // else "level up" selection
    else {
      seln.ends[L] = seln.ends[R] = cmd;
      seln.clear().jQwrap(cmd.jQ);
    }
  };
  _.deleteOutOf = function(dir, cursor) {
    // in case this is a block of a Style mathcommand,
    // which is the only child of RootMathBlock, then
    // we shall not support moving out of this block!
    if (this.whetherRootStyleBlock()) {
      return;
    }


	// in case we are in ggbtable, don't allow
	// deleting out of this mathblock!
	var cmd = this.parent;
    if (cmd.ctrlSeq.indexOf('\\ggbtd') > -1) {
      // do nothing!
      return;
    }
    if (cmd.ctrlSeq.indexOf('\\ggbtr') > -1) {
      // do nothing!
      return;
    }
    if (cmd.ctrlSeq === '\\ggbtable' ||
   		cmd.ctrlSeq === '\\parametric' ||
   		cmd.ctrlSeq === '\\prcondition' ||
    	cmd.ctrlSeq === '\\piecewise' ||
    	cmd.ctrlSeq === '\\prcurve') {
      // do nothing! ?? question: should we do
      // the same with \\piecewise and \\prcurve,
      // as top-level blocks? maybe it's better
      // to let them to be deleted? I think no,
      // because all of these will be associated
      // with SpecialRadioButtonTreeItem, and
      // it will be good to keep the structure.
      return;
    }
    if (cmd.pwtable || cmd.prtable) {
    	// do nothing!
    	return;
    }
	// old behaviour
    cursor.unwrapGramp();
  };
  _.selectChildren = function(cursor, first, last) {
    cursor.selection = Selection(first, last);
    cursor.insertAfter(last);
  };
  _.seek = function(pageX, cursor) {
	var thisMod = this;
	//if (cursor.root === this) {
	if (this instanceof RootMathBlock) {
      thisMod = this.maybeThisMaybeStyle();
	}
	//}
    cursor.appendTo(thisMod).seekHoriz(pageX, thisMod);
  };
  _.write = function(cursor, ch, replacedFragment) {
    var cmd;

    // first of all, if the cursor is after a Style,
    // and its parent is the root block, move into it,
    // because the style is that of the root!
    if (cursor[L]) {
      if (cursor[L] instanceof Style) {
        if (cursor.parent === cursor.root) {
          //var cl = cursor[L];// does not work
          //cursor.prepareMove().appendTo(cl);

          cursor.moveLeft(); // invisible!
        }
      }
    }

    //if (ch.match(/^[a-eg-zA-Z]$/)) //exclude f because want florin
    if (ch.match(/^[a-zA-Z]$/)) {//GeoGebra probably doesn't want florin
      cmd = Variable(ch);
    } else if (cmd = CharCmds[ch] || LatexCmds[ch]) {
      // old code
      cmd = cmd(ch);

      // Now there may be some exceptions like subscript
      // entered after a subscript, etc. SupSub
      if (cursor.parent) {
        if (cursor.parent.parent) {
          if (cursor.parent.parent instanceof SupSub) {
            if (ch === '_' || ch === '^') {
              // in this case, do not write anything but return
              if (cursor[L]) {
            	// I did not meant to return when cursor[L] exists
            	// unless both SubSub are actually "_"
            	if (ch === '_' && cursor.parent.parent.ctrlSeq === '_') {
                  // maybe ch === '_' is not necessary?
            	  return;
            	}
              } else {
                return;
              }
            } else if (cursor.parent.parent.ctrlSeq === '_') {
              if (cmd instanceof BinaryOperator || ch === '/') {
            	// this shall move out of this SupSub,
            	// ignoring replacedFragment...
                cursor.moveRight();
                cmd.createBefore(cursor);
                return;
              }
            } else if (ch === '=') {
              // at least the equal operation should not be
              // there in powers (exponentiation) either
              cursor.moveRight();
              cmd.createBefore(cursor);
              return;
            }
          }
        }
      }
    } else {
      cmd = VanillaSymbol(ch);
    }

    if (replacedFragment) {
      // maybe the MathQuill guys were not aware that
      // this is harmful! Surely harmful in case of " marks,
      // in other cases there can be more errors...
      // so instead of calling this:
      //cmd.replaces(replacedFragment);
      // let's just get rid of replacedFragment,
      // just like in case of prepareEdit instead of prepareWrite,
      // or the replaces method of Symbol 
      replacedFragment.remove();
    } else if (cursor.selection) {
      // by the way, I would do it this way,
      // not calling this method with replacedFragment
      cursor.deleteSelection();
    }
    cmd.createBefore(cursor);
  };

  _.focus = function() {
    this.jQ.addClass('hasCursor');
    this.jQ.removeClass('empty');
    return this;
  };
  _.blur = function() {
    this.jQ.removeClass('hasCursor');
    if (this.closed) {
    } else if (this.isEmpty()) {
      this.jQ.addClass('empty');
    }
    return this;
  };
});
/*********************************************
 * Root math elements with event delegation.
 ********************************************/

function createRoot(jQ, root, textbox, editable) {
  var contents = jQ.contents().detach();

  if (!textbox) {
    jQ.addClass('mathquillggb-rendered-math');
  }

  // Node is accessible from almost everywhere inside
  // MathQuillGGB, as it is defined first, we could use it
  // but it's not Okay, since there may be more formulas
  // on the page with different root blocks!
  //Node.root = root;

  root.common = jQ[0];

  root.jQ = jQ.attr(mqBlockId, root.id);
  root.revert = function() {
    jQ.empty().unbind('.mathquillggb')
      .removeClass('mathquillggb-rendered-math mathquillggb-editable mathquillggb-textbox')
      .append(contents);
  };

  // this might be an imperfect solution of updating the revert function
  // without evaluating the formula by GeoGebraWeb, and recreating it...
  // but maybe root.latex() is invalid, which might make things wrong,
  // so the other way is chosen instead, i.e. evaluating and recreating
  //root.updateRevert = function() {
  //  var newContents = root.latex();
  //  root.revert = function() {
  //    jQ.empty().unbind('.mathquillggb')
  //      .removeClass('mathquillggb-rendered-math mathquillggb-editable mathquillggb-textbox')
  //      .append(newContents);
  //  }
  //};

  var cursor = root.cursor = Cursor(root);

  root.renderLatex(contents.text());

  if (root instanceof RootMathBlock) {
	var quasiRoot = root.maybeThisMaybeStyle();
	if (quasiRoot !== root) {
	  cursor.appendTo(quasiRoot);
	}
  }

  //textarea stuff
  var textareaHtmlString = '<textarea tabindex="-1"></textarea>';
  var disabledTextarea = false;
  if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i
				.test(window.navigator.userAgent)) {
	textareaHtmlString = '<textarea disabled="disabled"></textarea>';
	disabledTextarea = true;
  }
  var textareaSpan = root.textarea = $('<span class="textarea">' + textareaHtmlString + '</span>'),
  textarea = textareaSpan.children();
  var textareaDOM = textarea[0];
  textareaDOM.disabledTextarea = disabledTextarea;

  /******
   * TODO [Han]: Document this
   */
  var textareaSelectionTimeout;
  root.selectionChanged = function() {
    if (textareaSelectionTimeout === undefined) {
      textareaSelectionTimeout = setTimeout(setTextareaSelection);
    }
    forceIERedraw(jQ[0]);
  };
  function setTextareaSelection() {
    textareaSelectionTimeout = undefined;
    var latex = '';
    if (cursor.selection) {
      latex = cursor.selection.fold('', function(latex, el) {
        //return latex + el.latex();
    	// new policy was asked in GeoGebra JIRA's TRAC-5058
        return latex + el.text();
      });
      //latex = '$' + latex + '$';
      // this latex is actually text that can be interpreted
      // as LaTeX as well, ideally (to paste it back)
    }
    textareaManager.select(latex);
  }

  //prevent native selection except textarea
  jQ.bind('selectstart.mathquillggb', function(e) {
    if (e.target !== textarea[0]) e.preventDefault();
    e.stopPropagation();
  });

  //drag-to-select event handling
  var anticursor, blink = cursor.blink;
  jQ.bind('mousedown.mathquillggb', function(e) {
    function mousemove(e) {
      var etarget;
      if (e.target) {
    	// mousemove
    	etarget = $(e.target);
      } else {
    	// docmousemove
    	etarget = $([]);
      }
      cursor.seek(etarget, e.pageX, e.pageY);

      if (anticursor) {
    	// I don't understand, why anticursor is not really
    	// updated? Maybe something was deleted unintentionally?
        if (cursor[L] !== anticursor[L]
            || cursor.parent !== anticursor.parent) {
          cursor.selectFrom(anticursor);
        }
      }

      // mousemove has no default action according to Mozilla
      // so it's Okay to remove this, return false,
      // because it would prevent RadioButtonTreeItem.onMouseMove
      // which is for highlighting-related code...
      // also, it would be good not to return false
      // on mouse move in the whole document just for MathQuillGGB!
      // return false;

      // although we can make things more efficient in
      // the editing case:
      if (editable)
    	  return false;

      // but again, this would also prevent touch events maybe...
      // so maybe it's right to prevent default in every case,
      // and also assign touch events!
      e.preventDefault();
    }

    // docmousemove is attached to the document, so that
    // selection still works when the mouse leaves the window.
    function docmousemove(e) {
      // [Han]: i delete the target because of the way seek works.
      // it will not move the mouse to the target, but will instead
      // just seek those X and Y coordinates.  If there is a target,
      // it will try to move the cursor to document, which will not work.
      // cursor.seek needs to be refactored.
      delete e.target;

      mousemove(e);
    }

    function mouseup(e) {
      anticursor = undefined;
      cursor.blink = blink;
      if (!cursor.selection) {
        if (editable) {
          cursor.show();
        }
        else {
          textareaSpan.detach();
        }
      }

      // delete the mouse handlers now that we're not dragging anymore
      jQ.unbind('mousemove', mousemove).unbind('mouseup', mouseup);
      if ((e) && (e.target) && (e.target.ownerDocument)) {
        $(e.target.ownerDocument).unbind('mousemove', docmousemove).unbind('mouseup', mouseup);
      }

      // preventDefault + touchend needed here!
      e.preventDefault();
    }

    // TODO: revise this
    setTimeout(function() { jQ[0].focusMathQuillGGB(); });

      // preventDefault won't prevent focus on mousedown in IE<9
      // that means immediately after this mousedown, whatever was
      // mousedown-ed will receive focus
      // http://bugs.jquery.com/ticket/10345

    cursor.blink = noop;
    cursor.seek($(e.target), e.pageX, e.pageY);

    anticursor = Point(cursor.parent, cursor[L], cursor[R]);

    if (!editable) jQ.prepend(textareaSpan);

    jQ.mousemove(mousemove).mouseup(mouseup);
    if ((e) && (e.target) && (e.target.ownerDocument)) {
      $(e.target.ownerDocument).mousemove(docmousemove).mouseup(mouseup);
    }

    if (!editable) {
      return false;
    }

    // return false would mean stopPropagation & preventDefault,
    // but in case of editing mode, we actually want this to
    // propagate, so that the actions of the whole input bar shall
    // also execute on this part of it! preventDefault is Okay
    // however, because it is like clicking at a neutral place
    // AND maybe it's important for something in MathQuillGGB!
    e.preventDefault();

    // note: but this will prevent the touchstart event from firing!!!
    // so at least we should bind the touchstart event as well,
    // which is probably Okay from JQuery 1.7+, it seems...
  });

  jQ.bind('touchstart.mathquillggb', function(e) {
    function touchmove(e) {
      var ourtarget;
      var origevt = e.originalEvent;
      if (origevt) {
        if (origevt.changedTouches) {
          if (origevt.changedTouches[0]) {
            // please, do not move more touching fingers :-)
            ourtarget = origevt.changedTouches[0];
          }
        }
      }

      if (ourtarget) {
        var etarget;
        if (e.docmousemoveMathQuillGGB) {
          etarget = $([]);
        } else if (ourtarget.target) {
	      // mousemove
	      etarget = $(ourtarget.target);
	    } else {
	      // docmousemove
	      etarget = $([]);
	    }
        cursor.seek(etarget, ourtarget.pageX, ourtarget.pageY);

	    if (anticursor) {
	      // I don't understand, why anticursor is not really
	      // updated? Maybe something was deleted unintentionally?
	      if (cursor[L] !== anticursor[L] || cursor.parent !== anticursor.parent) {
	        cursor.selectFrom(anticursor);
	      }
	    }
      }

	  // although we can make things more efficient in
	  // the editing case:
	  if (editable)
	    return false;

      // but again, this would also prevent touch events maybe...
	  // so maybe it's right to prevent default in every case,
	  // and also assign touch events!
	  e.preventDefault();
    } 

    function doctouchmove(e) {
      e.doctouchmoveMathQuillGGB = true;
      touchmove(e);
    }

    function touchend(e) {
      anticursor = undefined;
      cursor.blink = blink;
      if (!cursor.selection) {
        if (editable) {
          cursor.show();
        } else {
          textareaSpan.detach();
        }
      }

      // delete the mouse handlers now that we're not dragging anymore
      jQ.unbind('touchmove', touchmove).unbind('touchend', touchend);

      var ourtarget = e;
      var origevt = e.originalEvent;
      if (origevt) {
        if (origevt.changedTouches) {
          if (origevt.changedTouches[0]) {
            // please, do not move more touching fingers :-)
            ourtarget = origevt.changedTouches[0];
          }
        }
      }

      if ((ourtarget) && (ourtarget.target) && (ourtarget.target.ownerDocument)) {
        $(ourtarget.target.ownerDocument).unbind('touchmove', doctouchmove).unbind('touchend', touchend);
      } else if ((e) && (e.target) && (e.target.ownerDocument)) {
    	// I think here we can use e.target, as it is only used to get the ownerDocument!
        $(e.target.ownerDocument).unbind('touchmove', doctouchmove).unbind('touchend', touchend);
      }

      // preventDefault + touchend needed here!
      e.preventDefault();
    }

    // TODO: revise this
    setTimeout(function() { jQ[0].focusMathQuillGGB(); });

      // preventDefault won't prevent focus on mousedown in IE<9
      // that means immediately after this mousedown, whatever was
      // mousedown-ed will receive focus
      // http://bugs.jquery.com/ticket/10345

    cursor.blink = noop;

    // Note that we also need to change the code here! Although it may
    // seem to work, but e.target is not a standard way of getting
    // touch event target, so using the same approach as in touchmove
    //cursor.seek($(e.target), e.pageX, e.pageY);

    // and use the "e" only for a fallback
    var ourtarget = e;
    var origevt = e.originalEvent;
    if (origevt) {
      if (origevt.changedTouches) {
        if (origevt.changedTouches[0]) {
          // please, do not move more touching fingers :-)
          ourtarget = origevt.changedTouches[0];
        }
      }
    }
    cursor.seek($(ourtarget.target), ourtarget.pageX, ourtarget.pageY);

    anticursor = Point(cursor.parent, cursor[L], cursor[R]);

    if (!editable) jQ.prepend(textareaSpan);

    jQ.bind('touchmove', touchmove).bind('touchend', touchend);
    if ((ourtarget) && (ourtarget.target) && (ourtarget.target.ownerDocument)) {
      $(ourtarget.target.ownerDocument).bind('touchmove', doctouchmove).bind('touchend', touchend);
    } else if ((e) && (e.target) && (e.target.ownerDocument)) {
      // I think here we can use e.target, as it is only used to get the ownerDocument!
      $(e.target.ownerDocument).bind('touchmove', doctouchmove).bind('touchend', touchend);
    }

    if (!editable) {
      return false;
    }

    // return false would mean stopPropagation & preventDefault,
    // but in case of editing mode, we actually want this to
    // propagate, so that the actions of the whole input bar shall
    // also execute on this part of it! preventDefault is Okay
    // however, because it is like clicking at a neutral place
    // AND maybe it's important for something in MathQuillGGB!
    e.preventDefault();

    // note: but this will prevent the touchstart event from firing!!!
    // so at least we should bind the touchstart event as well,
    // which is probably Okay from JQuery 1.7+, it seems...
  });

  if (!editable) {
    var textareaManager = manageTextarea(textarea, { container: jQ, rootJQ: jQ });
    jQ.bind('cut paste', false).bind('copy', setTextareaSelection)
      .prepend('<span class="selectable">$'+root.latex()+'$</span>');
    textarea.blur(function() {
      cursor.clearSelection();
      setTimeout(detach); //detaching during blur explodes in WebKit
    });
    function detach() {
      textareaSpan.detach();
    }
    return;
  }

  var textareaManager = manageTextarea(textarea, {
    //container: jQ,
    container: textarea,
    rootJQ: jQ,
    moveLeft: function() {
      cursor.moveLeft();
    },
    key: function(key, evt) {
      cursor.parent.bubble('onKey', cursor, key, evt);
    },
    text: function(text) {
      cursor.parent.bubble('onText', cursor, text);
    },
    cut: function(e) {
      if (cursor.selection) {
        setTimeout(function() {
          cursor.prepareEdit();
          cursor.parent.bubble('redraw');
        });
      }

      e.stopPropagation();
    },
    copy: function(e) {
      if (cursor.selection) {
        setTimeout(function() {
          cursor.prepareMove();
          cursor.parent.bubble('redraw');
        });
      }

      e.stopPropagation();
    },
    paste: function(text) {
      // FIXME HACK the parser in RootTextBlock needs to be moved to
      // Cursor::writeLatex or something so this'll work with
      // MathQuillGGB textboxes
      if ((text.slice(0,1) === '$') && (text.slice(-1) === '$')) {
        text = text.slice(1, -1);
      } else {
        // We almost never want to paste TextBlock into MathQuillGGB,
    	// but when we do, it will look the same way without \\text too!
        //text = '\\text{' + text + '}';
      }

      //console.log('paste 1:'+text);
      var text3 = text;

      // in theory GeoGebraWeb handles the \" output from Quotation
      // and after some other operation it converts it to simple "
      // but it is not done here after copying, so we need to
      // simply change \" to "; although neither is really perfect!
      // BUT this must be done before substQuotations otherwise
      // there is nothing to replace...
      //text3 = text3.split('\\"').join('"');
      // but after this part of the substQuotations perfection is gone!
      // so it's probably better to add this to the substQuotations
      // method itself, implemented at the right places only...

      // before solving this method in a better way, we shall
      // note that the input syntax can be quite different:
      // output from MathQuillGGB actually has \" signs for the
      // Quotation class and simple " signs for characters inside
      // the quoted string. However, intuitively just the opposite
      // shall be right, i.e. " signs for Quotation class and
      // escaped \" characters for the characters inside the
      // quoted string. Thus I think, it would be better to rethink
      // the entire thing in connection with Quotations, also
      // for JIRA ticket GGB-80, and this one TRAC-5058
      text3 = cursor.substQuotations(text3);

      //console.log('paste 2:'+text3);

      // this is not good, e.g. in Quotation we shall leave
      // space intact... similarly, we cannot delete " "
      // from anywhere, but just solve this double-space
      // in another way, i.e. do not change it to \u2060
      // if it is after another \space ...
      //text3 = text3.split('\space ').join('\u2060');

      text3 = text3.split(' ').join('\u2060');

      // or it is also okay (and more easy) to change back
      // as we don't want \space\u2060 anyway...
      var text3b = '';
      while (text3b !== text3) {
        text3b = text3;
        text3 = text3.split('\\space\u2060').join('\\space ');
        // maybe these things may also happen
        text3 = text3.split('\u2060\\space').join(' \\space');
        // the same again?
        // NOTE: it's not good to change more characters to less
        // here, e.g. \u2060\u2060 to \u2060 because it would
        // work wrongly in case of inside Quotations
      }

      //console.log('paste 3:'+text3);
     
      //console.log('paste 4:'+text3);

      //text3 = cursor.fix3bug(text3);

      // --- the fix2bug and fixabug methods are not as good as
      // --- the other methods before, but these are complex
      // --- issues, see JIRA TRAC-5058 and GGB-80
      text3 = cursor.fix2bug(text3);
      
      //console.log('paste 5:'+text3);
      
      text3 = cursor.fixabug(text3);

      console.log('paste 6:'+text3);

      cursor.writeLatexSafe(text3);
    }
  });

  jQ.prepend(textareaSpan);

  //root CSS classes
  jQ.addClass('mathquillggb-editable');
  if (textbox)
    jQ.addClass('mathquillggb-textbox');

  textareaDOM.hadFocus = false;

  var textareaFocusFunction = function(e1) {
    if (textareaDOM.hadFocus === false) {
      if (!cursor.parent)
        cursor.appendTo(root);
      cursor.parent.jQ.addClass('hasCursor');
      if (cursor.selection) {
        cursor.selection.jQ.removeClass('blur');
        setTimeout(root.selectionChanged); //re-select textarea contents after tabbing away and back
      } else {
        cursor.show();
      }

      // dirty hack, but effective, as mathquillggb.js is used
      // from GeoGebraWeb anyway (if not, it does no harm)
      if (root.common.newCreationMode) {
        textarea.parents('.algebraPanel').addClass('NoHorizontalScroll');
      }
      textareaDOM.hadFocus = true;
    }
  };

  var textareaBlurFunction = function(e2) {
    if (textareaDOM.hadFocus) {
      if (cursor.parent) {
        cursor.hide().parent.blur();
      }
      if (cursor.selection) {
        cursor.selection.jQ.addClass('blur');
      }

      // dirty hack, but effective, as mathquillggb.js is used
      // from GeoGebraWeb anyway (if not, it does no harm)
      if (root.common.newCreationMode) {
        textarea.parents('.algebraPanel').removeClass('NoHorizontalScroll');
      }
      textareaDOM.hadFocus = false;
    }
  };

  //focus and blur handling
  if (!disabledTextarea) {
    textarea.focus(textareaFocusFunction).blur(textareaBlurFunction);
  }

  // to make things clear:
  // - jQ will have tabindex=1, event orders:
  // A. in case none has focus:
  // jQ.focus, textarea.focusin, jQ.blur, textarea.focus
  // more exactly:
  // jQ.focus, jQ.focusOut, textarea.focusin, jQ.blur, textarea.blur triggered,
  // now which comes first? textarea.focus or textarea.focusout & textarea.blur?

  // there is a bug when TAB moves tabindex back to the same element,
  // so maybe we will need a dummy element with a tabindex 0,
  // which is later than the tab index of the mathquillggb-editable element!
  jQ.prev().attr('tabindex', 2);
  if(document.body.addEventListener){
	  document.body.addEventListener('MSPointerDown',function(e){window.mqTouchEvents = e.pointerType == 2 || e.pointerType == "touch"});
  }
  // That's why a better solution is needed here:
  jQ.attr('tabindex', 1).bind('focus.mathquillggb', function(e1) {
    // the problem is that this might be called when still
    // the textarea is having focus... but actually, the
    // blur method and handler of the textarea might be called earlier,
    // so by this time we do not know how this was called...

    // so the only good solution, I think, is to check this at
    // the time of triggering the focus event by the focus method
    // or in some other way... but then we shall make sure that
    // all these calling methods do that check
    // and we can probably do it by document.activeElement
    // instead of textareaDOM.hadFocus

    // it gets tabindex of 1 to get focus ASAP,
    // and also because the blur event on TAB should
    // really leave this element in case TAB is pressed!

    adjustFixedTextarea(jQ);

    // if jQ just gets focus, why was here jQ.blur???
    // to make this blur before textarea.focus() makes it blur,
    // because it may be too late and trigger textarea.blur()
    // after textarea.focus(), I think, which is too late
    // but still in this case, textarea.blur may be called too
    // late, setTimeout is not the best solution:
    if (window.mqTouchEvents) {
      textarea.attr("disabled","true");
    } else if (window.mqTouchEvents === false) {
      textarea.removeAttr("disabled");
    }

    if (disabledTextarea) {
      textareaFocusFunction(e1);
    } else {
      // I think there is no point in setting more setTimeout
      // when the first one will clear the other ones, so
      // this is the simplest solution so far, but is this
      // the most reliable? Probably not...
      // 100ms is experimental, 0ms does not work with Web.html
      setTimeout(function() { textarea.focus(); }, 100);
	}

    // do this immediately (ATM also happens in timeout, might not be needed)
    if (root.common.newCreationMode) {
      textarea.parents('.algebraPanel').addClass('NoHorizontalScroll');
    }
  }).bind('blur.mathquillggb', function(e3) {
    if (disabledTextarea) {
      textareaBlurFunction(e3);
    }
  }).blur();

  // we need a method that only focuses when the textareaDOM is
  // not yet having focus! 
  jQ[0].focusMathQuillGGB = // the same thing, in theory
  root.common.focusMathQuillGGB = function() {
    if (document.activeElement === textareaDOM) {
      // do no focus!
    } else if (textareaDOM.hadFocus) {
      // do no focus!
    } else {
      this.focus();
    }
  }
}

var RootMathBlock = P(MathBlock, function(_, _super) {
  _.latex = function() {
    return _super.latex.call(this).replace(/(\\[a-z]+) (?![a-z])/ig,'$1');
  };
  _.text = function() {
    return this.foldChildren('', function(text, child) {
      return text + child.text();
    });
  };
  _.renderLatex = function(latex) {
    var jQ = this.jQ;

    jQ.children().slice(1).remove();
    this.ch[L] = this.ch[R] = 0;

    var newCursor = this.cursor.appendTo(this);
    //var latex2 = newCursor.substQuotations(latex);
    // maybe we shall not do this, but do it in
    // GeoGebraWeb instead! Because " can be inside
    // real \\quotation syntax, would be buggy...
    var latex2 = latex;
    newCursor.writeLatex(latex2);
  };
  _.appendKoreanChar = function(lead, vowel, tail) {
	// lead, vowel and tail are char codes
    var lead0 = lead - 0x1100 + 1;
    var vowel0 = vowel - 0x1161 + 1;
    var tail0 = ((tail == 0) ? 0 : (tail - 0x11a8 + 1));
    var unicode = (tail0 + (vowel0 - 1) * 28 + (lead0 - 1) * 588 + 44032);
    // return is actual character
    return String.fromCharCode(unicode);
  };
  _.flattenKorean = function(s) {
	// init!
    var sb = "";
    var lastWasVowel = false;
    var koreanLeadToTail = new Object();
    koreanLeadToTail['\u1100'] = '\u11a8';
    koreanLeadToTail['\u1101'] = '\u11a9';
    koreanLeadToTail['\u1102'] = '\u11ab';
    koreanLeadToTail['\u1103'] = '\u11ae';
    koreanLeadToTail['\u1104'] = '\u1104';
    koreanLeadToTail['\u1105'] = '\u11af';
    koreanLeadToTail['\u1106'] = '\u11b7';
    koreanLeadToTail['\u1107'] = '\u11b8';
    koreanLeadToTail['\u1108'] = '\u1108';
    koreanLeadToTail['\u1109'] = '\u11ba';
    koreanLeadToTail['\u110a'] = '\u11bb';
    koreanLeadToTail['\u110b'] = '\u11bc';
    koreanLeadToTail['\u110c'] = '\u11bd';
    koreanLeadToTail['\u110d'] = '\u110d';
    koreanLeadToTail['\u110e'] = '\u11be';
    koreanLeadToTail['\u110f'] = '\u11bf';
    koreanLeadToTail['\u1110'] = '\u11c0';
    koreanLeadToTail['\u1111'] = '\u11c1';
    koreanLeadToTail['\u1112'] = '\u11c2';

    for (var i = 0; i < s.length; i++) {
      var c = s.charCodeAt(i);
      if ((c >= 0xac00) && (c <= 0xd7af)) {
      //if (isKoreanMultiChar(c))
        var tail = 0x11a7 + (c - 44032) % 28;
        var tailstr = String.fromCharCode(tail);
        var vowelstr = String.fromCharCode(0x1161 + Math.floor(((c - 44032 - (tail - 0x11a7)) % 588) / 28));
        var leadstr = String.fromCharCode(0x1100 + Math.floor((c - 44032) / 588));
		sb += leadstr;
		sb += vowelstr;
		if (!this.isKoreanLeadPlusVowelChar(c)) {
			sb += tailstr;
		}
      } else {
        // if a "lead char" follows a vowel, turn into a "tail char"
        if (lastWasVowel && (c >= 0x1100) && (c <= 0x1112)) {
          var charac = String.fromCharCode(c);
          charac = koreanLeadToTail[charac];
          sb += charac;
        } else {
          sb += String.fromCharCode(c);
        }
      }
      if (sb.length) {
        var testc = sb.charCodeAt(sb.length - 1);
        lastWasVowel = false;
        if ((testc >= 0x1161) && (testc <= 0x1175)) {
          lastWasVowel = true;
        }
      }
    }
    return sb;
  };
  _.isKoreanLeadPlusVowelChar = function(c) {
    if ((c >= 0xac00) && (c <= 0xd7af)) {
      var ch = c - 0xac00;
      if ((ch % 28) === 0) {
        return true;
      }
    }
    return false;
  };
  _.unflattenKorean = function(str) {
    var ret = "";
    var lead = 0;
    var vowel = 0;
    var tail = 0;
    // ONLY merge really lead-vowel-tail combos!
    for (var i = 0; i < str.length; i++) {
      var c = str.charCodeAt(i);
      if ((c >= 0x1100) && (c <= 0x1112)) {
        //if (isKoreanLeadChar(c)) {
  	    if ((lead == 0) && (vowel == 0) && (tail == 0)) {
          lead = c;
    	} else {
    	  // in theory, it cannot happen that either
    	  // vowel and tail are filled, while
    	  // at the same time, lead is not!

    	  // but it can happen that
    	  // - only lead is filled:
    	  if ((lead != 0) && (vowel == 0) && (tail == 0)) {
    		ret += String.fromCharCode(lead);
    		lead = c;
    	  } else
    	  // - lead & vowel is filled:
    	  if ((lead != 0) && (vowel != 0) && (tail == 0)) {
      		ret += String.fromCharCode(lead);
      		ret += String.fromCharCode(vowel);
      		lead = c;
      		vowel = 0;
      	  } else {
      		// in other cases, we might need to flush c...
      		// but in theory, there are no other cases!
      	  }
    	}
      } else if ((c >= 0x1161) && (c <= 0x1175)) {
      //if (isKoreanVowelChar(c)) {
    	if (lead == 0) {
    	  // comes in the wrong time, flush immediately
    	  // as in theory it cannot happen that vowel or tail
          // are there when lead is not...
    	  ret += String.fromCharCode(c);
    	} else if (vowel != 0) {
    	  // comes in the wrong time, flush immediately everything!
      	  ret += String.fromCharCode(lead);
    	  ret += String.fromCharCode(vowel);
    	  ret += String.fromCharCode(c);
    	  lead = 0;
    	  vowel = 0;
    	  // tail is always 0
    	} else {
    	  // in this case, tail should be 0 in theory!
          vowel = c;
    	}
      } else if ((c >= 0x11a8) && (c <= 0x11c2)) {
      //if (isKoreanTailChar(c)) {
    	// "tail always flushes"
    	if ((lead != 0) && (vowel != 0)) {
    	  tail = c;
    	  ret += this.appendKoreanChar(lead, vowel, tail);
    	  lead = 0;
    	  vowel = 0;
    	  tail = 0;
    	} else if (lead == 0) {
    	  // in this case, no vowel either, no tail
    	  ret += String.fromCharCode(c);
    	} else if (vowel == 0) {
    	  // there is lead, so need to make it null
    	  ret += String.fromCharCode(lead);
    	  lead = 0;
    	  ret += String.fromCharCode(c);
    	}
      } else {
    	// ordinary character comes, flush!
    	if (lead != 0) {
    	  if (vowel != 0) {
          	ret += String.fromCharCode(lead);
            ret += String.fromCharCode(vowel);
            lead = 0;
            vowel = 0;
    	  } else {
          	ret += String.fromCharCode(lead);
          	lead = 0;
    	  }
   	    }
    	// if lead is 0, vowel and tail are also 0
        ret += String.fromCharCode(c);
      }
    }

    // make sure last char done!
    if (lead != 0) {
      if (vowel != 0) {
        ret += String.fromCharCode(lead);
        ret += String.fromCharCode(vowel);
      } else {
    	ret += String.fromCharCode(lead);
      }
      // old school
      //ret += this.appendKoreanChar(lead, vowel, tail);
    }
    return ret;
  };
  _.mergeKoreanDoubles = function(str2) {
	var str = str2;
    // ported to JavaScript from Java: GeoGebra/common...
    // Korean.java / Korean.mergeDoubleCharacters(String)

    if (str.length) {
      var str = hangulJamo(str);
      if (str.length) {
        if (str.length < 2) {
          return str;
        }
      } else {
    	return str;
      }
    } else {
      return str;
    }

    // flattenKorean makes more characters from less,
    // and without it, the 3-character test case does
    // not seem to work! so put here, even if it seems
    // different order than in the Desktop case...
    str2 = this.flattenKorean(str);
    if (str2.length) {
      str = str2;
    }

    var sb = "", c, c2;
    for (var i = 0; i < str.length - 1; i++) {
      var offset = 1;
      c = str.charCodeAt(i);
      switch (str.charAt(i)) {
        case '\u1161':
        case '\u1162':
        case '\u1165':
        case '\u1166':
          offset++;
        case '\u1103':
        case '\u1109':
        case '\u110c':
        case '\u11a8':
        case '\u11ba':
          if (str.charCodeAt(i + 1) === c) {
            sb += String.fromCharCode(c + offset);
            // eg \u1101 ie doubled char
            i++;
          } else {
            sb += String.fromCharCode(c);
          }
          break;
        case '\u1169':
          c2 = str.charAt(i + 1);
          if (c2 === '\u1161') {
            sb += '\u116a';
            i++;
          } else if (c2 === '\u1162') {
            sb += '\u116b';
            i++;
          } else if (c2 === '\u1175') {
            sb += '\u116c';
            i++;
          } else if (c2 === '\u1169') {
            sb += '\u116d';
            i++;
          } else {
            sb += String.fromCharCode(c);
          }
          break;
        case '\u1105':
          c2 = str.charAt(i + 1);
          if (c2 === '\u1100') {
            sb += '\u11b0'; // eg \u1101 ie doubled char
            i++;
          } else if (c2 === '\u1106') {
            sb += '\u11b1'; // eg \u1101 ie doubled char
            i++;
          } else if (c2 === '\u1107') {
            sb += '\u11b2'; // eg \u1101 ie doubled char
            i++;
          } else if (c2 === '\u1109') {
            sb += '\u11b3'; // eg \u1101 ie doubled char
            i++;
          } else if (c2 === '\u1110') {
            sb += '\u11b4'; // eg \u1101 ie doubled char
            i++;
          } else if (c2 === '\u1112') {
            sb += '\u11b6'; // eg \u1101 ie doubled char
            i++;
          } else {
            sb += String.fromCharCode(c);
          }
          break;
        case '\u116e':
          c2 = str.charAt(i + 1);
          if (c2 === '\u1165') {
            sb += '\u116f'; // eg \u1101 ie doubled char
            i++;
          } else if (c2 === '\u1166') {
            sb += '\u1170'; // eg \u1101 ie doubled char
            i++;
          } else if (c2 === '\u1175') {
            sb += '\u1171'; // eg \u1101 ie doubled char
            i++;
          } else if (c2 === '\u116e') {
            sb += '\u1172'; // eg \u1101 ie doubled char
            i++;
          } else {
            sb += String.fromCharCode(c);
          }
          break;
        case '\u1173':
          c2 = str.charAt(i + 1);
          if (c2 === '\u1175') {
            sb += '\u1174'; // eg \u1101 ie doubled char
            i++;
          } else {
            sb += String.fromCharCode(c);
          }
          break;
        case '\u1100':
          c2 = str.charAt(i + 1);
          if (c2 === '\u1100') {
            sb += '\u11a9'; // eg \u1101 ie doubled char
            i++;
          } else if (c2 === '\u1109') {
            sb += '\u11aa'; // eg \u1101 ie doubled char
            i++;
          } else {
            sb += String.fromCharCode(c);
          }
          break;
        case '\u1102':
          c2 = str.charAt(i + 1);
          if (c2 === '\u110c') {
            sb += '\u11ac'; // eg \u1101 ie doubled char
            i++;
          } else if (c2 === '\u1112') {
            sb += '\u11ad'; // eg \u1101 ie doubled char
            i++;
          } else {
            sb += String.fromCharCode(c);
          }
          break;
        case '\u1111':
          c2 = str.charAt(i + 1);
          if (c2 === '\u1111') {
            sb += '\u11b5'; // eg \u1101 ie doubled char
            i++;
          } else {
            sb += String.fromCharCode(c);
          }
          break;
		case '\u1107':
          c2 = str.charAt(i + 1);
          if (c2 === '\u1109') {
            sb += '\u11b9'; // eg \u1101 ie doubled char
            i++;
          } else if (c2 === '\u1107') {
            sb += '\u1108'; // eg \u1101 ie doubled char
            i++;
          } else {
            sb += String.fromCharCode(c);
          }
          break;
        default:
          sb += String.fromCharCode(c);
      }
      if (i === str.length - 2) {
        sb += str.charAt(str.length - 1);
      }
    }
    str = sb;
    if (str.length) {
      if (str.length < 2) {
        return str;
      }
    } else {
      return str;
    }
    str = this.unflattenKorean(str);
    return str;
  };
  _.maybeThisMaybeStyle = function() {
    var root = this;
    // maybe there is no need for so much checks,
    // but who knows? what error might arise,
    // exceptions shall be avoided in any case!
    if (root.ch[L]) {
      if (root.ch[L] instanceof MathCommand) {
        if (root.ch[L].ch[L]) {
          if (root.ch[L].ch[L] instanceof MathBlock) {
            if (root.ch[L].ch[L].whetherRootStyleBlock()) {
              return root.ch[L].ch[L];
            }
          }
        }
      }
    }
    return root;
  };
  _.onKey = function(curs, key, e) {
	var quasiRoot = this.maybeThisMaybeStyle();
    switch (key) {
    case 'Ctrl-Shift-Backspace':
    case 'Ctrl-Backspace':
      while (this.cursor[L] || this.cursor.selection) {
        this.cursor.backspace();
      }
      break;

    case 'Shift-Backspace':
    case 'Backspace':
      this.cursor.backspace();
      break;

    // Tab or Esc -> go one block right if it exists, else escape right.
    case 'Esc':
      this.cursor.escapeDir(R, key, e);
      return;

    case 'Tab':
      var cursorLeft = this.cursor[L];
      if (this.cursor.selection) {
    	// in any case, clear the previous selection
    	// so that new selection may happen, even if
    	// it will be the same selection as this one
        this.cursor.clearSelection();

        // in order not to select the same thing again,
        // move right if possible, otherwise move to
        // the beginning of the formula!
        if (this.cursor[R]) {
          this.cursor.moveRight();
        } else {
          this.cursor.insertBefore(this.ch[L]);
        }
        if (this.cursor[R]) {
          // Okay, can call method later
        } else {
          // make it possible to have cursor[R]
          this.cursor.insertBefore(this.ch[L]);
        }
      }
      if (this.cursor[R]) {
    	// now this means we have something
        this.selectNextSyntaxHelp();
        if (this.cursor.selection) {
          // success!
        } else if (this.cursor[L]) {
          // we can still try to go to the left,
          // and try again!
          //var cursorLeft = this.cursor[L];
          this.cursor.insertBefore(this.ch[L]);
          this.selectNextSyntaxHelp();
          if (this.cursor.selection) {
        	  // success, keep cursor position!
          } else {
        	  // fail, revert to previous cursor pos
        	  this.cursor.insertAfter(cursorLeft);
          }
        }
      }
      break;

    // Shift-Tab -> go one block left if it exists, else escape left.
    case 'Shift-Tab':
    case 'Shift-Esc':
    case 'Shift-Spacebar':
      this.cursor.escapeDir(L, key, e);
      return;

    // Prevent newlines from showing up
    case 'Enter': break;


    // End -> move to the end of the current block.
    case 'End':
      this.cursor.prepareMove().appendTo(this.cursor.parent);
      break;

    // Ctrl-End -> move all the way to the end of the root block.
    case 'Ctrl-End':
      this.cursor.prepareMove().appendTo(quasiRoot);
      break;

    // Shift-End -> select to the end of the current block.
    case 'Shift-End':
      while (this.cursor[R]) {
        this.cursor.selectRight();
      }
      break;

    // Ctrl-Shift-End -> select to the end of the root block.
    case 'Ctrl-Shift-End':
      while (this.cursor[R] ||
    		 ((this.cursor.parent !== this) &&
    		  (this.cursor.parent !== quasiRoot))) {
        this.cursor.selectRight();
      }
      break;

    // Home -> move to the start of the root block or the current block.
    case 'Home':
      this.cursor.prepareMove().prependTo(this.cursor.parent);
      break;

    // Ctrl-Home -> move to the start of the current block.
    case 'Ctrl-Home':
      this.cursor.prepareMove().prependTo(quasiRoot);
      break;

    // Shift-Home -> select to the start of the current block.
    case 'Shift-Home':
      while (this.cursor[L]) {
        this.cursor.selectLeft();
      }
      break;

    // Ctrl-Shift-Home -> move to the start of the root block.
    case 'Ctrl-Shift-Home':
      while (this.cursor[L] ||
    		 ((this.cursor.parent !== this) &&
    		  (this.cursor.parent !== quasiRoot))) {
        this.cursor.selectLeft();
      }
      break;

    case 'Left': this.cursor.moveLeft(); break;
    case 'Shift-Left': this.cursor.selectLeft(); break;
    case 'Ctrl-Left': break;

    case 'Right': this.cursor.moveRight(); break;
    case 'Shift-Right': this.cursor.selectRight(); break;
    case 'Ctrl-Right': break;

    // Up and Down will not run in newCreationMode as they are
    // handled in GeoGebraWeb in the event capturing phase
    case 'Up': this.cursor.moveUp(); break;
    case 'Down': this.cursor.moveDown(); break;

    case 'Shift-Up':
      if (this.cursor[L]) {
        while (this.cursor[L]) this.cursor.selectLeft();
      } else {
        this.cursor.selectLeft();
      }
      // was no break??
      break;

    case 'Shift-Down':
      if (this.cursor[R]) {
        while (this.cursor[R]) this.cursor.selectRight();
      }
      else {
        this.cursor.selectRight();
      }
      // was no break??
      break;

    case 'Ctrl-Up': break;
    case 'Ctrl-Down': break;

    case 'Ctrl-Shift-Del':
    case 'Ctrl-Del':
      while (this.cursor[R] || this.cursor.selection) {
        this.cursor.deleteForward();
      }
      break;

    case 'Shift-Del':
    case 'Del':
      this.cursor.deleteForward();
      break;

    case 'Meta-A':
    case 'Ctrl-A':
      //so not stopPropagation'd at RootMathCommand
      if (this !== this.cursor.root) return;

      this.cursor.prepareMove().appendTo(quasiRoot);
      while (this.cursor[L]) this.cursor.selectLeft();
      break;

    case 'F1':
    default:
      if (this.common !== undefined) {
    	if (this.common.forceGeoGebraSuggestionPopupCanShow === true) {
    	  delete this.common.forceGeoGebraSuggestionPopupCanShow;
    	} else {
    	  // by default, this shall be overwritten
          this.common.GeoGebraSuggestionPopupCanShow = false;

    	  // Change: We should only allow the suggestion popup
          // for alphanumeric characters! "sqrt(" showing was a bug
    	  var key2 = key;
    	  if ((key2 !== undefined) && (key2.length > 0)) {
    		  if ((key2.length === 7) && (key2.substring(0,6) === "Shift-")) {
    			  key2 = key2.substring(6);
    		  }
    		  if (key2.length === 1) {
    			  var cc = key2.charCodeAt(0);
    			  this.geogebraAutocompleteSuggestionCheck(cc);
    		  }
    	  }
    	  // note: something like the above method shall be called in
    	  // case the mathquillggb replace command happens!!! But in that
    	  // case, we can take the character directly (its character code)
    	}
      }
      return false;
    }

    if (this.common !== undefined) {
      // but note that in case of Up and Down, we should not hide them!
      if (this.common.forceGeoGebraSuggestionPopupCanShow === true) {
        delete this.common.forceGeoGebraSuggestionPopupCanShow;
      } else {
        this.common.GeoGebraSuggestionPopupCanShow = false;
      }
  	}

    e.preventDefault();
    return false;
  };
  _.geogebraAutocompleteSuggestionCheck = function(cc) {
	// cc is charCode
    if (cc >= 65 && cc <= 90) {
      // ASCII A-Z OK
      this.common.GeoGebraSuggestionPopupCanShow = true;
    } else if (cc >= 97 && cc <= 122) {
      // we shall also accept lowercase, as this method
      // is also called from somewhere else!
      this.common.GeoGebraSuggestionPopupCanShow = true;
    } else if (cc >= 48 && cc <= 57) {
      // ASCII 0-9 maybe OK (?)
      this.common.GeoGebraSuggestionPopupCanShow = true;
    } else {
      // Korean characters also need checks for #5398
      if ((cc >= 0x1100) && (cc <= 0x1112)) {
    	// Korean lead char
    	this.common.GeoGebraSuggestionPopupCanShow = true;
      } else if ((cc >= 0x1161) && (cc <= 0x1175)) {
    	// Korean vowel char
    	this.common.GeoGebraSuggestionPopupCanShow = true;
      } else if ((cc >= 0x11a8) && (cc <= 0x11c2)) {
    	// Korean tail char
    	this.common.GeoGebraSuggestionPopupCanShow = true;
      } else if ((cc >= 0xac00) && (cc <= 0xd7af)) {
    	// Korean multi char
    	this.common.GeoGebraSuggestionPopupCanShow = true;
      }
    }
  };
  _.onText = function(curs, ch) {
	if (ch === ',') {
      if (this.cursor[R]) {
        if ((this.cursor[R] instanceof VanillaSymbol) && (this.cursor[R].ctrlSeq === ',')) {
          // TODO: it would be good to make a heuristic whether
          // this.selectNextSyntaxHelp will work or not, e.g. by searching
          // in this.text()... however, in the GeoGebraWeb command case it further slows it down
          var successful = this.selectNextSyntaxHelp();
          if (successful) {
            if (this.common !== undefined) {
              this.common.GeoGebraSuggestionPopupCanShow = false; // or undefined;
            }
            return false;
          }
          // if not successful we should just continue with the default case
          // for the same reason, this.selectNextSyntaxHelp() should not have
          // any ill effect on the formula in case it is unsuccessful!
        }
      }
      this.cursor.write(ch);
	} else if (ch === ' ') {
      this.cursor.write('\u00d7');
	} else {
      // now look back 3 characters, and check whether they are Korean
      // characters that can be merged...
      var mrt = ch;
      var triple = ch;
      var numadded = 0;
      if (this.cursor[L] && (this.cursor[L] instanceof Symbol)) {
        if (this.cursor[L].ctrlSeq) {
          if (this.cursor[L].ctrlSeq.length === 1) {
            triple = this.cursor[L].ctrlSeq + triple;
            numadded++;
            if (this.cursor[L][L] && (this.cursor[L][L] instanceof Symbol)) {
              if (this.cursor[L][L].ctrlSeq) {
                if (this.cursor[L][L].ctrlSeq.length === 1) {
                  triple = this.cursor[L][L].ctrlSeq + triple;
                  numadded++;
                }
              }
            }
          }
        }
      }
      var tripleL = triple.length;
      // this may be 0-1-2 characters more than mort.length
      // but in case it's really more, try to merge!
      // moreover, merge ANYWAY, if (tripleL > 1)!
      if (tripleL > 1) {
        triple = this.mergeKoreanDoubles(triple);
        // write mrt instead of the triple is good,
        // and delete numadded chars... but maybe
        // it's not the best, since delete-add the same,
        // however, the other solution is more difficult
        // and in case numadded is really added by this
        // way, i.e. Symbols, then it shall be Okay

        //ch = mrt[mrt.length - 1];

        if (tripleL != triple.length) {
          mrt = triple;

          // if mrt is more characters long,
          // probably only keep its last character,
          // this is important!!! at least if ch.length was 1
          var numsub = 0;
          if (ch.length === 1) {
        	numsub = mrt.length - 1;
            mrt = mrt[mrt.length - 1];
          }
          for (var cv = 0; cv < numadded - numsub; cv++) {
            this.cursor.backspace();
          }

          // in this case mergeKoreanDoubles really did something
          // so we have to find out
          // - how many backspaces we will need
          // ...
          // this is the difference of the result of:
          //var triple3 = triple;
          //if (tripleL > numadded + 1) {
          //  triple3 = triple.substring(0, numadded + 1);
          //}
          //var triple3b = this.root.mergeKoreanDoubles(triple3);
          //var result3 = triple3.length - triple3b.length;

          //var triple4 = triple;
          //if (tripleL > numadded + 2) {
          //  triple4 = triple.substring(0, numadded + 2);
          //}
          //var triple4b = this.root.mergeKoreanDoubles(triple4);
          //var result4 = triple4.length - triple4b.length;
          //if (result3 === result4) {
          //  for (var cv = 0; cv < result3.length; cv++) {
          //	  this.cursor.backspace();
          //  }
          //} else {
        	  // this means that a merge also happened at the
        	  // 1st and 2nd characters of "mort", but it is
        	  // a good question whether the previous char
        	  // was included or not... 1234 might be:
        	  // (12)(34): result3: 1, result4: 2, backspace:
        	  // 12(34): result3: 0, result4: 1
        	  // 1(234): result3: 0, result4: 2
        	  //
          //  for (var cv = 0; cv < result3.length; cv++) {
          //	  this.cursor.backspace();
          //  }
          //}
        }
      }
      this.cursor.write(mrt);
    }
    return false;
  };
  _.selectNextSyntaxHelp = function() {
    var numberOfMoveRights = 0;// at the end, the cursor should move left this many times
	var numberOfSelectRights = 0;
	var cursor = this.cursor;
	var checkpoint1 = false;
	var undoEverything = false;
	while(cursor[R]) {
	  // the ] sign in the end is actually a pair of another,
	  // and these make the parent of the parent (this.cursor.parent.parent)
	  // so we only need to check for (cursor[R])
	  if ((cursor[R] instanceof BinaryOperator) &&
	      (cursor[R].ctrlSeq === '<')) {
	   	if (checkpoint1) {
	   	  // wrong syntax, let's undo everything!
	      undoEverything = true;
	      break;
	  	} else {
	   	  // in theory, selectRight will also move the cursor
	   	  // to the right... but it should not go out of the
	      // block because we check (cursor[R]) in this loop
	      cursor.selectRight();
	      numberOfSelectRights++;
	 	  checkpoint1 = true;
	    }
	  } else if ((cursor[R] instanceof BinaryOperator) &&
	             (cursor[R].ctrlSeq === '>')) {
	  	if (checkpoint1) {
	   	  // the only way to finish this without undo!
	      cursor.selectRight();
	      numberOfSelectRights++;
	      if (cursor[R]) {
	       	break;
	      } else {
	       	// if (cursor[R]) is false in the end,
	       	// then undoEverything should mean its opposite
	       	undoEverything = true;
	       	//break;// although it can be omitted
	      }
	  	} else {
	   	  // wrong syntax, let's undo everything!
	   	  undoEverything = true;
	  	  break;
	   	}
	  } else {
	  	if (checkpoint1) {
	   	  cursor.selectRight();
	   	  numberOfSelectRights++;
	  	} else {
	      cursor.moveRight();
	      numberOfMoveRights++;
	 	}
	  }
	}
	if (cursor[R]) {
	  // as undefined or null would give run-time-error
      // on (!cursor[R]) in theory, let's put code in else branch
	} else {
	  undoEverything = !undoEverything;
	}
	if (undoEverything) {
      cursor.clearSelection();
      while(numberOfMoveRights) {
    	cursor.moveLeft();
    	numberOfMoveRights--;
      }
      return false;
	}
	return true;
  };
});

var RootEqnArray = P(RootMathBlock, function(_) {
  _.renderLatex = function(latex) {
    var jQ = this.jQ;
    var cursor = this.cursor;

    jQ.children().slice(1).remove();

    var lines = latex.split('\\\\');
    var table = $('<table>').appendTo(jQ);

    for (var i = 0, li = lines.length; i < li; i += 1) {
      var pieces = lines[i].replace(/\\&/, '\\amp ').split('&');

      var tr = $('<tr>').appendTo(table);

      for (var j = 0, lj = pieces.length; j < lj; j += 1) {
        var td = $('<td>').appendTo(tr);

        var cell = MathBlock();
        cell.jQ = td;
        cell.adopt(this, this.ch[R], 0);

        cursor.appendTo(cell).writeLatex(pieces[j]);
      }
    }
  };
});

var RootMathCommand = P(MathCommand, function(_, _super) {
  _.init = function(cursor) {
    _super.init.call(this, '$');
    this.cursor = cursor;
  };
  _.htmlTemplate = '<span class="mathquillggb-rendered-math">&0</span>';
  _.createBlocks = function() {
    this.ch[L] =
    this.ch[R] =
      RootMathBlock();

    this.blocks = [ this.ch[L] ];

    this.ch[L].parent = this;

    this.ch[L].cursor = this.cursor;
    this.ch[L].write = function(cursor, ch, replacedFragment) {
      // in GeoGebraWeb, we do not call RootMathCommand from
      // RootTextBlock, and this means $ should always mean the same
      // thing as that of MathBlock's!

      //if (ch !== '$')
        MathBlock.prototype.write.call(this, cursor, ch, replacedFragment);
      //else if (this.isEmpty()) {
      //  cursor.insertAfter(this.parent).backspace().show();
      //  VanillaSymbol('\\$','$').createBefore(cursor);
      //}
      //else if (!cursor[R])
      //  cursor.insertAfter(this.parent);
      //else if (!cursor[L])
      //  cursor.insertBefore(this.parent);
      //else
      //  MathBlock.prototype.write.call(this, cursor, ch, replacedFragment);
    };
  };
  _.latex = function() {
    return '$' + this.ch[L].latex() + '$';
  };
});

var RootTextBlock = P(MathBlock, function(_) {
  _.renderLatex = function(latex) {
    var self = this;
    var cursor = self.cursor;
    self.jQ.children().slice(1).remove();
    self.ch[L] = self.ch[R] = 0;
    cursor.show().appendTo(self);

    var regex = Parser.regex;
    var string = Parser.string;
    var eof = Parser.eof;
    var all = Parser.all;

    // Parser RootMathCommand
    var mathMode = string('$').then(latexMathParser)
      // because TeX is insane, math mode doesn't necessarily
      // have to end.  So we allow for the case that math mode
      // continues to the end of the stream.
      .skip(string('$').or(eof))
      .map(function(block) {
        // HACK FIXME: this shouldn't have to have access to cursor
        var rootMathCommand = RootMathCommand(cursor);

        rootMathCommand.createBlocks();
        var rootMathBlock = rootMathCommand.ch[L];
        block.children().adopt(rootMathBlock, 0, 0);

        return rootMathCommand;
      })
    ;

    var escapedDollar = string('\\$').result('$');
    var textChar = escapedDollar.or(regex(/^[^$]/)).map(VanillaSymbol);
    var latexText = mathMode.or(textChar).many();
    var commands = latexText.skip(eof).or(all.result(false)).parse(latex);

    if (commands) {
      for (var i = 0; i < commands.length; i += 1) {
        commands[i].adopt(self, self.ch[R], 0);
      }

      self.jQize().appendTo(self.jQ);

      self.finalizeInsert();
    }
  };
  _.onKey = function(curs, key) {
    if (key === 'Spacebar' || key === 'Shift-Spacebar') return;
    RootMathBlock.prototype.onKey.apply(this, arguments);
  };
  _.onText = function(curs, ch) {
	this.cursor.write(ch);
    return false;
  };
  _.write = function(cursor, ch, replacedFragment) {
    if (replacedFragment) replacedFragment.remove();
    if (ch === '$')
      RootMathCommand(cursor).createBefore(cursor);
    else
      VanillaSymbol(ch).createBefore(cursor);
  };
});
/***************************
 * Commands and Operators.
 **************************/

var CharCmds = {}, LatexCmds = {}; //single character commands, LaTeX commands

var scale, // = function(jQ, x, y) { ... }
//will use a CSS 2D transform to scale the jQuery-wrapped HTML elements,
//or the filter matrix transform fallback for IE 5.5-8, or gracefully degrade to
//increasing the fontSize to match the vertical Y scaling factor.

//ideas from http://github.com/louisremi/jquery.transform.js
//see also http://msdn.microsoft.com/en-us/library/ms533014(v=vs.85).aspx

  forceIERedraw = noop,
  div = document.createElement('div'),
  div_style = div.style,
  transformPropNames = {
    transform:1,
    WebkitTransform:1,
    MozTransform:1,
    OTransform:1,
    msTransform:1
  },
  transformPropName;

for (var prop in transformPropNames) {
  if (prop in div_style) {
    transformPropName = prop;
    break;
  }
}

if (transformPropName) {
  scale = function(jQ, x, y) {
    jQ.css(transformPropName, 'scale('+x+','+y+')');
  };
}
else {
  scale = function(jQ, x, y) {
    jQ.css('fontSize', y + 'em');
  };
}

var Style = P(MathCommand, function(_, _super) {
  _.init = function(ctrlSeq, tagName, attrs) {
    _super.init.call(this, ctrlSeq, '<'+tagName+' '+attrs+'>&0</'+tagName+'>');
  };
  _.text = function() {
    var i = 0;
    var thisMathCommand = this;
    return this.foldChildren(this.textTemplate[i], function(text, child) {
      i += 1;
      var child_text = child.text();
      if (child_text[0] === '(' && child_text.slice(-1) === ')') {
    	// There may be cases when the '(' and ')' are harmful!
    	// Only one pair of '(' and ')' should remain,
    	// and this is OK at the parent node of this Style.
    	// But if the parent node of this Style is RootMathBlock,
    	// then there will be no '(' and ')', so OK.
      	child_text = child_text.slice(1, -1);
        //return text + child_text.slice(1, -1) + thisMathCommand.textTemplate[i];
      }
      return text + child_text + (thisMathCommand.textTemplate[i] || '');
    });
  };
});

//fonts
LatexCmds.mathrm = bind(Style, '\\mathrm', 'span', 'class="roman font"');

/*LatexCmds.em = LatexCmds.italic = LatexCmds.italics =
LatexCmds.emph = LatexCmds.textit = LatexCmds.textsl*/
LatexCmds.mathit = bind(Style, '\\mathit', 'i', 'class="font"');
LatexCmds.em = bind(Style, '\\em', 'i', 'class="font"');
LatexCmds.italic = bind(Style, '\\italic', 'i', 'class="font"');
LatexCmds.italics = bind(Style, '\\italics', 'i', 'class="font"');
LatexCmds.textit = bind(Style, '\\textit', 'i', 'class="font"');
LatexCmds.textsl = bind(Style, '\\textsl', 'i', 'class="font"');

LatexCmds.mathbf = bind(Style, '\\mathbf', 'b', 'class="font"');
LatexCmds.bold = bind(Style, '\\bold', 'b', 'class="font"');
LatexCmds.strong = bind(Style, '\\strong', 'b', 'class="font"');
LatexCmds.textbf = bind(Style, '\\textbf', 'b', 'class="font"');

LatexCmds.mathsf = bind(Style, '\\mathsf', 'span', 'class="sans-serif font"');
LatexCmds.mathtt = bind(Style, '\\mathtt', 'span', 'class="monospace font"');
//text-decoration
LatexCmds.underline = bind(Style, '\\underline', 'span', 'class="non-leaf underline"');
LatexCmds.overline = LatexCmds.bar = bind(Style, '\\overline', 'span', 'class="non-leaf overline"');

// colors
LatexCmds.lightviolet = bind(Style, '\\lightviolet', 'span', 'style="color:#E0B0FF"');
LatexCmds.lightyellow = bind(Style, '\\lightyellow', 'span', 'style="color:#FFFACD"');
LatexCmds.lightgreen = bind(Style, '\\lightgreen', 'span', 'style="color:#D0F0C0"');
LatexCmds.lightorange = bind(Style, '\\lightorange', 'span', 'style="color:#FFEFD5"');
LatexCmds.yellow = bind(Style, '\\yellow', 'span', 'style="color:#FFFF00"');
LatexCmds.darkblue = bind(Style, '\\darkblue', 'span', 'style="color:#1C39BB"');
LatexCmds.lightpurple = bind(Style, '\\lightpurple', 'span', 'style="color:#CCCCFF"');
LatexCmds.lightblue = bind(Style, '\\lightblue', 'span', 'style="color:#7D7DFF"');
LatexCmds.maroon = bind(Style, '\\maroon', 'span', 'style="color:#800000"');
LatexCmds.lightgray = bind(Style, '\\lightgray', 'span', 'style="color:#A0A0A0"');
LatexCmds.pink = bind(Style, '\\pink', 'span', 'style="color:#FFC0CB"');
LatexCmds.gold = bind(Style, '\\gold', 'span', 'style="color:#FFD700"');
LatexCmds.black = bind(Style, '\\black', 'span', 'style="color:#000000"');
LatexCmds.orange = bind(Style, '\\orange', 'span', 'style="color:#FF7F00"');
LatexCmds.indigo = bind(Style, '\\indigo', 'span', 'style="color:#4B0082"');
LatexCmds.purple = bind(Style, '\\purple', 'span', 'style="color:#800080"');
LatexCmds.darkgray = bind(Style, '\\darkgray', 'span', 'style="color:#202020"');
LatexCmds.green = bind(Style, '\\green', 'span', 'style="color:#00FF00"');
LatexCmds.silver = bind(Style, '\\silver', 'span', 'style="color:#404040"');
LatexCmds.white = bind(Style, '\\white', 'span', 'style="color:#FFFFFF"');
LatexCmds.lime = bind(Style, '\\lime', 'span', 'style="color:#BFFF00"');
LatexCmds.gray = bind(Style, '\\gray', 'span', 'style="color:#808080"');
LatexCmds.darkgreen = bind(Style, '\\darkgreen', 'span', 'style="color:#006400"');
LatexCmds.magenta = bind(Style, '\\magenta', 'span', 'style="color:#FF00FF"');
LatexCmds.cyan = bind(Style, '\\cyan', 'span', 'style="color:#00FFFF"');
LatexCmds.red = bind(Style, '\\red', 'span', 'style="color:#FF0000"');
LatexCmds.crimson = bind(Style, '\\crimson', 'span', 'style="color:#DC143C"');
LatexCmds.turquoise = bind(Style, '\\turquoise', 'span', 'style="color:#AFEEEE"');
LatexCmds.blue = bind(Style, '\\blue', 'span', 'style="color:#0000FF"');
LatexCmds.violet = bind(Style, '\\violet', 'span', 'style="color:#7F00FF"');
LatexCmds.brown = bind(Style, '\\brown', 'span', 'style="color:#993300"');
LatexCmds.aqua = bind(Style, '\\aqua', 'span', 'style="color:#BCD4E6"');

var SomethingHTML = P(MathCommand, function(_, _super) {
  _.init = function(ctrlSeq, HTML, texttemp) {
    _super.init.call(this, ctrlSeq, HTML, texttemp);
    if (ctrlSeq === '\\pwtable') {
	  // boolean is quicker than string comparison every time
	  // TODO: maybe do this for other ctrlSeq as well!
	  this.pwtable = true;
    } else {
	  this.pwtable = false;
    }
    if (ctrlSeq === '\\prtable') {
  	  // boolean is quicker than string comparison every time
  	  // TODO: maybe do this for other ctrlSeq as well!
  	  this.prtable = true;
    } else {
  	  this.prtable = false;
    }
    if (ctrlSeq === '\\ggbtable' || this.pwtable || this.prtable) {
      // let's make a matrix of elements we can refer to
      // from upInto, downInto, upOutOf, downOutOf
      this['tableMatrix'] = [[]];
      this['tableRow'] = 0;
      this['tableCol'] = 0;
      // this will be a 2-dimensional matrix to be filled
      // on-the-fly at the same time as filling upInto etc
    }
  };
  _.finalizeTree = function() {
    if (this.ctrlSeq === '\\ggbtable' || this.pwtable || this.prtable) {
      this.preOrder('lateInit');
    }
  };
  _.lateInit = function() {
	// good question when should lateInit be called?
	// of course, after everything is ready... maybe
	// finalizeTree method is for that? OK, lateInit renamed
    var thisthis = this;
    if (this.ctrlSeq.indexOf('\\ggbtd') > -1) {
      if (this.parent) {
        thisthis = this.parent;
        if (thisthis.parent) {
          thisthis = thisthis.parent;
        } else {
          return;
        }
      } else {
        return;
      }
    }
    if (thisthis.ctrlSeq.indexOf('\\ggbtr') > -1) {
      if (thisthis.parent) {
        thisthis = thisthis.parent;
        if (thisthis.parent) {
          thisthis = thisthis.parent;
        } else {
          return;
        }
      } else {
        return;
      }
    }
    // this.maint is the \\ggbtable or \\pwtable, ideally
    this.maint = thisthis;

    if (thisthis.ctrlSeq !== '\\ggbtable' && !thisthis.pwtable && !thisthis.prtable) {
      return;
    }

    // in theory, the ggbtd and ggbtr elements should come
    // in preorder order, but still wondering why this does not
    // seem to work well... maybe we're too late?

    // but only for these kinds of elements: 
    if (this.ctrlSeq.indexOf('\\ggbtr') > -1) {
      // now let's add a new row to tableMatrix too!
	  // nothing else should be done in this step
	  if ('tableMatrix' in thisthis) {
		thisthis['tableMatrix'][thisthis['tableRow']] = [];
        thisthis['tableMatrix'][thisthis['tableRow']][0] = 0;
        thisthis['tableRow']++;
        thisthis['tableCol'] = 0;
      }
    } else if (this.ctrlSeq.indexOf('\\ggbtd') > -1) {
      // now fill the tableMatrix, everything should be ready
      if (('tableMatrix' in thisthis) && ('tableRow' in thisthis) && (thisthis['tableRow'] > 0)) {
    	thisthis['tableMatrix'][thisthis['tableRow']-1][thisthis['tableCol']] = this;
        thisthis['tableCol']++;
        this.thisRow = thisthis['tableRow']-1;
        this.thisCol = thisthis['tableCol']-1;

        // then comes code what needs blocks
        // but only for these kinds of elements: 
  	    if (thisthis['tableRow'] > 1) {
          // row-1,col-1 gives the last element currently in tableMatrix
          // this "this" will be row-1, col-1 probably,
          // and this.upOutOf will be row-2, col-1,
          // and this.upOutOf.downOutOf will be this
          var that = thisthis['tableMatrix'][this.thisRow-1][this.thisCol];
          // it's important that the events happen in MathBlock's
          // but ch[0] might still not be ready! what to do?
          // call createBlocks earlier! cursor.appendTo needs .ch[L]
          this.upOutOf = that.ch[L];// MathBlock
          that.downOutOf = this.ch[L];// MathBlock
        }
      }
    }
  };
  _.addNewRow = function(cursor) {
    if (this.ctrlSeq === '\\ggbtable') {
      // remember the place of the cursor, because it
      // should go back there after this operation!
      var cursorl = cursor[L];//command
      var cursorr = cursor[R];//command
      var cursorp = cursor.parent;//block

      // adding one simple ggbtr, and so much simple ggbtd
      // that are contained in one ggbtr (i.e. number of cols)
      // luckily, the number of colums is (this.thisCol+1)

      // try to generate latex and then renderLatex or writeLatex!
      var numCols = this['tableCol'];
      var strLatex = '\\ggbtr{ ';
      for (var lv = 0; lv < numCols; lv++) {
    	strLatex += '\\ggbtd{0} ';
      }
      strLatex += '}';
      cursor.appendTo(this.ch[L]);
      //==cursor.appendDir(R, this.ch[L]);
      cursor.writeLatex(strLatex);

      // now we should do something like lateInit does!
      if (this.ch[L] && this.ch[L].ch[R]) {
    	// in theory, this is not the cursor,
    	// but the \\ggbtr element
        this.ch[L].ch[R].preOrder('lateInit');
      }

      // put the cursor back to its original place
      if (cursorl) {
    	cursor.insertAfter(cursorl);
      } else if (cursorr) {
    	cursor.insertBefore(cursorr);
      } else if (cursorp) {
    	cursor.appendDir(L, cursorp);
      }
      cursor.show();
    } else if (this.pwtable) {
      // this case is almost the same as \\ggbtable,
      // but we shall add the new row before the last row
      // in order to keep the \\textotherwise at its place,
      // although this will make it difficult to update up/down

      // remember the place of the cursor, because it
      // should go back there after this operation!
      var cursorl = cursor[L];//command
      var cursorr = cursor[R];//command
      var cursorp = cursor.parent;//block

      // adding one simple ggbtr, and so much simple ggbtd
      // that are contained in one ggbtr (i.e. number of cols)
      // luckily, the number of colums is (this.thisCol+1)

      // try to generate latex and then renderLatex or writeLatex!
      var strLatex = '\\ggbtr{ ';
      strLatex += '\\ggbtdL{0} ';
      strLatex += '\\ggbtdL{ : \\space 0 \\lt x \\lt 0 } ';
      strLatex += '}';
      cursor.appendTo(this.ch[L]);
      cursor.insertBefore(cursor[L]);
      //==cursor.appendDir(R, this.ch[L]);
      cursor.writeLatex(strLatex);

      // now we should do something like lateInit does!
      // TODO: later!
      if (this.ch[L] && this.ch[L].ch[R]) {
        // in theory, this is not the cursor,
        // but the \\ggbtr element
    	if (this.ch[L].ch[R][L]) {
    	  // in theory, redefining up/down links
    	  // can be done by calling it for both rows
          this['tableRow']--;
    	  this.ch[L].ch[R][L].preOrder('lateInit');
    	}
        this.ch[L].ch[R].preOrder('lateInit');
      }

      // put the cursor back to its original place
      if (cursorl) {
        cursor.insertAfter(cursorl);
      } else if (cursorr) {
        cursor.insertBefore(cursorr);
      } else if (cursorp) {
        cursor.appendDir(L, cursorp);
      }
      cursor.show();
    }
  };
  _.removeRow = function(cursor) {
    if (this.ctrlSeq === '\\ggbtable') {
      // remember the place of the cursor, because it
      // should go back there after this operation!
      var cursorl = cursor[L];//command
      var cursorr = cursor[R];//command
      var cursorp = cursor.parent;//block

      var numRows = this['tableRow'];
      var numCols = this['tableCol'];

      if (numRows > 1) {
        if (this.ch[L] && this.ch[L].ch[R]) {
          // removing the last row is easy;
          this.ch[L].ch[R].remove();
          this['tableRow'] = numRows - 1;
          this['tableCol'] = numCols;

          // but it is more difficult to actualize
          // the downOutOf variables, to make them null

          cursor.appendTo(this.ch[L]);
          if (cursor[L] && cursor[L].ch[L]) {
        	// this.ch[L]: block of table
        	// this.ch[L].ch[R]: table row
        	// this.ch[L].ch[R].ch[L]: block of table row
            cursor.prependTo(cursor[L].ch[L]);
          }

          var actual = cursor;
          while (actual[R]) {
            actual = actual[R];
        	if (actual.ctrlSeq && actual.ctrlSeq.indexOf('\\ggbtd') > -1) {
              if (actual.downOutOf !== undefined) {
                delete actual.downOutOf;
              }
        	}
          }
        }

        // put the cursor back to its original place
        if (cursorl) {
          cursor.insertAfter(cursorl);
        } else if (cursorr) {
    	  cursor.insertBefore(cursorr);
        } else if (cursorp) {
          cursor.appendDir(L, cursorp);
        }
        cursor.show();
      }
    }
  };
  _.addNewCol = function(cursor) {
    if (this.ctrlSeq === '\\ggbtable') {
      // remember the place of the cursor, because it
      // should go back there after this operation!
      var cursorl = cursor[L];//command
      var cursorr = cursor[R];//command
      var cursorp = cursor.parent;//block

      var numRows = this['tableRow'];
      var numCols = this['tableCol'];
      this['tableRow'] = 0;

      var strLatex = '\\ggbtd{0}';
      cursor.prependTo(this.ch[L]);
      // now the cursor is in the block of \\ggbtable,
      // and cursor[R] is a \\ggbtr, probably
      var actual = cursor;
      while (actual[R]) {
        actual = actual[R];
    	if (actual.ctrlSeq && actual.ctrlSeq.indexOf('\\ggbtr') > -1) {
    	  cursor.appendTo(actual.ch[L]);
    	  cursor.writeLatex(strLatex);
    	  if (actual.ch[L] && actual.ch[L].ch[R]) {
            this['tableCol'] = numCols;
        	this['tableRow']++;
    	    actual.ch[L].ch[R].preOrder('lateInit');
    	  }
    	}
      }

      this['tableRow'] = numRows;
      this['tableCol'] = numCols + 1;

      // put the cursor back to its original place
      if (cursorl) {
    	cursor.insertAfter(cursorl);
      } else if (cursorr) {
    	cursor.insertBefore(cursorr);
      } else if (cursorp) {
    	cursor.appendDir(L, cursorp);
      }
      cursor.show();
    }
  };
  _.removeCol = function(cursor) {
    if (this.ctrlSeq === '\\ggbtable') {
      // remember the place of the cursor, because it
      // should go back there after this operation!
      var cursorl = cursor[L];//command
      var cursorr = cursor[R];//command
      var cursorp = cursor.parent;//block

      var numRows = this['tableRow'];
      var numCols = this['tableCol'];

      if (numCols > 1) {

        cursor.prependTo(this.ch[L]);
        // now the cursor is in the block of \\ggbtable,
        // and cursor[R] is a \\ggbtr, probably
        var actual = cursor;
        while (actual[R]) {
          actual = actual[R];
    	  if (actual.ctrlSeq && actual.ctrlSeq.indexOf('\\ggbtr') > -1) {
            cursor.appendTo(actual.ch[L]);
    	    if (actual.ch[L] && actual.ch[L].ch[R]) {
              actual.ch[L].ch[R].remove();
              // this['tableMatrix'] will still contain
              // the old elements, but probably it's no problem
    	    }
    	  }
        }

        this['tableRow'] = numRows;
        this['tableCol'] = numCols - 1;

        // put the cursor back to its original place
        if (cursorl) {
          cursor.insertAfter(cursorl);
        } else if (cursorr) {
    	  cursor.insertBefore(cursorr);
        } else if (cursorp) {
          cursor.appendDir(L, cursorp);
        }
        cursor.show();
      }
    }
  };
  _.moveTowards = function(dir, cursor) {
    cursor.appendDir(-dir, this.ch[-dir]);
    // Okay, we've moved into this, but maybe
    // we need more in case of ggbtable & ggbtd
    // e.g. cursor is in ggbtable's MathBlock
    var thisthis = cursor[dir];
    if (this.ctrlSeq === '\\ggbtable' || this.pwtable || this.prtable) {
      cursor.appendDir(-dir, thisthis.ch[-dir]);
      // we're in the ggbtd, but that is also not enough!
      // e.g. cursor is in ggbtr's MathBlock
      if (thisthis.ctrlSeq.indexOf('\\ggbtr') > -1) {
        cursor.appendDir(-dir, cursor[dir].ch[-dir]);
        // e.g. cursor is in ggbtd's MathBlock
      }
    } else if (this.ctrlSeq.indexOf('\\ggbtr') > -1) {
      // in case of ggbtr we only need this once
      cursor.appendDir(-dir, cursor[dir].ch[-dir]);
    } else if (this.ctrlSeq === '\\prcurve') {
      cursor.appendDir(-dir, thisthis.ch[-dir]);
      // now we're either in \\parametric or in \\prcondition
      // or more exactly, their corresponding MathBlock
      if (thisthis.ctrlSeq === '\\parametric') {
    	thisthis = cursor[dir];
    	thisthis.moveTowards(dir, cursor);
      }
    }
    // TODO: deal with \\piecewise and \\parametric elsewhere
  };
  _.createSelection = function(dir, cursor) {
    // we can do things like this because _super class
    // shall be the same as _super class of this.maint
    _super.createSelection.call(this.maint, dir, cursor);
  };
  _.expandSelection = function(dir, cursor) {
    _super.expandSelection.call(this.maint, dir, cursor);
  };
  _.clearSelection = function(dir, cursor) {
    _super.clearSelection.call(this.maint, dir, cursor);
  };
  _.retractSelection = function(dir, cursor) {
    _super.retractSelection.call(this.maint, dir, cursor);
  };
  _.deleteTowards = function(dir, cursor) {
    // in case of \\prcurve, don't allow deleteTowards!
	if (this.ctrlSeq === '\\prcurve' ||
		this.ctrlSeq === '\\prcondition' ||
		this.prtable || this.pwtable) {
      // do nothing!
	  return undefined;
	} else {
      return this.createSelection(dir, cursor);
	}
  };
  _.selectChildren = function(cursor) {
	_super.selectChildren.call(this.maint, cursor);
  };
  _.text = function() {
    // in case of ggbtable/pwtable, we shall do them one by one
    if (this.pwtable) {
      // this just have to append its children to one another
      // with no question
      var brackets = '';
      var i = 0;
      var ret = this.ch[L].foldChildren('', function(text, child) {
    	if (i > 0) {
    	  brackets += ']';
    	}
    	i++;
        return text + child.text();
      });
      ret += brackets;
      // and also, some closing brackets should be appended
      return ret;
    } else if (this.prtable) {
      var ret = this.ch[L].foldChildren('', function(text, child) {
        return text + child.text();
      });
      // and also, some closing brackets should be appended
      return ret;
    } else if (this.ctrlSeq.indexOf('\\ggbtr') > -1) {
      // if this is a descendant of pwtable, do custom algorithm
      // otherwise do the conventional case (end of method)
      if (this.parent && this.parent.parent) {
    	if (this.parent.parent.pwtable) {
          // lucky that there are only 2 columns
          // as "this" is a MathCommand, "this.ch[L]" is its child MathBlock
          // and we're interested in the MathBlock's children, which are ggbtd's
          // but for special cases we might still want to check
          if (this.ch[L] && this.ch[L].ch[L] && this.ch[L].ch[R]) {
            if (this[R]) {
              var ret = "If[";
              ret += this.ch[L].ch[R].text();
              ret += ",";
              ret += this.ch[L].ch[L].text();
              ret += ",";
              // here will come the next If[, or end
              return ret;
            } else {
              // if this is the last row, things should be more simple:
        	  return this.ch[L].ch[L].text();
            }
          }
    	} else if (this.parent.parent.prtable) {
          if (this.ch[L] && this.ch[L].ch[L]) {
        	// in order to prevent possible changes by MathBlock,
        	// call the text() of the child ggbtd directly...
            return this.ch[L].ch[L].text() + ",";
          }
    	}
      }
    } else if (this.ctrlSeq.indexOf('\\ggbtd') > -1) {
      // if this is a descendant of pwtable, do custom algorithm
      // otherwise do the conventional case (end of method)
      if (this.parent && this.parent.parent) {
    	var self = this.parent.parent;
    	if (self.parent && self.parent.parent) {
          if (self.parent.parent.pwtable) {
    	    // remove : and space!
    	    var ret = this.foldChildren('', function(text, child) {
    	      return text + child.text();
            });
    	    ret = ret.replace(':', '');
    	    ret = ret.replace('space ', ' ');
    	    ret = ret.replace(' space', ' ');
    	    ret = ret.replace('space', ' ');
    	    return ret;
          } else if (self.parent.parent.prtable) {
            // chop x=, y=, z=; !!
      	    var ret = this.foldChildren('', function(text, child) {
      	      return text + child.text();
            });
      	    var idd = ret.indexOf('=');
      	    if (idd > -1) {
      	      ret = ret.substring(idd + 1);
      	    }
      	    return ret;
          }
    	}
      }
    } else if (this.ctrlSeq === '\\prcondition') {
      var ret = this.foldChildren('', function(text, child) {
        return text + child.text();
      });
      // MathBlock might put ()s around this, so let's remove it!
      if (ret.charAt(0) === '(') {
    	ret = ret.substring(1);
      }
      if (ret.charAt(ret.length-1) === ')') {
        ret = ret.substring(0, ret.length-1);
      }
      // LaTeX: \\prle, text: \u2264
      var retarr = ret.split('\u2264');
      if (retarr.length > 2) {
        // OK
        var startNum = retarr[0];
        var endNum = retarr[2];
        var variab = retarr[1];
        ret = '';
        ret += variab;
        ret += ',';
        ret += startNum;
        ret += ',';
        ret += endNum;
        return ret;
      }
    }
    // conventional case (e.g. \\vec, \\hat)
    // do the conventional way (also \\ggbtable)
    return _super.text.call(this);
  };
  _.onKey = function(curs, key, e) {
    switch (key) {
      case 'Up':
      case 'Shift-Up':
      case 'Ctrl-Up':
      case 'Ctrl-Shift-Up':
    	curs.moveUp();
    	e.preventDefault();
    	return false;
        break;

      case 'Down':
      case 'Shift-Down':
      case 'Ctrl-Down':
      case 'Ctrl-Shift-Down':
        curs.moveDown();
        e.preventDefault();
        return false;
        break;
      default:
    	break;
    }
  };
});

var scbHTML = '<span><span style="display: none;">&0</span><span>&1</span></span>';
LatexCmds.scalebox = bind(SomethingHTML, '\\scalebox', scbHTML);

var gapHTML = '<span style="visibility: hidden;">&0</span>';
LatexCmds.phantom = bind(SomethingHTML, '\\phantom', gapHTML);

// this is like \\cr but it has an argument that is currently neglected
var brHTML = '<span><span style="display: none;">&0</span><br/></span>';
LatexCmds.vspace = bind(SomethingHTML, '\\vspace', brHTML);

var hatHTML = '<span class="array non-leaf vbottom"><span class="hat">^</span><span>&0</span></span>';
LatexCmds.hat = bind(SomethingHTML, '\\hat', hatHTML);


// MathQuillGGB hacks by GeoGebra
var vecHTML = '<table class="spec" style="display:inline-table;vertical-align:65%;" cellpadding="0" cellspacing="0"><tr><td class="hackedmq"><span class="down">&rarr;</span></td></tr><tr><td class="hackedmq"><span class="up">&0</span></td></tr></table>';
LatexCmds.overrightarrow = bind(SomethingHTML, '\\overrightarrow', vecHTML);
LatexCmds.vec = bind(SomethingHTML, '\\vec', vecHTML);
LatexCmds.cr = bind(Symbol, '\\cr', '<div style="display:block;height:1px;width:1px;"> </div>');
LatexCmds.equals = bind(Symbol, '\\equals', ' <span>=</span> ');// to be different from simple "="

var ggbtableHTML = '<table class="spec spectable" style="display:inline-table;vertical-align:middle;" cellpadding="0" cellspacing="0">&0</table>';
var ggbtrHTML = '<tr>&0</tr>';
var ggbtrlHTML = '<tr style="border-top: black solid 2px; border-bottom: black solid 2px;">&0</tr>';
var ggbtrltHTML = '<tr style="border-top: black solid 2px;">&0</tr>';
var ggbtrlbHTML = '<tr style="border-bottom: black solid 2px;">&0</tr>';

var ggbtdRHTML = '<td style="min-width: 1em; text-align: right; vertical-align: middle; padding-left: 4px; padding-right: 4px;">&0</td>';
var ggbtdlRHTML = '<td style="border-left: black solid 2px; border-right: black solid 2px; min-width: 1em; text-align: right; vertical-align: middle; padding-left: 4px; padding-right: 4px;">&0</td>';
var ggbtdllRHTML = '<td style="border-left: black solid 2px; min-width: 1em; text-align: right; vertical-align: middle; padding-left: 4px; padding-right: 4px;">&0</td>';
var ggbtdlrRHTML = '<td style="border-right: black solid 2px; min-width: 1em; text-align: right; vertical-align: middle; padding-left: 4px; padding-right: 4px;">&0</td>';

var ggbtdCHTML = '<td style="min-width: 1em; text-align: center; vertical-align: middle; padding-left: 4px; padding-right: 4px;">&0</td>';
var ggbtdlCHTML = '<td style="border-left: black solid 2px; border-right: black solid 2px; min-width: 1em; text-align: center; vertical-align: middle; padding-left: 4px; padding-right: 4px;">&0</td>';
var ggbtdllCHTML = '<td style="border-left: black solid 2px; min-width: 1em; text-align: center; vertical-align: middle; padding-left: 4px; padding-right: 4px;">&0</td>';
var ggbtdlrCHTML = '<td style="border-right: black solid 2px; min-width: 1em; text-align: center; vertical-align: middle; padding-left: 4px; padding-right: 4px;">&0</td>';

var ggbtdLHTML = '<td style="min-width: 1em; text-align: left; vertical-align: middle; padding-left: 4px; padding-right: 4px;">&0</td>';
var ggbtdlLHTML = '<td style="border-left: black solid 2px; border-right: black solid 2px; min-width: 1em; text-align: left; vertical-align: middle; padding-left: 4px; padding-right: 4px;">&0</td>';
var ggbtdllLHTML = '<td style="border-left: black solid 2px; min-width: 1em; text-align: left; vertical-align: middle; padding-left: 4px; padding-right: 4px;">&0</td>';
var ggbtdlrLHTML = '<td style="border-right: black solid 2px; min-width: 1em; text-align: left; vertical-align: middle; padding-left: 4px; padding-right: 4px;">&0</td>';

// why bother with differentiating ggbtable from pwtable,
// when we can create them separately?
LatexCmds.pwtable = bind(SomethingHTML, '\\pwtable', ggbtableHTML, ['','']);
LatexCmds.prtable = bind(SomethingHTML, '\\prtable', ggbtableHTML, ['','']);
LatexCmds.prcondition = bind(SomethingHTML, '\\prcondition', '<span>&0</span>&nbsp;&nbsp;', ['','']);
// the parent of prtable and prcondition, for nicer (but more complex) syntax
LatexCmds.prcurve = bind(SomethingHTML, '\\prcurve', '<span>&0</span>', ['Curve[',']']);

LatexCmds.ggbtable = bind(SomethingHTML, '\\ggbtable', ggbtableHTML, ['{','}']);
LatexCmds.ggbtr = bind(SomethingHTML, '\\ggbtr', ggbtrHTML, ['{','},']);
LatexCmds.ggbtrl = bind(SomethingHTML, '\\ggbtrl', ggbtrlHTML, ['{','},']);
LatexCmds.ggbtrlt = bind(SomethingHTML, '\\ggbtrlt', ggbtrltHTML, ['{','},']);
LatexCmds.ggbtrlb = bind(SomethingHTML, '\\ggbtrlb', ggbtrlbHTML, ['{','},']);

LatexCmds.ggbtdR = bind(SomethingHTML, '\\ggbtdR', ggbtdRHTML, ['',',']);
LatexCmds.ggbtdlR = bind(SomethingHTML, '\\ggbtdlR', ggbtdlRHTML, ['',',']);
LatexCmds.ggbtdllR = bind(SomethingHTML, '\\ggbtdllR', ggbtdllRHTML, ['',',']);
LatexCmds.ggbtdlrR = bind(SomethingHTML, '\\ggbtdlrR', ggbtdlrRHTML, ['',',']);

LatexCmds.ggbtd = bind(SomethingHTML, '\\ggbtd', ggbtdCHTML, ['',',']);
LatexCmds.ggbtdl = bind(SomethingHTML, '\\ggbtdl', ggbtdlCHTML, ['',',']);
LatexCmds.ggbtdll = bind(SomethingHTML, '\\ggbtdll', ggbtdllCHTML, ['',',']);
LatexCmds.ggbtdlr = bind(SomethingHTML, '\\ggbtdlr', ggbtdlrCHTML, ['',',']);

LatexCmds.ggbtdL = bind(SomethingHTML, '\\ggbtdL', ggbtdLHTML, ['',',']);
LatexCmds.ggbtdlL = bind(SomethingHTML, '\\ggbtdlL', ggbtdlLHTML, ['',',']);
LatexCmds.ggbtdllL = bind(SomethingHTML, '\\ggbtdllL', ggbtdllLHTML, ['',',']);
LatexCmds.ggbtdlrL = bind(SomethingHTML, '\\ggbtdlrL', ggbtdlrLHTML, ['',',']);

// TextColorGeneric is a template for \textcolor, \fgcolor, \bgcolor
// `\textcolor{color}{math}` will apply a color to the given math content, where
// `color` is any valid CSS Color Value (see [SitePoint docs][] (recommended),
// [Mozilla docs][], or [W3C spec][]).
//
// [SitePoint docs]: http://reference.sitepoint.com/css/colorvalues
// [Mozilla docs]: https://developer.mozilla.org/en-US/docs/CSS/color_value#Values
// [W3C spec]: http://dev.w3.org/csswg/css3-color/#colorunits
var TextColorGeneric = P(MathCommand, function(_, _super) {
  _.htmlTemplate = '<span>&0</span>';
  _.jQadd = function() {
    _super.jQadd.apply(this, arguments);
  };

  _.parser = function() {
    var self = this;
    var optWhitespace = Parser.optWhitespace;
    var string = Parser.string;
    var regex = Parser.regex;

    return optWhitespace
      .then(string('{'))
      .then(regex(/^[^{}]*/))
      .skip(string('}'))
      .then(function(color) {
        self.color = color.length == 6 && /^[0-9a-f]*$/.test(color) ? "#"+color : color;
        return _super.parser.call(self);
      })
    ;
  };
});

var TextColor = LatexCmds.textcolor = P(TextColorGeneric, function(_, _super) {
	  _.jQadd = function() {
	    _super.jQadd.apply(this, arguments);
	    this.jQ.css('color', this.color);
	  };
	});

var ForeGroundColor = LatexCmds.fgcolor = P(TextColorGeneric, function(_, _super) {
  _.jQadd = function() {
    _super.jQadd.apply(this, arguments);
    this.jQ.css('color', this.color);
  };
});

var BackGroundColor = LatexCmds.bgcolor = P(TextColorGeneric, function(_, _super) {
  _.jQadd = function() {
    _super.jQadd.apply(this, arguments);
    this.jQ.css('backgroundColor', this.color);
  };
});

var SupSub = P(MathCommand, function(_, _super) {
  _.init = function(ctrlSeq, tag, text) {
    _super.init.call(this, ctrlSeq, '<'+tag+' class="non-leaf">&0</'+tag+'>', [ text ]);
  };
  _.finalizeTree = function() {
    //TODO: use inheritance

    if (this.ctrlSeq === '_') {
      this.downInto = this.ch[L];
      this.ch[L].upOutOf = insertBeforeUnlessAtEnd;
    }
    else {
      this.upInto = this.ch[L];
      this.ch[L].downOutOf = insertBeforeUnlessAtEnd;
    }
    function insertBeforeUnlessAtEnd(cursor) {
      // cursor.insertBefore(cmd), unless cursor at the end of block, and every
      // ancestor cmd is at the end of every ancestor block
      var cmd = this.parent, ancestorCmd = cursor;
      do {
        if (ancestorCmd[R]) {
          cursor.insertBefore(cmd);
          return false;
        }
        ancestorCmd = ancestorCmd.parent.parent;
      } while (ancestorCmd !== cmd);
      cursor.insertAfter(cmd);
      return false;
    }
  };
  _.latex = function() {
    var latex = this.ch[L].latex();
    if (latex.length === 1)
      return this.ctrlSeq + latex;
    else
      return this.ctrlSeq + '{' + (latex || ' ') + '}';
  };
  _.text = function() {
    var ctr = '';
    if (this.textTemplate[0]) {
      ctr = this.textTemplate[0];
    }
    var tex = this.ch[L].text();
    if (this.ctrlSeq === '_') {
      // only do this for subscripts
      if (tex.length === 1) {
        return ctr + tex;
      } else if (tex[0] === '(' && tex.slice(-1) === ')') {
        return ctr + '{' + (tex.slice(1,-1) || ' ') + '}';
      } else if (tex[0] === '{' && tex.slice(-1) === '}') {
    	// log_{10}(x) case
        return ctr + tex;
      }
      return ctr + '{' + (tex || ' ') + '}';
	}
    var excl = ctr + tex;
    if (excl === '^circ ') {
      // special case: this should mean degree symbol instead!
      return '\u00b0';
    }
    // instead of this:
    return _super.text.call(this);
  };
  _.redraw = function() {
    if (this[L])
      this[L].respace();
    //SupSub::respace recursively calls respace on all the following SupSubs
    //so if prev is a SupSub, no need to call respace on this or following nodes
    if (!(this[L] instanceof SupSub)) {
      this.respace();
      //and if next is a SupSub, then this.respace() will have already called
      //this[R].respace()
      if (this[R] && !(this[R] instanceof SupSub))
        this[R].respace();
    }
  };
  _.respace = function() {
    if (
      this[L].ctrlSeq === '\\int ' || (
        this[L] instanceof SupSub && this[L].ctrlSeq != this.ctrlSeq
        && this[L][L] && this[L][L].ctrlSeq === '\\int '
      )
    ) {
      if (!this.limit) {
        this.limit = true;
        this.jQ.addClass('limit');
      }
    }
    else {
      if (this.limit) {
        this.limit = false;
        this.jQ.removeClass('limit');
      }
    }

    this.respaced = this[L] instanceof SupSub && this[L].ctrlSeq != this.ctrlSeq && !this[L].respaced;
    if (this.respaced) {
      var fontSize = +this.jQ.css('fontSize').slice(0,-2),
        prevWidth = this[L].jQ.outerWidth(),
        thisWidth = this.jQ.outerWidth();
      this.jQ.css({
        left: (this.limit && this.ctrlSeq === '_' ? -.25 : 0) - prevWidth/fontSize + 'em',
        marginRight: .1 - min(thisWidth, prevWidth)/fontSize + 'em'
          //1px extra so it doesn't wrap in retarded browsers (Firefox 2, I think)
      });
    }
    else if (this.limit && this.ctrlSeq === '_') {
      this.jQ.css({
        left: '-.25em',
        marginRight: ''
      });
    }
    else {
      this.jQ.css({
        left: '',
        marginRight: ''
      });
    }

    if (this[R] instanceof SupSub)
      this[R].respace();

    return this;
  };
});

LatexCmds.subscript =
LatexCmds._ = bind(SupSub, '_', 'sub', '_');

LatexCmds.superscript =
LatexCmds.supscript =
LatexCmds['^'] = bind(SupSub, '^', 'sup', '^');

var Fraction =
	LatexCmds.frac =
	LatexCmds.dfrac =
	LatexCmds.cfrac =
	LatexCmds.fraction = P(MathCommand, function(_, _super) {
	  _.ctrlSeq = '\\frac';
	  _.htmlTemplate =
	      '<span class="fraction non-leaf">'
	    +   '<span class="numerator">&0</span>'
	    +   '<span class="denominator">&1</span>'
	    +   '<span style="display:inline-block;width:0">&nbsp;</span>'
	    + '</span>'
	  ;
	  _.textTemplate = ['(', '/', ')'];
	  _.finalizeTree = function() {
	    this.upInto = this.ch[R].upOutOf = this.ch[L];
	    this.downInto = this.ch[L].downOutOf = this.ch[R];
	  };
	});

// eg FormulaText["\lim_{x \to 33} \left( x^2 \right)"]
var Limit =
	LatexCmds.lim =
	LatexCmds.lim_ = P(MathCommand, function(_, _super) {
	  _.ctrlSeq = '\\lim_';
	  _.htmlTemplate =
	      '<span class="limit non-leaf">'
	    +   '<span class="limittop">lim</span>'
	    +   '<span class="limitbottom">&0</span>'
	    +   '<span style="display:inline-block;width:0">&nbsp;</span>'
	    + '</span>'
	  ;
	  _.textTemplate = ['(', '/', ')'];
	  _.finalizeTree = function() {
	    this.upInto = this.ch[R].upOutOf = this.ch[L];
	    this.downInto = this.ch[L].downOutOf = this.ch[R];
	  };
	});

var LiveFraction =
LatexCmds.over =
CharCmds['\u00f7'] =
CharCmds['/'] = P(Fraction, function(_, _super) {
  _.createBefore = function(cursor) {
    if (!this.replacedFragment) {
      var prev = cursor[L];
      while (prev &&
        !(
          prev instanceof BinaryOperator ||
          prev instanceof TextBlock ||
          prev instanceof BigSymbol ||
          (prev instanceof VanillaSymbol && prev.ctrlSeq === ',')
        ) //lookbehind for operator
      )
        prev = prev[L];

      if (prev instanceof BigSymbol && prev[R] instanceof SupSub) {
        prev = prev[R];
        if (prev[R] instanceof SupSub && prev[R].ctrlSeq != prev.ctrlSeq)
          prev = prev[R];
      }

      if (prev !== cursor[L]) {
        this.replaces(Fragment(prev[R] || cursor.parent.ch[L], cursor[L]));
        cursor[L] = prev;
      }
    }
    _super.createBefore.call(this, cursor);
  };
});

var SquareRoot =
LatexCmds.Sqrt =
LatexCmds.sqrt =
LatexCmds['\u221a'] = P(MathCommand, function(_, _super) {
  _.ctrlSeq = '\\sqrt';
  _.htmlTemplate =
      '<span class="non-leaf sqrt-parent">'
    +   '<span class="scaled sqrt-prefix">&radic;</span>'
    +   '<span class="non-leaf sqrt-stem">&0</span>'
    + '</span>'
  ;
  // leaving one space before the sqrt in order to avoid
  // problems like xsqrt(x)... in theory, the space should not
  // do harm in case of + before, either, GeoGebraWeb shall
  // know how to parse it well (sometimes *, sometimes nothing)
  _.textTemplate = [' sqrt(', ')'];
  _.parser = function() {
    return latexMathParser.optBlock.then(function(optBlock) {
      return latexMathParser.block.map(function(block) {
        var nthroot = NthRoot();
        nthroot.blocks = [ optBlock, block ];
        optBlock.adopt(nthroot, 0, 0);
        block.adopt(nthroot, optBlock, 0);
        return nthroot;
      });
    }).or(_super.parser.call(this));
  };
  _.redraw = function() {
    var block = this.ch[R].jQ;
    var bh = block.innerHeight();
    var fs = 0;
    if (block.css('fontSize').length > 2) {
      if (block.css('fontSize').substr(-2) == "px") {
        fs = block.css('fontSize').slice(0,-2);
      }
    }
    if ((fs > 0) && (bh > 0)) {
      scale(block.prev(), 1, bh/fs);
      if (this.tries) {
        delete this.tries;
      }
    } else if (fs > 0) {
      if (this.tries) {
        this.tries--;
      } else {
        this.tries = 20;
      }
      if (this.tries > 0) {
        var thisfunction = this.redraw.bind(this);

        // assume 60 FPS refresh rate; meaning refresh 
        // in every 0.0166 seconds, or 16.6 milliseconds 
        // 60 ms is probably good, almost in every third frame 
        // this way "tries" is no more than 20 
        setTimeout(thisfunction, 60); 
      } else {
        delete this.tries;
      }
    }
  };
});


var NthRoot =
LatexCmds.nroot =
LatexCmds.nthroot = P(SquareRoot, function(_, _super) {
  _.htmlTemplate =
      '<sup class="nthroot non-leaf">&0</sup>'
    + '<span class="scaled sqrt-parent">'
    +   '<span class="sqrt-prefix scaled">&radic;</span>'
    +   '<span class="sqrt-stem non-leaf">&1</span>'
    + '</span>'
  ;
  _.textTemplate = ['nroot(', ',', ')'];
  _.text = function() {
     return 'nroot('+
        this.ch[R].text()+
        ','+
        this.ch[L].text()+
        ')';
  };
  _.latex = function() {
    return '\\sqrt['+this.ch[L].latex()+']{'+this.ch[R].latex()+'}';
  };
});


var HalfBracket = P(MathCommand, function(_, _super) {
  _.init = function(open, close, ctrlSeq, textt) {
    var tex = [open, close];
    if (textt) {
      tex = textt; 
    }
    _super.init.call(this, ctrlSeq,
      '<span class="non-leaf paren-parent">'
      +   '<span class="scaled paren">'+open+'</span>'
      +   '<span class="non-leaf">&0</span>'
      +   '<span class="scaled paren">'+close+'</span>'
      + '</span>', tex);

    // note that either open or close should be empty,
    // or this makes a different syntax to brackets!
    // different syntax was created for making it easier
    // to use different kinds of brackets for opening and closing...
  };

  _.jQadd = function() {
    _super.jQadd.apply(this, arguments);
    var jQ = this.jQ;
    this.bracketjQs = jQ.children(':first').add(jQ.children(':last'));
  };

  _.latex = function() {
    return this.ctrlSeq + "{" + this.ch[L].latex() + "}";
  };

  _.redraw = function() {
	var block = this.ch[L].jQ;
    var bh = block.outerHeight();
    var fs = 0;
    if (block.css('fontSize').length > 2) {
      if (block.css('fontSize').substr(-2) == "px") {
        fs = block.css('fontSize').slice(0,-2);
      }
    }
    if ((fs > 0) && (bh > 0)) {
      var height = bh/+fs;
      scale(this.bracketjQs, min(1 + .2*(height - 1), 1.2), 0.9 * height);
      if (this.tries) {
        delete this.tries;
      }
    } else if (fs > 0) {
      if (this.tries) {
        this.tries--;
      } else {
        this.tries = 20;
      }
      if (this.tries > 0) {
        var thisfunction = this.redraw.bind(this);

        // assume 60 FPS refresh rate; meaning refresh 
        // in every 0.0166 seconds, or 16.6 milliseconds 
        // 60 ms is probably good, almost in every third frame 
        // this way "tries" is no more than 20 
        setTimeout(thisfunction, 60); 
      } else {
        delete this.tries;
      }
    }
  };
  _.deleteTowards = function(dir, cursor) {
    // in case of \\prcurve, don't allow deleteTowards!
    if (this.ctrlSeq === '\\piecewise' ||
        this.ctrlSeq === '\\parametric') {
      // do nothing! these classes should not be deleted
      return undefined;
    } else {
      return this.createSelection(dir, cursor);
    }
  };
  _.moveTowards = function(dir, cursor) {
    // well, this is the code for MathCommand.moveTowards
    cursor.appendDir(-dir, this.ch[-dir]);

    if (this.ctrlSeq === '\\piecewise' ||
        this.ctrlSeq === '\\parametric') {
        var thisthis = cursor[dir];
        thisthis.moveTowards(dir, cursor);
    }
  };
});

// differentiating piecewise functions from openbraceonly of ggbtable
// so that piecewise functions can be identified by this condition
LatexCmds.piecewise = bind(HalfBracket, '{', '', '\\piecewise', ['', '']);
// similarly, differentiating parametric curves from closebraceonly
LatexCmds.parametric = bind(HalfBracket, '', '}', '\\parametric', ['', '']);

LatexCmds.openbraceonly = bind(HalfBracket, '{', '', '\\openbraceonly');
LatexCmds.closebraceonly = bind(HalfBracket, '', '}', '\\closebraceonly');

LatexCmds.openbracketonly = bind(HalfBracket, '[', '', '\\openbracketonly');
LatexCmds.closebracketonly = bind(HalfBracket, '', ']', '\\closebracketonly');

LatexCmds.openparenonly = bind(HalfBracket, '(', '', '\\openparenonly');
LatexCmds.closeparenonly = bind(HalfBracket, '', ')', '\\closeparenonly');

LatexCmds.openlineonly = bind(HalfBracket, '|', '', '\\openlineonly');
LatexCmds.closelineonly = bind(HalfBracket, '', '|', '\\closelineonly');

LatexCmds.opendoubleonly = bind(HalfBracket, '||', '', '\\opendoubleonly');
LatexCmds.closedoubleonly = bind(HalfBracket, '', '||', '\\closedoubleonly');

// In theory, it's possible to add mixed brackets, but why?


// Round/Square/Curly/Angle Brackets (aka Parens/Brackets/Braces)
var Bracket = P(MathCommand, function(_, _super) {
  _.init = function(open, close, ctrlSeq, end, blockClass) {
	if ((blockClass === undefined) || (blockClass !== 'non-leaf text quotationtext')) {
	  blockClass = 'non-leaf';
	}
    _super.init.call(this, '\\left'+ctrlSeq,
        '<span class="non-leaf paren-parent">'
      +   '<span class="scaled paren">'+open+'</span>'
      +   '<span class="'+blockClass+'">&0</span>'
      +   '<span class="scaled paren">'+close+'</span>'
      + '</span>',
      [open, close]);
    this.end = '\\right'+end;
    this.htmlTemplate1 = '<span class="non-leaf paren-parent paren-parent-colored">'
        +   '<span class="scaled paren">'+open+'</span>'
        +   '<span class="'+blockClass+'">&0</span>'
        +   '<span class="scaled paren">'+close+'</span>'
        + '</span>';
    this.htmlTemplate2 = '<span class="non-leaf paren-parent">'
	      +   '<span class="scaled paren">'+open+'</span>'
	      +   '<span class="'+blockClass+'">&0</span>'
	      +   '<span class="scaled paren">'+close+'</span>'
	      + '</span>';
  };
  _.setColoring = function(boo) {
	if (boo === true) {
      this.htmlTemplate = this.htmlTemplate1;
      // in theory, this.jQ is of style "paren-parent",
      // so this should work OK with mathquillggb.css
      this.jQ.addClass('paren-parent-colored');
	} else if (boo === false) {
	  this.htmlTemplate = this.htmlTemplate2;
      // in theory, this.jQ is of style "paren-parent",
      // so this should work OK with mathquillggb.css
	  this.jQ.removeClass('paren-parent-colored');
	}
  };
  _.jQadd = function() {
    _super.jQadd.apply(this, arguments);
    var jQ = this.jQ;
    this.bracketjQs = jQ.children(':first').add(jQ.children(':last'));
  };
  _.latex = function() {
    return this.ctrlSeq + this.ch[L].latex() + this.end;
  };
  _.redraw = function() {
	var block = this.ch[L].jQ;
    var bh = block.outerHeight();
    var fs = 0;
    if (block.css('fontSize').length > 2) {
      if (block.css('fontSize').substr(-2) == "px") {
        fs = block.css('fontSize').slice(0,-2);
      }
    }
    if ((fs > 0) && (bh > 0)) {
      var height = bh/+fs;
      scale(this.bracketjQs, min(1 + .2*(height - 1), 1.2), 0.9 * height);
      if (this.tries) {
        delete this.tries;
      }
    } else if (fs > 0) {
      if (this.tries) {
        this.tries--;
      } else {
        this.tries = 20;
      }
      if (this.tries > 0) {
        var thisfunction = this.redraw.bind(this);

        // assume 60 FPS refresh rate; meaning refresh 
        // in every 0.0166 seconds, or 16.6 milliseconds 
        // 60 ms is probably good, almost in every third frame 
        // this way "tries" is no more than 20 
        setTimeout(thisfunction, 60); 
      } else {
        delete this.tries;
      }
    }
  };
});

var VBracket = P(HalfBracket, function(_, _super) { 
	_.text = function() {
	    return "vectorize("+_super.text.call(this) +")";
	  };
});
LatexCmds.vectorize = bind(VBracket, '(', ')', '\\vectorize');


LatexCmds.left = P(MathCommand, function(_) {
  _.parser = function() {
    var regex = Parser.regex;
    var string = Parser.string;
    var regex = Parser.regex;
    var succeed = Parser.succeed;
    var block = latexMathParser.block;
    var optWhitespace = Parser.optWhitespace;

    return optWhitespace.then(regex(/^(?:[([|]|\\\{)/))
      .then(function(open) {
        if (open.charAt(0) === '\\') open = open.slice(1);

        var cmd = CharCmds[open]();

        return latexMathParser
          .map(function (block) {
            cmd.blocks = [ block ];
            block.adopt(cmd, 0, 0);
          })
          .then(string('\\right'))
          .skip(optWhitespace)
          .then(regex(/^(?:[\])|]|\\\})/))
          .then(function(close) {
            if (close.slice(-1) !== cmd.end.slice(-1)) {
              return Parser.fail('open doesn\'t match close');
            }

            return succeed(cmd);
          })
        ;
      })
    ;
  };
});

LatexCmds.right = P(MathCommand, function(_) {
  _.parser = function() {
    return Parser.fail('unmatched \\right');
  };
});

var Quotation = CharCmds['"'] = LatexCmds.quotation = P(Bracket, function(_, _super) {
  _.init = function() {
    _super.init.call(this, '"', '"', '"', '"', 'non-leaf text quotationtext');
    this.ctrlSeq = '\\quotation';
    this.end = '';
    // in GeoGebraWeb, this needs some changes anyway...
    // it will be easier to change " signs inside the text block,
    // and that's why the textTemplate should be distinguished
    // that can be replaced later! let it be e.g. double ""
    this.textTemplate = ['\\\"', '\\\"'];
  };
  _.createBlocks = function() {
    var cmd = this,
	numBlocks = cmd.numBlocks(),
	blocks = cmd.blocks = Array(numBlocks);

    for (var i = 0; i < numBlocks; i += 1) {
      var newBlock = blocks[i] = makeQuotationText()();
	  newBlock.adopt(cmd, cmd.ch[R], 0);

	  // this should work as htmlTemplate contains only one &0,
	  // or in other words, numBlocks is always 1 in theory,
	  // I not not even understand why there is a loop
	  this.lasttextblock = newBlock;
	}
  };
  _.seek = function(pageX, cursor) {
    this.lasttextblock.seek(pageX, cursor);
  };
  _.parser = function() {
	// this code is almost the same as MathCommand.parse, except...
    var self = this,
    blocks = self.blocks = Array(1);
    //var block = latexMathParser.block;

    var newBlock = blocks[0] = makeQuotationText()();
    newBlock.adopt(self, self.ch[R], 0);// or adopt later?
  	self.lasttextblock = newBlock;

    // this method is almost the same as createBlocks,
    // except it also parses the content of TextBlock here,
    // or more appropriately, it returns a parser which we
  	// should combine them, here we use the information
  	// that (numBlocks === 1)! otherwise it would be harder
    return newBlock.parser().map(function(blockk) {
      // everything is already done, just the return
      // value matters, we should return this instead of TextBlock
      return self;
    });
  };
  _.latex = function() {
	// well, GeoGebraWeb cannot parse the \\quotation syntax anyway,
    // and this is just for output, I think...
	// so let's help the copy operation instead!
	var cont = this.ch[L].latex();
	// cont might have {} around, so let's remove them!
	// or we could remove them in TextBlock, but maybe harmful

	// ... we BELIEVE that cont has {} signs around,
	// no need for checking... just a little
	if (cont.length >= 2) {
	  cont = cont.substring(1, cont.length - 1);
	}
    return '"' + cont + '"';
  };
});

LatexCmds.lbrace =
//LatexCmds['{'] =// this line would be harmful for matrices!
CharCmds['{'] = bind(Bracket, '{', '}', '\\{', '\\}');
LatexCmds.langle =
LatexCmds.lang = bind(Bracket, '&lang;','&rang;','\\langle ','\\rangle ');

// Closing bracket matching opening bracket above
var CloseBracket = P(Bracket, function(_, _super) {
  _.createBefore = function(cursor) {
    // if I'm at the end of my parent who is a matching open-paren,
    // and I am not replacing a selection fragment, don't create me,
    // just put cursor after my parent
    if (!cursor[R] && cursor.parent.parent && cursor.parent.parent.end === this.end && !this.replacedFragment)
      cursor.insertAfter(cursor.parent.parent);
    else
      _super.createBefore.call(this, cursor);
  };
  _.placeCursor = function(cursor) {
    this.ch[L].blur();
    cursor.insertAfter(this);
  };
});

LatexCmds.rbrace =
//LatexCmds['}'] =// this line would be harmful for matrices!
CharCmds['}'] = bind(CloseBracket, '{','}','\\{','\\}');
LatexCmds.rangle =
LatexCmds.rang = bind(CloseBracket, '&lang;','&rang;','\\langle ','\\rangle ');

var parenMixin = function(_, _super) {
  _.init = function(open, close) {
    _super.init.call(this, open, close, open, close);
  };
};

var Paren = P(Bracket, parenMixin);

LatexCmds.lparen =
CharCmds['('] = bind(Paren, '(', ')');
LatexCmds.lbrack =
LatexCmds.lbracket =
CharCmds['['] = bind(Paren, '[', ']');

var CloseParen = P(CloseBracket, parenMixin);

LatexCmds.rparen =
CharCmds[')'] = bind(CloseParen, '(', ')');
LatexCmds.rbrack =
LatexCmds.rbracket =
CharCmds[']'] = bind(CloseParen, '[', ']');

var Pipes =
LatexCmds.lpipe =
LatexCmds.rpipe =
CharCmds['|'] = P(Paren, function(_, _super) {
  _.init = function() {
    _super.init.call(this, '|', '|');
    this.textTemplate = ['abs(', ')'];
  }

  _.createBefore = function(cursor) {
      if (!cursor[R] && cursor.parent.parent && cursor.parent.parent.end === this.end && !this.replacedFragment) {
    	if (cursor.parent instanceof MathBlock) {
    	  cursor.parent.close();
    	}
        cursor.insertAfter(cursor.parent.parent);
      } else {
	    CloseBracket.prototype.createBefore.call(this, cursor);
      }
  }
});

// input box to type a variety of LaTeX commands beginning with a backslash
var LatexCommandInput =
CharCmds['\\'] = P(MathCommand, function(_, _super) {
  _.ctrlSeq = '\\';
  _.replaces = function(replacedFragment) {
    this._replacedFragment = replacedFragment.disown();
    this.isEmpty = function() { return false; };
  };
  _.htmlTemplate = '<span class="latex-command-input non-leaf">\\<span>&0</span></span>';
  _.textTemplate = ['\\'];
  _.createBlocks = function() {
    _super.createBlocks.call(this);
    this.ch[L].focus = function() {
      this.parent.jQ.addClass('hasCursor');
      if (this.isEmpty())
        this.parent.jQ.removeClass('empty');

      return this;
    };
    this.ch[L].blur = function() {
      this.parent.jQ.removeClass('hasCursor');
      if (this.isEmpty())
        this.parent.jQ.addClass('empty');

      return this;
    };
  };
  _.createBefore = function(cursor) {
    _super.createBefore.call(this, cursor);

    this.cursor = cursor.appendTo(this.ch[L]);
    if (this._replacedFragment) {
      var el = this.jQ[0];
      this.jQ =
        this._replacedFragment.jQ.addClass('blur').bind(
          'mousedown mousemove touchstart touchmove', //FIXME: is monkey-patching the mousedown and mousemove handlers the right way to do this?
          function(e) {
            $(e.target = el).trigger(e);
            // as this is triggered once again,
            // it's probably okay to return false in this case (?)

            // just because this returns false,
            // touchstart and touchmove events are also added,
            // however, it will probably not used as this
            // MathQuillGGB class is probably not used in GGW, AFAIK
            return false;
          }
        ).insertBefore(this.jQ).add(this.jQ);
    }

    this.ch[L].write = function(cursor, ch, replacedFragment) {
      if (replacedFragment) replacedFragment.remove();

      if (ch.match(/[a-z]/i)) VanillaSymbol(ch).createBefore(cursor);
      else {
        this.parent.renderCommand();
        if (ch !== '\\' || !this.isEmpty()) this.parent.parent.write(cursor, ch);
      }
    };
  };
  _.latex = function() {
    return '\\' + this.ch[L].latex() + ' ';
  };
  _.onKey = function(curs, key, e) {
    if (key === 'Tab' || key === 'Enter' || key === 'Spacebar') {
      this.renderCommand();
      e.preventDefault();
      return false;
    }
  };
  _.renderCommand = function() {
    this.jQ = this.jQ.last();
    this.remove();
    if (this[R]) {
      this.cursor.insertBefore(this[R]);
    } else {
      this.cursor.appendTo(this.parent);
    }

    var latex = this.ch[L].latex(), cmd;
    if (!latex) latex = 'backslash';
    this.cursor.insertCmd(latex, this._replacedFragment);
  };
});

var Binomial =
LatexCmds.binom =
LatexCmds.binomial = P(MathCommand, function(_, _super) {
  _.ctrlSeq = '\\binom';
  _.htmlTemplate =
      '<span class="paren scaled">(</span>'
    + '<span class="non-leaf">'
    +   '<span class="array non-leaf">'
    +     '<span>&0</span>'
    +     '<span>&1</span>'
    +   '</span>'
    + '</span>'
    + '<span class="paren scaled">)</span>'
  ;
  _.textTemplate = ['choose(',',',')'];
  _.redraw = function() {
	var block = this.jQ.eq(1);
    var bh = block.outerHeight();
    var fs = 0;
    if (block.css('fontSize').length > 2) {
      if (block.css('fontSize').substr(-2) == "px") {
        fs = block.css('fontSize').slice(0,-2);
      }
    }
    if ((fs > 0) && (bh > 0)) {
      var height = bh/+fs;
      var parens = this.jQ.filter('.paren');
      scale(parens, min(1 + .2*(height - 1), 1.2), 1.05*height);
      if (this.tries) {
        delete this.tries;
      }
    } else if (fs > 0) {
      if (this.tries) {
        this.tries--;
      } else {
        this.tries = 20;
      }
      if (this.tries > 0) {
        var thisfunction = this.redraw.bind(this);

        // assume 60 FPS refresh rate; meaning refresh 
        // in every 0.0166 seconds, or 16.6 milliseconds 
        // 60 ms is probably good, almost in every third frame 
        // this way "tries" is no more than 20 
        setTimeout(thisfunction, 60); 
      } else {
        delete this.tries;
      }
    }
  };
});

var Choose =
LatexCmds.choose = P(Binomial, function(_) {
  _.createBefore = LiveFraction.prototype.createBefore;
});

var Vector =
LatexCmds.vector = P(MathCommand, function(_, _super) {
  _.ctrlSeq = '\\vector';
  _.htmlTemplate = '<span class="array"><span>&0</span></span>';
  _.latex = function() {
    return '\\begin{matrix}' + this.foldChildren([], function(latex, child) {
      latex.push(child.latex());
      return latex;
    }).join('\\\\') + '\\end{matrix}';
  };
  _.text = function() {
    return '[' + this.foldChildren([], function(text, child) {
      text.push(child.text());
      return text;
    }).join() + ']';
  }
  _.createBefore = function(cursor) {
    _super.createBefore.call(this, this.cursor = cursor);
  };
  _.onKey = function(curs, key, e) {
    var currentBlock = this.cursor.parent;

    if (currentBlock.parent === this) {
      if (key === 'Enter') { //enter
        var newBlock = MathBlock();
        newBlock.parent = this;
        newBlock.jQ = $('<span></span>')
          .attr(mqBlockId, newBlock.id)
          .insertAfter(currentBlock.jQ);
        if (currentBlock[R])
          currentBlock[R][L] = newBlock;
        else
          this.ch[R] = newBlock;

        newBlock[R] = currentBlock[R];
        currentBlock[R] = newBlock;
        newBlock[L] = currentBlock;
        this.bubble('redraw').cursor.appendTo(newBlock);

        e.preventDefault();
        return false;
      }
      else if (key === 'Tab' && !currentBlock[R]) {
        if (currentBlock.isEmpty()) {
          if (currentBlock[L]) {
            this.cursor.insertAfter(this);
            delete currentBlock[L][R];
            this.ch[R] = currentBlock[L];
            currentBlock.jQ.remove();
            this.bubble('redraw');

            e.preventDefault();
            return false;
          }
          else
            return;
        }

        var newBlock = MathBlock();
        newBlock.parent = this;
        newBlock.jQ = $('<span></span>').attr(mqBlockId, newBlock.id).appendTo(this.jQ);
        this.ch[R] = newBlock;
        currentBlock[R] = newBlock;
        newBlock[L] = currentBlock;
        this.bubble('redraw').cursor.appendTo(newBlock);

        e.preventDefault();
        return false;
      }
      else if (e.which === 8) { //backspace
        if (currentBlock.isEmpty()) {
          if (currentBlock[L]) {
            this.cursor.appendTo(currentBlock[L])
            currentBlock[L][R] = currentBlock[R];
          }
          else {
            this.cursor.insertBefore(this);
            this.ch[L] = currentBlock[R];
          }

          if (currentBlock[R])
            currentBlock[R][L] = currentBlock[L];
          else
            this.ch[R] = currentBlock[L];

          currentBlock.jQ.remove();
          if (this.isEmpty())
            this.cursor.deleteForward();
          else
            this.bubble('redraw');

          e.preventDefault();
          return false;
        }
        else if (!this.cursor[L]) {
          e.preventDefault();
          return false;
        }
      }
    }
  };
});

LatexCmds.editable = P(RootMathCommand, function(_, _super) {
  _.init = function() {
    MathCommand.prototype.init.call(this, '\\editable');
  };

  _.jQadd = function() {
    var self = this;
    // FIXME: this entire method is a giant hack to get around
    // having to call createBlocks, and createRoot expecting to
    // render the contents' LaTeX. Both need to be refactored.
    _super.jQadd.apply(self, arguments);
    var block = self.ch[L].disown();
    var blockjQ = self.jQ.children().detach();

    self.ch[L] =
    self.ch[R] =
      RootMathBlock();

    self.blocks = [ self.ch[L] ];

    self.ch[L].parent = self;

    createRoot(self.jQ, self.ch[L], false, true);
    self.cursor = self.ch[L].cursor;

    block.children().adopt(self.ch[L], 0, 0);
    blockjQ.appendTo(self.ch[L].jQ);

    self.ch[L].cursor.appendTo(self.ch[L]);
  };

  _.latex = function(){ return this.ch[L].latex(); };
  _.text = function(){ return this.ch[L].text(); };
});
/**********************************
 * Symbols and Special Characters
 *********************************/

//LatexCmds.f = bind(Symbol, 'f', '<var class="florin">&fnof;</var><span style="display:inline-block;width:0">&nbsp;</span>');

var Variable = P(Symbol, function(_, _super) {
  _.init = function(ch, html, text) {
    _super.init.call(this, ch, '<var>'+(html || ch)+'</var>', text);
  }
  _.createBefore = function(cursor) {
	//want the longest possible autocommand, so assemble longest series of letters (Variables) first
	var ctrlSeq = this.ctrlSeq;

	// only join characters which are entered now;
	// so that it should still be possible to enter e.g. "sin" as three variables
	// if we enter "in" and go to the start and enter "s"...
	for (var i = 0, prev = cursor[L]; i < MAX_AUTOCMD_LEN - 1 && prev && prev instanceof Variable; i += 1, prev = prev[L])
		ctrlSeq = prev.ctrlSeq + ctrlSeq;
	//then test if there's an autocommand here, starting with the longest possible and slicing
	while (ctrlSeq.length) {
		// UnItalicizedCmds not used, because e.g. Circle[A,B] GeoGebra command -- \Ci rcle
		//if (AutoCmds.hasOwnProperty(ctrlSeq) || UnItalicizedCmds.hasOwnProperty(ctrlSeq)) {
		if (AutoCmds.hasOwnProperty(ctrlSeq)) {
			if (ctrlSeq == 'pi') {
				// do as if it had not own property,
				// for international GeoGebra commands like
				// "Spiegle" (German) // are other AutoCmds OK?
				//continue;
				break;
			}
			for (var i = 1; i < ctrlSeq.length; i += 1) cursor.backspace();
			var command = LatexCmds[ctrlSeq](ctrlSeq);
			command.createBefore(cursor);
			if (!AutoCmds.hasOwnProperty(ctrlSeq)) {
				// TODO: what about two-parameter functions?
				var command2 = LatexCmds["lparen"]();
				command2.createBefore(cursor);
			}
			var root = cursor.root;
		    if ((root !== undefined) && (root.common !== undefined)) {
                root.common.GeoGebraSuggestionPopupCanShow = false;
            }
			return;
		}
		ctrlSeq = ctrlSeq.slice(1);
	}
	_super.createBefore.call(this, cursor);
  };
  _.text = function() {
    var text = this.ctrlSeq;

    // TODO: this.ctrlSeq does not make much sense here,
    // as it is LaTeX syntax but we need textual syntax here,
    // but still left to avoid possible errors, and using the
    // other solution only (mostly) in the new cases, when the
    // textTemplate[0] has exactly one character...
    if (this.textTemplate[0] && this.textTemplate[0].length === 1) {
      // this is used for Greek letters LatexCmds.alpha...LatexCmds.Omega
      // .length > 0 seems to be Okay, but ctrlSeq's first character
      // after / should not be a Greek letter in theory
      return this.textTemplate[0];
    }

    /*
    // Old code was not right for e.g. Line[A,B]
    // To be consistent with GeoGebra AlgebraInputW syntax,
    // we should insert * nowhere except cases like
    // 3a, where a variable follows a number,
    // so no extra * to insert after variables at all!
	if (this[L] && !(this[L] instanceof Variable)
		&& !(this[L].ctrlSeq === ' ')
		&& !(this[L].ctrlSeq === '(')
		&& !(this[L].ctrlSeq === '\\left(')
        && !(this[L] instanceof BinaryOperator))
      text = '*' + text;
	*/

    // Some people may think this is not necessary either,
    // since GeoGebra can reckognize no * sign when used
    // in the right manner! But the problem is that
    // MathQuill also deleted real * signs beforehand,
    // and these real * signs should be added again...
	//if (this[L] && (this[L] instanceof VanillaSymbol)
	//	&& !(this[L].ctrlSeq === ' ')) {
		// variable after number case is Okay,
		// but what about cases like x*2 ?
		// how to distinguish x*2 and x2 ?
		// there should be a BinarySymbol between: *
		// and this should have the '*' output to text!
	//	text = '*' + text;
	//}
    // so the problem turns out to be 'input latex'-type
    // problem that should be handled in DrawEquationWeb
    // or something like that... No, it is an 'output latex'-type
    // problem that is in RadioButtonTreeItem! but fixed.

    /*
    // Old code was not right for e.g. Line[A,B]
    // To be consistent with GeoGebra AlgebraInputW syntax,
    // we should insert * nowhere except cases like
    // 3a, where a variable follows a number,
    // so no extra * to insert after variables at all!

    // skip spaces
    var nex = this;
    while ((nex[R]) && (nex[R].ctrlSeq === ' '))
	  nex = nex[R];

    if (nex[R] && !(nex[R] instanceof BinaryOperator)
        && !(nex.jQ.hasClass('un-italicized'))
        && !(nex[R].ctrlSeq === '(')
        && !(nex[R].ctrlSeq === '\\left(')
        && !(nex[R].ctrlSeq === ')')
        && !(nex[R].ctrlSeq === '\\right)')
        && !(nex[R].ctrlSeq === '^')

        // although these are interpreted as Variable's in MathQuillGGB,
        // they can be interpreted as entirely different things in GeoGebra
        // so there should be no multiplication sign between Variable's
        && !(nex[R] instanceof Variable)

        // also, there should be no multiplication before command names,
        // this is a quick workaround, but in the long term, we may
        // want to make this multiplication sign disappear altogether
        && !(nex[R].ctrlSeq === '[')
        && !(nex[R].ctrlSeq === '\\left['))
	  text += '*';
    */

	return text;
  };
});

var VanillaSymbol = P(Symbol, function(_, _super) {
  _.init = function(ch, html, text) {
    _super.init.call(this, ch, '<span>'+(html || ch)+'</span>', text);
  };
});

//LatexCmds.lbrace = CharCmds['{'] =
//  bind(VanillaSymbol, '\\lbrace ', '{');
//LatexCmds.rbrace = CharCmds['}'] =
//  bind(VanillaSymbol, '\\rbrace ', '}');

LatexCmds.prime = CharCmds["'"] = bind(VanillaSymbol, "'", '&prime;');

// does not use Symbola font
var NonSymbolaSymbol = P(Symbol, function(_, _super) {
  _.init = function(ch, html, text) {
    _super.init.call(this, ch, '<span class="nonSymbola">'+(html || ch)+'</span>', text);
  };
});

LatexCmds['@'] = NonSymbolaSymbol;
LatexCmds['&'] = LatexCmds.amp = bind(NonSymbolaSymbol, '\\&', '&amp;');
LatexCmds['%'] = bind(NonSymbolaSymbol, '\\%', '%');
LatexCmds['\u00a9'] = LatexCmds.copyright = bind(NonSymbolaSymbol, '\\copyright', '&copy;');

//the following are all Greek to me, but this helped a lot: http://www.ams.org/STIX/ion/stixsig03.html

// 25 Greek letters in GeoGebraWeb keyboard_el.js, and also in Unicode: \u03B1-\u03C9
// pi, phi, lambda, and epsilon, upsilon elsewhere (5)
//final sigma was also missing, but GeoGebraWeb needs it! (1)
//but it turned out that final sigma is the same as \varsigma, tackled later ...

//lowercase Greek letter variables (19)
LatexCmds.alpha = LatexCmds['\u03b1'] = bind(Variable, '\\alpha ', '&alpha;', '\u03b1');
LatexCmds.beta = LatexCmds['\u03b2'] = bind(Variable, '\\beta ', '&beta;', '\u03b2');
LatexCmds.gamma = LatexCmds['\u03b3'] = bind(Variable, '\\gamma ', '&gamma;', '\u03b3');
LatexCmds.delta = LatexCmds['\u03b4'] = bind(Variable, '\\delta ', '&delta;', '\u03b4');
LatexCmds.zeta = LatexCmds['\u03b6'] = bind(Variable, '\\zeta ', '&zeta;', '\u03b6');
LatexCmds.eta = LatexCmds['\u03b7'] = bind(Variable, '\\eta ', '&eta;', '\u03b7');
LatexCmds.theta = LatexCmds['\u03b8'] = bind(Variable, '\\theta ', '&theta;', '\u03b8');
LatexCmds.iota = LatexCmds['\u03b9'] = bind(Variable, '\\iota ', '&iota;', '\u03b9');
LatexCmds.kappa = LatexCmds['\u03ba'] = bind(Variable, '\\kappa ', '&kappa;', '\u03ba');
LatexCmds.mu = LatexCmds['\u03bc'] = bind(Variable, '\\mu ', '&mu;', '\u03bc');
LatexCmds.nu = LatexCmds['\u03bd'] = bind(Variable, '\\nu ', '&nu;', '\u03bd');
LatexCmds.xi = LatexCmds['\u03be'] = bind(Variable, '\\xi ', '&xi;', '\u03be');

// omicron was missing! adding it here, for GeoGebraWeb needs it too:
LatexCmds.omicron = LatexCmds['\u03bf'] = bind(Variable, '\\omicron ', '&omicron;', '\u03bf');
LatexCmds.dollar = bind(Variable, '\\dollar', "<span>&#36;</span>", "$");

LatexCmds.rho = LatexCmds['\u03c1'] = bind(Variable, '\\rho ', '&rho;', '\u03c1');
LatexCmds.sigma = LatexCmds['\u03c3'] = bind(Variable, '\\sigma ', '&sigma;', '\u03c3');// final sigma??
LatexCmds.tau = LatexCmds['\u03c4'] = bind(Variable, '\\tau ', '&tau;', '\u03c4');
LatexCmds.chi = LatexCmds['\u03c7'] = bind(Variable, '\\chi ', '&chi;', '\u03c7');
LatexCmds.psi = LatexCmds['\u03c8'] = bind(Variable, '\\psi ', '&psi;', '\u03c8');
LatexCmds.omega = LatexCmds['\u03c9'] = bind(Variable, '\\omega ', '&omega;', '\u03c9');

LatexCmds.checkmark =  
  bind(Variable,'\\checkmark ','&#x2713;'); 

//GeoGebra's '==' now using '\u225f'
LatexCmds.questeq = LatexCmds['\u225f'] =
  bind(Variable, '\\questeq ', '&#8799;', '\u225f');

//why can't anybody agree on these
LatexCmds.phi = //W3C or Unicode?
LatexCmds['\u03d5'] =
  bind(Variable,'\\phi ','&#981;', '\u03d5');

LatexCmds.phiv = //Elsevier and 9573-13
LatexCmds.varphi = //AMS and LaTeX
LatexCmds['\u03c6'] =
  bind(Variable,'\\varphi ','&phi;', '\u03c6');// for GeoGebraWeb, the same as phi

LatexCmds.epsilon = //W3C or Unicode?
LatexCmds['\u03b5'] =
  bind(Variable, '\\epsilon ', '&#1013;', '\u03b5');

LatexCmds.epsiv = //Elsevier and 9573-13
LatexCmds.varepsilon = //AMS and LaTeX
  bind(Variable,'\\varepsilon ','&epsilon;', '\u03b5');// for GeoGebraWeb, this is the same thing

LatexCmds.piv = //W3C/Unicode and Elsevier and 9573-13
LatexCmds.varpi = //AMS and LaTeX
  bind(Variable, '\\varpi ', '&piv;', '\u03c0');// varpi the same as pi in GeoGebraWeb

LatexCmds.sigmaf = //W3C/Unicode
LatexCmds.sigmav = //Elsevier
LatexCmds.varsigma = //LaTeX
LatexCmds['\u03c2'] = 
  bind(Variable, '\\varsigma ', '&sigmaf;', '\u03c2');

LatexCmds.thetav = //Elsevier and 9573-13
LatexCmds.vartheta = //AMS and LaTeX
LatexCmds.thetasym = //W3C/Unicode
  bind(Variable,'\\vartheta ','&thetasym;', '\u03b8');//for GeoGebraWeb, this is the same thing

LatexCmds.upsilon = //AMS and LaTeX and W3C/Unicode
LatexCmds.upsi = //Elsevier and 9573-13
LatexCmds['\u03c5'] =
  bind(Variable,'\\upsilon ','&upsilon;', '\u03c5');

//these aren't even mentioned in the HTML character entity references
LatexCmds.gammad = //Elsevier
LatexCmds.Gammad = //9573-13 -- WTF, right? I dunno if this was a typo in the reference (see above)
LatexCmds.digamma = //LaTeX
LatexCmds['\u03dc'] = // not sure this is needed, but for the sake of completeness
  bind(Variable,'\\digamma ','&#989;', '\u03dc');//\u03dc Great digamma \u03dd small 

LatexCmds.kappav = //Elsevier
LatexCmds.varkappa = //AMS and LaTeX
  bind(Variable,'\\varkappa ','&#1008;', '\u03ba');// for GGW, same

LatexCmds.rhov = //Elsevier and 9573-13
LatexCmds.varrho = //AMS and LaTeX
  bind(Variable,'\\varrho ','&#1009;', '\u03c1');// for GGW, same

//Greek constants, look best in un-italicised Times New Roman
//LatexCmds.pi = LatexCmds['\u03c0'] = bind(NonSymbolaSymbol,'\\pi ','&pi;');
//LatexCmds.pi = LatexCmds['\u03c0'] = bind(NonSymbolaSymbol,'\\\u03c0 ','&pi;');
LatexCmds.pi = LatexCmds['\u03c0'] = bind(NonSymbolaSymbol, '\\pi ', '&pi;', '\u03c0');
LatexCmds.lambda = LatexCmds['\u03bb'] = bind(NonSymbolaSymbol, '\\lambda ', '&lambda;', '\u03bb');

//uppercase greek letters... there are 24 of them in theory,
//some of which were missing, so adding them for GeoGebraWeb:
LatexCmds.Alpha = LatexCmds['\u0391'] = bind(Variable, '\\Alpha ', '&Alpha;', '\u0391');
LatexCmds.Beta = LatexCmds['\u0392'] = bind(Variable, '\\Beta ', '&Beta;', '\u0392');
LatexCmds.Gamma = LatexCmds['\u0393'] = bind(Variable, '\\Gamma ', '&Gamma;', '\u0393');
LatexCmds.Delta = LatexCmds['\u0394'] = bind(Variable, '\\Delta ', '&Delta;', '\u0394');
LatexCmds.Epsilon = LatexCmds['\u0395'] = bind(Variable, '\\Epsilon ', '&Epsilon;', '\u0395');
LatexCmds.Zeta = LatexCmds['\u0396'] = bind(Variable, '\\Zeta ', '&Zeta;', '\u0396');
LatexCmds.Eta = LatexCmds['\u0397'] = bind(Variable, '\\Eta ', '&Eta;', '\u0397');
LatexCmds.Theta = LatexCmds['\u0398'] = bind(Variable, '\\Theta ', '&Theta;', '\u0398');
LatexCmds.Iota = LatexCmds['\u0399'] = bind(Variable, '\\Iota ', '&Iota;', '\u0399');
LatexCmds.Kappa = LatexCmds['\u039a'] = bind(Variable, '\\Kappa ', '&Kappa;', '\u039a');
LatexCmds.Lambda = LatexCmds['\u039b'] = bind(Variable, '\\Lambda ', '&Lambda;', '\u039b');
LatexCmds.Mu = LatexCmds['\u039c'] = bind(Variable, '\\Mu ', '&Mu;', '\u039c');
LatexCmds.Nu = LatexCmds['\u039d'] = bind(Variable, '\\Nu ', '&Nu;', '\u039d');
LatexCmds.Xi = LatexCmds['\u039e'] = bind(Variable, '\\Xi ', '&Xi;', '\u039e');
LatexCmds.Omicron = LatexCmds['\u039f'] = bind(Variable, '\\Omicron ', '&Omicron;', '\u039f');
LatexCmds.Pi = LatexCmds['\u03a0'] = bind(Variable, '\\Pi ', '&Pi;', '\u03a0');
LatexCmds.Rho = LatexCmds['\u03a1'] = bind(Variable, '\\Rho ', '&Rho;', '\u03a1');
LatexCmds.Sigma = LatexCmds['\u03a3'] = bind(Variable, '\\Sigma ', '&Sigma;', '\u03a3');// final sigma??
LatexCmds.Tau = LatexCmds['\u03a4'] = bind(Variable, '\\Tau ', '&Tau;', '\u03a4');

LatexCmds.Upsilon = //LaTeX
LatexCmds.Upsi = //Elsevier and 9573-13
LatexCmds.upsih = //W3C/Unicode "upsilon with hook"
LatexCmds.Upsih = //'cos it makes sense to me
LatexCmds['\u03a5'] = // GeoGebraWeb (?)
	bind(Symbol, '\\Upsilon ', '<var style="font-family: geogebra-serif, serif">&upsih;</var>', '\u03a5');

LatexCmds.Phi = LatexCmds['\u03a6'] = bind(Variable, '\\Phi ', '&Phi;', '\u03a6');
LatexCmds.Chi = LatexCmds['\u03a7'] = bind(Variable, '\\Chi ', '&Chi;', '\u03a7');
LatexCmds.Psi = LatexCmds['\u03a8'] = bind(Variable, '\\Psi ', '&Psi;', '\u03a8');
LatexCmds.Omega = LatexCmds['\u03a9'] = bind(Variable, '\\Omega ', '&Omega;', '\u03a9');

//other symbols with the same LaTeX command and HTML character entity reference
//(this used to be the syntax for Greek letters as well)
LatexCmds.forall = P(VanillaSymbol, function(_, _super) {
  _.init = function(latex) {
    _super.init.call(this,'\\'+latex+' ','&'+latex+';');
  };
});

// symbols that aren't a single MathCommand, but are instead a whole
// Fragment. Creates the Fragment from a LaTeX string
var LatexFragment = P(MathCommand, function(_) {
  _.init = function(latex) { this.latex = latex; };
  _.createBefore = function(cursor) { cursor.writeLatex(this.latex); };
  _.parser = function() {
    var frag = latexMathParser.parse(this.latex).children();
    return Parser.succeed(frag);
  };
});

// for what seems to me like [stupid reasons][1], Unicode provides
// subscripted and superscripted versions of all ten Arabic numerals,
// as well as [so-called "vulgar fractions"][2].
// Nobody really cares about most of them, but some of them actually
// predate Unicode, dating back to [ISO-8859-1][3], apparently also
// known as "Latin-1", which among other things [Windows-1252][4]
// largely coincides with, so Microsoft Word sometimes inserts them
// and they get copy-pasted into MathQuillGGB.
//
// (Irrelevant but funny story: Windows-1252 is actually a strict
// superset of the "closely related but distinct"[3] "ISO 8859-1" --
// see the lack of a dash after "ISO"? Completely different character
// set, like elephants vs elephant seals, or "Zombies" vs "Zombie
// Redneck Torture Family". What kind of idiot would get them confused.
// People in fact got them confused so much, it was so common to
// mislabel Windows-1252 text as ISO-8859-1, that most modern web
// browsers and email clients treat the MIME charset of ISO-8859-1
// as actually Windows-1252, behavior now standard in the HTML5 spec.)
//
// [1]: http://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts
// [2]: http://en.wikipedia.org/wiki/Number_Forms
// [3]: http://en.wikipedia.org/wiki/ISO/IEC_8859-1
// [4]: http://en.wikipedia.org/wiki/Windows-1252
LatexCmds['\u00b9'] = bind(LatexFragment, '^1');
LatexCmds['\u00b2'] = bind(LatexFragment, '^2');
LatexCmds['\u00b3'] = bind(LatexFragment, '^3');
LatexCmds['\u00bc'] = bind(LatexFragment, '\\frac14');
LatexCmds['\u00bd'] = bind(LatexFragment, '\\frac12');
LatexCmds['\u00be'] = bind(LatexFragment, '\\frac34');

var BinaryOperator = P(Symbol, function(_, _super) {
  _.init = function(ctrlSeq, html, text) {
    _super.init.call(this,
      ctrlSeq, '<span class="binary-operator">'+html+'</span>', text
    );
  };
});

var BinaryOperatorDot = P(Symbol, function(_, _super) {
	  _.init = function(ctrlSeq, html, text) {
	    _super.init.call(this,
	      ctrlSeq, '<span class="binary-operator binop-dot">'+html+'</span>', text
	    );
	  };
	});

var FixedBinaryOperator = P(BinaryOperator, function(_, _super) {
  _.deleteTowards = Symbol.prototype.moveTowards;
  _.createSelection = noop;
  _.expandSelection = noop;
  _.selectChildren = noop;
  _.selectOutOf = noop;
});

var PlusMinus = P(BinaryOperator, function(_) {
  _.init = VanillaSymbol.prototype.init;

  _.respace = function() {
    if (!this[L]) {
      this.jQ[0].className = '';
    }
    else if (
      this[L] instanceof BinaryOperator &&
      this[R] && !(this[R] instanceof BinaryOperator)
    ) {
      this.jQ[0].className = 'unary-operator';
    }
    else {
      this.jQ[0].className = 'binary-operator';
    }
    return this;
  };
});

LatexCmds['+'] = bind(PlusMinus, '+', '+');

//yes, these are different dashes, I think one is an en dash and the other is a hyphen
// Also, GeoGebraWeb uses Unicode.minus, so we should accept it as well!
LatexCmds['\u2212'] =
LatexCmds['\u2013'] = LatexCmds['-'] = bind(PlusMinus, '-', '&minus;');

LatexCmds['\u00b1'] = LatexCmds.pm = LatexCmds.plusmn = LatexCmds.plusminus =
  bind(PlusMinus,'\\pm ','&plusmn;');
LatexCmds.mp = LatexCmds.mnplus = LatexCmds.minusplus =
  bind(PlusMinus,'\\mp ','&#8723;');

//CharCmds['*'] = LatexCmds.sdot = LatexCmds.cdot =
//	  bind(BinaryOperator, '\\cdot ', '&middot;', '*');

CharCmds['*'] = LatexCmds.sdot = LatexCmds.cdot =
  bind(BinaryOperator, '\\cdot ', '&middot;', ' ');

CharCmds['\u00d7'] = 
	  bind(BinaryOperatorDot, '\\cdot ', '&middot;', ' ');
//semantically should be &sdot;, but &middot; looks better

LatexCmds['='] = bind(BinaryOperator, '=', '=');
LatexCmds['<'] = bind(BinaryOperator, '<', '&lt;');
LatexCmds['>'] = bind(BinaryOperator, '>', '&gt;');
//needed for GGB-446
LatexCmds[':'] = bind(BinaryOperator, ':', ':');
LatexCmds['\u2254'] = bind(BinaryOperator, '\u2254', '\u2254');

LatexCmds.notin =
LatexCmds.sim =
LatexCmds.cong =
LatexCmds.equiv =
LatexCmds.oplus = P(BinaryOperator, function(_, _super) {
  _.init = function(latex) {
    _super.init.call(this, '\\'+latex+' ', '&'+latex+';');
  };
});

//VECTOR_PRODUCT '\u2297' worked as a VanillaSymbol, but it needs to be a BinaryOperator
//in order to correctly handle cases like aXb/2, so it is merged with otimes
LatexCmds.otimes = LatexCmds['\u2297'] = bind(BinaryOperator, '\\otimes ', '&otimes;', '\u2297');


LatexCmds.times = bind(BinaryOperator, '\\times ', '&times;', '[x]');

LatexCmds['\u00f7'] = LatexCmds.div = LatexCmds.divide = LatexCmds.divides =
  bind(BinaryOperator,'\\div ','&divide;', '[/]');

LatexCmds['\u2260'] = LatexCmds.ne = LatexCmds.neq = bind(BinaryOperator,'\\ne ','&ne;', '\u2260');

LatexCmds.ast = LatexCmds.star = LatexCmds.loast = LatexCmds.lowast =
  bind(BinaryOperator,'\\ast ','&lowast;');
  //case 'there4 = // a special exception for this one, perhaps?
LatexCmds.therefor = LatexCmds.therefore =
  bind(BinaryOperator,'\\therefore ','&there4;');

LatexCmds.cuz = // l33t
LatexCmds.because = bind(BinaryOperator,'\\because ','&#8757;');

LatexCmds.prop = LatexCmds.propto = bind(BinaryOperator,'\\propto ','&prop;');

LatexCmds['\u2248'] = LatexCmds.asymp = LatexCmds.approx = bind(BinaryOperator,'\\approx ','&asymp;');

LatexCmds.lt = bind(BinaryOperator, '<', '&lt;', '<');

LatexCmds.gt = bind(BinaryOperator, '>', '&gt;', '>');

// lesser-or-equal signs of parametric curves need to be fixed
LatexCmds.prle = bind(FixedBinaryOperator, '\\prle ', '&le;', '\u2264');

LatexCmds['\u2264'] = LatexCmds.le = LatexCmds.leq = bind(BinaryOperator, '\\le ', '&le;', '\u2264');

LatexCmds['\u2265'] = LatexCmds.ge = LatexCmds.geq = bind(BinaryOperator, '\\ge ', '&ge;', '\u2265');

// GeoGebra IS_ELEMENT_OF "\u2208"
LatexCmds.isin = LatexCmds['in'] = LatexCmds['\u2208'] =
  bind(BinaryOperator, '\\in ', '&isin;', '\u2208');

LatexCmds.ni = LatexCmds.contains = bind(BinaryOperator,'\\ni ','&ni;');

LatexCmds.notni = LatexCmds.niton = LatexCmds.notcontains = LatexCmds.doesnotcontain =
  bind(BinaryOperator,'\\not\\ni ','&#8716;');

// GeoGebra IS_SUBSET_OF_STRICT "\u2282"
LatexCmds.sub = LatexCmds.subset = LatexCmds['\u2282'] =
  bind(BinaryOperator, '\\subset ', '&sub;', '\u2282');

LatexCmds.sup = LatexCmds.supset = LatexCmds.superset =
  bind(BinaryOperator,'\\supset ','&sup;');

LatexCmds.nsub = LatexCmds.notsub =
LatexCmds.nsubset = LatexCmds.notsubset =
  bind(BinaryOperator,'\\not\\subset ','&#8836;');

LatexCmds.nsup = LatexCmds.notsup =
LatexCmds.nsupset = LatexCmds.notsupset =
LatexCmds.nsuperset = LatexCmds.notsuperset =
  bind(BinaryOperator,'\\not\\supset ','&#8837;');

// GeoGebra IS_SUBSET_OF "\u2286"
LatexCmds.sube = LatexCmds.subeq = LatexCmds.subsete = LatexCmds.subseteq =
LatexCmds['\u2286'] =
  bind(BinaryOperator,'\\subseteq ','&sube;', '\u2286');

LatexCmds.supe = LatexCmds.supeq =
LatexCmds.supsete = LatexCmds.supseteq =
LatexCmds.supersete = LatexCmds.superseteq =
  bind(BinaryOperator,'\\supseteq ','&supe;');

LatexCmds.nsube = LatexCmds.nsubeq =
LatexCmds.notsube = LatexCmds.notsubeq =
LatexCmds.nsubsete = LatexCmds.nsubseteq =
LatexCmds.notsubsete = LatexCmds.notsubseteq =
  bind(BinaryOperator,'\\not\\subseteq ','&#8840;');

LatexCmds.nsupe = LatexCmds.nsupeq =
LatexCmds.notsupe = LatexCmds.notsupeq =
LatexCmds.nsupsete = LatexCmds.nsupseteq =
LatexCmds.notsupsete = LatexCmds.notsupseteq =
LatexCmds.nsupersete = LatexCmds.nsuperseteq =
LatexCmds.notsupersete = LatexCmds.notsuperseteq =
  bind(BinaryOperator,'\\not\\supseteq ','&#8841;');


//sum, product, coproduct, integral
var BigSymbol = P(Symbol, function(_, _super) {
  _.init = function(ch, html) {
    _super.init.call(this, ch, '<big>'+html+'</big>');
  };
});

LatexCmds['\u2211'] = LatexCmds.sum = LatexCmds.summation = bind(BigSymbol,'\\sum ','&sum;');
LatexCmds['\u220f'] = LatexCmds.prod = LatexCmds.product = bind(BigSymbol,'\\prod ','&prod;');
LatexCmds.coprod = LatexCmds.coproduct = bind(BigSymbol,'\\coprod ','&#8720;');
LatexCmds['\u222b'] = LatexCmds['int'] = LatexCmds.integral = bind(BigSymbol,'\\int ','&int;');

//the canonical sets of numbers
//LatexCmds.N =
LatexCmds.naturals = LatexCmds.Naturals =
  bind(VanillaSymbol,'\\mathbb{N}','&#8469;');

//LatexCmds.P =
LatexCmds.primes = LatexCmds.Primes =
LatexCmds.projective = LatexCmds.Projective =
LatexCmds.probability = LatexCmds.Probability =
  bind(VanillaSymbol,'\\mathbb{P}','&#8473;');

//LatexCmds.Z =
LatexCmds.integers = LatexCmds.Integers =
  bind(VanillaSymbol,'\\mathbb{Z}','&#8484;');

//LatexCmds.Q =
LatexCmds.rationals = LatexCmds.Rationals =
  bind(VanillaSymbol,'\\mathbb{Q}','&#8474;');

//LatexCmds.R =
LatexCmds.reals = LatexCmds.Reals =
  bind(VanillaSymbol,'\\mathbb{R}','&#8477;');

//LatexCmds.C =
LatexCmds.complex = LatexCmds.Complex =
LatexCmds.complexes = LatexCmds.Complexes =
LatexCmds.complexplane = LatexCmds.Complexplane = LatexCmds.ComplexPlane =
  bind(VanillaSymbol,'\\mathbb{C}','&#8450;');

//LatexCmds.H =
LatexCmds.Hamiltonian = LatexCmds.quaternions = LatexCmds.Quaternions =
  bind(VanillaSymbol,'\\mathbb{H}','&#8461;');

//spacing
LatexCmds.quad = LatexCmds.emsp = bind(VanillaSymbol,'\\quad ','    ');
LatexCmds.qquad = bind(VanillaSymbol,'\\qquad ','        ');
/* spacing special characters, gonna have to implement this in LatexCommandInput::onText somehow
case ',':
  return VanillaSymbol('\\, ',' ');
case ':':
  return VanillaSymbol('\\: ','  ');
case ';':
  return VanillaSymbol('\\; ','   ');
case '!':
  return Symbol('\\! ','<span style="margin-right:-.2em"></span>');
*/

//binary operators
LatexCmds.diamond = bind(VanillaSymbol, '\\diamond ', '&#9671;');
LatexCmds.bigtriangleup = bind(VanillaSymbol, '\\bigtriangleup ', '&#9651;');
LatexCmds.ominus = bind(VanillaSymbol, '\\ominus ', '&#8854;');
LatexCmds.uplus = bind(VanillaSymbol, '\\uplus ', '&#8846;');
LatexCmds.bigtriangledown = bind(VanillaSymbol, '\\bigtriangledown ', '&#9661;');
LatexCmds.sqcap = bind(VanillaSymbol, '\\sqcap ', '&#8851;');
LatexCmds.triangleleft = bind(VanillaSymbol, '\\triangleleft ', '&#8882;');
LatexCmds.sqcup = bind(VanillaSymbol, '\\sqcup ', '&#8852;');
LatexCmds.triangleright = bind(VanillaSymbol, '\\triangleright ', '&#8883;');
LatexCmds.odot = bind(VanillaSymbol, '\\odot ', '&#8857;');
LatexCmds.bigcirc = bind(VanillaSymbol, '\\bigcirc ', '&#9711;');
LatexCmds.dagger = bind(VanillaSymbol, '\\dagger ', '&#0134;');
LatexCmds.ddagger = bind(VanillaSymbol, '\\ddagger ', '&#135;');
LatexCmds.wr = bind(VanillaSymbol, '\\wr ', '&#8768;');
LatexCmds.amalg = bind(VanillaSymbol, '\\amalg ', '&#8720;');

//relationship symbols
LatexCmds.models = bind(VanillaSymbol, '\\models ', '&#8872;');
LatexCmds.prec = bind(VanillaSymbol, '\\prec ', '&#8826;');
LatexCmds.succ = bind(VanillaSymbol, '\\succ ', '&#8827;');
LatexCmds.preceq = bind(VanillaSymbol, '\\preceq ', '&#8828;');
LatexCmds.succeq = bind(VanillaSymbol, '\\succeq ', '&#8829;');
LatexCmds.simeq = bind(VanillaSymbol, '\\simeq ', '&#8771;');
LatexCmds.mid = bind(VanillaSymbol, '\\mid ', '&#8739;');
//LatexCmds.ll = bind(VanillaSymbol, '\\ll ', '&#8810;');//disturbing in GeoGebraWeb
//LatexCmds.gg = bind(VanillaSymbol, '\\gg ', '&#8811;');//disturbing in GeoGebraWeb
LatexCmds.bowtie = bind(VanillaSymbol, '\\bowtie ', '&#8904;');
LatexCmds.sqsubset = bind(VanillaSymbol, '\\sqsubset ', '&#8847;');
LatexCmds.sqsupset = bind(VanillaSymbol, '\\sqsupset ', '&#8848;');
LatexCmds.smile = bind(VanillaSymbol, '\\smile ', '&#8995;');
LatexCmds.sqsubseteq = bind(VanillaSymbol, '\\sqsubseteq ', '&#8849;');
LatexCmds.sqsupseteq = bind(VanillaSymbol, '\\sqsupseteq ', '&#8850;');
LatexCmds.doteq = bind(VanillaSymbol, '\\doteq ', '&#8784;');
LatexCmds.frown = bind(VanillaSymbol, '\\frown ', '&#8994;');
LatexCmds.vdash = bind(VanillaSymbol, '\\vdash ', '&#8870;');
LatexCmds.dashv = bind(VanillaSymbol, '\\dashv ', '&#8867;');

// this is needed for GeoGebraWeb, merged with "\u2225"
LatexCmds.parallel = LatexCmds['\u2225'] =
  bind(VanillaSymbol, '\\parallel ', '&#8741;', '\u2225');

//Now this should be the same as multiplication in Math mode!
//so easiest is to change " " to "*" in RootMathBlock.onText...
//so MathQuillGGB will not produce space in theory, but
//space may still come from GeoGebraWeb and go back to there

// Was there two kinds of space ??? In LaTeX, real space does not mean anything
// important as CharCmds is not even parsed by LaTeX parser, AFAIK, so ignored
CharCmds[' '] = bind(VanillaSymbol, ' ', ' ');

//AND whoever puts \u2060 deserves changing it to space!
// \s is Regexp treats nbsp, figure space and space the same way,
// but still, the word-joiner character can be used for hacking 
// (it was necessary for technical reasons, spaces in Quotations)
//CharCmds['\u2060'] =
//LatexCmds['\u2060'] = LatexCmds.space = bind(VanillaSymbol, '\\space ', '&nbsp;');
// the above syntax was not good when converting it to textual format, so instead:
LatexCmds['\u2060'] = LatexCmds.space = bind(VanillaSymbol, '\\space ', '&nbsp;', ' ');

//arrows
LatexCmds.longleftarrow = bind(VanillaSymbol, '\\longleftarrow ', '&#8592;');
LatexCmds.longrightarrow = bind(VanillaSymbol, '\\longrightarrow ', '&#8594;');
LatexCmds.Longleftarrow = bind(VanillaSymbol, '\\Longleftarrow ', '&#8656;');
LatexCmds.Longrightarrow = bind(VanillaSymbol, '\\Longrightarrow ', '&#8658;');
LatexCmds.longleftrightarrow = bind(VanillaSymbol, '\\longleftrightarrow ', '&#8596;');
LatexCmds.updownarrow = bind(VanillaSymbol, '\\updownarrow ', '&#8597;');
LatexCmds.Longleftrightarrow = bind(VanillaSymbol, '\\Longleftrightarrow ', '&#8660;');
LatexCmds.Updownarrow = bind(VanillaSymbol, '\\Updownarrow ', '&#8661;');
LatexCmds.mapsto = bind(VanillaSymbol, '\\mapsto ', '&#8614;');
LatexCmds.nearrow = bind(VanillaSymbol, '\\nearrow ', '&#8599;');
LatexCmds.hookleftarrow = bind(VanillaSymbol, '\\hookleftarrow ', '&#8617;');
LatexCmds.hookrightarrow = bind(VanillaSymbol, '\\hookrightarrow ', '&#8618;');
LatexCmds.searrow = bind(VanillaSymbol, '\\searrow ', '&#8600;');
LatexCmds.leftharpoonup = bind(VanillaSymbol, '\\leftharpoonup ', '&#8636;');
LatexCmds.rightharpoonup = bind(VanillaSymbol, '\\rightharpoonup ', '&#8640;');
LatexCmds.swarrow = bind(VanillaSymbol, '\\swarrow ', '&#8601;');
LatexCmds.leftharpoondown = bind(VanillaSymbol, '\\leftharpoondown ', '&#8637;');
LatexCmds.rightharpoondown = bind(VanillaSymbol, '\\rightharpoondown ', '&#8641;');
LatexCmds.nwarrow = bind(VanillaSymbol, '\\nwarrow ', '&#8598;');

//Misc
LatexCmds.ldots = bind(VanillaSymbol, '\\ldots ', '&#8230;');
LatexCmds.cdots = bind(VanillaSymbol, '\\cdots ', '&#8943;');
LatexCmds.vdots = bind(VanillaSymbol, '\\vdots ', '&#8942;');
LatexCmds.ddots = bind(VanillaSymbol, '\\ddots ', '&#8944;');
LatexCmds.surd = bind(VanillaSymbol, '\\surd ', '&#8730;');
LatexCmds.triangle = bind(VanillaSymbol, '\\triangle ', '&#9653;');
LatexCmds.ell = bind(VanillaSymbol, '\\ell ', '&#8467;');
LatexCmds.top = bind(VanillaSymbol, '\\top ', '&#8868;');
LatexCmds.flat = bind(VanillaSymbol, '\\flat ', '&#9837;');
LatexCmds.natural = bind(VanillaSymbol, '\\natural ', '&#9838;');
LatexCmds.sharp = bind(VanillaSymbol, '\\sharp ', '&#9839;');
LatexCmds.wp = bind(VanillaSymbol, '\\wp ', '&#8472;');
LatexCmds.bot = bind(VanillaSymbol, '\\bot ', '&#8869;');
LatexCmds.clubsuit = bind(VanillaSymbol, '\\clubsuit ', '&#9827;');
LatexCmds.diamondsuit = bind(VanillaSymbol, '\\diamondsuit ', '&#9826;');
LatexCmds.heartsuit = bind(VanillaSymbol, '\\heartsuit ', '&#9825;');
LatexCmds.spadesuit = bind(VanillaSymbol, '\\spadesuit ', '&#9824;');

//variable-sized
LatexCmds.oint = bind(VanillaSymbol, '\\oint ', '&#8750;');
LatexCmds.bigcap = bind(VanillaSymbol, '\\bigcap ', '&#8745;');
LatexCmds.bigcup = bind(VanillaSymbol, '\\bigcup ', '&#8746;');
LatexCmds.bigsqcup = bind(VanillaSymbol, '\\bigsqcup ', '&#8852;');
LatexCmds.bigvee = bind(VanillaSymbol, '\\bigvee ', '&#8744;');
LatexCmds.bigwedge = bind(VanillaSymbol, '\\bigwedge ', '&#8743;');
LatexCmds.bigodot = bind(VanillaSymbol, '\\bigodot ', '&#8857;');
LatexCmds.bigotimes = bind(VanillaSymbol, '\\bigotimes ', '&#8855;');
LatexCmds.bigoplus = bind(VanillaSymbol, '\\bigoplus ', '&#8853;');
LatexCmds.biguplus = bind(VanillaSymbol, '\\biguplus ', '&#8846;');

//delimiters
LatexCmds.lfloor = bind(VanillaSymbol, '\\lfloor ', '&#8970;');
LatexCmds.rfloor = bind(VanillaSymbol, '\\rfloor ', '&#8971;');
LatexCmds.lceil = bind(VanillaSymbol, '\\lceil ', '&#8968;');
LatexCmds.rceil = bind(VanillaSymbol, '\\rceil ', '&#8969;');
LatexCmds.slash = bind(VanillaSymbol, '\\slash ', '&#47;');
LatexCmds.opencurlybrace = bind(VanillaSymbol, '\\opencurlybrace ', '&#123;');
LatexCmds.closecurlybrace = bind(VanillaSymbol, '\\closecurlybrace ', '&#125;');

//various symbols

LatexCmds.caret = bind(VanillaSymbol,'\\caret ','^');
LatexCmds.underscore = bind(VanillaSymbol,'\\underscore ','_');
LatexCmds.backslash = bind(VanillaSymbol,'\\backslash ','\\');
LatexCmds.vert = bind(VanillaSymbol,'|');
LatexCmds.nabla = LatexCmds.del = bind(VanillaSymbol,'\\nabla ','&nabla;');
LatexCmds.hbar = bind(VanillaSymbol,'\\hbar ','&#8463;');

// this is needed for GeoGebraWeb, merged with "\u22a5"
LatexCmds.perp = LatexCmds.perpendicular = LatexCmds['\u22a5'] =
  bind(VanillaSymbol, '\\perp ', '&perp;', '\u22a5');
//...

LatexCmds.AA = LatexCmds.Angstrom = LatexCmds.angstrom =
  bind(VanillaSymbol,'\\text\\AA ','&#8491;');

// why the degree sign is converted to the ring symbol (in exponent)?
// degree: U+00B0 ring: U+2218
LatexCmds.ring = LatexCmds.circ = LatexCmds.circle =
// although the following syntax would paste back in a right way,
// visually it's very different from degree sign, so unacceptable:
//  bind(VanillaSymbol,'\\circ ','&#8728;', '\u2218');
// so it still has to be solved how to convert this to text in a right way:
  bind(VanillaSymbol,'\\circ ','&#8728;');
// in case it's inside a "power"

LatexCmds.bull = LatexCmds.bullet = bind(VanillaSymbol,'\\bullet ','&bull;');

LatexCmds.setminus = LatexCmds.smallsetminus =
  bind(VanillaSymbol,'\\setminus ','&#8726;');

LatexCmds.not = //bind(Symbol,'\\not ','<span class="not">/</span>');
LatexCmds['\u00ac'] = LatexCmds.neg = bind(VanillaSymbol, '\\neg ', '&not;', '\u00ac');

LatexCmds['\u2026'] = LatexCmds.dots = LatexCmds.ellip = LatexCmds.hellip =
LatexCmds.ellipsis = LatexCmds.hellipsis =
  bind(VanillaSymbol,'\\dots ','&hellip;');

LatexCmds.converges =
LatexCmds.darr = LatexCmds.dnarr = LatexCmds.dnarrow = LatexCmds.downarrow =
  bind(VanillaSymbol,'\\downarrow ','&darr;');

LatexCmds.dArr = LatexCmds.dnArr = LatexCmds.dnArrow = LatexCmds.Downarrow =
  bind(VanillaSymbol,'\\Downarrow ','&dArr;');

LatexCmds.diverges = LatexCmds.uarr = LatexCmds.uparrow =
  bind(VanillaSymbol,'\\uparrow ','&uarr;');

LatexCmds.uArr = LatexCmds.Uparrow = bind(VanillaSymbol,'\\Uparrow ','&uArr;');

LatexCmds.to = bind(BinaryOperator,'\\to ','&rarr;');

//merged with GeoGebra "\u2192", maybe it's not necessary to put it in LatexCmds, but used to
// and VanillaSymbol changed to BinaryOperator (in case of .and, .or, etc too)
LatexCmds.implies = LatexCmds['\u2192'] =
LatexCmds.rarr = LatexCmds.rightarrow = bind(BinaryOperator,'\\rightarrow ','&rarr;', '\u2192');

LatexCmds.rArr = LatexCmds.Rightarrow =
  bind(BinaryOperator, '\\Rightarrow ', '&rArr;');

LatexCmds.gets = bind(BinaryOperator,'\\gets ','&larr;');

LatexCmds.larr = LatexCmds.leftarrow = bind(VanillaSymbol,'\\leftarrow ','&larr;');

LatexCmds.impliedby = bind(BinaryOperator,'\\Leftarrow ','&lArr;');

LatexCmds.lArr = LatexCmds.Leftarrow = bind(VanillaSymbol,'\\Leftarrow ','&lArr;');

LatexCmds.harr = LatexCmds.lrarr = LatexCmds.leftrightarrow =
  bind(VanillaSymbol,'\\leftrightarrow ','&harr;');

LatexCmds.iff = bind(BinaryOperator,'\\Leftrightarrow ','&hArr;');

LatexCmds.hArr = LatexCmds.lrArr = LatexCmds.Leftrightarrow =
  bind(VanillaSymbol,'\\Leftrightarrow ','&hArr;');

LatexCmds.Re = LatexCmds.Real = LatexCmds.real = bind(VanillaSymbol,'\\Re ','&real;');

LatexCmds.Im = LatexCmds.imag =
LatexCmds.image = LatexCmds.imagin = LatexCmds.imaginary = LatexCmds.Imaginary =
  bind(VanillaSymbol,'\\Im ','&image;');

// Imaginary Unit is not the same as the Imaginary Part function (before)
// this is like Pi, but does not have a predefined symbol in LaTeX
// however, in that case GeoGebraWeb would make a VanillaSymbol automatically,
// so maybe there is no need for us to make a LatexCmds['\u03af']?
LatexCmds['\u03af'] = bind(NonSymbolaSymbol, '\\\u03af ', '&#943;', '\u03af');

LatexCmds.part = LatexCmds.partial = bind(VanillaSymbol,'\\partial ','&part;');

// GeoGebraWeb also uses infinity, '\u221e'
LatexCmds.inf = LatexCmds.infin = LatexCmds.infty = LatexCmds.infinity =
LatexCmds['\u221e'] =
  bind(VanillaSymbol,'\\infty ','&infin;', '\u221e');

LatexCmds.alef = LatexCmds.alefsym = LatexCmds.aleph = LatexCmds.alephsym =
  bind(VanillaSymbol,'\\aleph ','&alefsym;');

LatexCmds.xist = //LOL
LatexCmds.xists = LatexCmds.exist = LatexCmds.exists =
  bind(VanillaSymbol,'\\exists ','&exist;');

LatexCmds.and = LatexCmds.land = LatexCmds.wedge = LatexCmds['\u2227'] =
  bind(BinaryOperator, '\\wedge ', '&and;', '\u2227');

LatexCmds.or = LatexCmds.lor = LatexCmds.vee = LatexCmds['\u2228'] =
  bind(BinaryOperator, '\\vee ', '&or;', '\u2228');

//LatexCmds.o = LatexCmds.O =
LatexCmds.empty = LatexCmds.emptyset =
LatexCmds.oslash = LatexCmds.Oslash =
LatexCmds.nothing = LatexCmds.varnothing =
  bind(BinaryOperator,'\\varnothing ','&empty;');

LatexCmds.cup = LatexCmds.union = bind(BinaryOperator,'\\cup ','&cup;');

LatexCmds.cap = LatexCmds.intersect = LatexCmds.intersection =
  bind(BinaryOperator,'\\cap ','&cap;');

// \deg is actually a latex function LatexCmds.deg = LatexCmds.degree = bind(VanillaSymbol,'^\\circ ','&deg;');

// GeoGebra ANGLE "\u2220"
LatexCmds.ang = LatexCmds.angle = LatexCmds['\u2220'] =
  bind(VanillaSymbol, '\\angle ', '&ang;', '\u2220');

// GeoGebra MEASURED ANGLE "\u2221"
LatexCmds['\u2221'] = bind(VanillaSymbol, '\\\u2221 ', '&#8737;', '\u2221');

// eulerChar can still come from input, for which this is a workaround
// although we could keep eulerChar internally, that might cause
// different difficulties e.g. on-screen keyboard, non-variable, etc.
// so let's just convert eulerChar to a simple VanillaSymbol like "e"
LatexCmds['\u212f'] = bind(VanillaSymbol, '\u212f', 'e', '\u212f');

var NonItalicizedFunction = P(Symbol, function(_, _super) {
  _.init = function(fn) {
	// fn added to the end to avoid extra space being printed,
	// e.g. in case of "log" command
    _super.init.call(this, '\\'+fn+' ', '<span>'+fn+'</span>', fn);
  };
  _.respace = function()
  {
    this.jQ[0].className =
      (this[R] instanceof SupSub || this[R] instanceof Bracket) ?
      '' : 'non-italicized-function';
  };
});

//backslashless commands, words where adjacent letters (Variables)
//that form them automatically are turned into commands
var UnItalicizedCmds = {

// Proper LaTeX functions
// http://amath.colorado.edu/documentation/LaTeX/Symbols.pdf

arccos : 1, // numbers "1" don't mean anything, currently
arcsin : 1,
arctan : 1,
arg : 1,
cos : 1,
cosh : 1,
cot : 1,
coth : 1,
csc : 1,
deg : 1,
det : 1,
dim : 1,
exp : 1,
gcd : 1,
hom : 1,
inf : 1,
ker : 1,
lg : 1,
//lim : 1,
ln : 1,
log : 1,
max : 1,
min : 1,
sec : 1,
sin : 1,
sinh : 1,
sup : 1,
tan : 1,
tanh : 1,

// Portugese
cossech: 1,

// Romanian special
arcsh: 1,
arcch: 1,
arcth: 1,

// French special
argsh: 1,
argch: 1,
argth: 1,

// Spanish special
arcos: 1,
arcosh: 1,

// German special
arsinh: 1,
artanh: 1,

// Hungarian (??)
arch: 1,
arsh: 1,
arth: 1,
ch: 1,
sh: 1,
th: 1,
cth: 1,

// special GeoGebra functions
sgn : 1,
round : 1,
erf : 1,
Ci : 1,
Si : 1,
Ei : 1,
real : 1,
imaginary : 1,
round : 1,
fractionalPart : 1
}, AutoCmds = {
// GeoGebra+MathQuillGGB
sqrt: 1,
Sqrt: 1,
nthroot: 2,
nroot: 2,
// MathQuillGGB
//sum: 1,
pi: 1
//theta: 1,
//int: 1
}, MAX_AUTOCMD_LEN = 16;

(function() {
  var trigs = {
    sin: 1, cos: 1, tan: 1, sen: 1, tg: 1
    // capital/ar forms not needed, GeoGebra won't serialise to them
    // and users don't need them
    // although it can parse them
    //,Sin: 1, Cos: 1, Tan: 1
    };
  for (var trig in trigs) {
	UnItalicizedCmds[trig] =
	UnItalicizedCmds['a'+trig] =
	UnItalicizedCmds['arc'+trig] =
	UnItalicizedCmds[trig+'h'] =
	UnItalicizedCmds['arc'+trig+'h'] =
	UnItalicizedCmds['a'+trig+'h'] = 1;
  }
  trigs = {
	sec: 1, cosec: 1, csc: 1
	//,Sec: 1, Cosec: 1, Csc: 1,
	,cotan: 1, cot: 1, ctg: 1
	//,Cotan: 1, Cot: 1, Ctg: 1
	,cotg : 1
	};
  for (var trig in trigs) {
	UnItalicizedCmds[trig] =
	UnItalicizedCmds[trig+'h'] = 1;
  }

  /*var trig = ['sin', 'cos', 'tan', 'sec', 'cosec', 'csc', 'cotan', 'cot'];
  for (var i in trig) {
    LatexCmds[trig[i]] =
    LatexCmds[trig[i]+'h'] =
    LatexCmds['a'+trig[i]] = LatexCmds['arc'+trig[i]] =
    LatexCmds['a'+trig[i]+'h'] = LatexCmds['arc'+trig[i]+'h'] =
      NonItalicizedFunction;
  }*/

  for (var fn in UnItalicizedCmds)
    LatexCmds[fn] = NonItalicizedFunction;
}());


/*************************************************
 * Abstract classes of text blocks
 ************************************************/

/**
 * Blocks of plain text, with one or two TextPiece's as children.
 * Represents flat strings of typically serif-font Roman characters, as
 * opposed to hierchical, nested, tree-structured math.
 * Wraps a single HTMLSpanElement.
 */
var TextBlock = P(Node, function(_, _super) {// could descend from MathElement
  _.finalizeInsert = function() {// but its only method is overridden anyway
	if (this.ctrlSeq === '{') {
      MathElement.prototype.finalizeInsert.call(this.parent);
	} else {
      MathElement.prototype.finalizeInsert.call(this);
	}
  };
  _.whetherRootStyleBlock = function() {
	return false;
  };
  _.ctrlSeq = '\\text';
  _.endSeq = '';
  _.join = function(methodName) {
	// for compatibility with MathBlock
    return this.foldChildren('', function(fold, child) {
	  return fold + child[methodName]();
	});
  };
  _.replaces = function(replacedText) {
    if (replacedText instanceof Fragment)
      this.replacedText = replacedText.remove().jQ.text();
    else if (typeof replacedText === 'string')
      this.replacedText = replacedText;
  };

  _.jQadd = function(jQ) {
    _super.jQadd.call(this, jQ);
    if (this.ch[L]) this.ch[L].jQadd(this.jQ[0].firstChild);
  };

  _.createBefore = function(cursor) {
    var textBlock = this;
    _super.createBefore.call(this, cursor);

    if (textBlock[R].respace) textBlock[R].respace();
    if (textBlock[L].respace) textBlock[L].respace();

    textBlock.bubble('redraw');

    cursor.appendTo(textBlock);

    if (textBlock.replacedText)
      for (var i = 0; i < textBlock.replacedText.length; i += 1)
        textBlock.ch[L].write(cursor, textBlock.replacedText.charAt(i));
  };

  _.parser = function() {
    var textBlock = this;

    // TODO: correctly parse text mode
    var string = Parser.string;
    var regex = Parser.regex;
    var optWhitespace = Parser.optWhitespace;
    return optWhitespace
      .then(string('{')).then(regex(/^(([\\][}])*[^}]?)*/)).skip(string('}'))
      .map(function(text) {
        // TODO: is this the correct behavior when parsing
        // the latex \text{} ?  This violates the requirement that
        // the text contents are always nonempty.  Should we just
        // disown the parent node instead?

    	// and make sure text did not end with \
    	// so there is an extra space at the end in that case
    	// note that JavaScript also escapes backslash,
    	// so we double it everywhere
    	var text2 = text;
    	if (text.substring(text.length-2) === '\\ ') {
    		text2 = text2.substring(0,text2.length-1);
    	}

    	// if all } was escaped, \} could only have come from escaping }
        // if }s were not escaped by us, then it can go wrong anyway
    	// but this is we are going to avoid (see other comments)
    	text2 = text2.replace(/\\}/g,'}');

    	// this is also like replace, just better, change figure spaces
        text2 = text2.split('\u2060').join(' ');

        // but it is a good question when this escaping
        // should have happened in case of parsing / pasting
        // so, to escape everything perfectly, then it
        // might need pre-processing similar to parsing!
    	// i.e. only escape things inside \quotation{}
    	// but then comes the original problem again:
    	// which } sign should mean the end of \quotation?
    	// e.g. \quotation{12}+\quotation{34} can be:
    	// "12"+"34" or "12}+\quotation{34", otherwise we
    	// could not enter "12}+\quotation{34"...
    	// so we might require that all content inside
    	// \quotation shall be escaped by default!
    	// i.e. the user shall take care to paste only
    	// escaped things inside quotations, and in
    	// case of GeoGebraWeb calling this, it should do that.
    	// TODO: copy with CTRL+C shall escape it, however!

        TextPiece(text2).adopt(textBlock, 0, 0);
        return textBlock;
      });
  };
  _.textContents = function() {
    return this.foldChildren('', function(text, child) {
      return text + child.text2;
    });
  };
  _.text = function() {
	  if (this.ctrlSeq === '{') {
		  // for quotationtext, text and html mode is this,
		  // but behold the latex mode...
		  return this.textContents();
	  } else if (this.ctrlSeq === '\\textotherwise') {
		// maybe this won't be used...
		return "true";
	  }
	  return '"' + this.textContents() + '"';
  };
  _.latex = function() {
	  if (this.ctrlSeq == '\\textsf') {
		  // not clear what other things should be allowed here
		  return this.ctrlSeq + '{' + this.textContents() + '}';
	  } else if (this.ctrlSeq === '{') {
		  return this.ctrlSeq + this.textContents() + this.endSeq;
	  }
	  return '\\text{' + this.textContents() + '}';
  };
  _.html = function() {
	// FIXME: it's unclear why htmlTemplate is not used here
	// from makeTextBlock, so are all makeTextBlock commands void?
	if (this.ctrlSeq === '\\textsf') {
		// manual hack
		return (
				'<span class="sans-serif text" mathquillggb-command-id='+this.id+'>'
				+   this.textContents()
				+ '</span>'
		);
	} else if (this.ctrlSeq === '{') {
		return this.textContents();
	}
    return (
        '<span class="text" mathquillggb-command-id='+this.id+'>'
      +   this.textContents()
      + '</span>'
    );
  };

  _.onKey = function(curs, key, e) {
	// added a "curs" parameter to the onKey method just to get
	// the root block in this TextBlock (other ways did not succeed)
	var root = curs.root;
	if ((root !== undefined) && (root.common !== undefined)) {
	  // this does not work in itself, probably due to overriding!
      root.common.GeoGebraSuggestionPopupCanShow = false;
      // so let's also set an internal "force" property!
      root.common.forceGeoGebraSuggestionPopupCanShow = true;
	}
    if (this.ctrlSeq === '\\textotherwise') {
      switch (key) {
        case 'Ctrl-Shift-Backspace':
        case 'Ctrl-Backspace':
        case 'Shift-Backspace':
        case 'Backspace':
        case 'Left':
        case 'Shift-Left':
        case 'Ctrl-Left':
        case 'Ctrl-Shift-Left':
        case 'Home':
        case 'Ctrl-Home':
        case 'Shift-Home':
        case 'Ctrl-Shift-Home':
        case 'Up':
        case 'Shift-Up':
        case 'Ctrl-Up':
        case 'Ctrl-Shift-Up':
        //case 'Ctrl-Shift-Del':
        //case 'Ctrl-Del':
        //case 'Shift-Del':
        //case 'Del':
          curs.insertBefore(this);
          break;

        //case 'Right':
        //case 'Shift-Right':
        //case 'Ctrl-Right':
        //case 'Tab':
        //case 'Esc':
        //case 'Shift-Tab':
        //case 'Shift-Esc':
        //case 'Shift-Spacebar':
        //case 'End':
        //case 'Ctrl-End':
        //case 'Shift-End':
        //case 'Ctrl-Shift-End':
        //case 'Down':
        //case 'Shift-Down':
        //case 'Ctrl-Down':
          //this.cursor.prepareMove().appendTo(this.cursor.parent);
          //this.cursor.prepareMove().appendTo(this);
        //  this.cursor.insertAfter(this);
        //  break;
        default:
          curs.insertAfter(this);
      }
      return false;
    }
    if (key === 'Spacebar' || key === 'Shift-Spacebar') return false;
  };
  _.onText = function(curs, ch) {
    if (this.ctrlSeq === '\\textotherwise') {
	  return false;
	}
    if (ch !== '"') {
      //curs.write(ch);
      // what would cursor.write do?
      this.write(curs, ch);
	} else if (curs[R]) {
      this.write(curs, ch);
	} else {
      curs.moveRight();
	}
    return false;
  };
  _.moveTowards = function(dir, cursor) {
    if (this.ctrlSeq === '\\textotherwise') {
 	  cursor.insertAdjacent(-dir, this);
    }
    cursor.appendDir(-dir, this);
  };
  _.moveOutOf = function(dir, cursor) {
    if (this.ctrlSeq === '{') {
      // if this is used from Quotation:
      cursor.insertAdjacent(dir, this.parent);
    } else {
      cursor.insertAdjacent(dir, this);
    }
  };

  // TODO: make these methods part of a shared mixin or something.
  _.createSelection = MathCommand.prototype.createSelection;
  _.expandSelection = MathCommand.prototype.expandSelection;
  _.clearSelection = MathCommand.prototype.clearSelection;
  _.retractSelection = MathCommand.prototype.retractSelection;
  _.placeCursor = MathCommand.prototype.placeCursor;//?
  _.selectChildren = MathBlock.prototype.selectChildren;//?

  _.selectOutOf = function(dir, cursor) {
    if (this.ctrlSeq === '\\textotherwise') {
      TextBlock.prototype.moveOutOf.apply(this, arguments);
    } else if (this.ctrlSeq === '{') {
      // if this is used from Quotation:
      MathBlock.prototype.selectOutOf.apply(this, arguments);
    } else {
      var cmd = this;
      cursor.clearSelection().hide().insertAdjacent(dir, cmd)
      .selection = Selection(cmd);
    }
  };
  _.deleteTowards = function(dir, cursor) {
    if (this.ctrlSeq === '\\textotherwise') {
      cursor.insertAdjacent(-dir, this);
    } else {
      TextBlock.prototype.createSelection.call(this, dir, cursor);
      //_.createSelection(dir, cursor);
    }
  };
  _.deleteOutOf = function(dir, cursor) {
	if (this.ctrlSeq === '\\textotherwise') {
	  cursor.insertAdjacent(dir, this);
	} else if (this.ctrlSeq === '{') {
      // also delete content!
      if ((this.ch[L] !== 0) && (this.ch[R] !== 0)) {
        cursor.selection = Selection(this.ch[L], this.ch[R]);
        cursor.deleteSelection();
      }
      // if this is used from quotation (MathBlock.deleteOutOf)
      cursor.unwrapGramp();
    } else {
      // backspace and delete at ends of block don't unwrap
      if (this.isEmpty()) cursor.insertAfter(this);
    }
  };
  _.write = function(cursor, ch0, replacedFragment) {
    if (this.ctrlSeq === '\\textotherwise') {
      return false;
    }

    if (replacedFragment) replacedFragment.remove();

    var ch = ch0;
    ch = ch.split('\u2060').join(' ');

    // in GeoGebraWeb, $ should be accepted just like
    // any other character!
    //if (ch !== '$') {
      if (!cursor[L]) TextPiece(ch).createBefore(cursor);
      else cursor[L].appendText(ch);
    //}
    //else if (this.isEmpty()) {
    //  cursor.insertAfter(this);
    //  VanillaSymbol('\\$','$').createBefore(cursor);
    //}
    //else if (!cursor[R]) cursor.insertAfter(this);
    //else if (!cursor[L]) cursor.insertBefore(this);
    //else { // split apart
    //  var prevBlock = TextBlock();
    //  var prevPc = this.ch[L];
    //  prevPc.disown();
    //  prevPc.adopt(prevBlock, 0, 0);

    //  cursor.insertBefore(this);
    //  _super.createBefore.call(prevBlock, cursor);
    //}
    return false;
  };

  _.seek = function(pageX, cursor) {
    consolidateChildren(this);

    //MathBlock.prototype.seek.apply(this, arguments);
    // this is equivalent to this:
    cursor.appendTo(this).seekHoriz(pageX, this);
    // but... is cursor.appendTo valid with TextBlock?
    // in theory yes, as it is called in createBefore 
  };

  _.blur = function() {
    MathBlock.prototype.blur.call(this);
    consolidateChildren(this);
  };

  function consolidateChildren(self) {
    var firstChild = self.ch[L];

    while (firstChild[R]) {
      firstChild.combineDir(R);
    }
  }

  _.focus = MathBlock.prototype.focus;
  _.isEmpty = MathBlock.prototype.isEmpty;
});

/**
 * Piece of plain text, with a TextBlock as a parent and no children.
 * Wraps a single DOMTextNode.
 * For convenience, has a .text property that's just a JavaScript string
 * mirroring the text contents of the DOMTextNode.
 * Text contents must always be nonempty.
 */
var TextPiece = P(Node, function(_, _super) {
  _.init = function(text) {
    _super.init.call(this);
    this.text2 = text;
  };
  _.jQadd = function(dom) { this.dom = dom; this.jQ = $(dom); };
  _.jQize = function() {
    return this.jQadd(document.createTextNode(this.text2));
  };
  _.appendText = function(text) {
    this.text2 += text;
    this.dom.appendData(text);
  };
  _.prependText = function(text) {
    this.text2 = text + this.text2;
    this.dom.insertData(0, text);
  };
  _.appendTextInDir = function(text, dir) {
    if (dir === R) this.appendText(text);
    else this.prependText(text);
  };

  function endChar(dir, text) {
    return text.charAt(dir === L ? 0 : -1 + text.length);
  }

  _.moveTowards = function(dir, cursor) {
    var ch = endChar(-dir, this.text2)

    var from = this[-dir];
    if (from) from.appendTextInDir(ch, dir);
    else TextPiece(ch).createDir(-dir, cursor);

    return this.deleteTowards(dir, cursor);
  };

  _.combineDir = function(dir) {
    var toCombine = this[dir];

    this.appendTextInDir(toCombine.text2, dir);
    toCombine.remove();
  };

  _.latex = function() { return this.text2; };
  _.text = function() { return this.text2; };
  _.html = function() { return this.text2; };

  _.deleteTowards = function(dir, cursor) {
    if (this.text2.length > 1) {
      if (dir === R) {
        this.dom.deleteData(0, 1);
        this.text2 = this.text2.slice(1);
      }
      else {
        // note that the order of these 2 lines is annoyingly important
        // (the second line mutates this.text.length)
        this.dom.deleteData(-1 + this.text2.length, 1);
        this.text2 = this.text2.slice(0, -1);
      }
    }
    else {
      this.remove();
      this.jQ.remove();
      cursor[dir] = 0;
    }
  };

  // -*- selection methods -*- //

  // there's gotta be a better way to move the cursor...
  function insertCursorAdjacent(dir, cursor, el) {
    cursor[-dir] = el;
    cursor[dir] = el[dir];
    cursor.hide().show();
  }

  _.createSelection = function(dir, cursor) {
    var selectedPiece = TextPiece(endChar(-dir, this.text2));
    this.deleteTowards(dir, cursor);
    selectedPiece.createDir(dir, cursor);

    cursor.selection = Selection(selectedPiece);

    insertCursorAdjacent(dir, cursor, selectedPiece);
  }

  _.clearSelection = function(dir, cursor) {
    // cursor calls our clearSelection every time because the selection
    // only every contains one Node.
    if (this.text2.length > 1) return this.retractSelection(dir, cursor);

    var cursorSibling = this;

    if (this[-dir]) {
      cursorSibling = this[-dir];
      cursorSibling.combineDir(dir);
    }

    insertCursorAdjacent(dir, cursor, cursorSibling);

    cursor.clearSelection();
  };

  _.expandSelection = function(dir, cursor) {
    var selectedPiece = cursor.selection.ends[L];
    var selectChar = endChar(-dir, this.text2);
    selectedPiece.appendTextInDir(selectChar, dir);
    this.deleteTowards(dir, cursor);
  };

  _.retractSelection = function(dir, cursor) {
    var deselectChar = endChar(-dir, this.text2);

    if (this[-dir]) {
      this[-dir].appendTextInDir(deselectChar, dir);
    }
    else {
      TextPiece(deselectChar).createDir(-dir, cursor);
    }

    this.deleteTowards(dir, cursor);
  };
});

// in GeoGebraWeb this is harmful!
//CharCmds.$ =

LatexCmds.text =
LatexCmds.textnormal =
LatexCmds.textrm =
LatexCmds.textup =
LatexCmds.textmd = TextBlock;

function makeTextBlock(latex, tagName, attrs) {
  return P(TextBlock, {
    ctrlSeq: latex,
    htmlTemplate: '<'+tagName+' '+attrs+'>&0</'+tagName+'>'
  });
}

function makeQuotationText() {
  return P(TextBlock, {
	ctrlSeq: '{',
	endSeq: '}',
	htmlTemplate: ''
    //ctrlSeq: '\\quotationtext',
    //htmlTemplate: '&0'
  });
}

// hack to make CharCmds['"'] work in GeoGebraWeb history
//LatexCmds.quotationtext = makeQuotationText();

LatexCmds.textotherwise =
  makeTextBlock('\\textotherwise', 'span', 'class="text"');

LatexCmds.sf = LatexCmds.textsf =
  makeTextBlock('\\textsf', 'span', 'class="sans-serif text"');
LatexCmds.tt = LatexCmds.texttt =
  makeTextBlock('\\texttt', 'span', 'class="monospace text"');
LatexCmds.textsc =
  makeTextBlock('\\textsc', 'span', 'style="font-variant:small-caps" class="text"');
LatexCmds.uppercase =
  makeTextBlock('\\uppercase', 'span', 'style="text-transform:uppercase" class="text"');
LatexCmds.lowercase =
  makeTextBlock('\\lowercase', 'span', 'style="text-transform:lowercase" class="text"');
// Parser MathCommand
var latexMathParser = (function() {
  function commandToBlock(cmd) {
    var block = MathBlock();
    cmd.adopt(block, 0, 0);
    return block;
  }
  function joinBlocks(blocks) {
    var firstBlock = blocks[0] || MathBlock();

    for (var i = 1; i < blocks.length; i += 1) {
      blocks[i].children().adopt(firstBlock, firstBlock.ch[R], 0);
    }

    return firstBlock;
  }

  var string = Parser.string;
  var regex = Parser.regex;
  var letter = Parser.letter;
  var any = Parser.any;
  var optWhitespace = Parser.optWhitespace;
  var succeed = Parser.succeed;
  var fail = Parser.fail;

  // Parsers yielding MathCommands
  var variable = letter.map(Variable);
  var symbol = regex(/^[^${}\\_^]/).map(VanillaSymbol);

  var controlSequence =
    regex(/^[^\\]/)
    .or(string('\\').then(
      regex(/^[a-z]+/i)
      .or(regex(/^\s+/).result(' '))
      .or(any)
    )).then(function(ctrlSeq) {
      var cmdKlass = LatexCmds[ctrlSeq];

      if (cmdKlass) {
        return cmdKlass(ctrlSeq).parser();
      }
      else {
        return fail('unknown command: \\'+ctrlSeq);
      }
    })
  ;

  var command =
    controlSequence
    .or(variable)
    .or(symbol)
  ;

  // Parsers yielding MathBlocks
  var mathGroup = string('{').then(function() { return mathSequence; }).skip(string('}'));
  var mathBlock = optWhitespace.then(mathGroup.or(command.map(commandToBlock)));
  var mathSequence = mathBlock.many().map(joinBlocks).skip(optWhitespace);

  var optMathBlock =
    string('[').then(
      mathBlock.then(function(block) {
        return block.join('latex') !== ']' ? succeed(block) : fail();
      })
      .many().map(joinBlocks).skip(optWhitespace)
    ).skip(string(']'))
  ;

  var latexMath = mathSequence;

  latexMath.block = mathBlock;
  latexMath.optBlock = optMathBlock;
  return latexMath;
})();
/********************************************
 * Cursor and Selection "singleton" classes
 *******************************************/

/* The main thing that manipulates the Math DOM. Makes sure to manipulate the
HTML DOM to match. */

/* Sort of singletons, since there should only be one per editable math
textbox, but any one HTML document can contain many such textboxes, so any one
JS environment could actually contain many instances. */

//A fake cursor in the fake textbox that the math is rendered in.
var Cursor = P(Point, function(_) {
  _.init = function(root) {
    this.parent = this.root = root;
    var jQ = this.jQ = this._jQ = $('<span class="cursor">&zwj;</span>');

    //closured for setInterval
    this.blink = function(){ jQ.toggleClass('blink'); }

    this.upDownCache = {};
  };
  _.fix3bug = function(text) {
    // we shall change every a/b division to \frac{a}{b}
    // in complex formulas this is complex, so needs parsing
    // using depth is the easiest algorithm that comes to
    // my mind again! just like in case of fix2bug, fixabug
    // but NOTE TODO that it is probably not perfect in all cases!
    // especially the case of Quotations shall be taken care of
	var ret = '';//?

    var str = text;
    var depth = 0;
    var substrPerDepth = new Array();
    var depthsArray = new Array();
    var numberOfUnclosedFromLeft = new Array();
    var numberOfUnclosedFromRight = new Array();
    var depthsLast = 0;
    substrPerDepth[depthsLast] = '';
    depthsArray[depthsLast] = depth;//0,0
    numberOfUnclosedFromLeft[depthsLast] = 0;// fill this later
    numberOfUnclosedFromRight[depthsLast] = 0;// fill this later
    var lv;
    // at first let's fill the arrays then comes the main algorithm
    for (lv = 0; lv < str.length; lv++) {
      // NOTE: this algorithm might not be perfect in some cases
      // e.g. when there are single ( and ) in Quotation, etc.
      // that is not a pair of anything, etc. so this needs to
      // be tested more!
      if (str.charAt(lv) === '(' ||
    	  str.charAt(lv) === '[' ||
    	  str.charAt(lv) === '{') {
    	// when a closing sign comes, then at a right syntax
    	// it should also correspond to the opening sign,
    	// in theory, except cases I mentioned in NODE TODO
    	depth++;
    	depthsLast++;
        substrPerDepth[depthsLast] = str.charAt(lv);
        depthsArray[depthsLast] = depth;
        numberOfUnclosedFromLeft[depthsLast] = 0;// fill this later
        numberOfUnclosedFromRight[depthsLast] = 0;// fill this later
      	depth++;
      	depthsLast++;
      	depthsArray[depthsLast] = depth;
        numberOfUnclosedFromLeft[depthsLast] = 0;// fill this later
        numberOfUnclosedFromRight[depthsLast] = 0;// fill this later
      } else if (str.charAt(lv) === ')' ||
    		     str.charAt(lv) === ']' ||
    		     str.charAt(lv) === '}') {
       	depth--;
       	depthsLast++;
        substrPerDepth[depthsLast] = str.charAt(lv);
        depthsArray[depthsLast] = depth;
        numberOfUnclosedFromLeft[depthsLast] = 0;// fill this later
        numberOfUnclosedFromRight[depthsLast] = 0;// fill this later
    	depth--;
    	depthsLast++;
    	depthsArray[depthsLast] = depth;
        numberOfUnclosedFromLeft[depthsLast] = 0;// fill this later
        numberOfUnclosedFromRight[depthsLast] = 0;// fill this later
      } else {
        substrPerDepth[depthsLast] += str.charAt(lv);
        // already registered in theory
        //depthsArray[depthsLast] = depth;
      }
    }
    // now we shall have substrPerDepth and depthsArray arrays
    // as input, based on these, we can replace strings, and
    // then join the arrays back together

    var checkstr, lv2, firstTimePlaceholderBoolean;
    //var lvsArray;
    var leftlimit, rightlimit, a, b, newS;
    for (lv = 0; lv < depthsArray.length; lv++) {
      checkstr = substrPerDepth[lv];
      depth = depthsArray[lv];

      // maybe use this instead of keeping placeholders?
      // numberOfUnclosedFromLeft, numberOfUnclosedFromRight

      // now we shall check, whether this string is interrupted
      // by some higher depth, and then the control returns
      // to it later, because in that case we shall add that
      // also to checkstr
      /*
      lv2 = lv + 1;
      firstTimePlaceholderBoolean = true;
      while (lv2 < depthsArray.length) {
    	if (depthsArray[lv2] === depth) {
          checkstr += substrPerDepth[lv2];
          firstTimePlaceholderBoolean = true;
        } else if (depthsArray[lv2] > depth) {
    	  // if depth is increasing, then we join these
    	  // characters to one irrelevant symbol... or
    	  // to preserve the length of string and string
    	  // indexes for making later replacements easier,
    	  // it's better to put space at these places...

    	  // except one place...
    	  if (firstTimePlaceholderBoolean) {
    	    checkstr += 'X';
    	    firstTimePlaceholderBoolean = false;
    	  } else {
    	    checkstr += ' ';
          }
        } else {
    	  // only when depth is dimishing, we shall halt
    	  break;
        }
        lv2++;
      }
      firstTimePlaceholderBoolean = true;
      // now checkstr has the same number of characters
      // as if we put together corresponding substrPerDepth
      // this shall be useful when doing replacements later!
      
      // maybe use no placeholders either?
      */

      // but run the following algorithm on checkstr as if
      // it were ready, and remember if no +-, comes for the
      // next depth! e.g. in lvsArray booleans?

      // now we have the checkstr in theory, in which
  	  // we can replace a/b to \frac{a}{b} without problems

      /*
      rightlimit = 0;
      leftlimit = 0;
  	  while ((lv2 = checkstr.indexOf('/', rightlimit)) !== -1) {
  	    // at the two sides of / we shall go until "+", "-" or ","
  	    leftlimit = lv2;
  	    while (leftlimit >= 0) {
          if ((checkstr.charAt(leftlimit) === '+') ||
  		      (checkstr.charAt(leftlimit) === '-') ||
  			  (checkstr.charAt(leftlimit) === ',')) {
  	        leftlimit++;
  		    break;
  		  }
  		  leftlimit--;
  	    }
  	    rightlimit = lv2;
  	    // maybe indexOf is quicker algorithm, but this
  	    // is easier (takes less paid working time):
        while (rightlimit < checkstr.length) {
          if ((checkstr.charAt(rightlimit) === '+') ||
              (checkstr.charAt(rightlimit) === '-') ||
              (checkstr.charAt(rightlimit) === ',')) {
    		rightlimit--;
    		break;
    	  }
    	  rightlimit++;
        }
        a = checkstr.substring(leftlimit, lv2);
        b = checkstr.substring(lv2 + 1, rightlimit + 1);
        newS = '\\frac{' + a + '}{' + b + '}';
        // but... if we replace a/b by newS, then the
        // number of characters in checkstr will change!
        // that's why the result should be gathered in
        // a different return string AND indexes shall
        // go from the ends of the strings towards their
        // beginning...
      }
      */
    }
    return ret;
  };
  _.fix2bug = function(text) {
    var str = text;
    var depth = 0;
    var boolPerDepth = new Array();
    boolPerDepth[0] = false;//does not make sense
    var lastchar = '';
    var ret = "";
    while (str.length > 0) {
      // NOTE: this algorithm might not be perfect in some cases
      // e.g. when there are single ( and ) in Quotation, etc.
      // that is not a pair of anything, etc. so this needs to
      // be tested more!
      if (str.charAt(0) === '(') {
        str = str.substring(1);
    	depth++;
    	// maybe override later in this block
    	boolPerDepth[depth] = false;
    	if (lastchar === '^') {
    	  ret += '{';
    	  boolPerDepth[depth] = true;
    	  lastchar = '{';
    	//} else if (lastchar === '/') {
        // maybe we could change a/(x+1) to
    	// \frac{a}{x+1} here, but it would
    	// be quite complex and we have to
    	// rethink this method anyway, to avoid
    	// bugs, so I think we can say that
    	// this is ready the "dirty buggy way"
    	// and we can start implementing the
    	// "perfect" solution instead
    	} else {
    	  ret += '(';
    	  lastchar = '(';
    	}
      } else if (str.charAt(0) === ')') {
    	str = str.substring(1);
    	if (boolPerDepth[depth] === true) {
    	  // means we need a \\right\\ added
    	  ret += '}';
      	  lastchar = '}';
    	} else {
    	  ret += ')';
      	  lastchar = ')';
    	}
      	// data for this depth is not reliable anyway
      	boolPerDepth[depth] = false;
    	depth--;
      } else if (str.charAt(0) === '\\') {
    	// if this is followed by a ( or ),
    	// then let's ignore that anyway, because
    	// it seems to be harmful for the code!
      	lastchar = '\\';
    	str = str.substring(1);
    	if (str.length > 0) {
    	  if (str.charAt(0) === '(' ||
    		  str.charAt(0) === ')' ||
    		  str.charAt(0) === '[' ||
    		  str.charAt(0) === ']') {
    		// in this case, do not add lastchar (ignore)
    		// otherwise add it...
    		continue;
    	  }
    	}
    	ret += lastchar;
      } else {
    	lastchar = str.substring(0,1);
    	str = str.substring(1);
    	ret += lastchar;
      }
    }
    return ret;
  };
  _.fixabug = function(text) {
    var str = text;
    var depth = 0;
    var boolPerDepth = new Array();
    boolPerDepth[0] = false;//does not make sense
    var lastchar = '';
    var ret = "";
    while (str.length > 0) {
      // NOTE: this algorithm might not be perfect in some cases
      // e.g. when there are single { and } in Quotation, etc.
      // that is not a pair of anything, etc. so this needs to
      // be tested more!
      if (str.charAt(0) === '{') {
    	str = str.substring(1);
    	depth++;
    	// maybe override later in this block
    	boolPerDepth[depth] = false;
        var lastcc = lastchar.charCodeAt(0);
        if (lastcc >= 65 && lastcc <= 90) {
          // ASCII A-Z OK
          ret += '{';
        } else if (lastcc >= 97 && lastcc <= 122) {
          // we shall also accept lowercase, as this method
          // is also called from somewhere else!
          ret += '{';
        } else if (lastcc >= 48 && lastcc <= 57) {
          // ASCII 0-9 maybe OK (?)
          ret += '{';
        } else if ((lastchar === '^') || (lastchar === '_')) {
          // in this case the syntax is important to
          // leave this intact, so:
          ret += '{';
        } else if (lastchar === '\\') {
          // it might be \\left\\{ or just \\{
          // we need to add \\left in case or just \\{
          if (ret.substr(-6) === '\\left\\') {
            ret += '{';
          } else {
        	// in the end of ret, change \\ to \\left\\
        	// which actually means just adding "left\\"
        	// and in this iteration we also add "{"
        	ret += 'left\\{';
        	boolPerDepth[depth] = 51;
          }
        } else {
          // TODO: also check for Korean!
          // else branch shall do the actual thing!
          ret += '\\left\\{';
          boolPerDepth[depth] = true;
        }
    	lastchar = '{';
      } else if (str.charAt(0) === '}') {
    	str = str.substring(1);
    	if (boolPerDepth[depth] === true) {
    	  // means we need a \\right\\ added
    	  ret += '\\right\\}';
    	} else if (boolPerDepth[depth] === 51) {
    	  ret += 'right\\}';
    	} else {
    	  ret += '}';
    	}
      	// data for this depth is not reliable anyway
      	boolPerDepth[depth] = false;
    	depth--;
    	lastchar = '}';
      } else {
    	lastchar = str.substring(0,1);
    	str = str.substring(1);
    	ret += lastchar;
      }
    }
    return ret;
  };
  _.substQuotations = function(text) {
    // " either means '"' or '\\quotation{' / '}', so we have to convert
    // " to the right meaning, which depends on:
    // - is there \\quotation used elsewhere? then no substitution inside
    // - outside of \\quotation, outermost " should be converted to that
    var text2 = text;
    var text3 = "";
    var inside1 = false;// inside \\quotation
    var inside2 = false;// inside " "
    var lastchar = '';
    while (text2.length > 0) {
      if (text2.substring(0,1) === '"') {
        text2 = text2.substring(1);
        if (inside1) {
          text3 += '"';
          lastchar = '"';
        } else if (inside2) {
          if (lastchar === '\\') {
          	// lastchar should not have happened,
          	// let's erase the last char of text3
        	//if (text3.length) {//comes from lastchar
        	  text3 = text3.substring(0, text3.length - 1);
        	//}
          }
          text3 += '}';
          inside2 = false;
          lastchar = '}';
        } else {
          if (lastchar === '\\') {
        	// lastchar should not have happened,
        	// let's erase the last char of text3
        	// before adding \\quotation{, or
        	// even better than that:
        	text3 += 'quotation{';
          } else {
            text3 += '\\quotation{';
          }
          inside2 = true;
          lastchar = '{';
        }
      } else if ((text2.length >= 11) && (text2.substring(0,11) === '\\quotation{')) {
        lastchar = '{';
        text2 = text2.substring(11);
        if (inside1) {
          text3 += '\\quotation{';
        } else if (inside2) {
          // this should not happen in theory, by the way!
          text3 += '\\quotation{';
        } else {
          text3 += '\\quotation{';
          inside1 = true;
        }
      } else if (text2.substring(0,1) === '}') {
        lastchar = '}';
        text2 = text2.substring(1);
        if (inside1) {
          // for better syntax, we need to escape this!
          // but we can only escape this in a right way
          // when we're not using the \\quotation syntax,
          // since this could be ambiguous:
          // \\quotation{ \frac{3}{5} } would close it early
          // so the best solution will be just to copy the LaTeX
          // in the "\frac{3}{5}" format, and users need not know
          // about the quotation syntax at all...
          // in short - this should only happen if users want bugs
          text3 += '}';
          inside1 = false;
        } else if (inside2) {
          // so, here we are!!! escape!
          text3 += '\\}';
        } else {
          // this should not happen in theory, by the way
          text3 += '}';
        }
      } else {
        lastchar = text2.substring(0,1);
        text2 = text2.substring(1);
        text3 += lastchar;
      }
    }
    return text3;
  };
  _.show = function() {
    this.jQ = this._jQ.removeClass('blink');
    if ('intervalId' in this) //already was shown, just restart interval
      clearInterval(this.intervalId);
    else { //was hidden and detached, insert this.jQ back into HTML DOM
      if (this[R]) {
        if (this.selection && this.selection.ends[L][L] === this[L])
          this.jQ.insertBefore(this.selection.jQ);
        else
          this.jQ.insertBefore(this[R].jQ.first());
      }
      else
        this.jQ.appendTo(this.parent.jQ);
      this.parent.focus();
    }
    this.intervalId = setInterval(this.blink, 500);
    return this;
  };
  _.hide = function() {
    if ('intervalId' in this)
      clearInterval(this.intervalId);
    delete this.intervalId;
    this.jQ.detach();
    this.jQ = $();
    return this;
  };

  _.withDirInsertAt = function(dir, parent, withDir, oppDir) {
	this.checkColorCursor(false);
    var oldParent = this.parent;
    this.parent = parent;
    this[dir] = withDir;
    this[-dir] = oppDir;
    oldParent.blur();
    this.checkColorCursor(true);
  };
  _.insertAdjacent = function(dir, el) {
    this.withDirInsertAt(dir, el.parent, el[dir], el);
    this.parent.jQ.addClass('hasCursor');
    jQinsertAdjacent(dir, this.jQ, jQgetExtreme(dir, el.jQ));
    return this;
  };
  _.insertBefore = function(el) { return this.insertAdjacent(L, el); };
  _.insertAfter = function(el) { return this.insertAdjacent(R, el); };

  _.appendDir = function(dir, el) {
    this.withDirInsertAt(dir, el, 0, el.ch[dir]);

    // never insert before textarea
    if (dir === L && el.textarea) {
      jQinsertAdjacent(-dir, this.jQ, el.textarea);
    } else {
      jQappendDir(dir, this.jQ, el.jQ);
    }

    el.focus();

    return this;
  };
  _.prependTo = function(el) { return this.appendDir(L, el); };
  _.appendTo = function(el) { return this.appendDir(R, el); };

  _.escapeDir = function(dir, key, e) {
    // always prevent default of Spacebar, but only prevent default of Tab if
    // not in the root editable
    if (key === 'Spacebar' || this.parent !== this.root) {
      e.preventDefault();
    }

    // want to be a noop if in the root editable (in fact, Tab has an unrelated
    // default browser action if so)
    if (this.parent === this.root) return;

    this.checkColorCursor(false);
    clearUpDownCache(this);
    this.show().clearSelection();
    this.parent.moveOutOf(dir, this);
    this.checkColorCursor(true);
  };

  _.moveDirWithin = function(dir, block) {
    this.checkColorCursor(false);
    if (this[dir]) this[dir].moveTowards(dir, this);
    else if (this.parent !== block) this.parent.moveOutOf(dir, this);
    this.checkColorCursor(true);
  };
  _.moveLeftWithin = function(block) {
    return this.moveDirWithin(L, block);
  };
  _.moveRightWithin = function(block) {
    return this.moveDirWithin(R, block);
  };
  _.moveDir = function(dir) {
    clearUpDownCache(this);

    if (this.selection)  {
      this.insertAdjacent(dir, this.selection.ends[dir]).clearSelection();
    }
    else {
      this.moveDirWithin(dir, this.root);
    }

    return this.show();
  };
  _.moveLeft = function() { return this.moveDir(L); };
  _.moveRight = function() { return this.moveDir(R); };

  /**
   * moveUp and moveDown have almost identical algorithms:
   * - first check next and prev, if so prepend/appendTo them
   * - else check the parent's 'upOutOf'/'downOutOf' property:
   *   + if it's a function, call it with the cursor as the sole argument and
   *     use the return value as if it were the value of the property
   *   + if it's undefined, bubble up to the next ancestor.
   *   + if it's false, stop bubbling.
   *   + if it's a Node, jump up or down to it
   */
  _.moveUp = function() { return moveUpDown(this, 'up'); };
  _.moveDown = function() { return moveUpDown(this, 'down'); };
  function moveUpDown(self, dir) {
    self.checkColorCursor(false);
    var dirInto = dir+'Into', dirOutOf = dir+'OutOf';
    if (self[R][dirInto]) self.prependTo(self[R][dirInto]);
    else if (self[L][dirInto]) self.appendTo(self[L][dirInto]);
    else {
      var ancestor = self.parent;
      do {
        var prop = ancestor[dirOutOf];
        if (prop) {
          if (typeof prop === 'function') prop = ancestor[dirOutOf](self);
          if (prop === false) break;
          if (prop instanceof Node) {
            self.jumpUpDown(ancestor, prop);
            break;
          }
        }
        ancestor = ancestor.parent;
      } while (ancestor !== self.root);
    }
    var ret = self.clearSelection().show();
    self.checkColorCursor(true);
    return ret;
  }
  /**
   * jump up or down from one block Node to another:
   * - cache the current Point in the node we're jumping from
   * - check if there's a Point in it cached for the node we're jumping to
   *   + if so put the cursor there,
   *   + if not seek a position in the node that is horizontally closest to
   *     the cursor's current position
   */
  _.jumpUpDown = function(from, to) {
    this.checkColorCursor(false);
    var self = this;
    self.upDownCache[from.id] = Point(self.parent, self[L], self[R]);
    var cached = self.upDownCache[to.id];
    if (cached) {
      cached[R] ? self.insertBefore(cached[R]) : self.appendTo(cached.parent);
    }
    else {
      var pageX = offset(self).left;
      self.appendTo(to).seekHoriz(pageX, to);
    }
    this.checkColorCursor(true);
  };
  _.checkColorCursor = function(addColor) {
    // before moving: remove highlighting from old element (addColor === false)
	// after moving: add highlighting to new element (addColor === true)
	// note: when (addColor === true), stop after one coloring!
	// and: the priority of the colorings: this[R], this[L], this.parent.parent
	// so we also need a variable...
	var onTheEdgeNeedsParent = false;
    if (this[R]) {
      if ((this[R] instanceof Bracket) || (this[R] instanceof CloseBracket)) {
        // |( remove highlight style from this[R]
        this[R].setColoring(addColor === true);
        if (addColor) {
          return;
        }
      }
    } else {
      onTheEdgeNeedsParent = true;
    }
    if (this[L]) {
      if ((this[L] instanceof Bracket) || (this[L] instanceof CloseBracket)) {
        // (| remove highlight style from this[L]
        this[L].setColoring(addColor === true);
        if (addColor) {
          return;
        }
      }
    } else {
      onTheEdgeNeedsParent = true;
    }

    if (onTheEdgeNeedsParent === true) {
      if (this.parent) {
        if (this.parent.parent) {
          if ((this.parent.parent instanceof Bracket) || (this.parent.parent instanceof CloseBracket)) {
            // |( remove highlight style from this.parent.parent
            this.parent.parent.setColoring(addColor === true);
          }
        }
      }
    }
  };
  _.seek = function(target, pageX, pageY) {
    this.checkColorCursor(false);
    var cursor = this;
    clearUpDownCache(cursor);

    var nodeId = target.attr(mqBlockId) || target.attr(mqCmdId);
    if (!nodeId) {
      var targetParent = target.parent();
      nodeId = targetParent.attr(mqBlockId) || targetParent.attr(mqCmdId);
    }
    var node = nodeId ? Node.byId[nodeId] : cursor.root;

    // target could've been selection span, so get node from target before
    // clearing selection
    cursor.clearSelection().show();

    node.seek(pageX, cursor);
    this.checkColorCursor(true);
    return cursor;
  };
  _.seekHoriz = function(pageX, block) {
    this.checkColorCursor(false);
    //move cursor to position closest to click
    var cursor = this;
    var dist = offset(cursor).left - pageX;
    var prevDist;

    do {
      cursor.moveLeftWithin(block);
      prevDist = dist;
      dist = offset(cursor).left - pageX;
    }
    while (dist > 0 && (cursor[L] || cursor.parent !== block));

    if (-dist > prevDist) cursor.moveRightWithin(block);
    this.checkColorCursor(true);
    return cursor;
  };
  function offset(self) {
    //in Opera 11.62, .getBoundingClientRect() and hence jQuery::offset()
    //returns all 0's on inline elements with negative margin-right (like
    //the cursor) at the end of their parent, so temporarily remove the
    //negative margin-right when calling jQuery::offset()
    //Opera bug DSK-360043
    //http://bugs.jquery.com/ticket/11523
    //https://github.com/jquery/jquery/pull/717
    var offset = self.jQ.removeClass('cursor').offset();
    self.jQ.addClass('cursor');
    return offset;
  }
  _.writeLatexSafe = function(mort) {
    // at first we should decide whether to call writeLatex,
	// or we're in a TextBlock, and call it's onText?
    var self = this;
    // if we're in a Quotation, then the parent of the cursor
    // is probably a TextBlock (or maybe a TextPiece, so
    // cursor.parent.parent is a TextBlock, but it will not
    // be too far away e.g. parent.parent.parent.parent...)
    // because putting latex inside TextBlock should be illegal
    if (this.parent instanceof TextBlock) {
      self.parent.bubble('onText', self, mort);
      return false;
    } else if ((this.parent.parent) && (this.parent.parent instanceof TextBlock)) {
      self.parent.bubble('onText', self, mort);
      return false;
    }
    var mrt = mort;
    if (this.root) {
      var triple = mort;
      var numadded = 0;
      if (this[L] && (this[L] instanceof Symbol)) {
        if (this[L].ctrlSeq) {
          if (this[L].ctrlSeq.length === 1) {
            triple = this[L].ctrlSeq + triple;
            numadded++;
            if (this[L][L] && (this[L][L] instanceof Symbol)) {
              if (this[L][L].ctrlSeq) {
                if (this[L][L].ctrlSeq.length === 1) {
                  triple = this[L][L].ctrlSeq + triple;
                  numadded++;
                }
              }
            }
          }
        }
      }
      var tripleL = triple.length;
      // this may be 0-1-2 characters more than mort.length
      // but in case it's really more, try to merge!
      // moreover, merge ANYWAY, if (tripleL > 1)!
      if (tripleL > 1) {
        triple = this.root.mergeKoreanDoubles(triple);
        if (tripleL != triple.length) {
          mrt = triple;
          for (var cv = 0; cv < numadded; cv++) {
            this.backspace();
          }
        }
      }
    }
    this.writeLatex(mrt).show();
    return true;
  };
  _.writeLatex = function(latex) {
	  this.checkColorCursor(false);
    var self = this;
    clearUpDownCache(self);
    self.show().deleteSelection();

    var all = Parser.all;
    var eof = Parser.eof;

    var block = latexMathParser.skip(eof).or(all.result(false)).parse(latex);

    if (block) {
      block.children().adopt(self.parent, self[L], self[R]);
      block.jQize().insertBefore(self.jQ);
      self[L] = block.ch[R];
      block.finalizeInsert();
      self.parent.bubble('redraw');
    }
    this.checkColorCursor(true);
    return this.hide();
  };
  _.write = function(ch) {
    this.checkColorCursor(false);
    var seln = this.prepareWrite();
    var ret = this.insertCh(ch, seln);
    this.checkColorCursor(true);
    return ret;
  };
  _.insertCh = function(ch, replacedFragment) {
    this.parent.write(this, ch, replacedFragment);
    return this;
  };
  _.insertCmd = function(latexCmd, replacedFragment) {
    this.checkColorCursor(false);
    var cmd = LatexCmds[latexCmd];
    if (cmd) {
      cmd = cmd(latexCmd);
      if (replacedFragment) cmd.replaces(replacedFragment);
      cmd.createBefore(this);
    }
    else {
      cmd = TextBlock();
      cmd.replaces(latexCmd);
      cmd.ch[L].focus = function(){ delete this.focus; return this; };
      cmd.createBefore(this);
      this.insertAfter(cmd);
      if (replacedFragment)
        replacedFragment.remove();
    }
    this.checkColorCursor(true);
    return this;
  };
  _.unwrapGramp = function() {
    var gramp = this.parent.parent;
    var greatgramp = gramp.parent;
    var next = gramp[R];
    var cursor = this;

    var prev = gramp[L];
    gramp.disown().eachChild(function(uncle) {
      if (uncle.isEmpty()) return;

      uncle.children()
        .adopt(greatgramp, prev, next)
        .each(function(cousin) {
          cousin.jQ.insertBefore(gramp.jQ.first());
        })
      ;

      prev = uncle.ch[R];
    });

    if (!this[R]) { //then find something to be next to insertBefore
      if (this[L])
        this[R] = this[L][R];
      else {
        while (!this[R]) {
          this.parent = this.parent[R];
          if (this.parent)
            this[R] = this.parent.ch[L];
          else {
            this[R] = gramp[R];
            this.parent = greatgramp;
            break;
          }
        }
      }
    }
    if (this[R])
      this.insertBefore(this[R]);
    else
      this.appendTo(greatgramp);

    gramp.jQ.remove();

    if (gramp[L])
      gramp[L].respace();
    if (gramp[R])
      gramp[R].respace();
  };
  _.deleteDir = function(dir) {
    this.checkColorCursor(false);
    clearUpDownCache(this);
    this.show();

    // deleteSelection shall be Okay as no selection
    // should select only part of a ggbtable!
    if (this.deleteSelection()); // pass
    // deleteTowards only calls createSelection,
    // which shall be Okay, or deletes symbols (OK)
    else if (this[dir]) this[dir].deleteTowards(dir, this);
    // deleteOutOf is fixed for MathBlock
    // otherwise it shall be Okay
    else if (this.parent !== this.root) this.parent.deleteOutOf(dir, this);
    // this way there may be a lot of empty
    // matrix cells, but it shall be Okay

    if (this[L])
      this[L].respace();
    if (this[R])
      this[R].respace();
    this.parent.bubble('redraw');
    this.checkColorCursor(true);
    return this;
  };
  _.backspace = function() { return this.deleteDir(L); };
  _.deleteForward = function() { return this.deleteDir(R); };
  _.selectFrom = function(anticursor) {
    // `this` cursor and the anticursor should be in the same tree, because
    // the mousemove handler attached to the document, unlike the one attached
    // to the root HTML DOM element, doesn't try to get the math tree node of
    // the mousemove target, and Cursor::seek() based solely on coordinates
    // stays within the tree of `this` cursor's root.
    var selection = Fragment.between(this, anticursor);

    var leftEnd = selection.ends[L];
    var rightEnd = selection.ends[R];
    var lca = leftEnd.parent;
    // apparently leftEnd and rightEnd are on the same level
    // and lca is their parent MathBlock...
    // but in case leftEnd or rightEnd is ggbtd or ggbtr,
    // then it's not good for us, so we have to select only
    // one element, the ggbtable!
    if (leftEnd.ctrlSeq) {
      if (leftEnd.ctrlSeq.indexOf('\\ggbtd') > -1) {
        if (lca && lca.parent && lca.parent.parent) {
          rightEnd = leftEnd = lca.parent;
          lca = leftEnd.parent;
        }
      }
      if (leftEnd.ctrlSeq.indexOf('\\ggbtr') > -1) {
        if (lca && lca.parent && lca.parent.parent) {
          rightEnd = leftEnd = lca.parent;
          lca = leftEnd.parent;
        }
      }
    } else {
      // e.g. TextPiece?
    }

    if (lca && lca.selectChildren) {
      lca.selectChildren(this.hide(), leftEnd, rightEnd);
      this.root.selectionChanged();
    }
  };
  _.selectDir = function(dir) {
    var self = this;
    clearUpDownCache(this);

    if (self[dir]) {
      var adjacent = self[dir],
          selection = self.selection;

      if (!selection) {
        adjacent.createSelection(dir, self);
      }
      else if (selection.ends[dir] === self[-dir]) {
        adjacent.expandSelection(dir, self);
      }
      else if (selection.ends[dir] === selection.ends[-dir]) {
        adjacent.clearSelection(dir, self);
      }
      else {
        adjacent.retractSelection(dir, self);
      }
    }
    else if (self.parent !== self.root) {
      self.parent.selectOutOf(dir, self);
    }

    self.root.selectionChanged();
  };
  _.selectLeft = function() { return this.selectDir(L); };
  _.selectRight = function() { return this.selectDir(R); };

  function clearUpDownCache(self) {
    self.upDownCache = {};
  }

  _.prepareMove = function() {
    clearUpDownCache(this);
    return this.show().clearSelection();
  };
  _.prepareEdit = function() {
    clearUpDownCache(this);
    return this.show().deleteSelection();
  };
  _.prepareWrite = function() {
    clearUpDownCache(this);
    return this.show().replaceSelection();
  };

  _.clearSelection = function() {
    if (this.selection) {
      this.selection.clear();
      delete this.selection;
      this.root.selectionChanged();
    }
    return this;
  };
  _.deleteSelection = function() {
    if (!this.selection) return false;

    // we shall only delete the selection
    // when it's not selecting parts of ggbtable,
    // but let's suppose this is the case here,
    // as selection bugs are already fixed...
    // and deleting a whole ggbtable is Okay.
    this[L] = this.selection.ends[L][L];
    this[R] = this.selection.ends[R][R];
    this.selection.remove();
    this.root.selectionChanged();
    return delete this.selection;
  };
  _.replaceSelection = function() {
    var seln = this.selection;
    if (seln) {
      this[L] = seln.ends[L][L];
      this[R] = seln.ends[R][R];
      delete this.selection;
    }
    return seln;
  };
});

var Selection = P(Fragment, function(_, _super) {
  _.init = function(first, last) {
    var seln = this;

    // just select one thing if only one argument
    _super.init.call(seln, first, last || first);

    seln.jQwrap(seln.jQ);
  };
  _.jQwrap = function(children) {
    this.jQ = children.wrapAll('<span class="selection"></span>').parent();
      //can't do wrapAll(this.jQ = $(...)) because wrapAll will clone it
  };
  _.adopt = function() {
    this.jQ.replaceWith(this.jQ = this.jQ.children());
    return _super.adopt.apply(this, arguments);
  };
  _.clear = function() {
    // using the browser's native .childNodes property so that we
    // don't discard text nodes.
    this.jQ.replaceWith(this.jQ[0].childNodes);
    return this;
  };
});
/*********************************************************
 * The actual jQuery plugin and document ready handlers.
 ********************************************************/

//The publicy exposed method of jQuery.prototype, available (and meant to be
//called) on jQuery-wrapped HTML DOM elements.
$.fn.mathquillggb = function(cmd, latex) {
  switch (cmd) {
  case 'redraw':
    return this.each(function() {
      var blockId = $(this).attr(mqBlockId),
        rootBlock = blockId && Node.byId[blockId];
      if (rootBlock) {
        (function postOrderRedraw(el) {
          el.eachChild(postOrderRedraw);
          if (el.redraw) el.redraw();
        })(rootBlock);
      }
    });
  case 'revert':
    return this.each(function() {
      var blockId = $(this).attr(mqBlockId),
        block = blockId && Node.byId[blockId];
      if (block && block.revert)
        block.revert();
    });
  case 'latex':
    if (arguments.length > 1) {
      return this.each(function() {
        var blockId = $(this).attr(mqBlockId),
          block = blockId && Node.byId[blockId];
        if (block)
          block.renderLatex(latex);
      });
    }

    var blockId = $(this).attr(mqBlockId),
      block = blockId && Node.byId[blockId];
    return block && block.latex();
  case 'text':
    var blockId = $(this).attr(mqBlockId),
      block = blockId && Node.byId[blockId];
    return block && block.text();
  case 'textpluscursor':
	var blockId = $(this).attr(mqBlockId),
	  block = blockId && Node.byId[blockId];
	var cursor = block && block.cursor;
	var ret = block && block.text();
	if (cursor) {
	  cursor.write('x');
	  ret = block && block.text();
	  cursor.backspace();
	}
	return ret;
  case 'html':
    return this.html().replace(/ ?hasCursor|hasCursor /, '')
      .replace(/ class=(""|(?= |>))/g, '')
      .replace(/<span class="?cursor( blink)?"?><\/span>/i, '')
      .replace(/<span class="?textarea"?( disabled="disabled")?><textarea><\/textarea><\/span>/i, '');
  case 'write':
    if (arguments.length > 1)
      return this.each(function() {
        var blockId = $(this).attr(mqBlockId),
          block = blockId && Node.byId[blockId],
          cursor = block && block.cursor;

        if (cursor)
          cursor.writeLatex(latex).parent.blur();
      });
    // do not mix different commands in any case
    return undefined;
  case 'simpaste':
    if (arguments.length > 1)
      return this.each(function() {
        var blockId = $(this).attr(mqBlockId),
          block = blockId && Node.byId[blockId],
          cursor = block && block.cursor;

        if (cursor)
          // "latex" is actually text
          cursor.parent.bubble('onText', cursor, latex);
      });
    // do not mix different commands in any case
    return undefined;
  case 'replace':
    // this function should replace the current 'word',
    // or the sequence of elements like in arguments[2]
	// to a latex string given in arguments[1]
	//var lx = arguments[1];// it is also called "latex"
	var cw = arguments[2];
	var original_arguments = arguments;
    if (arguments.length > 1)
	  return this.each(function() {
	    var blockId = $(this).attr(mqBlockId),
	        block = blockId && Node.byId[blockId],
	        cursor = block && block.cursor;

        if (cursor) {
          // first deleting the current word
          var ilen = cw.length;
          while (ilen > 0) {
        	  if ((cursor[L] instanceof Variable) ||
        	      (cursor[L] instanceof VanillaSymbol)) {
        		  cursor.backspace();
            	  ilen--;
        	  } else
        	  //if (cursor[L] instanceof MathCommand)
        	  {
        		  var cname = cursor[L].text().replace(/\W/g, '');
        		  cursor.backspace();
        		  if (cname && cname.length) {
        			  ilen -= cname.length;
        		  } else {
        			  // beware of infinite loop, but Okay to decrement
        			  // as there was a cursor.backspace() anyway
        			  // maybe console.log & break would be better here
        			  ilen--;
        		  }
        	  }
          }

          // then writing the latex...
          // this seems to write GeoGebra command syntax help
          // as nicely as latex, so no problem here, but...
          var cursorWas = cursor;
          var latexWritingHappened = cursor.writeLatexSafe(latex);

          // maybe this is just for historical reasons?
          // copied from some other code and adapted...
          // but this turns out to be harmful!!!
          //cursorWas.parent.blur();

          // now we shall actualize GeoGebraSuggestionPopupCanShow
          if (cursor.root && latex.length) {
            var croot = cursor.root;
            if (croot.common) {
              var esi = croot.common;
              esi.GeoGebraSuggestionPopupCanShow = false;
              // in case of this was written in TextBlock,
              // leave GeoGebraSuggestionPopupCanShow false...
              if (latexWritingHappened) {
                // get the last character of latex, and check it
                var lastchar = latex.charCodeAt(latex.length - 1);
                if (latex.trim) {
                  // who supports IE8, etc?
                  var ltrim = latex.trim();
                  if (ltrim.length) {
                    lastchar = ltrim.charCodeAt(ltrim.length - 1);
                  }
                }
                croot.geogebraAutocompleteSuggestionCheck(lastchar);
        	  }
            }
          }

          if (original_arguments[3]) {// if this is a GeoGebra command suggestion

            // we should select the first part of latex which is between < and >
            var ilt = latex.indexOf('<');
            if (ilt >= 0) {
              var igt = latex.indexOf('>', ilt);
              var sublatex = latex.substring(ilt);
              if (igt >= 0) {
                // do something only in this case ... but note that
                // latex.length may be a wrong data to base our code upon...
                // so we shall count the number of < and > in the formula
                var ngt = sublatex.split('>').length - 1;
                // cursor is currently on the right-hand-side of 'latex'
                while (cursor[L]) {
                  if ((cursor[L] instanceof BinaryOperator) &&
                      (cursor[L].ctrlSeq === '>')) {
                    if (ngt > 1) {
                      ngt--;
                    } else {
                      break;
                    }
                  }
                  cursor.moveLeft();
                }
                // now the cursor should be on the right-hand-side
                // of the first '>' after the first '<'
                while (cursor[L]) {
                  if ((cursor[L] instanceof BinaryOperator) &&
                      (cursor[L].ctrlSeq === '<')) {
                    cursor.selectLeft();
                    break;
                  } else {
                    cursor.selectLeft();
                  }
                }
              }
            }
          }
        }
      });
    // do not mix different commands in any case
    return undefined;
  case 'matrixsize':
	// arguments[1] is called latex
    // 0 is nothing,
	// 1 is adding a row
	// 2 is removing a row
	// 3 is adding a column
	// 4 is removing a column
	if (latex) {
      return this.each(function() {
        var blockId = $(this).attr(mqBlockId),
            block = blockId && Node.byId[blockId],
            cursor = block && block.cursor;

        // in order to add a new row to the matrix,
        // we shall seek the matrix, the place of
        // which does not depend on the place of cursor
        var tableJQ = $(this).find('.spectable');
        //var tableID = $(tableJQ[0]).attr('mathquillggb-command-id');
        var tableID = $(tableJQ[0]).attr(mqCmdId);
        var tablock = tableID && Node.byId[tableID];

        // best is to implement it there and call its method
        switch (latex) {
        case 1:
        	// AddRow
        	tablock.addNewRow(cursor);
        	break;
        case 2:
        	// RemoveRow
        	tablock.removeRow(cursor);
        	break;
        case 3:
        	// AddColumn
        	tablock.addNewCol(cursor);
        	break;
        case 4:
        	// RemoveColumn
        	tablock.removeCol(cursor);
        	break;
        default:
        	break;
        }
      });
	}
    // do not mix different commands in any case
	return undefined;
  case 'cmd':
    if (arguments.length > 1)
      return this.each(function() {
        var blockId = $(this).attr(mqBlockId),
          block = blockId && Node.byId[blockId],
          cursor = block && block.cursor;

        if (cursor) {
          var seln = cursor.prepareWrite();
          if (/^\\[a-z]+$/i.test(latex)) cursor.insertCmd(latex.slice(1), seln);
          else cursor.insertCh(latex, seln);
          cursor.hide().parent.blur();
        }
      });
    // do not mix different commands in any case
    return undefined;
  default:
    var RootClass;
    if (cmd === 'textbox') RootClass = RootTextBlock;
    else if (cmd === 'eqnarray') RootClass = RootEqnArray;
    else RootClass = RootMathBlock;

    var textbox = cmd === 'textbox';
    var eqnarray = cmd === 'eqnarray';
    var editable = textbox || cmd === 'editable';

    return this.each(function() {
      createRoot($(this), RootClass(), textbox, editable);

      // [Jay]
      // XXX THIS SHIT IS HACKTASTICK XXX
      // Eqnarray b0rks when clicking or selecting.
      //
      // better things to do with this:
      // a) implement navigation/selection in eqnarray
      // b) make createRoot less monolithic, so we can override
      //    things such that these don't get bound, instead of
      //    unbinding them here.
      //
      // This line should be deleted when either a) or b) is
      // accomplished.
      if (cmd === 'eqnarray') $(this).unbind('.mathquillggb');
    });
  }
};

//set back the original namespace
jQuery.noConflict(true);
}());

//@ sourceURL=mathquillggb.js</script><script language="javascript" id="visibilityJs" class="ggw_resource">// Taken from http://www.html5rocks.com/en/tutorials/pagevisibility/intro/
// Modifications by Zoltan Kovacs <zoltan@geogebra.org>

function getHiddenProp(){
    var prefixes = ['webkit','moz','ms','o'];
    
    // if 'hidden' is natively supported just return it
    if ('hidden' in document) return 'hidden';
    
    // otherwise loop over all the known prefixes until we find one
    for (var i = 0; i < prefixes.length; i++){
        if ((prefixes[i] + 'Hidden') in document) 
            return prefixes[i] + 'Hidden';
    }

    // otherwise it's not supported
    return null;
}

function isHidden() {
    var prop = getHiddenProp();
    if (!prop) return false;
    
    return document[prop];
}

// use the property name to generate the prefixed event name
function visibilityEventMain(startCheating, stopCheating) {
	var visProp = getHiddenProp();
	window.console.log("1");

	if (visProp) {
		var evtname = visProp.replace(/[H|h]idden/,'') + 'visibilitychange';
		document.addEventListener(evtname, function(){ 
			if(window.innerHeight >= screen.height){
				if(document[visProp]){
					window.console.log("2");
					startCheating();
				}else {
					window.console.log("3");
					stopCheating();
				}
			}
		});
		
	}
}

function toggleFullScreen(full) {
	  if (full) {  // current working methods
	    if (document.documentElement.requestFullscreen) {
	      document.documentElement.requestFullscreen();
	    } else if (document.documentElement.msRequestFullscreen) {
	      document.documentElement.msRequestFullscreen();
	    } else if (document.documentElement.mozRequestFullScreen) {
	      document.documentElement.mozRequestFullScreen();
	    } else if (document.documentElement.webkitRequestFullscreen) {
	    	document.documentElement.style.setProperty("width", "100%", "important");
	    	document.documentElement.style.setProperty("height", "100%", "important");
	    	document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
	    }
	  } else {
	    if (document.exitFullscreen) {
	      document.exitFullscreen();
	    } else if (document.msExitFullscreen) {
	      document.msExitFullscreen();
	    } else if (document.mozCancelFullScreen) {
	      document.mozCancelFullScreen();
	    } else if (document.webkitExitFullscreen) {
	      document.webkitExitFullscreen();
	    }
	  }
	}
</script><script language="javascript" id="jqueryUI" class="ggw_resource">/*! jQuery UI - v1.11.4 - 2015-07-20
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, slider.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */

(function( factory ) {
	
		// Browser globals
	factory( window.$ggbQuery || window.jQuery  );
	
}(function( $ ) {
/*!
 * jQuery UI Core 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */


// $.ui might exist from components with no dependencies, e.g., $.ui.position
$.ui = $.ui || {};

$.extend( $.ui, {
	version: "1.11.4",

	keyCode: {
		BACKSPACE: 8,
		COMMA: 188,
		DELETE: 46,
		DOWN: 40,
		END: 35,
		ENTER: 13,
		ESCAPE: 27,
		HOME: 36,
		LEFT: 37,
		PAGE_DOWN: 34,
		PAGE_UP: 33,
		PERIOD: 190,
		RIGHT: 39,
		SPACE: 32,
		TAB: 9,
		UP: 38
	}
});

// plugins
$.fn.extend({
	scrollParent: function( includeHidden ) {
		var position = this.css( "position" ),
			excludeStaticParent = position === "absolute",
			overflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/,
			scrollParent = this.parents().filter( function() {
				var parent = $( this );
				if ( excludeStaticParent && parent.css( "position" ) === "static" ) {
					return false;
				}
				return overflowRegex.test( parent.css( "overflow" ) + parent.css( "overflow-y" ) + parent.css( "overflow-x" ) );
			}).eq( 0 );

		return position === "fixed" || !scrollParent.length ? $( this[ 0 ].ownerDocument || document ) : scrollParent;
	},

	uniqueId: (function() {
		var uuid = 0;

		return function() {
			return this.each(function() {
				if ( !this.id ) {
					this.id = "ui-id-" + ( ++uuid );
				}
			});
		};
	})(),

	removeUniqueId: function() {
		return this.each(function() {
			if ( /^ui-id-\d+$/.test( this.id ) ) {
				$( this ).removeAttr( "id" );
			}
		});
	}
});

// selectors
function focusable( element, isTabIndexNotNaN ) {
	var map, mapName, img,
		nodeName = element.nodeName.toLowerCase();
	if ( "area" === nodeName ) {
		map = element.parentNode;
		mapName = map.name;
		if ( !element.href || !mapName || map.nodeName.toLowerCase() !== "map" ) {
			return false;
		}
		img = $( "img[usemap='#" + mapName + "']" )[ 0 ];
		return !!img && visible( img );
	}
	return ( /^(input|select|textarea|button|object)$/.test( nodeName ) ?
		!element.disabled :
		"a" === nodeName ?
			element.href || isTabIndexNotNaN :
			isTabIndexNotNaN) &&
		// the element and all of its ancestors must be visible
		visible( element );
}

function visible( element ) {
	return $.expr.filters.visible( element ) &&
		!$( element ).parents().addBack().filter(function() {
			return $.css( this, "visibility" ) === "hidden";
		}).length;
}

$.extend( $.expr[ ":" ], {
	data: $.expr.createPseudo ?
		$.expr.createPseudo(function( dataName ) {
			return function( elem ) {
				return !!$.data( elem, dataName );
			};
		}) :
		// support: jQuery <1.8
		function( elem, i, match ) {
			return !!$.data( elem, match[ 3 ] );
		},

	focusable: function( element ) {
		return focusable( element, !isNaN( $.attr( element, "tabindex" ) ) );
	},

	tabbable: function( element ) {
		var tabIndex = $.attr( element, "tabindex" ),
			isTabIndexNaN = isNaN( tabIndex );
		return ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );
	}
});

// support: jQuery <1.8
if ( !$( "<a>" ).outerWidth( 1 ).jquery ) {
	$.each( [ "Width", "Height" ], function( i, name ) {
		var side = name === "Width" ? [ "Left", "Right" ] : [ "Top", "Bottom" ],
			type = name.toLowerCase(),
			orig = {
				innerWidth: $.fn.innerWidth,
				innerHeight: $.fn.innerHeight,
				outerWidth: $.fn.outerWidth,
				outerHeight: $.fn.outerHeight
			};

		function reduce( elem, size, border, margin ) {
			$.each( side, function() {
				size -= parseFloat( $.css( elem, "padding" + this ) ) || 0;
				if ( border ) {
					size -= parseFloat( $.css( elem, "border" + this + "Width" ) ) || 0;
				}
				if ( margin ) {
					size -= parseFloat( $.css( elem, "margin" + this ) ) || 0;
				}
			});
			return size;
		}

		$.fn[ "inner" + name ] = function( size ) {
			if ( size === undefined ) {
				return orig[ "inner" + name ].call( this );
			}

			return this.each(function() {
				$( this ).css( type, reduce( this, size ) + "px" );
			});
		};

		$.fn[ "outer" + name] = function( size, margin ) {
			if ( typeof size !== "number" ) {
				return orig[ "outer" + name ].call( this, size );
			}

			return this.each(function() {
				$( this).css( type, reduce( this, size, true, margin ) + "px" );
			});
		};
	});
}

// support: jQuery <1.8
if ( !$.fn.addBack ) {
	$.fn.addBack = function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	};
}

// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)
if ( $( "<a>" ).data( "a-b", "a" ).removeData( "a-b" ).data( "a-b" ) ) {
	$.fn.removeData = (function( removeData ) {
		return function( key ) {
			if ( arguments.length ) {
				return removeData.call( this, $.camelCase( key ) );
			} else {
				return removeData.call( this );
			}
		};
	})( $.fn.removeData );
}

// deprecated
$.ui.ie = !!/msie [\w.]+/.exec( navigator.userAgent.toLowerCase() );

$.fn.extend({
	focus: (function( orig ) {
		return function( delay, fn ) {
			return typeof delay === "number" ?
				this.each(function() {
					var elem = this;
					setTimeout(function() {
						$( elem ).focus();
						if ( fn ) {
							fn.call( elem );
						}
					}, delay );
				}) :
				orig.apply( this, arguments );
		};
	})( $.fn.focus ),

	disableSelection: (function() {
		var eventType = "onselectstart" in document.createElement( "div" ) ?
			"selectstart" :
			"mousedown";

		return function() {
			return this.bind( eventType + ".ui-disableSelection", function( event ) {
				event.preventDefault();
			});
		};
	})(),

	enableSelection: function() {
		return this.unbind( ".ui-disableSelection" );
	},

	zIndex: function( zIndex ) {
		if ( zIndex !== undefined ) {
			return this.css( "zIndex", zIndex );
		}

		if ( this.length ) {
			var elem = $( this[ 0 ] ), position, value;
			while ( elem.length && elem[ 0 ] !== document ) {
				// Ignore z-index if position is set to a value where z-index is ignored by the browser
				// This makes behavior of this function consistent across browsers
				// WebKit always returns auto if the element is positioned
				position = elem.css( "position" );
				if ( position === "absolute" || position === "relative" || position === "fixed" ) {
					// IE returns 0 when zIndex is not specified
					// other browsers return a string
					// we ignore the case of nested elements with an explicit value of 0
					// <div style="z-index: -10;"><div style="z-index: 0;"></div></div>
					value = parseInt( elem.css( "zIndex" ), 10 );
					if ( !isNaN( value ) && value !== 0 ) {
						return value;
					}
				}
				elem = elem.parent();
			}
		}

		return 0;
	}
});

// $.ui.plugin is deprecated. Use $.widget() extensions instead.
$.ui.plugin = {
	add: function( module, option, set ) {
		var i,
			proto = $.ui[ module ].prototype;
		for ( i in set ) {
			proto.plugins[ i ] = proto.plugins[ i ] || [];
			proto.plugins[ i ].push( [ option, set[ i ] ] );
		}
	},
	call: function( instance, name, args, allowDisconnected ) {
		var i,
			set = instance.plugins[ name ];

		if ( !set ) {
			return;
		}

		if ( !allowDisconnected && ( !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) ) {
			return;
		}

		for ( i = 0; i < set.length; i++ ) {
			if ( instance.options[ set[ i ][ 0 ] ] ) {
				set[ i ][ 1 ].apply( instance.element, args );
			}
		}
	}
};


/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */


var widget_uuid = 0,
	widget_slice = Array.prototype.slice;

$.cleanData = (function( orig ) {
	return function( elems ) {
		var events, elem, i;
		for ( i = 0; (elem = elems[i]) != null; i++ ) {
			try {

				// Only trigger remove when necessary to save time
				events = $._data( elem, "events" );
				if ( events && events.remove ) {
					$( elem ).triggerHandler( "remove" );
				}

			// http://bugs.jquery.com/ticket/8235
			} catch ( e ) {}
		}
		orig( elems );
	};
})( $.cleanData );

$.widget = function( name, base, prototype ) {
	var fullName, existingConstructor, constructor, basePrototype,
		// proxiedPrototype allows the provided prototype to remain unmodified
		// so that it can be used as a mixin for multiple widgets (#8876)
		proxiedPrototype = {},
		namespace = name.split( "." )[ 0 ];

	name = name.split( "." )[ 1 ];
	fullName = namespace + "-" + name;

	if ( !prototype ) {
		prototype = base;
		base = $.Widget;
	}

	// create selector for plugin
	$.expr[ ":" ][ fullName.toLowerCase() ] = function( elem ) {
		return !!$.data( elem, fullName );
	};

	$[ namespace ] = $[ namespace ] || {};
	existingConstructor = $[ namespace ][ name ];
	constructor = $[ namespace ][ name ] = function( options, element ) {
		// allow instantiation without "new" keyword
		if ( !this._createWidget ) {
			return new constructor( options, element );
		}

		// allow instantiation without initializing for simple inheritance
		// must use "new" keyword (the code above always passes args)
		if ( arguments.length ) {
			this._createWidget( options, element );
		}
	};
	// extend with the existing constructor to carry over any static properties
	$.extend( constructor, existingConstructor, {
		version: prototype.version,
		// copy the object used to create the prototype in case we need to
		// redefine the widget later
		_proto: $.extend( {}, prototype ),
		// track widgets that inherit from this widget in case this widget is
		// redefined after a widget inherits from it
		_childConstructors: []
	});

	basePrototype = new base();
	// we need to make the options hash a property directly on the new instance
	// otherwise we'll modify the options hash on the prototype that we're
	// inheriting from
	basePrototype.options = $.widget.extend( {}, basePrototype.options );
	$.each( prototype, function( prop, value ) {
		if ( !$.isFunction( value ) ) {
			proxiedPrototype[ prop ] = value;
			return;
		}
		proxiedPrototype[ prop ] = (function() {
			var _super = function() {
					return base.prototype[ prop ].apply( this, arguments );
				},
				_superApply = function( args ) {
					return base.prototype[ prop ].apply( this, args );
				};
			return function() {
				var __super = this._super,
					__superApply = this._superApply,
					returnValue;

				this._super = _super;
				this._superApply = _superApply;

				returnValue = value.apply( this, arguments );

				this._super = __super;
				this._superApply = __superApply;

				return returnValue;
			};
		})();
	});
	constructor.prototype = $.widget.extend( basePrototype, {
		// TODO: remove support for widgetEventPrefix
		// always use the name + a colon as the prefix, e.g., draggable:start
		// don't prefix for widgets that aren't DOM-based
		widgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name
	}, proxiedPrototype, {
		constructor: constructor,
		namespace: namespace,
		widgetName: name,
		widgetFullName: fullName
	});

	// If this widget is being redefined then we need to find all widgets that
	// are inheriting from it and redefine all of them so that they inherit from
	// the new version of this widget. We're essentially trying to replace one
	// level in the prototype chain.
	if ( existingConstructor ) {
		$.each( existingConstructor._childConstructors, function( i, child ) {
			var childPrototype = child.prototype;

			// redefine the child widget using the same prototype that was
			// originally used, but inherit from the new version of the base
			$.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );
		});
		// remove the list of existing child constructors from the old constructor
		// so the old child constructors can be garbage collected
		delete existingConstructor._childConstructors;
	} else {
		base._childConstructors.push( constructor );
	}

	$.widget.bridge( name, constructor );

	return constructor;
};

$.widget.extend = function( target ) {
	var input = widget_slice.call( arguments, 1 ),
		inputIndex = 0,
		inputLength = input.length,
		key,
		value;
	for ( ; inputIndex < inputLength; inputIndex++ ) {
		for ( key in input[ inputIndex ] ) {
			value = input[ inputIndex ][ key ];
			if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {
				// Clone objects
				if ( $.isPlainObject( value ) ) {
					target[ key ] = $.isPlainObject( target[ key ] ) ?
						$.widget.extend( {}, target[ key ], value ) :
						// Don't extend strings, arrays, etc. with objects
						$.widget.extend( {}, value );
				// Copy everything else by reference
				} else {
					target[ key ] = value;
				}
			}
		}
	}
	return target;
};

$.widget.bridge = function( name, object ) {
	var fullName = object.prototype.widgetFullName || name;
	$.fn[ name ] = function( options ) {
		var isMethodCall = typeof options === "string",
			args = widget_slice.call( arguments, 1 ),
			returnValue = this;

		if ( isMethodCall ) {
			this.each(function() {
				var methodValue,
					instance = $.data( this, fullName );
				if ( options === "instance" ) {
					returnValue = instance;
					return false;
				}
				if ( !instance ) {
					return $.error( "cannot call methods on " + name + " prior to initialization; " +
						"attempted to call method '" + options + "'" );
				}
				if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === "_" ) {
					return $.error( "no such method '" + options + "' for " + name + " widget instance" );
				}
				methodValue = instance[ options ].apply( instance, args );
				if ( methodValue !== instance && methodValue !== undefined ) {
					returnValue = methodValue && methodValue.jquery ?
						returnValue.pushStack( methodValue.get() ) :
						methodValue;
					return false;
				}
			});
		} else {

			// Allow multiple hashes to be passed on init
			if ( args.length ) {
				options = $.widget.extend.apply( null, [ options ].concat(args) );
			}

			this.each(function() {
				var instance = $.data( this, fullName );
				if ( instance ) {
					instance.option( options || {} );
					if ( instance._init ) {
						instance._init();
					}
				} else {
					$.data( this, fullName, new object( options, this ) );
				}
			});
		}

		return returnValue;
	};
};

$.Widget = function( /* options, element */ ) {};
$.Widget._childConstructors = [];

$.Widget.prototype = {
	widgetName: "widget",
	widgetEventPrefix: "",
	defaultElement: "<div>",
	options: {
		disabled: false,

		// callbacks
		create: null
	},
	_createWidget: function( options, element ) {
		element = $( element || this.defaultElement || this )[ 0 ];
		this.element = $( element );
		this.uuid = widget_uuid++;
		this.eventNamespace = "." + this.widgetName + this.uuid;

		this.bindings = $();
		this.hoverable = $();
		this.focusable = $();

		if ( element !== this ) {
			$.data( element, this.widgetFullName, this );
			this._on( true, this.element, {
				remove: function( event ) {
					if ( event.target === element ) {
						this.destroy();
					}
				}
			});
			this.document = $( element.style ?
				// element within the document
				element.ownerDocument :
				// element is window or document
				element.document || element );
			this.window = $( this.document[0].defaultView || this.document[0].parentWindow );
		}

		this.options = $.widget.extend( {},
			this.options,
			this._getCreateOptions(),
			options );

		this._create();
		this._trigger( "create", null, this._getCreateEventData() );
		this._init();
	},
	_getCreateOptions: $.noop,
	_getCreateEventData: $.noop,
	_create: $.noop,
	_init: $.noop,

	destroy: function() {
		this._destroy();
		// we can probably remove the unbind calls in 2.0
		// all event bindings should go through this._on()
		this.element
			.unbind( this.eventNamespace )
			.removeData( this.widgetFullName )
			// support: jquery <1.6.3
			// http://bugs.jquery.com/ticket/9413
			.removeData( $.camelCase( this.widgetFullName ) );
		this.widget()
			.unbind( this.eventNamespace )
			.removeAttr( "aria-disabled" )
			.removeClass(
				this.widgetFullName + "-disabled " +
				"ui-state-disabled" );

		// clean up events and states
		this.bindings.unbind( this.eventNamespace );
		this.hoverable.removeClass( "ui-state-hover" );
		this.focusable.removeClass( "ui-state-focus" );
	},
	_destroy: $.noop,

	widget: function() {
		return this.element;
	},

	option: function( key, value ) {
		var options = key,
			parts,
			curOption,
			i;

		if ( arguments.length === 0 ) {
			// don't return a reference to the internal hash
			return $.widget.extend( {}, this.options );
		}

		if ( typeof key === "string" ) {
			// handle nested keys, e.g., "foo.bar" => { foo: { bar: ___ } }
			options = {};
			parts = key.split( "." );
			key = parts.shift();
			if ( parts.length ) {
				curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );
				for ( i = 0; i < parts.length - 1; i++ ) {
					curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
					curOption = curOption[ parts[ i ] ];
				}
				key = parts.pop();
				if ( arguments.length === 1 ) {
					return curOption[ key ] === undefined ? null : curOption[ key ];
				}
				curOption[ key ] = value;
			} else {
				if ( arguments.length === 1 ) {
					return this.options[ key ] === undefined ? null : this.options[ key ];
				}
				options[ key ] = value;
			}
		}

		this._setOptions( options );

		return this;
	},
	_setOptions: function( options ) {
		var key;

		for ( key in options ) {
			this._setOption( key, options[ key ] );
		}

		return this;
	},
	_setOption: function( key, value ) {
		this.options[ key ] = value;

		if ( key === "disabled" ) {
			this.widget()
				.toggleClass( this.widgetFullName + "-disabled", !!value );

			// If the widget is becoming disabled, then nothing is interactive
			if ( value ) {
				this.hoverable.removeClass( "ui-state-hover" );
				this.focusable.removeClass( "ui-state-focus" );
			}
		}

		return this;
	},

	enable: function() {
		return this._setOptions({ disabled: false });
	},
	disable: function() {
		return this._setOptions({ disabled: true });
	},

	_on: function( suppressDisabledCheck, element, handlers ) {
		var delegateElement,
			instance = this;

		// no suppressDisabledCheck flag, shuffle arguments
		if ( typeof suppressDisabledCheck !== "boolean" ) {
			handlers = element;
			element = suppressDisabledCheck;
			suppressDisabledCheck = false;
		}

		// no element argument, shuffle and use this.element
		if ( !handlers ) {
			handlers = element;
			element = this.element;
			delegateElement = this.widget();
		} else {
			element = delegateElement = $( element );
			this.bindings = this.bindings.add( element );
		}

		$.each( handlers, function( event, handler ) {
			function handlerProxy() {
				// allow widgets to customize the disabled handling
				// - disabled as an array instead of boolean
				// - disabled class as method for disabling individual parts
				if ( !suppressDisabledCheck &&
						( instance.options.disabled === true ||
							$( this ).hasClass( "ui-state-disabled" ) ) ) {
					return;
				}
				return ( typeof handler === "string" ? instance[ handler ] : handler )
					.apply( instance, arguments );
			}

			// copy the guid so direct unbinding works
			if ( typeof handler !== "string" ) {
				handlerProxy.guid = handler.guid =
					handler.guid || handlerProxy.guid || $.guid++;
			}

			var match = event.match( /^([\w:-]*)\s*(.*)$/ ),
				eventName = match[1] + instance.eventNamespace,
				selector = match[2];
			if ( selector ) {
				delegateElement.delegate( selector, eventName, handlerProxy );
			} else {
				element.bind( eventName, handlerProxy );
			}
		});
	},

	_off: function( element, eventName ) {
		eventName = (eventName || "").split( " " ).join( this.eventNamespace + " " ) +
			this.eventNamespace;
		element.unbind( eventName ).undelegate( eventName );

		// Clear the stack to avoid memory leaks (#10056)
		this.bindings = $( this.bindings.not( element ).get() );
		this.focusable = $( this.focusable.not( element ).get() );
		this.hoverable = $( this.hoverable.not( element ).get() );
	},

	_delay: function( handler, delay ) {
		function handlerProxy() {
			return ( typeof handler === "string" ? instance[ handler ] : handler )
				.apply( instance, arguments );
		}
		var instance = this;
		return setTimeout( handlerProxy, delay || 0 );
	},

	_hoverable: function( element ) {
		this.hoverable = this.hoverable.add( element );
		this._on( element, {
			mouseenter: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-hover" );
			},
			mouseleave: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-hover" );
			}
		});
	},

	_focusable: function( element ) {
		this.focusable = this.focusable.add( element );
		this._on( element, {
			focusin: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-focus" );
			},
			focusout: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-focus" );
			}
		});
	},

	_trigger: function( type, event, data ) {
		var prop, orig,
			callback = this.options[ type ];

		data = data || {};
		event = $.Event( event );
		event.type = ( type === this.widgetEventPrefix ?
			type :
			this.widgetEventPrefix + type ).toLowerCase();
		// the original event may come from any element
		// so we need to reset the target on the new event
		event.target = this.element[ 0 ];

		// copy original event properties over to the new event
		orig = event.originalEvent;
		if ( orig ) {
			for ( prop in orig ) {
				if ( !( prop in event ) ) {
					event[ prop ] = orig[ prop ];
				}
			}
		}

		this.element.trigger( event, data );
		return !( $.isFunction( callback ) &&
			callback.apply( this.element[0], [ event ].concat( data ) ) === false ||
			event.isDefaultPrevented() );
	}
};

$.each( { show: "fadeIn", hide: "fadeOut" }, function( method, defaultEffect ) {
	$.Widget.prototype[ "_" + method ] = function( element, options, callback ) {
		if ( typeof options === "string" ) {
			options = { effect: options };
		}
		var hasOptions,
			effectName = !options ?
				method :
				options === true || typeof options === "number" ?
					defaultEffect :
					options.effect || defaultEffect;
		options = options || {};
		if ( typeof options === "number" ) {
			options = { duration: options };
		}
		hasOptions = !$.isEmptyObject( options );
		options.complete = callback;
		if ( options.delay ) {
			element.delay( options.delay );
		}
		if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {
			element[ method ]( options );
		} else if ( effectName !== method && element[ effectName ] ) {
			element[ effectName ]( options.duration, options.easing, callback );
		} else {
			element.queue(function( next ) {
				$( this )[ method ]();
				if ( callback ) {
					callback.call( element[ 0 ] );
				}
				next();
			});
		}
	};
});

var widget = $.widget;


/*!
 * jQuery UI Mouse 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */


var mouseHandled = false;
$( document ).mouseup( function() {
	mouseHandled = false;
});

var mouse = $.widget("ui.mouse", {
	version: "1.11.4",
	options: {
		cancel: "input,textarea,button,select,option",
		distance: 1,
		delay: 0
	},
	_mouseInit: function() {
		var that = this;

		this.element
			.bind("mousedown." + this.widgetName, function(event) {
				return that._mouseDown(event);
			})
			.bind("mouseup." + this.widgetName, function(event) {
				if (true === $.data(event.target, that.widgetName + ".preventClickEvent")) {
					$.removeData(event.target, that.widgetName + ".preventClickEvent");
					event.stopImmediatePropagation();
					return false;
				}
				if(that._mouseCancel){
					that._mouseCancel();
				}
			});

		this.started = false;
	},

	// TODO: make sure destroying one instance of mouse doesn't mess with
	// other instances of mouse
	_mouseDestroy: function() {
		this.element.unbind("." + this.widgetName);
		if ( this._mouseMoveDelegate ) {
			this.document
				.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate)
				.unbind("mouseup." + this.widgetName, this._mouseUpDelegate);
		}
	},

	_mouseDown: function(event) {
		// don't let more than one widget handle mouseStart
		if ( mouseHandled && mouseHandled._mouseCancel) {
			mouseHandled._mouseCancel();
			mouseHandled = false;
		}

		this._mouseMoved = false;

		// we may have missed mouseup (out of window)
		(this._mouseStarted && this._mouseUp(event));

		this._mouseDownEvent = event;

		var that = this,
			btnIsLeft = (event.which === 1),
			// event.target.nodeName works around a bug in IE 8 with
			// disabled inputs (#7620)
			elIsCancel = (typeof this.options.cancel === "string" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);
		if (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {
			return true;
		}

		this.mouseDelayMet = !this.options.delay;
		if (!this.mouseDelayMet) {
			this._mouseDelayTimer = setTimeout(function() {
				that.mouseDelayMet = true;
			}, this.options.delay);
		}

		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
			this._mouseStarted = (this._mouseStart(event) !== false);
			if (!this._mouseStarted) {
				event.preventDefault();
				return true;
			}
		}

		// Click event may never have fired (Gecko & Opera)
		if (true === $.data(event.target, this.widgetName + ".preventClickEvent")) {
			$.removeData(event.target, this.widgetName + ".preventClickEvent");
		}

		// these delegates are required to keep context
		this._mouseMoveDelegate = function(event) {
			return that._mouseMove(event);
		};
		this._mouseUpDelegate = function(event) {
			return that._mouseUp(event);
		};

		this.document
			.bind( "mousemove." + this.widgetName, this._mouseMoveDelegate )
			.bind( "mouseup." + this.widgetName, this._mouseUpDelegate );

		event.preventDefault();

		mouseHandled = this;
		return true;
	},

	_mouseMove: function(event) {
		// Only check for mouseups outside the document if you've moved inside the document
		// at least once. This prevents the firing of mouseup in the case of IE<9, which will
		// fire a mousemove event if content is placed under the cursor. See #7778
		// Support: IE <9
		if ( this._mouseMoved ) {
			// IE mouseup check - mouseup happened when mouse was out of window
			if ($.ui.ie && ( !document.documentMode || document.documentMode < 9 ) && !event.button) {
				return this._mouseUp(event);

			// Iframe mouseup check - mouseup occurred in another document
			} else if ( !event.which ) {
				return this._mouseUp( event );
			}
		}

		if ( event.which || event.button ) {
			this._mouseMoved = true;
		}

		if (this._mouseStarted) {
			this._mouseDrag(event);
			return event.preventDefault();
		}

		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
			this._mouseStarted =
				(this._mouseStart(this._mouseDownEvent, event) !== false);
			(this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));
		}

		return !this._mouseStarted;
	},

	_mouseUp: function(event) {
		this.document
			.unbind( "mousemove." + this.widgetName, this._mouseMoveDelegate )
			.unbind( "mouseup." + this.widgetName, this._mouseUpDelegate );

		if (this._mouseStarted) {
			this._mouseStarted = false;

			if (event.target === this._mouseDownEvent.target) {
				$.data(event.target, this.widgetName + ".preventClickEvent", true);
			}

			this._mouseStop(event);
		}

		mouseHandled = false;
		return false;
	},

	_mouseDistanceMet: function(event) {
		return (Math.max(
				Math.abs(this._mouseDownEvent.pageX - event.pageX),
				Math.abs(this._mouseDownEvent.pageY - event.pageY)
			) >= this.options.distance
		);
	},

	_mouseDelayMet: function(/* event */) {
		return this.mouseDelayMet;
	},

	// These are placeholder methods, to be overriden by extending plugin
	_mouseStart: function(/* event */) {},
	_mouseDrag: function(/* event */) {},
	_mouseStop: function(/* event */) {},
	_mouseCapture: function(/* event */) { return true; }
});


/*!
 * jQuery UI Slider 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 */


var slider = $.widget( "ui.slider", $.ui.mouse, {
	version: "1.11.4",
	widgetEventPrefix: "slide",

	options: {
		animate: false,
		distance: 0,
		max: 100,
		min: 0,
		orientation: "horizontal",
		range: false,
		step: 1,
		value: 0,
		values: null,

		// callbacks
		change: null,
		slide: null,
		start: null,
		stop: null
	},

	// number of pages in a slider
	// (how many times can you page up/down to go through the whole range)
	numPages: 5,
	zoom: 1,

	_create: function() {
		this._keySliding = false;
		this._mouseSliding = false;
		this._animateOff = true;
		this._handleIndex = null;
		this._detectOrientation();
		this._mouseInit();
		this._calculateNewMax();

		this.element
			.addClass( "ui-slider" +
				" ui-slider-" + this.orientation +
				" ui-widget" +
				" ui-widget-content" +
				" ui-corner-all");

		this._refresh();
		this._setOption( "disabled", this.options.disabled );

		this._animateOff = false;
	},

	_refresh: function() {
		this._createRange();
		this._createHandles();
		this._setupEvents();
		this._refreshValue();
	},

	_createHandles: function() {
		var i, handleCount,
			options = this.options,
			existingHandles = this.element.find( ".ui-slider-handle" ).addClass( "ui-state-default ui-corner-all" ),
			handle = "<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'><span></span></span>",
			handles = [];

		handleCount = ( options.values && options.values.length ) || 1;

		if ( existingHandles.length > handleCount ) {
			existingHandles.slice( handleCount ).remove();
			existingHandles = existingHandles.slice( 0, handleCount );
		}

		for ( i = existingHandles.length; i < handleCount; i++ ) {
			handles.push( handle );
		}

		this.handles = existingHandles.add( $( handles.join( "" ) ).appendTo( this.element ) );

		this.handle = this.handles.eq( 0 );

		this.handles.each(function( i ) {
			$( this ).data( "ui-slider-handle-index", i );
		});
	},

	_createRange: function() {
		var options = this.options,
			classes = "";

		if ( options.range ) {
			if ( options.range === true ) {
				if ( !options.values ) {
					options.values = [ this._valueMin(), this._valueMin() ];
				} else if ( options.values.length && options.values.length !== 2 ) {
					options.values = [ options.values[0], options.values[0] ];
				} else if ( $.isArray( options.values ) ) {
					options.values = options.values.slice(0);
				}
			}

			if ( !this.range || !this.range.length ) {
				this.range = $( "<div></div>" )
					.appendTo( this.element );

				classes = "ui-slider-range" +
				// note: this isn't the most fittingly semantic framework class for this element,
				// but worked best visually with a variety of themes
				" ui-widget-header ui-corner-all";
			} else {
				this.range.removeClass( "ui-slider-range-min ui-slider-range-max" )
					// Handle range switching from true to min/max
					.css({
						"left": "",
						"bottom": ""
					});
			}

			this.range.addClass( classes +
				( ( options.range === "min" || options.range === "max" ) ? " ui-slider-range-" + options.range : "" ) );
		} else {
			if ( this.range ) {
				this.range.remove();
			}
			this.range = null;
		}
	},

	_setupEvents: function() {
		this._off( this.handles );
		this._on( this.handles, this._handleEvents );
		this._hoverable( this.handles );
		this._focusable( this.handles );
	},

	_destroy: function() {
		this.handles.remove();
		if ( this.range ) {
			this.range.remove();
		}

		this.element
			.removeClass( "ui-slider" +
				" ui-slider-horizontal" +
				" ui-slider-vertical" +
				" ui-widget" +
				" ui-widget-content" +
				" ui-corner-all" );

		this._mouseDestroy();
	},

	_mouseCapture: function( event ) {	
		var position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle,
			that = this,
			o = this.options;
		if ( mouseHandled && mouseHandled._mouseCancel) {
			mouseHandled._mouseCancel();
			mouseHandled = false;
		}
		if ( o.disabled ) {
			return false;
		}

		this.elementSize = {
			width: this.element.outerWidth(),
			height: this.element.outerHeight()
		};
		this.elementOffset = this.element.offset();

		position = { x: event.pageX, y: event.pageY };
		normValue = this._normValueFromMouse( position );
		distance = this._valueMax() - this._valueMin() + 1;
		this.handles.each(function( i ) {
			var thisDistance = Math.abs( normValue - that.values(i) );
			if (( distance > thisDistance ) ||
				( distance === thisDistance &&
					(i === that._lastChangedValue || that.values(i) === o.min ))) {
				distance = thisDistance;
				closestHandle = $( this );
				index = i;
			}
		});

		allowed = this._start( event, index );
		if ( allowed === false ) {
			return false;
		}
		var currentVal = this._values(index);
		var nextVal = currentVal > normValue ? currentVal - this.options.step : currentVal + this.options.step;
		
		this._mouseSliding = true;

		this._handleIndex = index;

		closestHandle
			.addClass( "ui-state-active" )
			.focus();

		offset = closestHandle.offset();
		mouseOverHandle = !$( event.target ).parents().addBack().is( ".ui-slider-handle" );
		this._clickOffset = mouseOverHandle ? { left: 0, top: 0 } : {
			left: event.pageX - offset.left - ( closestHandle.width() / 2 ),
			top: event.pageY - offset.top -
				( closestHandle.height() / 2 ) -
				( parseInt( closestHandle.css("borderTopWidth"), 10 ) || 0 ) -
				( parseInt( closestHandle.css("borderBottomWidth"), 10 ) || 0) +
				( parseInt( closestHandle.css("marginTop"), 10 ) || 0)
		};

		if ( !this.handles.hasClass( "ui-state-hover" ) ) {
			this._slide( event, index, nextVal );
		}
		this._animateOff = true;
		return true;
	},

	_mouseStart: function() {
		return true;
	},

	_mouseDrag: function( event ) {
		var position = { x: event.pageX, y: event.pageY },
			normValue = this._normValueFromMouse( position );

		this._slide( event, this._handleIndex, normValue );

		return false;
	},

	_mouseStop: function( event ) {
		this.handles.removeClass( "ui-state-active" );
		this._mouseSliding = false;

		this._stop( event, this._handleIndex );
		this._change( event, this._handleIndex );

		this._handleIndex = null;
		this._clickOffset = null;
		this._animateOff = false;

		return false;
	},
	
	_mouseCancel: function( event ) {
		this.doCancel();
	},
	doCancel: function(){
		this.document
		.unbind( "mousemove." + this.widgetName, this._mouseMoveDelegate )
		.unbind( "mouseup." + this.widgetName, this._mouseUpDelegate );
		this.handles.removeClass( "ui-state-active" );
		this._mouseSliding = false;


		this._handleIndex = null;
		this._clickOffset = null;
		this._animateOff = false;
		mouseHandled = false;
		return false;
	},
	_detectOrientation: function() {
		this.orientation = ( this.options.orientation === "vertical" ) ? "vertical" : "horizontal";
	},

	_normValueFromMouse: function( position ) {
		var pixelTotal,
			pixelMouse,
			percentMouse,
			valueTotal,
			valueMouse;

		if ( this.orientation === "horizontal" ) {
			pixelTotal = this.elementSize.width * this.zoom;
			pixelMouse = position.x - this.elementOffset.left - ( this._clickOffset ? this._clickOffset.left : 0 );
		} else {
			pixelTotal = this.elementSize.height * this.zoom;
			pixelMouse = position.y - this.elementOffset.top - ( this._clickOffset ? this._clickOffset.top : 0 );
		}

		percentMouse = ( pixelMouse / pixelTotal );
		if ( percentMouse > 1 ) {
			percentMouse = 1;
		}
		if ( percentMouse < 0 ) {
			percentMouse = 0;
		}
		if ( this.orientation === "vertical" ) {
			percentMouse = 1 - percentMouse;
		}

		valueTotal = this._valueMax() - this._valueMin();
		valueMouse = this._valueMin() + percentMouse * valueTotal;

		return this._trimAlignValue( valueMouse );
	},

	_start: function( event, index ) {
		var uiHash = {
			handle: this.handles[ index ],
			value: this.value()
		};
		if ( this.options.values && this.options.values.length ) {
			uiHash.value = this.values( index );
			uiHash.values = this.values();
		}
		return this._trigger( "start", event, uiHash );
	},

	_slide: function( event, index, newVal ) {
		var otherVal,
			newValues,
			allowed;

		if ( this.options.values && this.options.values.length ) {
			otherVal = this.values( index ? 0 : 1 );

			if ( ( this.options.values.length === 2 && this.options.range === true ) &&
					( ( index === 0 && newVal > otherVal) || ( index === 1 && newVal < otherVal ) )
				) {
				newVal = otherVal;
			}

			if ( newVal !== this.values( index ) ) {
				newValues = this.values();
				newValues[ index ] = newVal;
				// A slide can be canceled by returning false from the slide callback
				allowed = this._trigger( "slide", event, {
					handle: this.handles[ index ],
					value: newVal,
					values: newValues
				} );
				otherVal = this.values( index ? 0 : 1 );
				if ( allowed !== false ) {
					this.values( index, newVal );
				}
			}
		} else {
			if ( newVal !== this.value() ) {
				// A slide can be canceled by returning false from the slide callback
				allowed = this._trigger( "slide", event, {
					handle: this.handles[ index ],
					value: newVal
				} );
				if ( allowed !== false ) {
					this.value( newVal );
				}
			}
		}
	},

	_stop: function( event, index ) {
		var uiHash = {
			handle: this.handles[ index ],
			value: this.value()
		};
		if ( this.options.values && this.options.values.length ) {
			uiHash.value = this.values( index );
			uiHash.values = this.values();
		}

		this._trigger( "stop", event, uiHash );
	},

	_change: function( event, index ) {
		if ( !this._keySliding && !this._mouseSliding ) {
			var uiHash = {
				handle: this.handles[ index ],
				value: this.value()
			};
			if ( this.options.values && this.options.values.length ) {
				uiHash.value = this.values( index );
				uiHash.values = this.values();
			}

			//store the last changed value index for reference when handles overlap
			this._lastChangedValue = index;

			this._trigger( "change", event, uiHash );
		}
	},

	value: function( newValue ) {
		if ( arguments.length ) {
			this.options.value = this._trimAlignValue( newValue );
			this._refreshValue();
			this._change( null, 0 );
			return;
		}

		return this._value();
	},
	
	setzoom: function( newZoom ) {
		
			this.zoom = newZoom;
		
	},

	values: function( index, newValue ) {
		var vals,
			newValues,
			i;

		if ( arguments.length > 1 ) {
			this.options.values[ index ] = this._trimAlignValue( newValue );
			this._refreshValue();
			this._change( null, index );
			return;
		}

		if ( arguments.length ) {
			if ( $.isArray( arguments[ 0 ] ) ) {
				vals = this.options.values;
				newValues = arguments[ 0 ];
				for ( i = 0; i < vals.length; i += 1 ) {
					vals[ i ] = this._trimAlignValue( newValues[ i ] );
					this._change( null, i );
				}
				this._refreshValue();
			} else {
				if ( this.options.values && this.options.values.length ) {
					return this._values( index );
				} else {
					return this.value();
				}
			}
		} else {
			return this._values();
		}
	},

	_setOption: function( key, value ) {
		var i,
			valsLength = 0;

		if ( key === "range" && this.options.range === true ) {
			if ( value === "min" ) {
				this.options.value = this._values( 0 );
				this.options.values = null;
			} else if ( value === "max" ) {
				this.options.value = this._values( this.options.values.length - 1 );
				this.options.values = null;
			}
		}

		if ( $.isArray( this.options.values ) ) {
			valsLength = this.options.values.length;
		}

		if ( key === "disabled" ) {
			this.element.toggleClass( "ui-state-disabled", !!value );
		}

		this._super( key, value );

		switch ( key ) {
			case "orientation":
				this._detectOrientation();
				this.element
					.removeClass( "ui-slider-horizontal ui-slider-vertical" )
					.addClass( "ui-slider-" + this.orientation );
				this._refreshValue();

				// Reset positioning from previous orientation
				this.handles.css( value === "horizontal" ? "bottom" : "left", "" );
				break;
			case "value":
				this._animateOff = true;
				this._refreshValue();
				this._change( null, 0 );
				this._animateOff = false;
				break;
			case "values":
				this._animateOff = true;
				this._refreshValue();
				for ( i = 0; i < valsLength; i += 1 ) {
					this._change( null, i );
				}
				this._animateOff = false;
				break;
			case "step":
			case "min":
			case "max":
				this._animateOff = true;
				this._calculateNewMax();
				this._refreshValue();
				this._animateOff = false;
				break;
			case "range":
				this._animateOff = true;
				this._refresh();
				this._animateOff = false;
				break;
		}
	},

	//internal value getter
	// _value() returns value trimmed by min and max, aligned by step
	_value: function() {
		var val = this.options.value;
		val = this._trimAlignValue( val );

		return val;
	},

	//internal values getter
	// _values() returns array of values trimmed by min and max, aligned by step
	// _values( index ) returns single value trimmed by min and max, aligned by step
	_values: function( index ) {
		var val,
			vals,
			i;

		if ( arguments.length ) {
			val = this.options.values[ index ];
			val = this._trimAlignValue( val );

			return val;
		} else if ( this.options.values && this.options.values.length ) {
			// .slice() creates a copy of the array
			// this copy gets trimmed by min and max and then returned
			vals = this.options.values.slice();
			for ( i = 0; i < vals.length; i += 1) {
				vals[ i ] = this._trimAlignValue( vals[ i ] );
			}

			return vals;
		} else {
			return [];
		}
	},

	// returns the step-aligned value that val is closest to, between (inclusive) min and max
	_trimAlignValue: function( val ) {
		var step = ( this.options.step > 0 ) ? this.options.step : 1;		
		if ( val <= this._valueMin() ) {
			return this._valueMin();
		}
		if ( val >= this._valueMax() - 0.5 * step) {
			return this._valueMax();
		}
		var valModStep = (val - this._valueMin()) % step,
			alignValue = val - valModStep;

		if ( Math.abs(valModStep) * 2 >= step ) {
			alignValue += ( valModStep > 0 ) ? step : ( -step );
		}

		// Since JavaScript has problems with large floats, round
		// the final value to 5 digits after the decimal point (see #4124)
		return parseFloat( alignValue.toFixed(5) );
	},

	_calculateNewMax: function() {
		this.max = this.options.max;
	},

	_precision: function() {
		var precision = this._precisionOf( this.options.step );
		if ( this.options.min !== null ) {
			precision = Math.max( precision, this._precisionOf( this.options.min ) );
		}
		return precision;
	},

	_precisionOf: function( num ) {
		var str = num.toString(),
			decimal = str.indexOf( "." );
		return decimal === -1 ? 0 : str.length - decimal - 1;
	},

	_valueMin: function() {
		return this.options.min;
	},

	_valueMax: function() {
		return this.max;
	},

	_refreshValue: function() {
		var lastValPercent, valPercent, value, valueMin, valueMax,
			oRange = this.options.range,
			o = this.options,
			that = this,
			animate = ( !this._animateOff ) ? o.animate : false,
			_set = {};

		if ( this.options.values && this.options.values.length ) {
			this.handles.each(function( i ) {
				valPercent = ( that.values(i) - that._valueMin() ) / ( that._valueMax() - that._valueMin() ) * 100;
				_set[ that.orientation === "horizontal" ? "left" : "bottom" ] = valPercent + "%";
				$( this ).stop( 1, 1 )[ animate ? "animate" : "css" ]( _set, o.animate );
				if ( that.options.range === true ) {
					if ( that.orientation === "horizontal" ) {
						if ( i === 0 ) {
							that.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { left: valPercent + "%" }, o.animate );
						}
						if ( i === 1 ) {
							that.range[ animate ? "animate" : "css" ]( { width: ( valPercent - lastValPercent ) + "%" }, { queue: false, duration: o.animate } );
						}
					} else {
						if ( i === 0 ) {
							that.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { bottom: ( valPercent ) + "%" }, o.animate );
						}
						if ( i === 1 ) {
							that.range[ animate ? "animate" : "css" ]( { height: ( valPercent - lastValPercent ) + "%" }, { queue: false, duration: o.animate } );
						}
					}
				}
				lastValPercent = valPercent;
			});
		} else {
			value = this.value();
			valueMin = this._valueMin();
			valueMax = this._valueMax();
			valPercent = ( valueMax !== valueMin ) ?
					( value - valueMin ) / ( valueMax - valueMin ) * 100 :
					0;
			_set[ this.orientation === "horizontal" ? "left" : "bottom" ] = valPercent + "%";
			this.handle.stop( 1, 1 )[ animate ? "animate" : "css" ]( _set, o.animate );

			if ( oRange === "min" && this.orientation === "horizontal" ) {
				this.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { width: valPercent + "%" }, o.animate );
			}
			if ( oRange === "max" && this.orientation === "horizontal" ) {
				this.range[ animate ? "animate" : "css" ]( { width: ( 100 - valPercent ) + "%" }, { queue: false, duration: o.animate } );
			}
			if ( oRange === "min" && this.orientation === "vertical" ) {
				this.range.stop( 1, 1 )[ animate ? "animate" : "css" ]( { height: valPercent + "%" }, o.animate );
			}
			if ( oRange === "max" && this.orientation === "vertical" ) {
				this.range[ animate ? "animate" : "css" ]( { height: ( 100 - valPercent ) + "%" }, { queue: false, duration: o.animate } );
			}
		}
	},

	_handleEvents: {
		keydown: function( event ) {
			var allowed, curVal, newVal, step,
				index = $( event.target ).data( "ui-slider-handle-index" );

			switch ( event.keyCode ) {
				case $.ui.keyCode.HOME:
				case $.ui.keyCode.END:
				case $.ui.keyCode.PAGE_UP:
				case $.ui.keyCode.PAGE_DOWN:
				case $.ui.keyCode.UP:
				case $.ui.keyCode.RIGHT:
				case $.ui.keyCode.DOWN:
				case $.ui.keyCode.LEFT:
					event.preventDefault();
					if ( !this._keySliding ) {
						this._keySliding = true;
						$( event.target ).addClass( "ui-state-active" );
						allowed = this._start( event, index );
						if ( allowed === false ) {
							return;
						}
					}
					break;
			}

			step = this.options.step;
			if ( this.options.values && this.options.values.length ) {
				curVal = newVal = this.values( index );
			} else {
				curVal = newVal = this.value();
			}

			switch ( event.keyCode ) {
				case $.ui.keyCode.HOME:
					newVal = this._valueMin();
					break;
				case $.ui.keyCode.END:
					newVal = this._valueMax();
					break;
				case $.ui.keyCode.PAGE_UP:
					newVal = this._trimAlignValue(
						curVal + ( ( this._valueMax() - this._valueMin() ) / this.numPages )
					);
					break;
				case $.ui.keyCode.PAGE_DOWN:
					newVal = this._trimAlignValue(
						curVal - ( (this._valueMax() - this._valueMin()) / this.numPages ) );
					break;
				case $.ui.keyCode.UP:
				case $.ui.keyCode.RIGHT:
					if ( curVal === this._valueMax() ) {
						return;
					}
					newVal = this._trimAlignValue( curVal + step );
					break;
				case $.ui.keyCode.DOWN:
				case $.ui.keyCode.LEFT:
					if ( curVal === this._valueMin() ) {
						return;
					}
					newVal = this._trimAlignValue( curVal - step );
					break;
			}

			this._slide( event, index, newVal );
		},
		keyup: function( event ) {
			var index = $( event.target ).data( "ui-slider-handle-index" );

			if ( this._keySliding ) {
				this._keySliding = false;
				this._stop( event, index );
				this._change( event, index );
				$( event.target ).removeClass( "ui-state-active" );
			}
		}
	}
});



}));

/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){
	//a.preventDefault();
	var c=a.originalEvent.changedTouches[0],
	d=document.createEvent("MouseEvents");
	d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),
	a.target.dispatchEvent(d)}
}if(a.support.touch="ontouchend"in document,a.support.touch){
	var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;
	b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},
	b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},
	b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},
	b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},
	b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(window.$ggbQuery || window.jQuery);</script><script language="javascript" id="domvas" class="ggw_resource">"use strict";

(function() {

	var supportsCSSText = getComputedStyle(document.body).cssText !== "";

	function copyCSS(elem, origElem, log) {

		var computedStyle = getComputedStyle(origElem);

		if(supportsCSSText) {
			elem.style.cssText = computedStyle.cssText;

		} else {

			// Really, Firefox?
			for(var prop in computedStyle) {
				if(isNaN(parseInt(prop, 10)) && typeof computedStyle[prop] !== 'function' && !(/^(cssText|length|parentRule)$/).test(prop)) {
					elem.style[prop] = computedStyle[prop];
				}
			}

		}

	}

	function inlineStyles(elem, origElem) {

		var children = elem.querySelectorAll('*');
		var origChildren = origElem.querySelectorAll('*');

		// copy the current style to the clone
		copyCSS(elem, origElem, 1);

		// collect all nodes within the element, copy the current style to the clone
		Array.prototype.forEach.call(children, function(child, i) {
			if(child.tagName == 'CANVAS'){
				window.div = document.createElement('div');
				child.parentElement.replaceChild(div,child);
				div.style.height=origChildren[i].offsetHeight+"px";
				div.style.width=origChildren[i].offsetWidth+"px";
				var url = origChildren[i].toDataURL();
				div.style.backgroundImage="url("+url+")";
				div.style.backgroundSize=div.style.width+" "+div.style.height;
			}else{
				copyCSS(child, origChildren[i]);
			}
		});

		// strip margins from the outer element
		elem.style.margin = elem.style.marginLeft = elem.style.marginTop = elem.style.marginBottom = elem.style.marginRight = '';

	}

	window.domvas = {

		toImage: function(origElem, callback, width, height, left, top) {

			left = (left || 0);
			top = (top || 0);

			var elem = origElem.cloneNode(true);
			
			// inline all CSS (ugh..)
			inlineStyles(elem, origElem);

			// unfortunately, SVG can only eat well formed XHTML
			elem.setAttribute("xmlns", "http://www.w3.org/1999/xhtml");

			// serialize the DOM node to a String
			var serialized = new XMLSerializer().serializeToString(elem);

			// Create well formed data URL with our DOM string wrapped in SVG
			var dataUri = "data:image/svg+xml," +
				"<svg xmlns='http://www.w3.org/2000/svg' width='" + ((width || origElem.offsetWidth) + left) + "' height='" + ((height || origElem.offsetHeight) + top) + "'>" +
					"<foreignObject width='100%' height='100%' x='" + left + "' y='" + top + "'>" +
					serialized +
					"</foreignObject>" +
				"</svg>";

			// create new, actual image
			var img = new Image();
			img.src = dataUri;

			// when loaded, fire onload callback with actual image node
			
			img.onload = function() {

			if(callback) {
				callback.call(this, this);
			}

			};
			

		}

	};

})();

</script><script language="javascript" id="deflateJs" class="ggw_resource">/*
 Copyright (c) 2012 Gildas Lormeau. All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice,
 this list of conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright 
 notice, this list of conditions and the following disclaimer in 
 the documentation and/or other materials provided with the distribution.

 3. The names of the authors may not be used to endorse or promote products
 derived from this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,
 INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,
 INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
 OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/*
 * This program is based on JZlib 1.0.2 ymnk, JCraft,Inc.
 * JZlib is based on zlib-1.1.3, so all credit should go authors
 * Jean-loup Gailly(jloup@gzip.org) and Mark Adler(madler@alumni.caltech.edu)
 * and contributors of zlib.
 */

(function(obj) {

	// Global

	var MAX_BITS = 15;
	var D_CODES = 30;
	var BL_CODES = 19;

	var LENGTH_CODES = 29;
	var LITERALS = 256;
	var L_CODES = (LITERALS + 1 + LENGTH_CODES);
	var HEAP_SIZE = (2 * L_CODES + 1);

	var END_BLOCK = 256;

	// Bit length codes must not exceed MAX_BL_BITS bits
	var MAX_BL_BITS = 7;

	// repeat previous bit length 3-6 times (2 bits of repeat count)
	var REP_3_6 = 16;

	// repeat a zero length 3-10 times (3 bits of repeat count)
	var REPZ_3_10 = 17;

	// repeat a zero length 11-138 times (7 bits of repeat count)
	var REPZ_11_138 = 18;

	// The lengths of the bit length codes are sent in order of decreasing
	// probability, to avoid transmitting the lengths for unused bit
	// length codes.

	var Buf_size = 8 * 2;

	// JZlib version : "1.0.2"
	var Z_DEFAULT_COMPRESSION = -1;

	// compression strategy
	var Z_FILTERED = 1;
	var Z_HUFFMAN_ONLY = 2;
	var Z_DEFAULT_STRATEGY = 0;

	var Z_NO_FLUSH = 0;
	var Z_PARTIAL_FLUSH = 1;
	var Z_FULL_FLUSH = 3;
	var Z_FINISH = 4;

	var Z_OK = 0;
	var Z_STREAM_END = 1;
	var Z_NEED_DICT = 2;
	var Z_STREAM_ERROR = -2;
	var Z_DATA_ERROR = -3;
	var Z_BUF_ERROR = -5;

	// Tree

	// see definition of array dist_code below
	var DIST_CODE_LEN = 512;

	var _dist_code = [ 0, 1, 2, 3, 4, 4, 5, 5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
			10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12,
			12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
			13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,
			14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,
			14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15,
			15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 16, 17, 18, 18, 19, 19,
			20, 20, 20, 20, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
			24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
			26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27,
			27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28,
			28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 29,
			29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29,
			29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29 ];

	function Tree() {
		var that = this;

		// dyn_tree; // the dynamic tree
		// max_code; // largest code with non zero frequency
		// stat_desc; // the corresponding static tree

		// Compute the optimal bit lengths for a tree and update the total bit
		// length
		// for the current block.
		// IN assertion: the fields freq and dad are set, heap[heap_max] and
		// above are the tree nodes sorted by increasing frequency.
		// OUT assertions: the field len is set to the optimal bit length, the
		// array bl_count contains the frequencies for each bit length.
		// The length opt_len is updated; static_len is also updated if stree is
		// not null.
		function gen_bitlen(s) {
			var tree = that.dyn_tree;
			var stree = that.stat_desc.static_tree;
			var extra = that.stat_desc.extra_bits;
			var base = that.stat_desc.extra_base;
			var max_length = that.stat_desc.max_length;
			var h; // heap index
			var n, m; // iterate over the tree elements
			var bits; // bit length
			var xbits; // extra bits
			var f; // frequency
			var overflow = 0; // number of elements with bit length too large

			for (bits = 0; bits <= MAX_BITS; bits++)
				s.bl_count[bits] = 0;

			// In a first pass, compute the optimal bit lengths (which may
			// overflow in the case of the bit length tree).
			tree[s.heap[s.heap_max] * 2 + 1] = 0; // root of the heap

			for (h = s.heap_max + 1; h < HEAP_SIZE; h++) {
				n = s.heap[h];
				bits = tree[tree[n * 2 + 1] * 2 + 1] + 1;
				if (bits > max_length) {
					bits = max_length;
					overflow++;
				}
				tree[n * 2 + 1] = bits;
				// We overwrite tree[n*2+1] which is no longer needed

				if (n > that.max_code)
					continue; // not a leaf node

				s.bl_count[bits]++;
				xbits = 0;
				if (n >= base)
					xbits = extra[n - base];
				f = tree[n * 2];
				s.opt_len += f * (bits + xbits);
				if (stree)
					s.static_len += f * (stree[n * 2 + 1] + xbits);
			}
			if (overflow === 0)
				return;

			// This happens for example on obj2 and pic of the Calgary corpus
			// Find the first bit length which could increase:
			do {
				bits = max_length - 1;
				while (s.bl_count[bits] === 0)
					bits--;
				s.bl_count[bits]--; // move one leaf down the tree
				s.bl_count[bits + 1] += 2; // move one overflow item as its brother
				s.bl_count[max_length]--;
				// The brother of the overflow item also moves one step up,
				// but this does not affect bl_count[max_length]
				overflow -= 2;
			} while (overflow > 0);

			for (bits = max_length; bits !== 0; bits--) {
				n = s.bl_count[bits];
				while (n !== 0) {
					m = s.heap[--h];
					if (m > that.max_code)
						continue;
					if (tree[m * 2 + 1] != bits) {
						s.opt_len += (bits - tree[m * 2 + 1]) * tree[m * 2];
						tree[m * 2 + 1] = bits;
					}
					n--;
				}
			}
		}

		// Reverse the first len bits of a code, using straightforward code (a
		// faster
		// method would use a table)
		// IN assertion: 1 <= len <= 15
		function bi_reverse(code, // the value to invert
		len // its bit length
		) {
			var res = 0;
			do {
				res |= code & 1;
				code >>>= 1;
				res <<= 1;
			} while (--len > 0);
			return res >>> 1;
		}

		// Generate the codes for a given tree and bit counts (which need not be
		// optimal).
		// IN assertion: the array bl_count contains the bit length statistics for
		// the given tree and the field len is set for all tree elements.
		// OUT assertion: the field code is set for all tree elements of non
		// zero code length.
		function gen_codes(tree, // the tree to decorate
		max_code, // largest code with non zero frequency
		bl_count // number of codes at each bit length
		) {
			var next_code = []; // next code value for each
			// bit length
			var code = 0; // running code value
			var bits; // bit index
			var n; // code index
			var len;

			// The distribution counts are first used to generate the code values
			// without bit reversal.
			for (bits = 1; bits <= MAX_BITS; bits++) {
				next_code[bits] = code = ((code + bl_count[bits - 1]) << 1);
			}

			// Check that the bit counts in bl_count are consistent. The last code
			// must be all ones.
			// Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,
			// "inconsistent bit counts");
			// Tracev((stderr,"\ngen_codes: max_code %d ", max_code));

			for (n = 0; n <= max_code; n++) {
				len = tree[n * 2 + 1];
				if (len === 0)
					continue;
				// Now reverse the bits
				tree[n * 2] = bi_reverse(next_code[len]++, len);
			}
		}

		// Construct one Huffman tree and assigns the code bit strings and lengths.
		// Update the total bit length for the current block.
		// IN assertion: the field freq is set for all tree elements.
		// OUT assertions: the fields len and code are set to the optimal bit length
		// and corresponding code. The length opt_len is updated; static_len is
		// also updated if stree is not null. The field max_code is set.
		that.build_tree = function(s) {
			var tree = that.dyn_tree;
			var stree = that.stat_desc.static_tree;
			var elems = that.stat_desc.elems;
			var n, m; // iterate over heap elements
			var max_code = -1; // largest code with non zero frequency
			var node; // new node being created

			// Construct the initial heap, with least frequent element in
			// heap[1]. The sons of heap[n] are heap[2*n] and heap[2*n+1].
			// heap[0] is not used.
			s.heap_len = 0;
			s.heap_max = HEAP_SIZE;

			for (n = 0; n < elems; n++) {
				if (tree[n * 2] !== 0) {
					s.heap[++s.heap_len] = max_code = n;
					s.depth[n] = 0;
				} else {
					tree[n * 2 + 1] = 0;
				}
			}

			// The pkzip format requires that at least one distance code exists,
			// and that at least one bit should be sent even if there is only one
			// possible code. So to avoid special checks later on we force at least
			// two codes of non zero frequency.
			while (s.heap_len < 2) {
				node = s.heap[++s.heap_len] = max_code < 2 ? ++max_code : 0;
				tree[node * 2] = 1;
				s.depth[node] = 0;
				s.opt_len--;
				if (stree)
					s.static_len -= stree[node * 2 + 1];
				// node is 0 or 1 so it does not have extra bits
			}
			that.max_code = max_code;

			// The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,
			// establish sub-heaps of increasing lengths:

			for (n = Math.floor(s.heap_len / 2); n >= 1; n--)
				s.pqdownheap(tree, n);

			// Construct the Huffman tree by repeatedly combining the least two
			// frequent nodes.

			node = elems; // next internal node of the tree
			do {
				// n = node of least frequency
				n = s.heap[1];
				s.heap[1] = s.heap[s.heap_len--];
				s.pqdownheap(tree, 1);
				m = s.heap[1]; // m = node of next least frequency

				s.heap[--s.heap_max] = n; // keep the nodes sorted by frequency
				s.heap[--s.heap_max] = m;

				// Create a new node father of n and m
				tree[node * 2] = (tree[n * 2] + tree[m * 2]);
				s.depth[node] = Math.max(s.depth[n], s.depth[m]) + 1;
				tree[n * 2 + 1] = tree[m * 2 + 1] = node;

				// and insert the new node in the heap
				s.heap[1] = node++;
				s.pqdownheap(tree, 1);
			} while (s.heap_len >= 2);

			s.heap[--s.heap_max] = s.heap[1];

			// At this point, the fields freq and dad are set. We can now
			// generate the bit lengths.

			gen_bitlen(s);

			// The field len is now set, we can generate the bit codes
			gen_codes(tree, that.max_code, s.bl_count);
		};

	}

	Tree._length_code = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16,
			16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20,
			20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,
			22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
			24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25,
			25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
			26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28 ];

	Tree.base_length = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 16, 20, 24, 28, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 0 ];

	Tree.base_dist = [ 0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64, 96, 128, 192, 256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096, 6144, 8192, 12288, 16384,
			24576 ];

	// Mapping from a distance to a distance code. dist is the distance - 1 and
	// must not have side effects. _dist_code[256] and _dist_code[257] are never
	// used.
	Tree.d_code = function(dist) {
		return ((dist) < 256 ? _dist_code[dist] : _dist_code[256 + ((dist) >>> 7)]);
	};

	// extra bits for each length code
	Tree.extra_lbits = [ 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0 ];

	// extra bits for each distance code
	Tree.extra_dbits = [ 0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13 ];

	// extra bits for each bit length code
	Tree.extra_blbits = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7 ];

	Tree.bl_order = [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ];

	// StaticTree

	function StaticTree(static_tree, extra_bits, extra_base, elems, max_length) {
		var that = this;
		that.static_tree = static_tree;
		that.extra_bits = extra_bits;
		that.extra_base = extra_base;
		that.elems = elems;
		that.max_length = max_length;
	}

	StaticTree.static_ltree = [ 12, 8, 140, 8, 76, 8, 204, 8, 44, 8, 172, 8, 108, 8, 236, 8, 28, 8, 156, 8, 92, 8, 220, 8, 60, 8, 188, 8, 124, 8, 252, 8, 2, 8,
			130, 8, 66, 8, 194, 8, 34, 8, 162, 8, 98, 8, 226, 8, 18, 8, 146, 8, 82, 8, 210, 8, 50, 8, 178, 8, 114, 8, 242, 8, 10, 8, 138, 8, 74, 8, 202, 8, 42,
			8, 170, 8, 106, 8, 234, 8, 26, 8, 154, 8, 90, 8, 218, 8, 58, 8, 186, 8, 122, 8, 250, 8, 6, 8, 134, 8, 70, 8, 198, 8, 38, 8, 166, 8, 102, 8, 230, 8,
			22, 8, 150, 8, 86, 8, 214, 8, 54, 8, 182, 8, 118, 8, 246, 8, 14, 8, 142, 8, 78, 8, 206, 8, 46, 8, 174, 8, 110, 8, 238, 8, 30, 8, 158, 8, 94, 8,
			222, 8, 62, 8, 190, 8, 126, 8, 254, 8, 1, 8, 129, 8, 65, 8, 193, 8, 33, 8, 161, 8, 97, 8, 225, 8, 17, 8, 145, 8, 81, 8, 209, 8, 49, 8, 177, 8, 113,
			8, 241, 8, 9, 8, 137, 8, 73, 8, 201, 8, 41, 8, 169, 8, 105, 8, 233, 8, 25, 8, 153, 8, 89, 8, 217, 8, 57, 8, 185, 8, 121, 8, 249, 8, 5, 8, 133, 8,
			69, 8, 197, 8, 37, 8, 165, 8, 101, 8, 229, 8, 21, 8, 149, 8, 85, 8, 213, 8, 53, 8, 181, 8, 117, 8, 245, 8, 13, 8, 141, 8, 77, 8, 205, 8, 45, 8,
			173, 8, 109, 8, 237, 8, 29, 8, 157, 8, 93, 8, 221, 8, 61, 8, 189, 8, 125, 8, 253, 8, 19, 9, 275, 9, 147, 9, 403, 9, 83, 9, 339, 9, 211, 9, 467, 9,
			51, 9, 307, 9, 179, 9, 435, 9, 115, 9, 371, 9, 243, 9, 499, 9, 11, 9, 267, 9, 139, 9, 395, 9, 75, 9, 331, 9, 203, 9, 459, 9, 43, 9, 299, 9, 171, 9,
			427, 9, 107, 9, 363, 9, 235, 9, 491, 9, 27, 9, 283, 9, 155, 9, 411, 9, 91, 9, 347, 9, 219, 9, 475, 9, 59, 9, 315, 9, 187, 9, 443, 9, 123, 9, 379,
			9, 251, 9, 507, 9, 7, 9, 263, 9, 135, 9, 391, 9, 71, 9, 327, 9, 199, 9, 455, 9, 39, 9, 295, 9, 167, 9, 423, 9, 103, 9, 359, 9, 231, 9, 487, 9, 23,
			9, 279, 9, 151, 9, 407, 9, 87, 9, 343, 9, 215, 9, 471, 9, 55, 9, 311, 9, 183, 9, 439, 9, 119, 9, 375, 9, 247, 9, 503, 9, 15, 9, 271, 9, 143, 9,
			399, 9, 79, 9, 335, 9, 207, 9, 463, 9, 47, 9, 303, 9, 175, 9, 431, 9, 111, 9, 367, 9, 239, 9, 495, 9, 31, 9, 287, 9, 159, 9, 415, 9, 95, 9, 351, 9,
			223, 9, 479, 9, 63, 9, 319, 9, 191, 9, 447, 9, 127, 9, 383, 9, 255, 9, 511, 9, 0, 7, 64, 7, 32, 7, 96, 7, 16, 7, 80, 7, 48, 7, 112, 7, 8, 7, 72, 7,
			40, 7, 104, 7, 24, 7, 88, 7, 56, 7, 120, 7, 4, 7, 68, 7, 36, 7, 100, 7, 20, 7, 84, 7, 52, 7, 116, 7, 3, 8, 131, 8, 67, 8, 195, 8, 35, 8, 163, 8,
			99, 8, 227, 8 ];

	StaticTree.static_dtree = [ 0, 5, 16, 5, 8, 5, 24, 5, 4, 5, 20, 5, 12, 5, 28, 5, 2, 5, 18, 5, 10, 5, 26, 5, 6, 5, 22, 5, 14, 5, 30, 5, 1, 5, 17, 5, 9, 5,
			25, 5, 5, 5, 21, 5, 13, 5, 29, 5, 3, 5, 19, 5, 11, 5, 27, 5, 7, 5, 23, 5 ];

	StaticTree.static_l_desc = new StaticTree(StaticTree.static_ltree, Tree.extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);

	StaticTree.static_d_desc = new StaticTree(StaticTree.static_dtree, Tree.extra_dbits, 0, D_CODES, MAX_BITS);

	StaticTree.static_bl_desc = new StaticTree(null, Tree.extra_blbits, 0, BL_CODES, MAX_BL_BITS);

	// Deflate

	var MAX_MEM_LEVEL = 9;
	var DEF_MEM_LEVEL = 8;

	function Config(good_length, max_lazy, nice_length, max_chain, func) {
		var that = this;
		that.good_length = good_length;
		that.max_lazy = max_lazy;
		that.nice_length = nice_length;
		that.max_chain = max_chain;
		that.func = func;
	}

	var STORED = 0;
	var FAST = 1;
	var SLOW = 2;
	var config_table = [ new Config(0, 0, 0, 0, STORED), new Config(4, 4, 8, 4, FAST), new Config(4, 5, 16, 8, FAST), new Config(4, 6, 32, 32, FAST),
			new Config(4, 4, 16, 16, SLOW), new Config(8, 16, 32, 32, SLOW), new Config(8, 16, 128, 128, SLOW), new Config(8, 32, 128, 256, SLOW),
			new Config(32, 128, 258, 1024, SLOW), new Config(32, 258, 258, 4096, SLOW) ];

	var z_errmsg = [ "need dictionary", // Z_NEED_DICT
	// 2
	"stream end", // Z_STREAM_END 1
	"", // Z_OK 0
	"", // Z_ERRNO (-1)
	"stream error", // Z_STREAM_ERROR (-2)
	"data error", // Z_DATA_ERROR (-3)
	"", // Z_MEM_ERROR (-4)
	"buffer error", // Z_BUF_ERROR (-5)
	"",// Z_VERSION_ERROR (-6)
	"" ];

	// block not completed, need more input or more output
	var NeedMore = 0;

	// block flush performed
	var BlockDone = 1;

	// finish started, need only more output at next deflate
	var FinishStarted = 2;

	// finish done, accept no more input or output
	var FinishDone = 3;

	// preset dictionary flag in zlib header
	var PRESET_DICT = 0x20;

	var INIT_STATE = 42;
	var BUSY_STATE = 113;
	var FINISH_STATE = 666;

	// The deflate compression method
	var Z_DEFLATED = 8;

	var STORED_BLOCK = 0;
	var STATIC_TREES = 1;
	var DYN_TREES = 2;

	// The three kinds of block type
	var Z_BINARY = 0;
	var Z_ASCII = 1;
	var Z_UNKNOWN = 2;

	var MIN_MATCH = 3;
	var MAX_MATCH = 258;
	var MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);

	function smaller(tree, n, m, depth) {
		var tn2 = tree[n * 2];
		var tm2 = tree[m * 2];
		return (tn2 < tm2 || (tn2 == tm2 && depth[n] <= depth[m]));
	}

	function Deflate() {

		var that = this;
		var strm; // pointer back to this zlib stream
		var status; // as the name implies
		// pending_buf; // output still pending
		var pending_buf_size; // size of pending_buf
		// pending_out; // next pending byte to output to the stream
		// pending; // nb of bytes in the pending buffer
		// data_type; // UNKNOWN, BINARY or ASCII
		var method; // STORED (for zip only) or DEFLATED
		var last_flush; // value of flush param for previous deflate call

		var w_size; // LZ77 window size (32K by default)
		var w_bits; // log2(w_size) (8..16)
		var w_mask; // w_size - 1

		var window;
		// Sliding window. Input bytes are read into the second half of the window,
		// and move to the first half later to keep a dictionary of at least wSize
		// bytes. With this organization, matches are limited to a distance of
		// wSize-MAX_MATCH bytes, but this ensures that IO is always
		// performed with a length multiple of the block size. Also, it limits
		// the window size to 64K, which is quite useful on MSDOS.
		// To do: use the user input buffer as sliding window.

		var window_size;
		// Actual size of window: 2*wSize, except when the user input buffer
		// is directly used as sliding window.

		var prev;
		// Link to older string with same hash index. To limit the size of this
		// array to 64K, this link is maintained only for the last 32K strings.
		// An index in this array is thus a window index modulo 32K.

		var head; // Heads of the hash chains or NIL.

		var ins_h; // hash index of string to be inserted
		var hash_size; // number of elements in hash table
		var hash_bits; // log2(hash_size)
		var hash_mask; // hash_size-1

		// Number of bits by which ins_h must be shifted at each input
		// step. It must be such that after MIN_MATCH steps, the oldest
		// byte no longer takes part in the hash key, that is:
		// hash_shift * MIN_MATCH >= hash_bits
		var hash_shift;

		// Window position at the beginning of the current output block. Gets
		// negative when the window is moved backwards.

		var block_start;

		var match_length; // length of best match
		var prev_match; // previous match
		var match_available; // set if previous match exists
		var strstart; // start of string to insert
		var match_start; // start of matching string
		var lookahead; // number of valid bytes ahead in window

		// Length of the best match at previous step. Matches not greater than this
		// are discarded. This is used in the lazy match evaluation.
		var prev_length;

		// To speed up deflation, hash chains are never searched beyond this
		// length. A higher limit improves compression ratio but degrades the speed.
		var max_chain_length;

		// Attempt to find a better match only when the current match is strictly
		// smaller than this value. This mechanism is used only for compression
		// levels >= 4.
		var max_lazy_match;

		// Insert new strings in the hash table only if the match length is not
		// greater than this length. This saves time but degrades compression.
		// max_insert_length is used only for compression levels <= 3.

		var level; // compression level (1..9)
		var strategy; // favor or force Huffman coding

		// Use a faster search when the previous match is longer than this
		var good_match;

		// Stop searching when current match exceeds this
		var nice_match;

		var dyn_ltree; // literal and length tree
		var dyn_dtree; // distance tree
		var bl_tree; // Huffman tree for bit lengths

		var l_desc = new Tree(); // desc for literal tree
		var d_desc = new Tree(); // desc for distance tree
		var bl_desc = new Tree(); // desc for bit length tree

		// that.heap_len; // number of elements in the heap
		// that.heap_max; // element of largest frequency
		// The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.
		// The same heap array is used to build all trees.

		// Depth of each subtree used as tie breaker for trees of equal frequency
		that.depth = [];

		var l_buf; // index for literals or lengths */

		// Size of match buffer for literals/lengths. There are 4 reasons for
		// limiting lit_bufsize to 64K:
		// - frequencies can be kept in 16 bit counters
		// - if compression is not successful for the first block, all input
		// data is still in the window so we can still emit a stored block even
		// when input comes from standard input. (This can also be done for
		// all blocks if lit_bufsize is not greater than 32K.)
		// - if compression is not successful for a file smaller than 64K, we can
		// even emit a stored file instead of a stored block (saving 5 bytes).
		// This is applicable only for zip (not gzip or zlib).
		// - creating new Huffman trees less frequently may not provide fast
		// adaptation to changes in the input data statistics. (Take for
		// example a binary file with poorly compressible code followed by
		// a highly compressible string table.) Smaller buffer sizes give
		// fast adaptation but have of course the overhead of transmitting
		// trees more frequently.
		// - I can't count above 4
		var lit_bufsize;

		var last_lit; // running index in l_buf

		// Buffer for distances. To simplify the code, d_buf and l_buf have
		// the same number of elements. To use different lengths, an extra flag
		// array would be necessary.

		var d_buf; // index of pendig_buf

		// that.opt_len; // bit length of current block with optimal trees
		// that.static_len; // bit length of current block with static trees
		var matches; // number of string matches in current block
		var last_eob_len; // bit length of EOB code for last block

		// Output buffer. bits are inserted starting at the bottom (least
		// significant bits).
		var bi_buf;

		// Number of valid bits in bi_buf. All bits above the last valid bit
		// are always zero.
		var bi_valid;

		// number of codes at each bit length for an optimal tree
		that.bl_count = [];

		// heap used to build the Huffman trees
		that.heap = [];

		dyn_ltree = [];
		dyn_dtree = [];
		bl_tree = [];

		function lm_init() {
			var i;
			window_size = 2 * w_size;

			head[hash_size - 1] = 0;
			for (i = 0; i < hash_size - 1; i++) {
				head[i] = 0;
			}

			// Set the default configuration parameters:
			max_lazy_match = config_table[level].max_lazy;
			good_match = config_table[level].good_length;
			nice_match = config_table[level].nice_length;
			max_chain_length = config_table[level].max_chain;

			strstart = 0;
			block_start = 0;
			lookahead = 0;
			match_length = prev_length = MIN_MATCH - 1;
			match_available = 0;
			ins_h = 0;
		}

		function init_block() {
			var i;
			// Initialize the trees.
			for (i = 0; i < L_CODES; i++)
				dyn_ltree[i * 2] = 0;
			for (i = 0; i < D_CODES; i++)
				dyn_dtree[i * 2] = 0;
			for (i = 0; i < BL_CODES; i++)
				bl_tree[i * 2] = 0;

			dyn_ltree[END_BLOCK * 2] = 1;
			that.opt_len = that.static_len = 0;
			last_lit = matches = 0;
		}

		// Initialize the tree data structures for a new zlib stream.
		function tr_init() {

			l_desc.dyn_tree = dyn_ltree;
			l_desc.stat_desc = StaticTree.static_l_desc;

			d_desc.dyn_tree = dyn_dtree;
			d_desc.stat_desc = StaticTree.static_d_desc;

			bl_desc.dyn_tree = bl_tree;
			bl_desc.stat_desc = StaticTree.static_bl_desc;

			bi_buf = 0;
			bi_valid = 0;
			last_eob_len = 8; // enough lookahead for inflate

			// Initialize the first block of the first file:
			init_block();
		}

		// Restore the heap property by moving down the tree starting at node k,
		// exchanging a node with the smallest of its two sons if necessary,
		// stopping
		// when the heap property is re-established (each father smaller than its
		// two sons).
		that.pqdownheap = function(tree, // the tree to restore
		k // node to move down
		) {
			var heap = that.heap;
			var v = heap[k];
			var j = k << 1; // left son of k
			while (j <= that.heap_len) {
				// Set j to the smallest of the two sons:
				if (j < that.heap_len && smaller(tree, heap[j + 1], heap[j], that.depth)) {
					j++;
				}
				// Exit if v is smaller than both sons
				if (smaller(tree, v, heap[j], that.depth))
					break;

				// Exchange v with the smallest son
				heap[k] = heap[j];
				k = j;
				// And continue down the tree, setting j to the left son of k
				j <<= 1;
			}
			heap[k] = v;
		};

		// Scan a literal or distance tree to determine the frequencies of the codes
		// in the bit length tree.
		function scan_tree(tree,// the tree to be scanned
		max_code // and its largest code of non zero frequency
		) {
			var n; // iterates over all tree elements
			var prevlen = -1; // last emitted length
			var curlen; // length of current code
			var nextlen = tree[0 * 2 + 1]; // length of next code
			var count = 0; // repeat count of the current code
			var max_count = 7; // max repeat count
			var min_count = 4; // min repeat count

			if (nextlen === 0) {
				max_count = 138;
				min_count = 3;
			}
			tree[(max_code + 1) * 2 + 1] = 0xffff; // guard

			for (n = 0; n <= max_code; n++) {
				curlen = nextlen;
				nextlen = tree[(n + 1) * 2 + 1];
				if (++count < max_count && curlen == nextlen) {
					continue;
				} else if (count < min_count) {
					bl_tree[curlen * 2] += count;
				} else if (curlen !== 0) {
					if (curlen != prevlen)
						bl_tree[curlen * 2]++;
					bl_tree[REP_3_6 * 2]++;
				} else if (count <= 10) {
					bl_tree[REPZ_3_10 * 2]++;
				} else {
					bl_tree[REPZ_11_138 * 2]++;
				}
				count = 0;
				prevlen = curlen;
				if (nextlen === 0) {
					max_count = 138;
					min_count = 3;
				} else if (curlen == nextlen) {
					max_count = 6;
					min_count = 3;
				} else {
					max_count = 7;
					min_count = 4;
				}
			}
		}

		// Construct the Huffman tree for the bit lengths and return the index in
		// bl_order of the last bit length code to send.
		function build_bl_tree() {
			var max_blindex; // index of last bit length code of non zero freq

			// Determine the bit length frequencies for literal and distance trees
			scan_tree(dyn_ltree, l_desc.max_code);
			scan_tree(dyn_dtree, d_desc.max_code);

			// Build the bit length tree:
			bl_desc.build_tree(that);
			// opt_len now includes the length of the tree representations, except
			// the lengths of the bit lengths codes and the 5+5+4 bits for the
			// counts.

			// Determine the number of bit length codes to send. The pkzip format
			// requires that at least 4 bit length codes be sent. (appnote.txt says
			// 3 but the actual value used is 4.)
			for (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {
				if (bl_tree[Tree.bl_order[max_blindex] * 2 + 1] !== 0)
					break;
			}
			// Update opt_len to include the bit length tree and counts
			that.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;

			return max_blindex;
		}

		// Output a byte on the stream.
		// IN assertion: there is enough room in pending_buf.
		function put_byte(p) {
			that.pending_buf[that.pending++] = p;
		}

		function put_short(w) {
			put_byte(w & 0xff);
			put_byte((w >>> 8) & 0xff);
		}

		function putShortMSB(b) {
			put_byte((b >> 8) & 0xff);
			put_byte((b & 0xff) & 0xff);
		}

		function send_bits(value, length) {
			var val, len = length;
			if (bi_valid > Buf_size - len) {
				val = value;
				// bi_buf |= (val << bi_valid);
				bi_buf |= ((val << bi_valid) & 0xffff);
				put_short(bi_buf);
				bi_buf = val >>> (Buf_size - bi_valid);
				bi_valid += len - Buf_size;
			} else {
				// bi_buf |= (value) << bi_valid;
				bi_buf |= (((value) << bi_valid) & 0xffff);
				bi_valid += len;
			}
		}

		function send_code(c, tree) {
			var c2 = c * 2;
			send_bits(tree[c2] & 0xffff, tree[c2 + 1] & 0xffff);
		}

		// Send a literal or distance tree in compressed form, using the codes in
		// bl_tree.
		function send_tree(tree,// the tree to be sent
		max_code // and its largest code of non zero frequency
		) {
			var n; // iterates over all tree elements
			var prevlen = -1; // last emitted length
			var curlen; // length of current code
			var nextlen = tree[0 * 2 + 1]; // length of next code
			var count = 0; // repeat count of the current code
			var max_count = 7; // max repeat count
			var min_count = 4; // min repeat count

			if (nextlen === 0) {
				max_count = 138;
				min_count = 3;
			}

			for (n = 0; n <= max_code; n++) {
				curlen = nextlen;
				nextlen = tree[(n + 1) * 2 + 1];
				if (++count < max_count && curlen == nextlen) {
					continue;
				} else if (count < min_count) {
					do {
						send_code(curlen, bl_tree);
					} while (--count !== 0);
				} else if (curlen !== 0) {
					if (curlen != prevlen) {
						send_code(curlen, bl_tree);
						count--;
					}
					send_code(REP_3_6, bl_tree);
					send_bits(count - 3, 2);
				} else if (count <= 10) {
					send_code(REPZ_3_10, bl_tree);
					send_bits(count - 3, 3);
				} else {
					send_code(REPZ_11_138, bl_tree);
					send_bits(count - 11, 7);
				}
				count = 0;
				prevlen = curlen;
				if (nextlen === 0) {
					max_count = 138;
					min_count = 3;
				} else if (curlen == nextlen) {
					max_count = 6;
					min_count = 3;
				} else {
					max_count = 7;
					min_count = 4;
				}
			}
		}

		// Send the header for a block using dynamic Huffman trees: the counts, the
		// lengths of the bit length codes, the literal tree and the distance tree.
		// IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.
		function send_all_trees(lcodes, dcodes, blcodes) {
			var rank; // index in bl_order

			send_bits(lcodes - 257, 5); // not +255 as stated in appnote.txt
			send_bits(dcodes - 1, 5);
			send_bits(blcodes - 4, 4); // not -3 as stated in appnote.txt
			for (rank = 0; rank < blcodes; rank++) {
				send_bits(bl_tree[Tree.bl_order[rank] * 2 + 1], 3);
			}
			send_tree(dyn_ltree, lcodes - 1); // literal tree
			send_tree(dyn_dtree, dcodes - 1); // distance tree
		}

		// Flush the bit buffer, keeping at most 7 bits in it.
		function bi_flush() {
			if (bi_valid == 16) {
				put_short(bi_buf);
				bi_buf = 0;
				bi_valid = 0;
			} else if (bi_valid >= 8) {
				put_byte(bi_buf & 0xff);
				bi_buf >>>= 8;
				bi_valid -= 8;
			}
		}

		// Send one empty static block to give enough lookahead for inflate.
		// This takes 10 bits, of which 7 may remain in the bit buffer.
		// The current inflate code requires 9 bits of lookahead. If the
		// last two codes for the previous block (real code plus EOB) were coded
		// on 5 bits or less, inflate may have only 5+3 bits of lookahead to decode
		// the last real code. In this case we send two empty static blocks instead
		// of one. (There are no problems if the previous block is stored or fixed.)
		// To simplify the code, we assume the worst case of last real code encoded
		// on one bit only.
		function _tr_align() {
			send_bits(STATIC_TREES << 1, 3);
			send_code(END_BLOCK, StaticTree.static_ltree);

			bi_flush();

			// Of the 10 bits for the empty block, we have already sent
			// (10 - bi_valid) bits. The lookahead for the last real code (before
			// the EOB of the previous block) was thus at least one plus the length
			// of the EOB plus what we have just sent of the empty static block.
			if (1 + last_eob_len + 10 - bi_valid < 9) {
				send_bits(STATIC_TREES << 1, 3);
				send_code(END_BLOCK, StaticTree.static_ltree);
				bi_flush();
			}
			last_eob_len = 7;
		}

		// Save the match info and tally the frequency counts. Return true if
		// the current block must be flushed.
		function _tr_tally(dist, // distance of matched string
		lc // match length-MIN_MATCH or unmatched char (if dist==0)
		) {
			var out_length, in_length, dcode;
			that.pending_buf[d_buf + last_lit * 2] = (dist >>> 8) & 0xff;
			that.pending_buf[d_buf + last_lit * 2 + 1] = dist & 0xff;

			that.pending_buf[l_buf + last_lit] = lc & 0xff;
			last_lit++;

			if (dist === 0) {
				// lc is the unmatched char
				dyn_ltree[lc * 2]++;
			} else {
				matches++;
				// Here, lc is the match length - MIN_MATCH
				dist--; // dist = match distance - 1
				dyn_ltree[(Tree._length_code[lc] + LITERALS + 1) * 2]++;
				dyn_dtree[Tree.d_code(dist) * 2]++;
			}

			if ((last_lit & 0x1fff) === 0 && level > 2) {
				// Compute an upper bound for the compressed length
				out_length = last_lit * 8;
				in_length = strstart - block_start;
				for (dcode = 0; dcode < D_CODES; dcode++) {
					out_length += dyn_dtree[dcode * 2] * (5 + Tree.extra_dbits[dcode]);
				}
				out_length >>>= 3;
				if ((matches < Math.floor(last_lit / 2)) && out_length < Math.floor(in_length / 2))
					return true;
			}

			return (last_lit == lit_bufsize - 1);
			// We avoid equality with lit_bufsize because of wraparound at 64K
			// on 16 bit machines and because stored blocks are restricted to
			// 64K-1 bytes.
		}

		// Send the block data compressed using the given Huffman trees
		function compress_block(ltree, dtree) {
			var dist; // distance of matched string
			var lc; // match length or unmatched char (if dist === 0)
			var lx = 0; // running index in l_buf
			var code; // the code to send
			var extra; // number of extra bits to send

			if (last_lit !== 0) {
				do {
					dist = ((that.pending_buf[d_buf + lx * 2] << 8) & 0xff00) | (that.pending_buf[d_buf + lx * 2 + 1] & 0xff);
					lc = (that.pending_buf[l_buf + lx]) & 0xff;
					lx++;

					if (dist === 0) {
						send_code(lc, ltree); // send a literal byte
					} else {
						// Here, lc is the match length - MIN_MATCH
						code = Tree._length_code[lc];

						send_code(code + LITERALS + 1, ltree); // send the length
						// code
						extra = Tree.extra_lbits[code];
						if (extra !== 0) {
							lc -= Tree.base_length[code];
							send_bits(lc, extra); // send the extra length bits
						}
						dist--; // dist is now the match distance - 1
						code = Tree.d_code(dist);

						send_code(code, dtree); // send the distance code
						extra = Tree.extra_dbits[code];
						if (extra !== 0) {
							dist -= Tree.base_dist[code];
							send_bits(dist, extra); // send the extra distance bits
						}
					} // literal or match pair ?

					// Check that the overlay between pending_buf and d_buf+l_buf is
					// ok:
				} while (lx < last_lit);
			}

			send_code(END_BLOCK, ltree);
			last_eob_len = ltree[END_BLOCK * 2 + 1];
		}

		// Set the data type to ASCII or BINARY, using a crude approximation:
		// binary if more than 20% of the bytes are <= 6 or >= 128, ascii otherwise.
		// IN assertion: the fields freq of dyn_ltree are set and the total of all
		// frequencies does not exceed 64K (to fit in an int on 16 bit machines).
		function set_data_type() {
			var n = 0;
			var ascii_freq = 0;
			var bin_freq = 0;
			while (n < 7) {
				bin_freq += dyn_ltree[n * 2];
				n++;
			}
			while (n < 128) {
				ascii_freq += dyn_ltree[n * 2];
				n++;
			}
			while (n < LITERALS) {
				bin_freq += dyn_ltree[n * 2];
				n++;
			}
			that.data_type = (bin_freq > (ascii_freq >>> 2) ? Z_BINARY : Z_ASCII) & 0xff;
		}

		// Flush the bit buffer and align the output on a byte boundary
		function bi_windup() {
			if (bi_valid > 8) {
				put_short(bi_buf);
			} else if (bi_valid > 0) {
				put_byte(bi_buf & 0xff);
			}
			bi_buf = 0;
			bi_valid = 0;
		}

		// Copy a stored block, storing first the length and its
		// one's complement if requested.
		function copy_block(buf, // the input data
		len, // its length
		header // true if block header must be written
		) {
			var index = 0;
			bi_windup(); // align on byte boundary
			last_eob_len = 8; // enough lookahead for inflate

			if (header) {
				put_short(len);
				put_short(~len);
			}

			that.pending_buf.set(window.subarray(buf, buf + len), that.pending);
			that.pending += len;
		}

		// Send a stored block
		function _tr_stored_block(buf, // input block
		stored_len, // length of input block
		eof // true if this is the last block for a file
		) {
			send_bits((STORED_BLOCK << 1) + (eof ? 1 : 0), 3); // send block type
			copy_block(buf, stored_len, true); // with header
		}

		// Determine the best encoding for the current block: dynamic trees, static
		// trees or store, and output the encoded block to the zip file.
		function _tr_flush_block(buf, // input block, or NULL if too old
		stored_len, // length of input block
		eof // true if this is the last block for a file
		) {
			var opt_lenb, static_lenb;// opt_len and static_len in bytes
			var max_blindex = 0; // index of last bit length code of non zero freq

			// Build the Huffman trees unless a stored block is forced
			if (level > 0) {
				// Check if the file is ascii or binary
				if (that.data_type == Z_UNKNOWN)
					set_data_type();

				// Construct the literal and distance trees
				l_desc.build_tree(that);

				d_desc.build_tree(that);

				// At this point, opt_len and static_len are the total bit lengths
				// of
				// the compressed block data, excluding the tree representations.

				// Build the bit length tree for the above two trees, and get the
				// index
				// in bl_order of the last bit length code to send.
				max_blindex = build_bl_tree();

				// Determine the best encoding. Compute first the block length in
				// bytes
				opt_lenb = (that.opt_len + 3 + 7) >>> 3;
				static_lenb = (that.static_len + 3 + 7) >>> 3;

				if (static_lenb <= opt_lenb)
					opt_lenb = static_lenb;
			} else {
				opt_lenb = static_lenb = stored_len + 5; // force a stored block
			}

			if ((stored_len + 4 <= opt_lenb) && buf != -1) {
				// 4: two words for the lengths
				// The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.
				// Otherwise we can't have processed more than WSIZE input bytes
				// since
				// the last block flush, because compression would have been
				// successful. If LIT_BUFSIZE <= WSIZE, it is never too late to
				// transform a block into a stored block.
				_tr_stored_block(buf, stored_len, eof);
			} else if (static_lenb == opt_lenb) {
				send_bits((STATIC_TREES << 1) + (eof ? 1 : 0), 3);
				compress_block(StaticTree.static_ltree, StaticTree.static_dtree);
			} else {
				send_bits((DYN_TREES << 1) + (eof ? 1 : 0), 3);
				send_all_trees(l_desc.max_code + 1, d_desc.max_code + 1, max_blindex + 1);
				compress_block(dyn_ltree, dyn_dtree);
			}

			// The above check is made mod 2^32, for files larger than 512 MB
			// and uLong implemented on 32 bits.

			init_block();

			if (eof) {
				bi_windup();
			}
		}

		function flush_block_only(eof) {
			_tr_flush_block(block_start >= 0 ? block_start : -1, strstart - block_start, eof);
			block_start = strstart;
			strm.flush_pending();
		}

		// Fill the window when the lookahead becomes insufficient.
		// Updates strstart and lookahead.
		//
		// IN assertion: lookahead < MIN_LOOKAHEAD
		// OUT assertions: strstart <= window_size-MIN_LOOKAHEAD
		// At least one byte has been read, or avail_in === 0; reads are
		// performed for at least two bytes (required for the zip translate_eol
		// option -- not supported here).
		function fill_window() {
			var n, m;
			var p;
			var more; // Amount of free space at the end of the window.

			do {
				more = (window_size - lookahead - strstart);

				// Deal with !@#$% 64K limit:
				if (more === 0 && strstart === 0 && lookahead === 0) {
					more = w_size;
				} else if (more == -1) {
					// Very unlikely, but possible on 16 bit machine if strstart ==
					// 0
					// and lookahead == 1 (input done one byte at time)
					more--;

					// If the window is almost full and there is insufficient
					// lookahead,
					// move the upper half to the lower one to make room in the
					// upper half.
				} else if (strstart >= w_size + w_size - MIN_LOOKAHEAD) {
					window.set(window.subarray(w_size, w_size + w_size), 0);

					match_start -= w_size;
					strstart -= w_size; // we now have strstart >= MAX_DIST
					block_start -= w_size;

					// Slide the hash table (could be avoided with 32 bit values
					// at the expense of memory usage). We slide even when level ==
					// 0
					// to keep the hash table consistent if we switch back to level
					// > 0
					// later. (Using level 0 permanently is not an optimal usage of
					// zlib, so we don't care about this pathological case.)

					n = hash_size;
					p = n;
					do {
						m = (head[--p] & 0xffff);
						head[p] = (m >= w_size ? m - w_size : 0);
					} while (--n !== 0);

					n = w_size;
					p = n;
					do {
						m = (prev[--p] & 0xffff);
						prev[p] = (m >= w_size ? m - w_size : 0);
						// If n is not on any hash chain, prev[n] is garbage but
						// its value will never be used.
					} while (--n !== 0);
					more += w_size;
				}

				if (strm.avail_in === 0)
					return;

				// If there was no sliding:
				// strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&
				// more == window_size - lookahead - strstart
				// => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)
				// => more >= window_size - 2*WSIZE + 2
				// In the BIG_MEM or MMAP case (not yet supported),
				// window_size == input_size + MIN_LOOKAHEAD &&
				// strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.
				// Otherwise, window_size == 2*WSIZE so more >= 2.
				// If there was sliding, more >= WSIZE. So in all cases, more >= 2.

				n = strm.read_buf(window, strstart + lookahead, more);
				lookahead += n;

				// Initialize the hash value now that we have some input:
				if (lookahead >= MIN_MATCH) {
					ins_h = window[strstart] & 0xff;
					ins_h = (((ins_h) << hash_shift) ^ (window[strstart + 1] & 0xff)) & hash_mask;
				}
				// If the whole input has less than MIN_MATCH bytes, ins_h is
				// garbage,
				// but this is not important since only literal bytes will be
				// emitted.
			} while (lookahead < MIN_LOOKAHEAD && strm.avail_in !== 0);
		}

		// Copy without compression as much as possible from the input stream,
		// return
		// the current block state.
		// This function does not insert new strings in the dictionary since
		// uncompressible data is probably not useful. This function is used
		// only for the level=0 compression option.
		// NOTE: this function should be optimized to avoid extra copying from
		// window to pending_buf.
		function deflate_stored(flush) {
			// Stored blocks are limited to 0xffff bytes, pending_buf is limited
			// to pending_buf_size, and each stored block has a 5 byte header:

			var max_block_size = 0xffff;
			var max_start;

			if (max_block_size > pending_buf_size - 5) {
				max_block_size = pending_buf_size - 5;
			}

			// Copy as much as possible from input to output:
			while (true) {
				// Fill the window as much as possible:
				if (lookahead <= 1) {
					fill_window();
					if (lookahead === 0 && flush == Z_NO_FLUSH)
						return NeedMore;
					if (lookahead === 0)
						break; // flush the current block
				}

				strstart += lookahead;
				lookahead = 0;

				// Emit a stored block if pending_buf will be full:
				max_start = block_start + max_block_size;
				if (strstart === 0 || strstart >= max_start) {
					// strstart === 0 is possible when wraparound on 16-bit machine
					lookahead = (strstart - max_start);
					strstart = max_start;

					flush_block_only(false);
					if (strm.avail_out === 0)
						return NeedMore;

				}

				// Flush if we may have to slide, otherwise block_start may become
				// negative and the data will be gone:
				if (strstart - block_start >= w_size - MIN_LOOKAHEAD) {
					flush_block_only(false);
					if (strm.avail_out === 0)
						return NeedMore;
				}
			}

			flush_block_only(flush == Z_FINISH);
			if (strm.avail_out === 0)
				return (flush == Z_FINISH) ? FinishStarted : NeedMore;

			return flush == Z_FINISH ? FinishDone : BlockDone;
		}

		function longest_match(cur_match) {
			var chain_length = max_chain_length; // max hash chain length
			var scan = strstart; // current string
			var match; // matched string
			var len; // length of current match
			var best_len = prev_length; // best match length so far
			var limit = strstart > (w_size - MIN_LOOKAHEAD) ? strstart - (w_size - MIN_LOOKAHEAD) : 0;
			var _nice_match = nice_match;

			// Stop when cur_match becomes <= limit. To simplify the code,
			// we prevent matches with the string of window index 0.

			var wmask = w_mask;

			var strend = strstart + MAX_MATCH;
			var scan_end1 = window[scan + best_len - 1];
			var scan_end = window[scan + best_len];

			// The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of
			// 16.
			// It is easy to get rid of this optimization if necessary.

			// Do not waste too much time if we already have a good match:
			if (prev_length >= good_match) {
				chain_length >>= 2;
			}

			// Do not look for matches beyond the end of the input. This is
			// necessary
			// to make deflate deterministic.
			if (_nice_match > lookahead)
				_nice_match = lookahead;

			do {
				match = cur_match;

				// Skip to next match if the match length cannot increase
				// or if the match length is less than 2:
				if (window[match + best_len] != scan_end || window[match + best_len - 1] != scan_end1 || window[match] != window[scan]
						|| window[++match] != window[scan + 1])
					continue;

				// The check at best_len-1 can be removed because it will be made
				// again later. (This heuristic is not always a win.)
				// It is not necessary to compare scan[2] and match[2] since they
				// are always equal when the other bytes match, given that
				// the hash keys are equal and that HASH_BITS >= 8.
				scan += 2;
				match++;

				// We check for insufficient lookahead only every 8th comparison;
				// the 256th check will be made at strstart+258.
				do {
				} while (window[++scan] == window[++match] && window[++scan] == window[++match] && window[++scan] == window[++match]
						&& window[++scan] == window[++match] && window[++scan] == window[++match] && window[++scan] == window[++match]
						&& window[++scan] == window[++match] && window[++scan] == window[++match] && scan < strend);

				len = MAX_MATCH - (strend - scan);
				scan = strend - MAX_MATCH;

				if (len > best_len) {
					match_start = cur_match;
					best_len = len;
					if (len >= _nice_match)
						break;
					scan_end1 = window[scan + best_len - 1];
					scan_end = window[scan + best_len];
				}

			} while ((cur_match = (prev[cur_match & wmask] & 0xffff)) > limit && --chain_length !== 0);

			if (best_len <= lookahead)
				return best_len;
			return lookahead;
		}

		// Compress as much as possible from the input stream, return the current
		// block state.
		// This function does not perform lazy evaluation of matches and inserts
		// new strings in the dictionary only for unmatched strings or for short
		// matches. It is used only for the fast compression options.
		function deflate_fast(flush) {
			// short hash_head = 0; // head of the hash chain
			var hash_head = 0; // head of the hash chain
			var bflush; // set if current block must be flushed

			while (true) {
				// Make sure that we always have enough lookahead, except
				// at the end of the input file. We need MAX_MATCH bytes
				// for the next match, plus MIN_MATCH bytes to insert the
				// string following the next match.
				if (lookahead < MIN_LOOKAHEAD) {
					fill_window();
					if (lookahead < MIN_LOOKAHEAD && flush == Z_NO_FLUSH) {
						return NeedMore;
					}
					if (lookahead === 0)
						break; // flush the current block
				}

				// Insert the string window[strstart .. strstart+2] in the
				// dictionary, and set hash_head to the head of the hash chain:
				if (lookahead >= MIN_MATCH) {
					ins_h = (((ins_h) << hash_shift) ^ (window[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;

					// prev[strstart&w_mask]=hash_head=head[ins_h];
					hash_head = (head[ins_h] & 0xffff);
					prev[strstart & w_mask] = head[ins_h];
					head[ins_h] = strstart;
				}

				// Find the longest match, discarding those <= prev_length.
				// At this point we have always match_length < MIN_MATCH

				if (hash_head !== 0 && ((strstart - hash_head) & 0xffff) <= w_size - MIN_LOOKAHEAD) {
					// To simplify the code, we prevent matches with the string
					// of window index 0 (in particular we have to avoid a match
					// of the string with itself at the start of the input file).
					if (strategy != Z_HUFFMAN_ONLY) {
						match_length = longest_match(hash_head);
					}
					// longest_match() sets match_start
				}
				if (match_length >= MIN_MATCH) {
					// check_match(strstart, match_start, match_length);

					bflush = _tr_tally(strstart - match_start, match_length - MIN_MATCH);

					lookahead -= match_length;

					// Insert new strings in the hash table only if the match length
					// is not too large. This saves time but degrades compression.
					if (match_length <= max_lazy_match && lookahead >= MIN_MATCH) {
						match_length--; // string at strstart already in hash table
						do {
							strstart++;

							ins_h = ((ins_h << hash_shift) ^ (window[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;
							// prev[strstart&w_mask]=hash_head=head[ins_h];
							hash_head = (head[ins_h] & 0xffff);
							prev[strstart & w_mask] = head[ins_h];
							head[ins_h] = strstart;

							// strstart never exceeds WSIZE-MAX_MATCH, so there are
							// always MIN_MATCH bytes ahead.
						} while (--match_length !== 0);
						strstart++;
					} else {
						strstart += match_length;
						match_length = 0;
						ins_h = window[strstart] & 0xff;

						ins_h = (((ins_h) << hash_shift) ^ (window[strstart + 1] & 0xff)) & hash_mask;
						// If lookahead < MIN_MATCH, ins_h is garbage, but it does
						// not
						// matter since it will be recomputed at next deflate call.
					}
				} else {
					// No match, output a literal byte

					bflush = _tr_tally(0, window[strstart] & 0xff);
					lookahead--;
					strstart++;
				}
				if (bflush) {

					flush_block_only(false);
					if (strm.avail_out === 0)
						return NeedMore;
				}
			}

			flush_block_only(flush == Z_FINISH);
			if (strm.avail_out === 0) {
				if (flush == Z_FINISH)
					return FinishStarted;
				else
					return NeedMore;
			}
			return flush == Z_FINISH ? FinishDone : BlockDone;
		}

		// Same as above, but achieves better compression. We use a lazy
		// evaluation for matches: a match is finally adopted only if there is
		// no better match at the next window position.
		function deflate_slow(flush) {
			// short hash_head = 0; // head of hash chain
			var hash_head = 0; // head of hash chain
			var bflush; // set if current block must be flushed
			var max_insert;

			// Process the input block.
			while (true) {
				// Make sure that we always have enough lookahead, except
				// at the end of the input file. We need MAX_MATCH bytes
				// for the next match, plus MIN_MATCH bytes to insert the
				// string following the next match.

				if (lookahead < MIN_LOOKAHEAD) {
					fill_window();
					if (lookahead < MIN_LOOKAHEAD && flush == Z_NO_FLUSH) {
						return NeedMore;
					}
					if (lookahead === 0)
						break; // flush the current block
				}

				// Insert the string window[strstart .. strstart+2] in the
				// dictionary, and set hash_head to the head of the hash chain:

				if (lookahead >= MIN_MATCH) {
					ins_h = (((ins_h) << hash_shift) ^ (window[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;
					// prev[strstart&w_mask]=hash_head=head[ins_h];
					hash_head = (head[ins_h] & 0xffff);
					prev[strstart & w_mask] = head[ins_h];
					head[ins_h] = strstart;
				}

				// Find the longest match, discarding those <= prev_length.
				prev_length = match_length;
				prev_match = match_start;
				match_length = MIN_MATCH - 1;

				if (hash_head !== 0 && prev_length < max_lazy_match && ((strstart - hash_head) & 0xffff) <= w_size - MIN_LOOKAHEAD) {
					// To simplify the code, we prevent matches with the string
					// of window index 0 (in particular we have to avoid a match
					// of the string with itself at the start of the input file).

					if (strategy != Z_HUFFMAN_ONLY) {
						match_length = longest_match(hash_head);
					}
					// longest_match() sets match_start

					if (match_length <= 5 && (strategy == Z_FILTERED || (match_length == MIN_MATCH && strstart - match_start > 4096))) {

						// If prev_match is also MIN_MATCH, match_start is garbage
						// but we will ignore the current match anyway.
						match_length = MIN_MATCH - 1;
					}
				}

				// If there was a match at the previous step and the current
				// match is not better, output the previous match:
				if (prev_length >= MIN_MATCH && match_length <= prev_length) {
					max_insert = strstart + lookahead - MIN_MATCH;
					// Do not insert strings in hash table beyond this.

					// check_match(strstart-1, prev_match, prev_length);

					bflush = _tr_tally(strstart - 1 - prev_match, prev_length - MIN_MATCH);

					// Insert in hash table all strings up to the end of the match.
					// strstart-1 and strstart are already inserted. If there is not
					// enough lookahead, the last two strings are not inserted in
					// the hash table.
					lookahead -= prev_length - 1;
					prev_length -= 2;
					do {
						if (++strstart <= max_insert) {
							ins_h = (((ins_h) << hash_shift) ^ (window[(strstart) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;
							// prev[strstart&w_mask]=hash_head=head[ins_h];
							hash_head = (head[ins_h] & 0xffff);
							prev[strstart & w_mask] = head[ins_h];
							head[ins_h] = strstart;
						}
					} while (--prev_length !== 0);
					match_available = 0;
					match_length = MIN_MATCH - 1;
					strstart++;

					if (bflush) {
						flush_block_only(false);
						if (strm.avail_out === 0)
							return NeedMore;
					}
				} else if (match_available !== 0) {

					// If there was no match at the previous position, output a
					// single literal. If there was a match but the current match
					// is longer, truncate the previous match to a single literal.

					bflush = _tr_tally(0, window[strstart - 1] & 0xff);

					if (bflush) {
						flush_block_only(false);
					}
					strstart++;
					lookahead--;
					if (strm.avail_out === 0)
						return NeedMore;
				} else {
					// There is no previous match to compare with, wait for
					// the next step to decide.

					match_available = 1;
					strstart++;
					lookahead--;
				}
			}

			if (match_available !== 0) {
				bflush = _tr_tally(0, window[strstart - 1] & 0xff);
				match_available = 0;
			}
			flush_block_only(flush == Z_FINISH);

			if (strm.avail_out === 0) {
				if (flush == Z_FINISH)
					return FinishStarted;
				else
					return NeedMore;
			}

			return flush == Z_FINISH ? FinishDone : BlockDone;
		}

		function deflateReset(strm) {
			strm.total_in = strm.total_out = 0;
			strm.msg = null; //
			strm.data_type = Z_UNKNOWN;

			that.pending = 0;
			that.pending_out = 0;

			status = BUSY_STATE;

			last_flush = Z_NO_FLUSH;

			tr_init();
			lm_init();
			return Z_OK;
		}

		that.deflateInit = function(strm, _level, bits, _method, memLevel, _strategy) {
			if (!_method)
				_method = Z_DEFLATED;
			if (!memLevel)
				memLevel = DEF_MEM_LEVEL;
			if (!_strategy)
				_strategy = Z_DEFAULT_STRATEGY;

			// byte[] my_version=ZLIB_VERSION;

			//
			// if (!version || version[0] != my_version[0]
			// || stream_size != sizeof(z_stream)) {
			// return Z_VERSION_ERROR;
			// }

			strm.msg = null;

			if (_level == Z_DEFAULT_COMPRESSION)
				_level = 6;

			if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || _method != Z_DEFLATED || bits < 9 || bits > 15 || _level < 0 || _level > 9 || _strategy < 0
					|| _strategy > Z_HUFFMAN_ONLY) {
				return Z_STREAM_ERROR;
			}

			strm.dstate = that;

			w_bits = bits;
			w_size = 1 << w_bits;
			w_mask = w_size - 1;

			hash_bits = memLevel + 7;
			hash_size = 1 << hash_bits;
			hash_mask = hash_size - 1;
			hash_shift = Math.floor((hash_bits + MIN_MATCH - 1) / MIN_MATCH);

			window = new Uint8Array(w_size * 2);
			prev = [];
			head = [];

			lit_bufsize = 1 << (memLevel + 6); // 16K elements by default

			// We overlay pending_buf and d_buf+l_buf. This works since the average
			// output size for (length,distance) codes is <= 24 bits.
			that.pending_buf = new Uint8Array(lit_bufsize * 4);
			pending_buf_size = lit_bufsize * 4;

			d_buf = Math.floor(lit_bufsize / 2);
			l_buf = (1 + 2) * lit_bufsize;

			level = _level;

			strategy = _strategy;
			method = _method & 0xff;

			return deflateReset(strm);
		};

		that.deflateEnd = function() {
			if (status != INIT_STATE && status != BUSY_STATE && status != FINISH_STATE) {
				return Z_STREAM_ERROR;
			}
			// Deallocate in reverse order of allocations:
			that.pending_buf = null;
			head = null;
			prev = null;
			window = null;
			// free
			that.dstate = null;
			return status == BUSY_STATE ? Z_DATA_ERROR : Z_OK;
		};

		that.deflateParams = function(strm, _level, _strategy) {
			var err = Z_OK;

			if (_level == Z_DEFAULT_COMPRESSION) {
				_level = 6;
			}
			if (_level < 0 || _level > 9 || _strategy < 0 || _strategy > Z_HUFFMAN_ONLY) {
				return Z_STREAM_ERROR;
			}

			if (config_table[level].func != config_table[_level].func && strm.total_in !== 0) {
				// Flush the last buffer:
				err = strm.deflate(Z_PARTIAL_FLUSH);
			}

			if (level != _level) {
				level = _level;
				max_lazy_match = config_table[level].max_lazy;
				good_match = config_table[level].good_length;
				nice_match = config_table[level].nice_length;
				max_chain_length = config_table[level].max_chain;
			}
			strategy = _strategy;
			return err;
		};

		that.deflateSetDictionary = function(strm, dictionary, dictLength) {
			var length = dictLength;
			var n, index = 0;

			if (!dictionary || status != INIT_STATE)
				return Z_STREAM_ERROR;

			if (length < MIN_MATCH)
				return Z_OK;
			if (length > w_size - MIN_LOOKAHEAD) {
				length = w_size - MIN_LOOKAHEAD;
				index = dictLength - length; // use the tail of the dictionary
			}
			window.set(dictionary.subarray(index, index + length), 0);

			strstart = length;
			block_start = length;

			// Insert all strings in the hash table (except for the last two bytes).
			// s->lookahead stays null, so s->ins_h will be recomputed at the next
			// call of fill_window.

			ins_h = window[0] & 0xff;
			ins_h = (((ins_h) << hash_shift) ^ (window[1] & 0xff)) & hash_mask;

			for (n = 0; n <= length - MIN_MATCH; n++) {
				ins_h = (((ins_h) << hash_shift) ^ (window[(n) + (MIN_MATCH - 1)] & 0xff)) & hash_mask;
				prev[n & w_mask] = head[ins_h];
				head[ins_h] = n;
			}
			return Z_OK;
		};

		that.deflate = function(_strm, flush) {
			var i, header, level_flags, old_flush, bstate;

			if (flush > Z_FINISH || flush < 0) {
				return Z_STREAM_ERROR;
			}

			if (!_strm.next_out || (!_strm.next_in && _strm.avail_in !== 0) || (status == FINISH_STATE && flush != Z_FINISH)) {
				_strm.msg = z_errmsg[Z_NEED_DICT - (Z_STREAM_ERROR)];
				return Z_STREAM_ERROR;
			}
			if (_strm.avail_out === 0) {
				_strm.msg = z_errmsg[Z_NEED_DICT - (Z_BUF_ERROR)];
				return Z_BUF_ERROR;
			}

			strm = _strm; // just in case
			old_flush = last_flush;
			last_flush = flush;

			// Write the zlib header
			if (status == INIT_STATE) {
				header = (Z_DEFLATED + ((w_bits - 8) << 4)) << 8;
				level_flags = ((level - 1) & 0xff) >> 1;

				if (level_flags > 3)
					level_flags = 3;
				header |= (level_flags << 6);
				if (strstart !== 0)
					header |= PRESET_DICT;
				header += 31 - (header % 31);

				status = BUSY_STATE;
				putShortMSB(header);
			}

			// Flush as much pending output as possible
			if (that.pending !== 0) {
				strm.flush_pending();
				if (strm.avail_out === 0) {
					// console.log(" avail_out==0");
					// Since avail_out is 0, deflate will be called again with
					// more output space, but possibly with both pending and
					// avail_in equal to zero. There won't be anything to do,
					// but this is not an error situation so make sure we
					// return OK instead of BUF_ERROR at next call of deflate:
					last_flush = -1;
					return Z_OK;
				}

				// Make sure there is something to do and avoid duplicate
				// consecutive
				// flushes. For repeated and useless calls with Z_FINISH, we keep
				// returning Z_STREAM_END instead of Z_BUFF_ERROR.
			} else if (strm.avail_in === 0 && flush <= old_flush && flush != Z_FINISH) {
				strm.msg = z_errmsg[Z_NEED_DICT - (Z_BUF_ERROR)];
				return Z_BUF_ERROR;
			}

			// User must not provide more input after the first FINISH:
			if (status == FINISH_STATE && strm.avail_in !== 0) {
				_strm.msg = z_errmsg[Z_NEED_DICT - (Z_BUF_ERROR)];
				return Z_BUF_ERROR;
			}

			// Start a new block or continue the current one.
			if (strm.avail_in !== 0 || lookahead !== 0 || (flush != Z_NO_FLUSH && status != FINISH_STATE)) {
				bstate = -1;
				switch (config_table[level].func) {
				case STORED:
					bstate = deflate_stored(flush);
					break;
				case FAST:
					bstate = deflate_fast(flush);
					break;
				case SLOW:
					bstate = deflate_slow(flush);
					break;
				default:
				}

				if (bstate == FinishStarted || bstate == FinishDone) {
					status = FINISH_STATE;
				}
				if (bstate == NeedMore || bstate == FinishStarted) {
					if (strm.avail_out === 0) {
						last_flush = -1; // avoid BUF_ERROR next call, see above
					}
					return Z_OK;
					// If flush != Z_NO_FLUSH && avail_out === 0, the next call
					// of deflate should use the same flush parameter to make sure
					// that the flush is complete. So we don't have to output an
					// empty block here, this will be done at next call. This also
					// ensures that for a very small output buffer, we emit at most
					// one empty block.
				}

				if (bstate == BlockDone) {
					if (flush == Z_PARTIAL_FLUSH) {
						_tr_align();
					} else { // FULL_FLUSH or SYNC_FLUSH
						_tr_stored_block(0, 0, false);
						// For a full flush, this empty block will be recognized
						// as a special marker by inflate_sync().
						if (flush == Z_FULL_FLUSH) {
							// state.head[s.hash_size-1]=0;
							for (i = 0; i < hash_size/*-1*/; i++)
								// forget history
								head[i] = 0;
						}
					}
					strm.flush_pending();
					if (strm.avail_out === 0) {
						last_flush = -1; // avoid BUF_ERROR at next call, see above
						return Z_OK;
					}
				}
			}

			if (flush != Z_FINISH)
				return Z_OK;
			return Z_STREAM_END;
		};
	}

	// ZStream

	function ZStream() {
		var that = this;
		that.next_in_index = 0;
		that.next_out_index = 0;
		// that.next_in; // next input byte
		that.avail_in = 0; // number of bytes available at next_in
		that.total_in = 0; // total nb of input bytes read so far
		// that.next_out; // next output byte should be put there
		that.avail_out = 0; // remaining free space at next_out
		that.total_out = 0; // total nb of bytes output so far
		// that.msg;
		// that.dstate;
		// that.data_type; // best guess about the data type: ascii or binary

	}

	ZStream.prototype = {
		deflateInit : function(level, bits) {
			var that = this;
			that.dstate = new Deflate();
			if (!bits)
				bits = MAX_BITS;
			return that.dstate.deflateInit(that, level, bits);
		},

		deflate : function(flush) {
			var that = this;
			if (!that.dstate) {
				return Z_STREAM_ERROR;
			}
			return that.dstate.deflate(that, flush);
		},

		deflateEnd : function() {
			var that = this;
			if (!that.dstate)
				return Z_STREAM_ERROR;
			var ret = that.dstate.deflateEnd();
			that.dstate = null;
			return ret;
		},

		deflateParams : function(level, strategy) {
			var that = this;
			if (!that.dstate)
				return Z_STREAM_ERROR;
			return that.dstate.deflateParams(that, level, strategy);
		},

		deflateSetDictionary : function(dictionary, dictLength) {
			var that = this;
			if (!that.dstate)
				return Z_STREAM_ERROR;
			return that.dstate.deflateSetDictionary(that, dictionary, dictLength);
		},

		// Read a new buffer from the current input stream, update the
		// total number of bytes read. All deflate() input goes through
		// this function so some applications may wish to modify it to avoid
		// allocating a large strm->next_in buffer and copying from it.
		// (See also flush_pending()).
		read_buf : function(buf, start, size) {
			var that = this;
			var len = that.avail_in;
			if (len > size)
				len = size;
			if (len === 0)
				return 0;
			that.avail_in -= len;
			buf.set(that.next_in.subarray(that.next_in_index, that.next_in_index + len), start);
			that.next_in_index += len;
			that.total_in += len;
			return len;
		},

		// Flush as much pending output as possible. All deflate() output goes
		// through this function so some applications may wish to modify it
		// to avoid allocating a large strm->next_out buffer and copying into it.
		// (See also read_buf()).
		flush_pending : function() {
			var that = this;
			var len = that.dstate.pending;

			if (len > that.avail_out)
				len = that.avail_out;
			if (len === 0)
				return;

			// if (that.dstate.pending_buf.length <= that.dstate.pending_out || that.next_out.length <= that.next_out_index
			// || that.dstate.pending_buf.length < (that.dstate.pending_out + len) || that.next_out.length < (that.next_out_index +
			// len)) {
			// console.log(that.dstate.pending_buf.length + ", " + that.dstate.pending_out + ", " + that.next_out.length + ", " +
			// that.next_out_index + ", " + len);
			// console.log("avail_out=" + that.avail_out);
			// }

			that.next_out.set(that.dstate.pending_buf.subarray(that.dstate.pending_out, that.dstate.pending_out + len), that.next_out_index);

			that.next_out_index += len;
			that.dstate.pending_out += len;
			that.total_out += len;
			that.avail_out -= len;
			that.dstate.pending -= len;
			if (that.dstate.pending === 0) {
				that.dstate.pending_out = 0;
			}
		}
	};

	// Deflater

	function Deflater(level) {
		var that = this;
		var z = new ZStream();
		var bufsize = 512;
		var flush = Z_NO_FLUSH;
		var buf = new Uint8Array(bufsize);

		if (typeof level == "undefined")
			level = Z_DEFAULT_COMPRESSION;
		z.deflateInit(level);
		z.next_out = buf;

		that.append = function(data, onprogress) {
			var err, buffers = [], lastIndex = 0, bufferIndex = 0, bufferSize = 0, array;
			if (!data.length)
				return;
			z.next_in_index = 0;
			z.next_in = data;
			z.avail_in = data.length;
			do {
				z.next_out_index = 0;
				z.avail_out = bufsize;
				err = z.deflate(flush);
				if (err != Z_OK)
					throw "deflating: " + z.msg;
				if (z.next_out_index)
					if (z.next_out_index == bufsize)
						buffers.push(new Uint8Array(buf));
					else
						buffers.push(new Uint8Array(buf.subarray(0, z.next_out_index)));
				bufferSize += z.next_out_index;
				if (onprogress && z.next_in_index > 0 && z.next_in_index != lastIndex) {
					onprogress(z.next_in_index);
					lastIndex = z.next_in_index;
				}
			} while (z.avail_in > 0 || z.avail_out === 0);
			array = new Uint8Array(bufferSize);
			buffers.forEach(function(chunk) {
				array.set(chunk, bufferIndex);
				bufferIndex += chunk.length;
			});
			return array;
		};
		that.flush = function() {
			var err, ab, buffers = [], bufferIndex = 0, bufferSize = 0, array;
			do {
				z.next_out_index = 0;
				z.avail_out = bufsize;
				err = z.deflate(Z_FINISH);
				if (err != Z_STREAM_END && err != Z_OK)
					throw "deflating: " + z.msg;
				if (bufsize - z.avail_out > 0)
					buffers.push(new Uint8Array(buf.subarray(0, z.next_out_index)));
				bufferSize += z.next_out_index;
			} while (z.avail_in > 0 || z.avail_out === 0);
			z.deflateEnd();
			array = new Uint8Array(bufferSize);
			buffers.forEach(function(chunk) {
				array.set(chunk, bufferIndex);
				bufferIndex += chunk.length;
			});
			return array;
		};
	}

	var deflater;

	if (obj.zip)
		obj.zip.Deflater = Deflater;
	else {
		deflater = new Deflater();
		obj.addEventListener("message", function(event) {
			var message = event.data;
			if (message.init) {
				deflater = new Deflater(message.level);
				obj.postMessage({
					oninit : true
				});
			}
			if (message.append)
				obj.postMessage({
					onappend : true,
					data : deflater.append(message.data, function(current) {
						obj.postMessage({
							progress : true,
							current : current
						});
					})
				});
			if (message.flush)
				obj.postMessage({
					onflush : true,
					data : deflater.flush()
				});
		}, false);
	}

})(this);
</script><script language="javascript" id="inflateJs" class="ggw_resource">/*
 Copyright (c) 2012 Gildas Lormeau. All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice,
 this list of conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright 
 notice, this list of conditions and the following disclaimer in 
 the documentation and/or other materials provided with the distribution.

 3. The names of the authors may not be used to endorse or promote products
 derived from this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,
 INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,
 INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
 OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/*
 * This program is based on JZlib 1.0.2 ymnk, JCraft,Inc.
 * JZlib is based on zlib-1.1.3, so all credit should go authors
 * Jean-loup Gailly(jloup@gzip.org) and Mark Adler(madler@alumni.caltech.edu)
 * and contributors of zlib.
 */

(function(obj) {

	// Global
	var MAX_BITS = 15;

	var Z_OK = 0;
	var Z_STREAM_END = 1;
	var Z_NEED_DICT = 2;
	var Z_STREAM_ERROR = -2;
	var Z_DATA_ERROR = -3;
	var Z_MEM_ERROR = -4;
	var Z_BUF_ERROR = -5;

	var inflate_mask = [ 0x00000000, 0x00000001, 0x00000003, 0x00000007, 0x0000000f, 0x0000001f, 0x0000003f, 0x0000007f, 0x000000ff, 0x000001ff, 0x000003ff,
			0x000007ff, 0x00000fff, 0x00001fff, 0x00003fff, 0x00007fff, 0x0000ffff ];

	var MANY = 1440;

	var MAX_WBITS = 15; // 32K LZ77 window
	var DEF_WBITS = MAX_WBITS;

	// JZlib version : "1.0.2"
	var Z_NO_FLUSH = 0;
	var Z_FINISH = 4;

	// InfTree
	var fixed_bl = 9;
	var fixed_bd = 5;

	var fixed_tl = [ 96, 7, 256, 0, 8, 80, 0, 8, 16, 84, 8, 115, 82, 7, 31, 0, 8, 112, 0, 8, 48, 0, 9, 192, 80, 7, 10, 0, 8, 96, 0, 8, 32, 0, 9, 160, 0, 8, 0,
			0, 8, 128, 0, 8, 64, 0, 9, 224, 80, 7, 6, 0, 8, 88, 0, 8, 24, 0, 9, 144, 83, 7, 59, 0, 8, 120, 0, 8, 56, 0, 9, 208, 81, 7, 17, 0, 8, 104, 0, 8, 40,
			0, 9, 176, 0, 8, 8, 0, 8, 136, 0, 8, 72, 0, 9, 240, 80, 7, 4, 0, 8, 84, 0, 8, 20, 85, 8, 227, 83, 7, 43, 0, 8, 116, 0, 8, 52, 0, 9, 200, 81, 7, 13,
			0, 8, 100, 0, 8, 36, 0, 9, 168, 0, 8, 4, 0, 8, 132, 0, 8, 68, 0, 9, 232, 80, 7, 8, 0, 8, 92, 0, 8, 28, 0, 9, 152, 84, 7, 83, 0, 8, 124, 0, 8, 60,
			0, 9, 216, 82, 7, 23, 0, 8, 108, 0, 8, 44, 0, 9, 184, 0, 8, 12, 0, 8, 140, 0, 8, 76, 0, 9, 248, 80, 7, 3, 0, 8, 82, 0, 8, 18, 85, 8, 163, 83, 7,
			35, 0, 8, 114, 0, 8, 50, 0, 9, 196, 81, 7, 11, 0, 8, 98, 0, 8, 34, 0, 9, 164, 0, 8, 2, 0, 8, 130, 0, 8, 66, 0, 9, 228, 80, 7, 7, 0, 8, 90, 0, 8,
			26, 0, 9, 148, 84, 7, 67, 0, 8, 122, 0, 8, 58, 0, 9, 212, 82, 7, 19, 0, 8, 106, 0, 8, 42, 0, 9, 180, 0, 8, 10, 0, 8, 138, 0, 8, 74, 0, 9, 244, 80,
			7, 5, 0, 8, 86, 0, 8, 22, 192, 8, 0, 83, 7, 51, 0, 8, 118, 0, 8, 54, 0, 9, 204, 81, 7, 15, 0, 8, 102, 0, 8, 38, 0, 9, 172, 0, 8, 6, 0, 8, 134, 0,
			8, 70, 0, 9, 236, 80, 7, 9, 0, 8, 94, 0, 8, 30, 0, 9, 156, 84, 7, 99, 0, 8, 126, 0, 8, 62, 0, 9, 220, 82, 7, 27, 0, 8, 110, 0, 8, 46, 0, 9, 188, 0,
			8, 14, 0, 8, 142, 0, 8, 78, 0, 9, 252, 96, 7, 256, 0, 8, 81, 0, 8, 17, 85, 8, 131, 82, 7, 31, 0, 8, 113, 0, 8, 49, 0, 9, 194, 80, 7, 10, 0, 8, 97,
			0, 8, 33, 0, 9, 162, 0, 8, 1, 0, 8, 129, 0, 8, 65, 0, 9, 226, 80, 7, 6, 0, 8, 89, 0, 8, 25, 0, 9, 146, 83, 7, 59, 0, 8, 121, 0, 8, 57, 0, 9, 210,
			81, 7, 17, 0, 8, 105, 0, 8, 41, 0, 9, 178, 0, 8, 9, 0, 8, 137, 0, 8, 73, 0, 9, 242, 80, 7, 4, 0, 8, 85, 0, 8, 21, 80, 8, 258, 83, 7, 43, 0, 8, 117,
			0, 8, 53, 0, 9, 202, 81, 7, 13, 0, 8, 101, 0, 8, 37, 0, 9, 170, 0, 8, 5, 0, 8, 133, 0, 8, 69, 0, 9, 234, 80, 7, 8, 0, 8, 93, 0, 8, 29, 0, 9, 154,
			84, 7, 83, 0, 8, 125, 0, 8, 61, 0, 9, 218, 82, 7, 23, 0, 8, 109, 0, 8, 45, 0, 9, 186, 0, 8, 13, 0, 8, 141, 0, 8, 77, 0, 9, 250, 80, 7, 3, 0, 8, 83,
			0, 8, 19, 85, 8, 195, 83, 7, 35, 0, 8, 115, 0, 8, 51, 0, 9, 198, 81, 7, 11, 0, 8, 99, 0, 8, 35, 0, 9, 166, 0, 8, 3, 0, 8, 131, 0, 8, 67, 0, 9, 230,
			80, 7, 7, 0, 8, 91, 0, 8, 27, 0, 9, 150, 84, 7, 67, 0, 8, 123, 0, 8, 59, 0, 9, 214, 82, 7, 19, 0, 8, 107, 0, 8, 43, 0, 9, 182, 0, 8, 11, 0, 8, 139,
			0, 8, 75, 0, 9, 246, 80, 7, 5, 0, 8, 87, 0, 8, 23, 192, 8, 0, 83, 7, 51, 0, 8, 119, 0, 8, 55, 0, 9, 206, 81, 7, 15, 0, 8, 103, 0, 8, 39, 0, 9, 174,
			0, 8, 7, 0, 8, 135, 0, 8, 71, 0, 9, 238, 80, 7, 9, 0, 8, 95, 0, 8, 31, 0, 9, 158, 84, 7, 99, 0, 8, 127, 0, 8, 63, 0, 9, 222, 82, 7, 27, 0, 8, 111,
			0, 8, 47, 0, 9, 190, 0, 8, 15, 0, 8, 143, 0, 8, 79, 0, 9, 254, 96, 7, 256, 0, 8, 80, 0, 8, 16, 84, 8, 115, 82, 7, 31, 0, 8, 112, 0, 8, 48, 0, 9,
			193, 80, 7, 10, 0, 8, 96, 0, 8, 32, 0, 9, 161, 0, 8, 0, 0, 8, 128, 0, 8, 64, 0, 9, 225, 80, 7, 6, 0, 8, 88, 0, 8, 24, 0, 9, 145, 83, 7, 59, 0, 8,
			120, 0, 8, 56, 0, 9, 209, 81, 7, 17, 0, 8, 104, 0, 8, 40, 0, 9, 177, 0, 8, 8, 0, 8, 136, 0, 8, 72, 0, 9, 241, 80, 7, 4, 0, 8, 84, 0, 8, 20, 85, 8,
			227, 83, 7, 43, 0, 8, 116, 0, 8, 52, 0, 9, 201, 81, 7, 13, 0, 8, 100, 0, 8, 36, 0, 9, 169, 0, 8, 4, 0, 8, 132, 0, 8, 68, 0, 9, 233, 80, 7, 8, 0, 8,
			92, 0, 8, 28, 0, 9, 153, 84, 7, 83, 0, 8, 124, 0, 8, 60, 0, 9, 217, 82, 7, 23, 0, 8, 108, 0, 8, 44, 0, 9, 185, 0, 8, 12, 0, 8, 140, 0, 8, 76, 0, 9,
			249, 80, 7, 3, 0, 8, 82, 0, 8, 18, 85, 8, 163, 83, 7, 35, 0, 8, 114, 0, 8, 50, 0, 9, 197, 81, 7, 11, 0, 8, 98, 0, 8, 34, 0, 9, 165, 0, 8, 2, 0, 8,
			130, 0, 8, 66, 0, 9, 229, 80, 7, 7, 0, 8, 90, 0, 8, 26, 0, 9, 149, 84, 7, 67, 0, 8, 122, 0, 8, 58, 0, 9, 213, 82, 7, 19, 0, 8, 106, 0, 8, 42, 0, 9,
			181, 0, 8, 10, 0, 8, 138, 0, 8, 74, 0, 9, 245, 80, 7, 5, 0, 8, 86, 0, 8, 22, 192, 8, 0, 83, 7, 51, 0, 8, 118, 0, 8, 54, 0, 9, 205, 81, 7, 15, 0, 8,
			102, 0, 8, 38, 0, 9, 173, 0, 8, 6, 0, 8, 134, 0, 8, 70, 0, 9, 237, 80, 7, 9, 0, 8, 94, 0, 8, 30, 0, 9, 157, 84, 7, 99, 0, 8, 126, 0, 8, 62, 0, 9,
			221, 82, 7, 27, 0, 8, 110, 0, 8, 46, 0, 9, 189, 0, 8, 14, 0, 8, 142, 0, 8, 78, 0, 9, 253, 96, 7, 256, 0, 8, 81, 0, 8, 17, 85, 8, 131, 82, 7, 31, 0,
			8, 113, 0, 8, 49, 0, 9, 195, 80, 7, 10, 0, 8, 97, 0, 8, 33, 0, 9, 163, 0, 8, 1, 0, 8, 129, 0, 8, 65, 0, 9, 227, 80, 7, 6, 0, 8, 89, 0, 8, 25, 0, 9,
			147, 83, 7, 59, 0, 8, 121, 0, 8, 57, 0, 9, 211, 81, 7, 17, 0, 8, 105, 0, 8, 41, 0, 9, 179, 0, 8, 9, 0, 8, 137, 0, 8, 73, 0, 9, 243, 80, 7, 4, 0, 8,
			85, 0, 8, 21, 80, 8, 258, 83, 7, 43, 0, 8, 117, 0, 8, 53, 0, 9, 203, 81, 7, 13, 0, 8, 101, 0, 8, 37, 0, 9, 171, 0, 8, 5, 0, 8, 133, 0, 8, 69, 0, 9,
			235, 80, 7, 8, 0, 8, 93, 0, 8, 29, 0, 9, 155, 84, 7, 83, 0, 8, 125, 0, 8, 61, 0, 9, 219, 82, 7, 23, 0, 8, 109, 0, 8, 45, 0, 9, 187, 0, 8, 13, 0, 8,
			141, 0, 8, 77, 0, 9, 251, 80, 7, 3, 0, 8, 83, 0, 8, 19, 85, 8, 195, 83, 7, 35, 0, 8, 115, 0, 8, 51, 0, 9, 199, 81, 7, 11, 0, 8, 99, 0, 8, 35, 0, 9,
			167, 0, 8, 3, 0, 8, 131, 0, 8, 67, 0, 9, 231, 80, 7, 7, 0, 8, 91, 0, 8, 27, 0, 9, 151, 84, 7, 67, 0, 8, 123, 0, 8, 59, 0, 9, 215, 82, 7, 19, 0, 8,
			107, 0, 8, 43, 0, 9, 183, 0, 8, 11, 0, 8, 139, 0, 8, 75, 0, 9, 247, 80, 7, 5, 0, 8, 87, 0, 8, 23, 192, 8, 0, 83, 7, 51, 0, 8, 119, 0, 8, 55, 0, 9,
			207, 81, 7, 15, 0, 8, 103, 0, 8, 39, 0, 9, 175, 0, 8, 7, 0, 8, 135, 0, 8, 71, 0, 9, 239, 80, 7, 9, 0, 8, 95, 0, 8, 31, 0, 9, 159, 84, 7, 99, 0, 8,
			127, 0, 8, 63, 0, 9, 223, 82, 7, 27, 0, 8, 111, 0, 8, 47, 0, 9, 191, 0, 8, 15, 0, 8, 143, 0, 8, 79, 0, 9, 255 ];
	var fixed_td = [ 80, 5, 1, 87, 5, 257, 83, 5, 17, 91, 5, 4097, 81, 5, 5, 89, 5, 1025, 85, 5, 65, 93, 5, 16385, 80, 5, 3, 88, 5, 513, 84, 5, 33, 92, 5,
			8193, 82, 5, 9, 90, 5, 2049, 86, 5, 129, 192, 5, 24577, 80, 5, 2, 87, 5, 385, 83, 5, 25, 91, 5, 6145, 81, 5, 7, 89, 5, 1537, 85, 5, 97, 93, 5,
			24577, 80, 5, 4, 88, 5, 769, 84, 5, 49, 92, 5, 12289, 82, 5, 13, 90, 5, 3073, 86, 5, 193, 192, 5, 24577 ];

	// Tables for deflate from PKZIP's appnote.txt.
	var cplens = [ // Copy lengths for literal codes 257..285
	3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0 ];

	// see note #13 above about 258
	var cplext = [ // Extra bits for literal codes 257..285
	0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 112, 112 // 112==invalid
	];

	var cpdist = [ // Copy offsets for distance codes 0..29
	1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577 ];

	var cpdext = [ // Extra bits for distance codes
	0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13 ];

	// If BMAX needs to be larger than 16, then h and x[] should be uLong.
	var BMAX = 15; // maximum bit length of any code

	function InfTree() {
		var that = this;

		var hn; // hufts used in space
		var v; // work area for huft_build
		var c; // bit length count table
		var r; // table entry for structure assignment
		var u; // table stack
		var x; // bit offsets, then code stack

		function huft_build(b, // code lengths in bits (all assumed <=
		// BMAX)
		bindex, n, // number of codes (assumed <= 288)
		s, // number of simple-valued codes (0..s-1)
		d, // list of base values for non-simple codes
		e, // list of extra bits for non-simple codes
		t, // result: starting table
		m, // maximum lookup bits, returns actual
		hp,// space for trees
		hn,// hufts used in space
		v // working area: values in order of bit length
		) {
			// Given a list of code lengths and a maximum table size, make a set of
			// tables to decode that set of codes. Return Z_OK on success,
			// Z_BUF_ERROR
			// if the given code set is incomplete (the tables are still built in
			// this
			// case), Z_DATA_ERROR if the input is invalid (an over-subscribed set
			// of
			// lengths), or Z_MEM_ERROR if not enough memory.

			var a; // counter for codes of length k
			var f; // i repeats in table every f entries
			var g; // maximum code length
			var h; // table level
			var i; // counter, current code
			var j; // counter
			var k; // number of bits in current code
			var l; // bits per table (returned in m)
			var mask; // (1 << w) - 1, to avoid cc -O bug on HP
			var p; // pointer into c[], b[], or v[]
			var q; // points to current table
			var w; // bits before this table == (l * h)
			var xp; // pointer into x
			var y; // number of dummy codes added
			var z; // number of entries in current table

			// Generate counts for each bit length

			p = 0;
			i = n;
			do {
				c[b[bindex + p]]++;
				p++;
				i--; // assume all entries <= BMAX
			} while (i !== 0);

			if (c[0] == n) { // null input--all zero length codes
				t[0] = -1;
				m[0] = 0;
				return Z_OK;
			}

			// Find minimum and maximum length, bound *m by those
			l = m[0];
			for (j = 1; j <= BMAX; j++)
				if (c[j] !== 0)
					break;
			k = j; // minimum code length
			if (l < j) {
				l = j;
			}
			for (i = BMAX; i !== 0; i--) {
				if (c[i] !== 0)
					break;
			}
			g = i; // maximum code length
			if (l > i) {
				l = i;
			}
			m[0] = l;

			// Adjust last length count to fill out codes, if needed
			for (y = 1 << j; j < i; j++, y <<= 1) {
				if ((y -= c[j]) < 0) {
					return Z_DATA_ERROR;
				}
			}
			if ((y -= c[i]) < 0) {
				return Z_DATA_ERROR;
			}
			c[i] += y;

			// Generate starting offsets into the value table for each length
			x[1] = j = 0;
			p = 1;
			xp = 2;
			while (--i !== 0) { // note that i == g from above
				x[xp] = (j += c[p]);
				xp++;
				p++;
			}

			// Make a table of values in order of bit lengths
			i = 0;
			p = 0;
			do {
				if ((j = b[bindex + p]) !== 0) {
					v[x[j]++] = i;
				}
				p++;
			} while (++i < n);
			n = x[g]; // set n to length of v

			// Generate the Huffman codes and for each, make the table entries
			x[0] = i = 0; // first Huffman code is zero
			p = 0; // grab values in bit order
			h = -1; // no tables yet--level -1
			w = -l; // bits decoded == (l * h)
			u[0] = 0; // just to keep compilers happy
			q = 0; // ditto
			z = 0; // ditto

			// go through the bit lengths (k already is bits in shortest code)
			for (; k <= g; k++) {
				a = c[k];
				while (a-- !== 0) {
					// here i is the Huffman code of length k bits for value *p
					// make tables up to required level
					while (k > w + l) {
						h++;
						w += l; // previous table always l bits
						// compute minimum size table less than or equal to l bits
						z = g - w;
						z = (z > l) ? l : z; // table size upper limit
						if ((f = 1 << (j = k - w)) > a + 1) { // try a k-w bit table
							// too few codes for
							// k-w bit table
							f -= a + 1; // deduct codes from patterns left
							xp = k;
							if (j < z) {
								while (++j < z) { // try smaller tables up to z bits
									if ((f <<= 1) <= c[++xp])
										break; // enough codes to use up j bits
									f -= c[xp]; // else deduct codes from patterns
								}
							}
						}
						z = 1 << j; // table entries for j-bit table

						// allocate new table
						if (hn[0] + z > MANY) { // (note: doesn't matter for fixed)
							return Z_DATA_ERROR; // overflow of MANY
						}
						u[h] = q = /* hp+ */hn[0]; // DEBUG
						hn[0] += z;

						// connect to last table, if there is one
						if (h !== 0) {
							x[h] = i; // save pattern for backing up
							r[0] = /* (byte) */j; // bits in this table
							r[1] = /* (byte) */l; // bits to dump before this table
							j = i >>> (w - l);
							r[2] = /* (int) */(q - u[h - 1] - j); // offset to this table
							hp.set(r, (u[h - 1] + j) * 3);
							// to
							// last
							// table
						} else {
							t[0] = q; // first table is returned result
						}
					}

					// set up table entry in r
					r[1] = /* (byte) */(k - w);
					if (p >= n) {
						r[0] = 128 + 64; // out of values--invalid code
					} else if (v[p] < s) {
						r[0] = /* (byte) */(v[p] < 256 ? 0 : 32 + 64); // 256 is
						// end-of-block
						r[2] = v[p++]; // simple code is just the value
					} else {
						r[0] = /* (byte) */(e[v[p] - s] + 16 + 64); // non-simple--look
						// up in lists
						r[2] = d[v[p++] - s];
					}

					// fill code-like entries with r
					f = 1 << (k - w);
					for (j = i >>> w; j < z; j += f) {
						hp.set(r, (q + j) * 3);
					}

					// backwards increment the k-bit code i
					for (j = 1 << (k - 1); (i & j) !== 0; j >>>= 1) {
						i ^= j;
					}
					i ^= j;

					// backup over finished tables
					mask = (1 << w) - 1; // needed on HP, cc -O bug
					while ((i & mask) != x[h]) {
						h--; // don't need to update q
						w -= l;
						mask = (1 << w) - 1;
					}
				}
			}
			// Return Z_BUF_ERROR if we were given an incomplete table
			return y !== 0 && g != 1 ? Z_BUF_ERROR : Z_OK;
		}

		function initWorkArea(vsize) {
			var i;
			if (!hn) {
				hn = []; // []; //new Array(1);
				v = []; // new Array(vsize);
				c = new Int32Array(BMAX + 1); // new Array(BMAX + 1);
				r = []; // new Array(3);
				u = new Int32Array(BMAX); // new Array(BMAX);
				x = new Int32Array(BMAX + 1); // new Array(BMAX + 1);
			}
			if (v.length < vsize) {
				v = []; // new Array(vsize);
			}
			for (i = 0; i < vsize; i++) {
				v[i] = 0;
			}
			for (i = 0; i < BMAX + 1; i++) {
				c[i] = 0;
			}
			for (i = 0; i < 3; i++) {
				r[i] = 0;
			}
			// for(int i=0; i<BMAX; i++){u[i]=0;}
			u.set(c.subarray(0, BMAX), 0);
			// for(int i=0; i<BMAX+1; i++){x[i]=0;}
			x.set(c.subarray(0, BMAX + 1), 0);
		}

		that.inflate_trees_bits = function(c, // 19 code lengths
		bb, // bits tree desired/actual depth
		tb, // bits tree result
		hp, // space for trees
		z // for messages
		) {
			var result;
			initWorkArea(19);
			hn[0] = 0;
			result = huft_build(c, 0, 19, 19, null, null, tb, bb, hp, hn, v);

			if (result == Z_DATA_ERROR) {
				z.msg = "oversubscribed dynamic bit lengths tree";
			} else if (result == Z_BUF_ERROR || bb[0] === 0) {
				z.msg = "incomplete dynamic bit lengths tree";
				result = Z_DATA_ERROR;
			}
			return result;
		};

		that.inflate_trees_dynamic = function(nl, // number of literal/length codes
		nd, // number of distance codes
		c, // that many (total) code lengths
		bl, // literal desired/actual bit depth
		bd, // distance desired/actual bit depth
		tl, // literal/length tree result
		td, // distance tree result
		hp, // space for trees
		z // for messages
		) {
			var result;

			// build literal/length tree
			initWorkArea(288);
			hn[0] = 0;
			result = huft_build(c, 0, nl, 257, cplens, cplext, tl, bl, hp, hn, v);
			if (result != Z_OK || bl[0] === 0) {
				if (result == Z_DATA_ERROR) {
					z.msg = "oversubscribed literal/length tree";
				} else if (result != Z_MEM_ERROR) {
					z.msg = "incomplete literal/length tree";
					result = Z_DATA_ERROR;
				}
				return result;
			}

			// build distance tree
			initWorkArea(288);
			result = huft_build(c, nl, nd, 0, cpdist, cpdext, td, bd, hp, hn, v);

			if (result != Z_OK || (bd[0] === 0 && nl > 257)) {
				if (result == Z_DATA_ERROR) {
					z.msg = "oversubscribed distance tree";
				} else if (result == Z_BUF_ERROR) {
					z.msg = "incomplete distance tree";
					result = Z_DATA_ERROR;
				} else if (result != Z_MEM_ERROR) {
					z.msg = "empty distance tree with lengths";
					result = Z_DATA_ERROR;
				}
				return result;
			}

			return Z_OK;
		};

	}

	InfTree.inflate_trees_fixed = function(bl, // literal desired/actual bit depth
	bd, // distance desired/actual bit depth
	tl,// literal/length tree result
	td,// distance tree result
	z // for memory allocation
	) {
		bl[0] = fixed_bl;
		bd[0] = fixed_bd;
		tl[0] = fixed_tl;
		td[0] = fixed_td;
		return Z_OK;
	};

	// InfCodes

	// waiting for "i:"=input,
	// "o:"=output,
	// "x:"=nothing
	var START = 0; // x: set up for LEN
	var LEN = 1; // i: get length/literal/eob next
	var LENEXT = 2; // i: getting length extra (have base)
	var DIST = 3; // i: get distance next
	var DISTEXT = 4;// i: getting distance extra
	var COPY = 5; // o: copying bytes in window, waiting
	// for space
	var LIT = 6; // o: got literal, waiting for output
	// space
	var WASH = 7; // o: got eob, possibly still output
	// waiting
	var END = 8; // x: got eob and all data flushed
	var BADCODE = 9;// x: got error

	function InfCodes() {
		var that = this;

		var mode; // current inflate_codes mode

		// mode dependent information
		var len = 0;

		var tree; // pointer into tree
		var tree_index = 0;
		var need = 0; // bits needed

		var lit = 0;

		// if EXT or COPY, where and how much
		var get = 0; // bits to get for extra
		var dist = 0; // distance back to copy from

		var lbits = 0; // ltree bits decoded per branch
		var dbits = 0; // dtree bits decoder per branch
		var ltree; // literal/length/eob tree
		var ltree_index = 0; // literal/length/eob tree
		var dtree; // distance tree
		var dtree_index = 0; // distance tree

		// Called with number of bytes left to write in window at least 258
		// (the maximum string length) and number of input bytes available
		// at least ten. The ten bytes are six bytes for the longest length/
		// distance pair plus four bytes for overloading the bit buffer.

		function inflate_fast(bl, bd, tl, tl_index, td, td_index, s, z) {
			var t; // temporary pointer
			var tp; // temporary pointer
			var tp_index; // temporary pointer
			var e; // extra bits or operation
			var b; // bit buffer
			var k; // bits in bit buffer
			var p; // input data pointer
			var n; // bytes available there
			var q; // output window write pointer
			var m; // bytes to end of window or read pointer
			var ml; // mask for literal/length tree
			var md; // mask for distance tree
			var c; // bytes to copy
			var d; // distance back to copy from
			var r; // copy source pointer

			var tp_index_t_3; // (tp_index+t)*3

			// load input, output, bit values
			p = z.next_in_index;
			n = z.avail_in;
			b = s.bitb;
			k = s.bitk;
			q = s.write;
			m = q < s.read ? s.read - q - 1 : s.end - q;

			// initialize masks
			ml = inflate_mask[bl];
			md = inflate_mask[bd];

			// do until not enough input or output space for fast loop
			do { // assume called with m >= 258 && n >= 10
				// get literal/length code
				while (k < (20)) { // max bits for literal/length code
					n--;
					b |= (z.read_byte(p++) & 0xff) << k;
					k += 8;
				}

				t = b & ml;
				tp = tl;
				tp_index = tl_index;
				tp_index_t_3 = (tp_index + t) * 3;
				if ((e = tp[tp_index_t_3]) === 0) {
					b >>= (tp[tp_index_t_3 + 1]);
					k -= (tp[tp_index_t_3 + 1]);

					s.window[q++] = /* (byte) */tp[tp_index_t_3 + 2];
					m--;
					continue;
				}
				do {

					b >>= (tp[tp_index_t_3 + 1]);
					k -= (tp[tp_index_t_3 + 1]);

					if ((e & 16) !== 0) {
						e &= 15;
						c = tp[tp_index_t_3 + 2] + (/* (int) */b & inflate_mask[e]);

						b >>= e;
						k -= e;

						// decode distance base of block to copy
						while (k < (15)) { // max bits for distance code
							n--;
							b |= (z.read_byte(p++) & 0xff) << k;
							k += 8;
						}

						t = b & md;
						tp = td;
						tp_index = td_index;
						tp_index_t_3 = (tp_index + t) * 3;
						e = tp[tp_index_t_3];

						do {

							b >>= (tp[tp_index_t_3 + 1]);
							k -= (tp[tp_index_t_3 + 1]);

							if ((e & 16) !== 0) {
								// get extra bits to add to distance base
								e &= 15;
								while (k < (e)) { // get extra bits (up to 13)
									n--;
									b |= (z.read_byte(p++) & 0xff) << k;
									k += 8;
								}

								d = tp[tp_index_t_3 + 2] + (b & inflate_mask[e]);

								b >>= (e);
								k -= (e);

								// do the copy
								m -= c;
								if (q >= d) { // offset before dest
									// just copy
									r = q - d;
									if (q - r > 0 && 2 > (q - r)) {
										s.window[q++] = s.window[r++]; // minimum
										// count is
										// three,
										s.window[q++] = s.window[r++]; // so unroll
										// loop a
										// little
										c -= 2;
									} else {
										s.window.set(s.window.subarray(r, r + 2), q);
										q += 2;
										r += 2;
										c -= 2;
									}
								} else { // else offset after destination
									r = q - d;
									do {
										r += s.end; // force pointer in window
									} while (r < 0); // covers invalid distances
									e = s.end - r;
									if (c > e) { // if source crosses,
										c -= e; // wrapped copy
										if (q - r > 0 && e > (q - r)) {
											do {
												s.window[q++] = s.window[r++];
											} while (--e !== 0);
										} else {
											s.window.set(s.window.subarray(r, r + e), q);
											q += e;
											r += e;
											e = 0;
										}
										r = 0; // copy rest from start of window
									}

								}

								// copy all or what's left
								if (q - r > 0 && c > (q - r)) {
									do {
										s.window[q++] = s.window[r++];
									} while (--c !== 0);
								} else {
									s.window.set(s.window.subarray(r, r + c), q);
									q += c;
									r += c;
									c = 0;
								}
								break;
							} else if ((e & 64) === 0) {
								t += tp[tp_index_t_3 + 2];
								t += (b & inflate_mask[e]);
								tp_index_t_3 = (tp_index + t) * 3;
								e = tp[tp_index_t_3];
							} else {
								z.msg = "invalid distance code";

								c = z.avail_in - n;
								c = (k >> 3) < c ? k >> 3 : c;
								n += c;
								p -= c;
								k -= c << 3;

								s.bitb = b;
								s.bitk = k;
								z.avail_in = n;
								z.total_in += p - z.next_in_index;
								z.next_in_index = p;
								s.write = q;

								return Z_DATA_ERROR;
							}
						} while (true);
						break;
					}

					if ((e & 64) === 0) {
						t += tp[tp_index_t_3 + 2];
						t += (b & inflate_mask[e]);
						tp_index_t_3 = (tp_index + t) * 3;
						if ((e = tp[tp_index_t_3]) === 0) {

							b >>= (tp[tp_index_t_3 + 1]);
							k -= (tp[tp_index_t_3 + 1]);

							s.window[q++] = /* (byte) */tp[tp_index_t_3 + 2];
							m--;
							break;
						}
					} else if ((e & 32) !== 0) {

						c = z.avail_in - n;
						c = (k >> 3) < c ? k >> 3 : c;
						n += c;
						p -= c;
						k -= c << 3;

						s.bitb = b;
						s.bitk = k;
						z.avail_in = n;
						z.total_in += p - z.next_in_index;
						z.next_in_index = p;
						s.write = q;

						return Z_STREAM_END;
					} else {
						z.msg = "invalid literal/length code";

						c = z.avail_in - n;
						c = (k >> 3) < c ? k >> 3 : c;
						n += c;
						p -= c;
						k -= c << 3;

						s.bitb = b;
						s.bitk = k;
						z.avail_in = n;
						z.total_in += p - z.next_in_index;
						z.next_in_index = p;
						s.write = q;

						return Z_DATA_ERROR;
					}
				} while (true);
			} while (m >= 258 && n >= 10);

			// not enough input or output--restore pointers and return
			c = z.avail_in - n;
			c = (k >> 3) < c ? k >> 3 : c;
			n += c;
			p -= c;
			k -= c << 3;

			s.bitb = b;
			s.bitk = k;
			z.avail_in = n;
			z.total_in += p - z.next_in_index;
			z.next_in_index = p;
			s.write = q;

			return Z_OK;
		}

		that.init = function(bl, bd, tl, tl_index, td, td_index, z) {
			mode = START;
			lbits = /* (byte) */bl;
			dbits = /* (byte) */bd;
			ltree = tl;
			ltree_index = tl_index;
			dtree = td;
			dtree_index = td_index;
			tree = null;
		};

		that.proc = function(s, z, r) {
			var j; // temporary storage
			var t; // temporary pointer
			var tindex; // temporary pointer
			var e; // extra bits or operation
			var b = 0; // bit buffer
			var k = 0; // bits in bit buffer
			var p = 0; // input data pointer
			var n; // bytes available there
			var q; // output window write pointer
			var m; // bytes to end of window or read pointer
			var f; // pointer to copy strings from

			// copy input/output information to locals (UPDATE macro restores)
			p = z.next_in_index;
			n = z.avail_in;
			b = s.bitb;
			k = s.bitk;
			q = s.write;
			m = q < s.read ? s.read - q - 1 : s.end - q;

			// process input and output based on current state
			while (true) {
				switch (mode) {
				// waiting for "i:"=input, "o:"=output, "x:"=nothing
				case START: // x: set up for LEN
					if (m >= 258 && n >= 10) {

						s.bitb = b;
						s.bitk = k;
						z.avail_in = n;
						z.total_in += p - z.next_in_index;
						z.next_in_index = p;
						s.write = q;
						r = inflate_fast(lbits, dbits, ltree, ltree_index, dtree, dtree_index, s, z);

						p = z.next_in_index;
						n = z.avail_in;
						b = s.bitb;
						k = s.bitk;
						q = s.write;
						m = q < s.read ? s.read - q - 1 : s.end - q;

						if (r != Z_OK) {
							mode = r == Z_STREAM_END ? WASH : BADCODE;
							break;
						}
					}
					need = lbits;
					tree = ltree;
					tree_index = ltree_index;

					mode = LEN;
				case LEN: // i: get length/literal/eob next
					j = need;

					while (k < (j)) {
						if (n !== 0)
							r = Z_OK;
						else {

							s.bitb = b;
							s.bitk = k;
							z.avail_in = n;
							z.total_in += p - z.next_in_index;
							z.next_in_index = p;
							s.write = q;
							return s.inflate_flush(z, r);
						}
						n--;
						b |= (z.read_byte(p++) & 0xff) << k;
						k += 8;
					}

					tindex = (tree_index + (b & inflate_mask[j])) * 3;

					b >>>= (tree[tindex + 1]);
					k -= (tree[tindex + 1]);

					e = tree[tindex];

					if (e === 0) { // literal
						lit = tree[tindex + 2];
						mode = LIT;
						break;
					}
					if ((e & 16) !== 0) { // length
						get = e & 15;
						len = tree[tindex + 2];
						mode = LENEXT;
						break;
					}
					if ((e & 64) === 0) { // next table
						need = e;
						tree_index = tindex / 3 + tree[tindex + 2];
						break;
					}
					if ((e & 32) !== 0) { // end of block
						mode = WASH;
						break;
					}
					mode = BADCODE; // invalid code
					z.msg = "invalid literal/length code";
					r = Z_DATA_ERROR;

					s.bitb = b;
					s.bitk = k;
					z.avail_in = n;
					z.total_in += p - z.next_in_index;
					z.next_in_index = p;
					s.write = q;
					return s.inflate_flush(z, r);

				case LENEXT: // i: getting length extra (have base)
					j = get;

					while (k < (j)) {
						if (n !== 0)
							r = Z_OK;
						else {

							s.bitb = b;
							s.bitk = k;
							z.avail_in = n;
							z.total_in += p - z.next_in_index;
							z.next_in_index = p;
							s.write = q;
							return s.inflate_flush(z, r);
						}
						n--;
						b |= (z.read_byte(p++) & 0xff) << k;
						k += 8;
					}

					len += (b & inflate_mask[j]);

					b >>= j;
					k -= j;

					need = dbits;
					tree = dtree;
					tree_index = dtree_index;
					mode = DIST;
				case DIST: // i: get distance next
					j = need;

					while (k < (j)) {
						if (n !== 0)
							r = Z_OK;
						else {

							s.bitb = b;
							s.bitk = k;
							z.avail_in = n;
							z.total_in += p - z.next_in_index;
							z.next_in_index = p;
							s.write = q;
							return s.inflate_flush(z, r);
						}
						n--;
						b |= (z.read_byte(p++) & 0xff) << k;
						k += 8;
					}

					tindex = (tree_index + (b & inflate_mask[j])) * 3;

					b >>= tree[tindex + 1];
					k -= tree[tindex + 1];

					e = (tree[tindex]);
					if ((e & 16) !== 0) { // distance
						get = e & 15;
						dist = tree[tindex + 2];
						mode = DISTEXT;
						break;
					}
					if ((e & 64) === 0) { // next table
						need = e;
						tree_index = tindex / 3 + tree[tindex + 2];
						break;
					}
					mode = BADCODE; // invalid code
					z.msg = "invalid distance code";
					r = Z_DATA_ERROR;

					s.bitb = b;
					s.bitk = k;
					z.avail_in = n;
					z.total_in += p - z.next_in_index;
					z.next_in_index = p;
					s.write = q;
					return s.inflate_flush(z, r);

				case DISTEXT: // i: getting distance extra
					j = get;

					while (k < (j)) {
						if (n !== 0)
							r = Z_OK;
						else {

							s.bitb = b;
							s.bitk = k;
							z.avail_in = n;
							z.total_in += p - z.next_in_index;
							z.next_in_index = p;
							s.write = q;
							return s.inflate_flush(z, r);
						}
						n--;
						b |= (z.read_byte(p++) & 0xff) << k;
						k += 8;
					}

					dist += (b & inflate_mask[j]);

					b >>= j;
					k -= j;

					mode = COPY;
				case COPY: // o: copying bytes in window, waiting for space
					f = q - dist;
					while (f < 0) { // modulo window size-"while" instead
						f += s.end; // of "if" handles invalid distances
					}
					while (len !== 0) {

						if (m === 0) {
							if (q == s.end && s.read !== 0) {
								q = 0;
								m = q < s.read ? s.read - q - 1 : s.end - q;
							}
							if (m === 0) {
								s.write = q;
								r = s.inflate_flush(z, r);
								q = s.write;
								m = q < s.read ? s.read - q - 1 : s.end - q;

								if (q == s.end && s.read !== 0) {
									q = 0;
									m = q < s.read ? s.read - q - 1 : s.end - q;
								}

								if (m === 0) {
									s.bitb = b;
									s.bitk = k;
									z.avail_in = n;
									z.total_in += p - z.next_in_index;
									z.next_in_index = p;
									s.write = q;
									return s.inflate_flush(z, r);
								}
							}
						}

						s.window[q++] = s.window[f++];
						m--;

						if (f == s.end)
							f = 0;
						len--;
					}
					mode = START;
					break;
				case LIT: // o: got literal, waiting for output space
					if (m === 0) {
						if (q == s.end && s.read !== 0) {
							q = 0;
							m = q < s.read ? s.read - q - 1 : s.end - q;
						}
						if (m === 0) {
							s.write = q;
							r = s.inflate_flush(z, r);
							q = s.write;
							m = q < s.read ? s.read - q - 1 : s.end - q;

							if (q == s.end && s.read !== 0) {
								q = 0;
								m = q < s.read ? s.read - q - 1 : s.end - q;
							}
							if (m === 0) {
								s.bitb = b;
								s.bitk = k;
								z.avail_in = n;
								z.total_in += p - z.next_in_index;
								z.next_in_index = p;
								s.write = q;
								return s.inflate_flush(z, r);
							}
						}
					}
					r = Z_OK;

					s.window[q++] = /* (byte) */lit;
					m--;

					mode = START;
					break;
				case WASH: // o: got eob, possibly more output
					if (k > 7) { // return unused byte, if any
						k -= 8;
						n++;
						p--; // can always return one
					}

					s.write = q;
					r = s.inflate_flush(z, r);
					q = s.write;
					m = q < s.read ? s.read - q - 1 : s.end - q;

					if (s.read != s.write) {
						s.bitb = b;
						s.bitk = k;
						z.avail_in = n;
						z.total_in += p - z.next_in_index;
						z.next_in_index = p;
						s.write = q;
						return s.inflate_flush(z, r);
					}
					mode = END;
				case END:
					r = Z_STREAM_END;
					s.bitb = b;
					s.bitk = k;
					z.avail_in = n;
					z.total_in += p - z.next_in_index;
					z.next_in_index = p;
					s.write = q;
					return s.inflate_flush(z, r);

				case BADCODE: // x: got error

					r = Z_DATA_ERROR;

					s.bitb = b;
					s.bitk = k;
					z.avail_in = n;
					z.total_in += p - z.next_in_index;
					z.next_in_index = p;
					s.write = q;
					return s.inflate_flush(z, r);

				default:
					r = Z_STREAM_ERROR;

					s.bitb = b;
					s.bitk = k;
					z.avail_in = n;
					z.total_in += p - z.next_in_index;
					z.next_in_index = p;
					s.write = q;
					return s.inflate_flush(z, r);
				}
			}
		};

		that.free = function(z) {
			// ZFREE(z, c);
		};

	}

	// InfBlocks

	// Table for deflate from PKZIP's appnote.txt.
	var border = [ // Order of the bit length code lengths
	16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ];

	var TYPE = 0; // get type bits (3, including end bit)
	var LENS = 1; // get lengths for stored
	var STORED = 2;// processing stored block
	var TABLE = 3; // get table lengths
	var BTREE = 4; // get bit lengths tree for a dynamic
	// block
	var DTREE = 5; // get length, distance trees for a
	// dynamic block
	var CODES = 6; // processing fixed or dynamic block
	var DRY = 7; // output remaining window bytes
	var DONELOCKS = 8; // finished last block, done
	var BADBLOCKS = 9; // ot a data error--stuck here

	function InfBlocks(z, w) {
		var that = this;

		var mode = TYPE; // current inflate_block mode

		var left = 0; // if STORED, bytes left to copy

		var table = 0; // table lengths (14 bits)
		var index = 0; // index into blens (or border)
		var blens; // bit lengths of codes
		var bb = [ 0 ]; // bit length tree depth
		var tb = [ 0 ]; // bit length decoding tree

		var codes = new InfCodes(); // if CODES, current state

		var last = 0; // true if this block is the last block

		var hufts = new Int32Array(MANY * 3); // single malloc for tree space
		var check = 0; // check on output
		var inftree = new InfTree();

		that.bitk = 0; // bits in bit buffer
		that.bitb = 0; // bit buffer
		that.window = new Uint8Array(w); // sliding window
		that.end = w; // one byte after sliding window
		that.read = 0; // window read pointer
		that.write = 0; // window write pointer

		that.reset = function(z, c) {
			if (c)
				c[0] = check;
			// if (mode == BTREE || mode == DTREE) {
			// }
			if (mode == CODES) {
				codes.free(z);
			}
			mode = TYPE;
			that.bitk = 0;
			that.bitb = 0;
			that.read = that.write = 0;
		};

		that.reset(z, null);

		// copy as much as possible from the sliding window to the output area
		that.inflate_flush = function(z, r) {
			var n;
			var p;
			var q;

			// local copies of source and destination pointers
			p = z.next_out_index;
			q = that.read;

			// compute number of bytes to copy as far as end of window
			n = /* (int) */((q <= that.write ? that.write : that.end) - q);
			if (n > z.avail_out)
				n = z.avail_out;
			if (n !== 0 && r == Z_BUF_ERROR)
				r = Z_OK;

			// update counters
			z.avail_out -= n;
			z.total_out += n;

			// copy as far as end of window
			z.next_out.set(that.window.subarray(q, q + n), p);
			p += n;
			q += n;

			// see if more to copy at beginning of window
			if (q == that.end) {
				// wrap pointers
				q = 0;
				if (that.write == that.end)
					that.write = 0;

				// compute bytes to copy
				n = that.write - q;
				if (n > z.avail_out)
					n = z.avail_out;
				if (n !== 0 && r == Z_BUF_ERROR)
					r = Z_OK;

				// update counters
				z.avail_out -= n;
				z.total_out += n;

				// copy
				z.next_out.set(that.window.subarray(q, q + n), p);
				p += n;
				q += n;
			}

			// update pointers
			z.next_out_index = p;
			that.read = q;

			// done
			return r;
		};

		that.proc = function(z, r) {
			var t; // temporary storage
			var b; // bit buffer
			var k; // bits in bit buffer
			var p; // input data pointer
			var n; // bytes available there
			var q; // output window write pointer
			var m; // bytes to end of window or read pointer

			var i;

			// copy input/output information to locals (UPDATE macro restores)
			// {
			p = z.next_in_index;
			n = z.avail_in;
			b = that.bitb;
			k = that.bitk;
			// }
			// {
			q = that.write;
			m = /* (int) */(q < that.read ? that.read - q - 1 : that.end - q);
			// }

			// process input based on current state
			// DEBUG dtree
			while (true) {
				switch (mode) {
				case TYPE:

					while (k < (3)) {
						if (n !== 0) {
							r = Z_OK;
						} else {
							that.bitb = b;
							that.bitk = k;
							z.avail_in = n;
							z.total_in += p - z.next_in_index;
							z.next_in_index = p;
							that.write = q;
							return that.inflate_flush(z, r);
						}
						n--;
						b |= (z.read_byte(p++) & 0xff) << k;
						k += 8;
					}
					t = /* (int) */(b & 7);
					last = t & 1;

					switch (t >>> 1) {
					case 0: // stored
						// {
						b >>>= (3);
						k -= (3);
						// }
						t = k & 7; // go to byte boundary

						// {
						b >>>= (t);
						k -= (t);
						// }
						mode = LENS; // get length of stored block
						break;
					case 1: // fixed
						// {
						var bl = []; // new Array(1);
						var bd = []; // new Array(1);
						var tl = [ [] ]; // new Array(1);
						var td = [ [] ]; // new Array(1);

						InfTree.inflate_trees_fixed(bl, bd, tl, td, z);
						codes.init(bl[0], bd[0], tl[0], 0, td[0], 0, z);
						// }

						// {
						b >>>= (3);
						k -= (3);
						// }

						mode = CODES;
						break;
					case 2: // dynamic

						// {
						b >>>= (3);
						k -= (3);
						// }

						mode = TABLE;
						break;
					case 3: // illegal

						// {
						b >>>= (3);
						k -= (3);
						// }
						mode = BADBLOCKS;
						z.msg = "invalid block type";
						r = Z_DATA_ERROR;

						that.bitb = b;
						that.bitk = k;
						z.avail_in = n;
						z.total_in += p - z.next_in_index;
						z.next_in_index = p;
						that.write = q;
						return that.inflate_flush(z, r);
					}
					break;
				case LENS:

					while (k < (32)) {
						if (n !== 0) {
							r = Z_OK;
						} else {
							that.bitb = b;
							that.bitk = k;
							z.avail_in = n;
							z.total_in += p - z.next_in_index;
							z.next_in_index = p;
							that.write = q;
							return that.inflate_flush(z, r);
						}
						n--;
						b |= (z.read_byte(p++) & 0xff) << k;
						k += 8;
					}

					if ((((~b) >>> 16) & 0xffff) != (b & 0xffff)) {
						mode = BADBLOCKS;
						z.msg = "invalid stored block lengths";
						r = Z_DATA_ERROR;

						that.bitb = b;
						that.bitk = k;
						z.avail_in = n;
						z.total_in += p - z.next_in_index;
						z.next_in_index = p;
						that.write = q;
						return that.inflate_flush(z, r);
					}
					left = (b & 0xffff);
					b = k = 0; // dump bits
					mode = left !== 0 ? STORED : (last !== 0 ? DRY : TYPE);
					break;
				case STORED:
					if (n === 0) {
						that.bitb = b;
						that.bitk = k;
						z.avail_in = n;
						z.total_in += p - z.next_in_index;
						z.next_in_index = p;
						that.write = q;
						return that.inflate_flush(z, r);
					}

					if (m === 0) {
						if (q == that.end && that.read !== 0) {
							q = 0;
							m = /* (int) */(q < that.read ? that.read - q - 1 : that.end - q);
						}
						if (m === 0) {
							that.write = q;
							r = that.inflate_flush(z, r);
							q = that.write;
							m = /* (int) */(q < that.read ? that.read - q - 1 : that.end - q);
							if (q == that.end && that.read !== 0) {
								q = 0;
								m = /* (int) */(q < that.read ? that.read - q - 1 : that.end - q);
							}
							if (m === 0) {
								that.bitb = b;
								that.bitk = k;
								z.avail_in = n;
								z.total_in += p - z.next_in_index;
								z.next_in_index = p;
								that.write = q;
								return that.inflate_flush(z, r);
							}
						}
					}
					r = Z_OK;

					t = left;
					if (t > n)
						t = n;
					if (t > m)
						t = m;
					that.window.set(z.read_buf(p, t), q);
					p += t;
					n -= t;
					q += t;
					m -= t;
					if ((left -= t) !== 0)
						break;
					mode = last !== 0 ? DRY : TYPE;
					break;
				case TABLE:

					while (k < (14)) {
						if (n !== 0) {
							r = Z_OK;
						} else {
							that.bitb = b;
							that.bitk = k;
							z.avail_in = n;
							z.total_in += p - z.next_in_index;
							z.next_in_index = p;
							that.write = q;
							return that.inflate_flush(z, r);
						}

						n--;
						b |= (z.read_byte(p++) & 0xff) << k;
						k += 8;
					}

					table = t = (b & 0x3fff);
					if ((t & 0x1f) > 29 || ((t >> 5) & 0x1f) > 29) {
						mode = BADBLOCKS;
						z.msg = "too many length or distance symbols";
						r = Z_DATA_ERROR;

						that.bitb = b;
						that.bitk = k;
						z.avail_in = n;
						z.total_in += p - z.next_in_index;
						z.next_in_index = p;
						that.write = q;
						return that.inflate_flush(z, r);
					}
					t = 258 + (t & 0x1f) + ((t >> 5) & 0x1f);
					if (!blens || blens.length < t) {
						blens = []; // new Array(t);
					} else {
						for (i = 0; i < t; i++) {
							blens[i] = 0;
						}
					}

					// {
					b >>>= (14);
					k -= (14);
					// }

					index = 0;
					mode = BTREE;
				case BTREE:
					while (index < 4 + (table >>> 10)) {
						while (k < (3)) {
							if (n !== 0) {
								r = Z_OK;
							} else {
								that.bitb = b;
								that.bitk = k;
								z.avail_in = n;
								z.total_in += p - z.next_in_index;
								z.next_in_index = p;
								that.write = q;
								return that.inflate_flush(z, r);
							}
							n--;
							b |= (z.read_byte(p++) & 0xff) << k;
							k += 8;
						}

						blens[border[index++]] = b & 7;

						// {
						b >>>= (3);
						k -= (3);
						// }
					}

					while (index < 19) {
						blens[border[index++]] = 0;
					}

					bb[0] = 7;
					t = inftree.inflate_trees_bits(blens, bb, tb, hufts, z);
					if (t != Z_OK) {
						r = t;
						if (r == Z_DATA_ERROR) {
							blens = null;
							mode = BADBLOCKS;
						}

						that.bitb = b;
						that.bitk = k;
						z.avail_in = n;
						z.total_in += p - z.next_in_index;
						z.next_in_index = p;
						that.write = q;
						return that.inflate_flush(z, r);
					}

					index = 0;
					mode = DTREE;
				case DTREE:
					while (true) {
						t = table;
						if (!(index < 258 + (t & 0x1f) + ((t >> 5) & 0x1f))) {
							break;
						}

						var h;
						var j, c;

						t = bb[0];

						while (k < (t)) {
							if (n !== 0) {
								r = Z_OK;
							} else {
								that.bitb = b;
								that.bitk = k;
								z.avail_in = n;
								z.total_in += p - z.next_in_index;
								z.next_in_index = p;
								that.write = q;
								return that.inflate_flush(z, r);
							}
							n--;
							b |= (z.read_byte(p++) & 0xff) << k;
							k += 8;
						}

						// if (tb[0] == -1) {
						// System.err.println("null...");
						// }

						t = hufts[(tb[0] + (b & inflate_mask[t])) * 3 + 1];
						c = hufts[(tb[0] + (b & inflate_mask[t])) * 3 + 2];

						if (c < 16) {
							b >>>= (t);
							k -= (t);
							blens[index++] = c;
						} else { // c == 16..18
							i = c == 18 ? 7 : c - 14;
							j = c == 18 ? 11 : 3;

							while (k < (t + i)) {
								if (n !== 0) {
									r = Z_OK;
								} else {
									that.bitb = b;
									that.bitk = k;
									z.avail_in = n;
									z.total_in += p - z.next_in_index;
									z.next_in_index = p;
									that.write = q;
									return that.inflate_flush(z, r);
								}
								n--;
								b |= (z.read_byte(p++) & 0xff) << k;
								k += 8;
							}

							b >>>= (t);
							k -= (t);

							j += (b & inflate_mask[i]);

							b >>>= (i);
							k -= (i);

							i = index;
							t = table;
							if (i + j > 258 + (t & 0x1f) + ((t >> 5) & 0x1f) || (c == 16 && i < 1)) {
								blens = null;
								mode = BADBLOCKS;
								z.msg = "invalid bit length repeat";
								r = Z_DATA_ERROR;

								that.bitb = b;
								that.bitk = k;
								z.avail_in = n;
								z.total_in += p - z.next_in_index;
								z.next_in_index = p;
								that.write = q;
								return that.inflate_flush(z, r);
							}

							c = c == 16 ? blens[i - 1] : 0;
							do {
								blens[i++] = c;
							} while (--j !== 0);
							index = i;
						}
					}

					tb[0] = -1;
					// {
					var bl_ = []; // new Array(1);
					var bd_ = []; // new Array(1);
					var tl_ = []; // new Array(1);
					var td_ = []; // new Array(1);
					bl_[0] = 9; // must be <= 9 for lookahead assumptions
					bd_[0] = 6; // must be <= 9 for lookahead assumptions

					t = table;
					t = inftree.inflate_trees_dynamic(257 + (t & 0x1f), 1 + ((t >> 5) & 0x1f), blens, bl_, bd_, tl_, td_, hufts, z);

					if (t != Z_OK) {
						if (t == Z_DATA_ERROR) {
							blens = null;
							mode = BADBLOCKS;
						}
						r = t;

						that.bitb = b;
						that.bitk = k;
						z.avail_in = n;
						z.total_in += p - z.next_in_index;
						z.next_in_index = p;
						that.write = q;
						return that.inflate_flush(z, r);
					}
					codes.init(bl_[0], bd_[0], hufts, tl_[0], hufts, td_[0], z);
					// }
					mode = CODES;
				case CODES:
					that.bitb = b;
					that.bitk = k;
					z.avail_in = n;
					z.total_in += p - z.next_in_index;
					z.next_in_index = p;
					that.write = q;

					if ((r = codes.proc(that, z, r)) != Z_STREAM_END) {
						return that.inflate_flush(z, r);
					}
					r = Z_OK;
					codes.free(z);

					p = z.next_in_index;
					n = z.avail_in;
					b = that.bitb;
					k = that.bitk;
					q = that.write;
					m = /* (int) */(q < that.read ? that.read - q - 1 : that.end - q);

					if (last === 0) {
						mode = TYPE;
						break;
					}
					mode = DRY;
				case DRY:
					that.write = q;
					r = that.inflate_flush(z, r);
					q = that.write;
					m = /* (int) */(q < that.read ? that.read - q - 1 : that.end - q);
					if (that.read != that.write) {
						that.bitb = b;
						that.bitk = k;
						z.avail_in = n;
						z.total_in += p - z.next_in_index;
						z.next_in_index = p;
						that.write = q;
						return that.inflate_flush(z, r);
					}
					mode = DONELOCKS;
				case DONELOCKS:
					r = Z_STREAM_END;

					that.bitb = b;
					that.bitk = k;
					z.avail_in = n;
					z.total_in += p - z.next_in_index;
					z.next_in_index = p;
					that.write = q;
					return that.inflate_flush(z, r);
				case BADBLOCKS:
					r = Z_DATA_ERROR;

					that.bitb = b;
					that.bitk = k;
					z.avail_in = n;
					z.total_in += p - z.next_in_index;
					z.next_in_index = p;
					that.write = q;
					return that.inflate_flush(z, r);

				default:
					r = Z_STREAM_ERROR;

					that.bitb = b;
					that.bitk = k;
					z.avail_in = n;
					z.total_in += p - z.next_in_index;
					z.next_in_index = p;
					that.write = q;
					return that.inflate_flush(z, r);
				}
			}
		};

		that.free = function(z) {
			that.reset(z, null);
			that.window = null;
			hufts = null;
			// ZFREE(z, s);
		};

		that.set_dictionary = function(d, start, n) {
			that.window.set(d.subarray(start, start + n), 0);
			that.read = that.write = n;
		};

		// Returns true if inflate is currently at the end of a block generated
		// by Z_SYNC_FLUSH or Z_FULL_FLUSH.
		that.sync_point = function() {
			return mode == LENS ? 1 : 0;
		};

	}

	// Inflate

	// preset dictionary flag in zlib header
	var PRESET_DICT = 0x20;

	var Z_DEFLATED = 8;

	var METHOD = 0; // waiting for method byte
	var FLAG = 1; // waiting for flag byte
	var DICT4 = 2; // four dictionary check bytes to go
	var DICT3 = 3; // three dictionary check bytes to go
	var DICT2 = 4; // two dictionary check bytes to go
	var DICT1 = 5; // one dictionary check byte to go
	var DICT0 = 6; // waiting for inflateSetDictionary
	var BLOCKS = 7; // decompressing blocks
	var DONE = 12; // finished check, done
	var BAD = 13; // got an error--stay here

	var mark = [ 0, 0, 0xff, 0xff ];

	function Inflate() {
		var that = this;

		that.mode = 0; // current inflate mode

		// mode dependent information
		that.method = 0; // if FLAGS, method byte

		// if CHECK, check values to compare
		that.was = [ 0 ]; // new Array(1); // computed check value
		that.need = 0; // stream check value

		// if BAD, inflateSync's marker bytes count
		that.marker = 0;

		// mode independent information
		that.wbits = 0; // log2(window size) (8..15, defaults to 15)

		// this.blocks; // current inflate_blocks state

		function inflateReset(z) {
			if (!z || !z.istate)
				return Z_STREAM_ERROR;

			z.total_in = z.total_out = 0;
			z.msg = null;
			z.istate.mode = BLOCKS;
			z.istate.blocks.reset(z, null);
			return Z_OK;
		}

		that.inflateEnd = function(z) {
			if (that.blocks)
				that.blocks.free(z);
			that.blocks = null;
			// ZFREE(z, z->state);
			return Z_OK;
		};

		that.inflateInit = function(z, w) {
			z.msg = null;
			that.blocks = null;

			// set window size
			if (w < 8 || w > 15) {
				that.inflateEnd(z);
				return Z_STREAM_ERROR;
			}
			that.wbits = w;

			z.istate.blocks = new InfBlocks(z, 1 << w);

			// reset state
			inflateReset(z);
			return Z_OK;
		};

		that.inflate = function(z, f) {
			var r;
			var b;

			if (!z || !z.istate || !z.next_in)
				return Z_STREAM_ERROR;
			f = f == Z_FINISH ? Z_BUF_ERROR : Z_OK;
			r = Z_BUF_ERROR;
			while (true) {
				// System.out.println("mode: "+z.istate.mode);
				switch (z.istate.mode) {
				case METHOD:

					if (z.avail_in === 0)
						return r;
					r = f;

					z.avail_in--;
					z.total_in++;
					if (((z.istate.method = z.read_byte(z.next_in_index++)) & 0xf) != Z_DEFLATED) {
						z.istate.mode = BAD;
						z.msg = "unknown compression method";
						z.istate.marker = 5; // can't try inflateSync
						break;
					}
					if ((z.istate.method >> 4) + 8 > z.istate.wbits) {
						z.istate.mode = BAD;
						z.msg = "invalid window size";
						z.istate.marker = 5; // can't try inflateSync
						break;
					}
					z.istate.mode = FLAG;
				case FLAG:

					if (z.avail_in === 0)
						return r;
					r = f;

					z.avail_in--;
					z.total_in++;
					b = (z.read_byte(z.next_in_index++)) & 0xff;

					if ((((z.istate.method << 8) + b) % 31) !== 0) {
						z.istate.mode = BAD;
						z.msg = "incorrect header check";
						z.istate.marker = 5; // can't try inflateSync
						break;
					}

					if ((b & PRESET_DICT) === 0) {
						z.istate.mode = BLOCKS;
						break;
					}
					z.istate.mode = DICT4;
				case DICT4:

					if (z.avail_in === 0)
						return r;
					r = f;

					z.avail_in--;
					z.total_in++;
					z.istate.need = ((z.read_byte(z.next_in_index++) & 0xff) << 24) & 0xff000000;
					z.istate.mode = DICT3;
				case DICT3:

					if (z.avail_in === 0)
						return r;
					r = f;

					z.avail_in--;
					z.total_in++;
					z.istate.need += ((z.read_byte(z.next_in_index++) & 0xff) << 16) & 0xff0000;
					z.istate.mode = DICT2;
				case DICT2:

					if (z.avail_in === 0)
						return r;
					r = f;

					z.avail_in--;
					z.total_in++;
					z.istate.need += ((z.read_byte(z.next_in_index++) & 0xff) << 8) & 0xff00;
					z.istate.mode = DICT1;
				case DICT1:

					if (z.avail_in === 0)
						return r;
					r = f;

					z.avail_in--;
					z.total_in++;
					z.istate.need += (z.read_byte(z.next_in_index++) & 0xff);
					z.istate.mode = DICT0;
					return Z_NEED_DICT;
				case DICT0:
					z.istate.mode = BAD;
					z.msg = "need dictionary";
					z.istate.marker = 0; // can try inflateSync
					return Z_STREAM_ERROR;
				case BLOCKS:

					r = z.istate.blocks.proc(z, r);
					if (r == Z_DATA_ERROR) {
						z.istate.mode = BAD;
						z.istate.marker = 0; // can try inflateSync
						break;
					}
					if (r == Z_OK) {
						r = f;
					}
					if (r != Z_STREAM_END) {
						return r;
					}
					r = f;
					z.istate.blocks.reset(z, z.istate.was);
					z.istate.mode = DONE;
				case DONE:
					return Z_STREAM_END;
				case BAD:
					return Z_DATA_ERROR;
				default:
					return Z_STREAM_ERROR;
				}
			}
		};

		that.inflateSetDictionary = function(z, dictionary, dictLength) {
			var index = 0;
			var length = dictLength;
			if (!z || !z.istate || z.istate.mode != DICT0)
				return Z_STREAM_ERROR;

			if (length >= (1 << z.istate.wbits)) {
				length = (1 << z.istate.wbits) - 1;
				index = dictLength - length;
			}
			z.istate.blocks.set_dictionary(dictionary, index, length);
			z.istate.mode = BLOCKS;
			return Z_OK;
		};

		that.inflateSync = function(z) {
			var n; // number of bytes to look at
			var p; // pointer to bytes
			var m; // number of marker bytes found in a row
			var r, w; // temporaries to save total_in and total_out

			// set up
			if (!z || !z.istate)
				return Z_STREAM_ERROR;
			if (z.istate.mode != BAD) {
				z.istate.mode = BAD;
				z.istate.marker = 0;
			}
			if ((n = z.avail_in) === 0)
				return Z_BUF_ERROR;
			p = z.next_in_index;
			m = z.istate.marker;

			// search
			while (n !== 0 && m < 4) {
				if (z.read_byte(p) == mark[m]) {
					m++;
				} else if (z.read_byte(p) !== 0) {
					m = 0;
				} else {
					m = 4 - m;
				}
				p++;
				n--;
			}

			// restore
			z.total_in += p - z.next_in_index;
			z.next_in_index = p;
			z.avail_in = n;
			z.istate.marker = m;

			// return no joy or set up to restart on a new block
			if (m != 4) {
				return Z_DATA_ERROR;
			}
			r = z.total_in;
			w = z.total_out;
			inflateReset(z);
			z.total_in = r;
			z.total_out = w;
			z.istate.mode = BLOCKS;
			return Z_OK;
		};

		// Returns true if inflate is currently at the end of a block generated
		// by Z_SYNC_FLUSH or Z_FULL_FLUSH. This function is used by one PPP
		// implementation to provide an additional safety check. PPP uses
		// Z_SYNC_FLUSH
		// but removes the length bytes of the resulting empty stored block. When
		// decompressing, PPP checks that at the end of input packet, inflate is
		// waiting for these length bytes.
		that.inflateSyncPoint = function(z) {
			if (!z || !z.istate || !z.istate.blocks)
				return Z_STREAM_ERROR;
			return z.istate.blocks.sync_point();
		};
	}

	// ZStream

	function ZStream() {
	}

	ZStream.prototype = {
		inflateInit : function(bits) {
			var that = this;
			that.istate = new Inflate();
			if (!bits)
				bits = MAX_BITS;
			return that.istate.inflateInit(that, bits);
		},

		inflate : function(f) {
			var that = this;
			if (!that.istate)
				return Z_STREAM_ERROR;
			return that.istate.inflate(that, f);
		},

		inflateEnd : function() {
			var that = this;
			if (!that.istate)
				return Z_STREAM_ERROR;
			var ret = that.istate.inflateEnd(that);
			that.istate = null;
			return ret;
		},

		inflateSync : function() {
			var that = this;
			if (!that.istate)
				return Z_STREAM_ERROR;
			return that.istate.inflateSync(that);
		},
		inflateSetDictionary : function(dictionary, dictLength) {
			var that = this;
			if (!that.istate)
				return Z_STREAM_ERROR;
			return that.istate.inflateSetDictionary(that, dictionary, dictLength);
		},
		read_byte : function(start) {
			var that = this;
			return that.next_in.subarray(start, start + 1)[0];
		},
		read_buf : function(start, size) {
			var that = this;
			return that.next_in.subarray(start, start + size);
		}
	};

	// Inflater

	function Inflater() {
		var that = this;
		var z = new ZStream();
		var bufsize = 512;
		var flush = Z_NO_FLUSH;
		var buf = new Uint8Array(bufsize);
		var nomoreinput = false;

		z.inflateInit();
		z.next_out = buf;

		that.append = function(data, onprogress) {
			var err, buffers = [], lastIndex = 0, bufferIndex = 0, bufferSize = 0, array;
			if (data.length === 0)
				return;
			z.next_in_index = 0;
			z.next_in = data;
			z.avail_in = data.length;
			do {
				z.next_out_index = 0;
				z.avail_out = bufsize;
				if ((z.avail_in === 0) && (!nomoreinput)) { // if buffer is empty and more input is available, refill it
					z.next_in_index = 0;
					nomoreinput = true;
				}
				err = z.inflate(flush);
				if (nomoreinput && (err == Z_BUF_ERROR))
					return -1;
				if (err != Z_OK && err != Z_STREAM_END)
					throw "inflating: " + z.msg;
				if ((nomoreinput || err == Z_STREAM_END) && (z.avail_out == data.length))
					return -1;
				if (z.next_out_index)
					if (z.next_out_index == bufsize)
						buffers.push(new Uint8Array(buf));
					else
						buffers.push(new Uint8Array(buf.subarray(0, z.next_out_index)));
				bufferSize += z.next_out_index;
				if (onprogress && z.next_in_index > 0 && z.next_in_index != lastIndex) {
					onprogress(z.next_in_index);
					lastIndex = z.next_in_index;
				}
			} while (z.avail_in > 0 || z.avail_out === 0);
			array = new Uint8Array(bufferSize);
			buffers.forEach(function(chunk) {
				array.set(chunk, bufferIndex);
				bufferIndex += chunk.length;
			});
			return array;
		};
		that.flush = function() {
			z.inflateEnd();
		};
	}

	var inflater;

	if (obj.zip)
		obj.zip.Inflater = Inflater;
	else {
		inflater = new Inflater();
		obj.addEventListener("message", function(event) {
			var message = event.data;

			if (message.append)
				obj.postMessage({
					onappend : true,
					data : inflater.append(message.data, function(current) {
						obj.postMessage({
							progress : true,
							current : current
						});
					})
				});
			if (message.flush) {
				inflater.flush();
				obj.postMessage({
					onflush : true
				});
			}
		}, false);
	}

})(this);
</script><script language="javascript" id="arrayBufferJs" class="ggw_resource">// Code can be found at: http://www.calormen.com/polyfill/typedarray.js

/*
 $LicenseInfo:firstyear=2010&license=mit$

 Copyright (c) 2010, Linden Research, Inc.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 $/LicenseInfo$
 */

// Original can be found at:  https://bitbucket.org/lindenlab/llsd
// Modifications by Joshua Bell inexorabletash@hotmail.com
//  * Restructure the creation of types and exporting to global namespace
//  * Allow no arguments to DataView constructor
//  * Work cross-frame with native arrays/shimmed DataView
//  * Corrected Object.defineProperty shim for IE8
// ES3/ES5 implementation of the Krhonos TypedArray Working Draft (work in progress):
//   Ref: https://cvs.khronos.org/svn/repos/registry/trunk/public/webgl/doc/spec/TypedArray-spec.html
//   Date: 2011-02-01
//
// Variations:
//  * Float/Double -> Float32/Float64, per WebGL-Public mailing list conversations (post 5/17)
//  * Allows typed_array.get/set() as alias for subscripts (typed_array[])
(function(global) {
	"use strict";

	var USE_NATIVE_IF_AVAILABLE = true;

	// Approximations of internal ECMAScript conversion functions
	var ECMAScript = (function() {
		// Stash a copy in case other scripts modify these
		var opts = Object.prototype.toString, ophop = Object.prototype.hasOwnProperty;

		return {
			// Class returns internal [[Class]] property, used to avoid cross-frame instanceof issues:
			Class : function(v) {
				return opts.call(v).replace(/^\[object *|\]$/g, '');
			},
			HasProperty : function(o, p) {
				return p in o;
			},
			HasOwnProperty : function(o, p) {
				return ophop.call(o, p);
			},
			IsCallable : function(o) {
				return typeof o === 'function';
			},
			ToInt32 : function(v) {
				return v >> 0;
			},
			ToUint32 : function(v) {
				return v >>> 0;
			}
		};
	}());

	// Create an INDEX_SIZE_ERR event - intentionally induces a DOM error if possible

	function new_INDEX_SIZE_ERR() {
		try {
			if (document) {
				// raises DOMException(INDEX_SIZE_ERR)
				document.createTextNode("").splitText(1);
			}
			return new RangeError("INDEX_SIZE_ERR");
		} catch (e) {
			return e;
		}
	}

	// ES5: lock down object properties

	function configureProperties(obj) {
		if (Object.getOwnPropertyNames && Object.defineProperty) {
			var props = Object.getOwnPropertyNames(obj), i;
			for (i = 0; i < props.length; i += 1) {
				Object.defineProperty(obj, props[i], {
					value : obj[props[i]],
					writable : false,
					enumerable : false,
					configurable : false
				});
			}
		}
	}

	// emulate ES5 getter/setter API using legacy APIs
	// http://blogs.msdn.com/b/ie/archive/2010/09/07/transitioning-existing-code-to-the-es5-getter-setter-apis.aspx
	// (second clause tests for Object.defineProperty() in IE<9 that only supports extending DOM prototypes, but
	// note that IE<9 does not support __defineGetter__ or __defineSetter__ so it just renders the method harmless)
	if (!Object.defineProperty || !(function() {
		try {
			Object.defineProperty({}, 'x', {});
			return true;
		} catch (e) {
			return false;
		}
	}())) {
		Object.defineProperty = function(o, p, desc) {
			if (!o === Object(o)) {
				throw new TypeError("Object.defineProperty called on non-object");
			}
			if (ECMAScript.HasProperty(desc, 'get') && Object.prototype.__defineGetter__) {
				Object.prototype.__defineGetter__.call(o, p, desc.get);
			}
			if (ECMAScript.HasProperty(desc, 'set') && Object.prototype.__defineSetter__) {
				Object.prototype.__defineSetter__.call(o, p, desc.set);
			}
			if (ECMAScript.HasProperty(desc, 'value')) {
				o[p] = desc.value;
			}
			return o;
		};
	}

	if (!Object.getOwnPropertyNames) {
		Object.getOwnPropertyNames = function getOwnPropertyNames(o) {
			if (o !== Object(o)) {
				throw new TypeError("Object.getOwnPropertyNames called on non-object");
			}
			var props = [], p;
			for (p in o) {
				if (ECMAScript.HasOwnProperty(o, p)) {
					props.push(p);
				}
			}
			return props;
		};
	}

	// ES5: Make obj[index] an alias for obj._getter(index)/obj._setter(index, value)
	// for index in 0 ... obj.length

	function makeArrayAccessors(obj) {
		if (!Object.defineProperty) {
			return;
		}

		function makeArrayAccessor(index) {
			Object.defineProperty(obj, index, {
				'get' : function() {
					return obj._getter(index);
				},
				'set' : function(v) {
					obj._setter(index, v);
				},
				enumerable : true,
				configurable : false
			});
		}

		var i;
		for (i = 0; i < obj.length; i += 1) {
			makeArrayAccessor(i);
		}
	}

	// Internal conversion functions:
	// pack<Type>() - take a number (interpreted as Type), output a byte array
	// unpack<Type>() - take a byte array, output a Type-like number

	function as_signed(value, bits) {
		var s = 32 - bits;
		return (value << s) >> s;
	}

	function as_unsigned(value, bits) {
		var s = 32 - bits;
		return (value << s) >>> s;
	}

	function packInt8(n) {
		return [ n & 0xff ];
	}

	function unpackInt8(bytes) {
		return as_signed(bytes[0], 8);
	}

	function packUint8(n) {
		return [ n & 0xff ];
	}

	function unpackUint8(bytes) {
		return as_unsigned(bytes[0], 8);
	}

	function packInt16(n) {
		return [ (n >> 8) & 0xff, n & 0xff ];
	}

	function unpackInt16(bytes) {
		return as_signed(bytes[0] << 8 | bytes[1], 16);
	}

	function packUint16(n) {
		return [ (n >> 8) & 0xff, n & 0xff ];
	}

	function unpackUint16(bytes) {
		return as_unsigned(bytes[0] << 8 | bytes[1], 16);
	}

	function packInt32(n) {
		return [ (n >> 24) & 0xff, (n >> 16) & 0xff, (n >> 8) & 0xff, n & 0xff ];
	}

	function unpackInt32(bytes) {
		return as_signed(bytes[0] << 24 | bytes[1] << 16 | bytes[2] << 8 | bytes[3], 32);
	}

	function packUint32(n) {
		return [ (n >> 24) & 0xff, (n >> 16) & 0xff, (n >> 8) & 0xff, n & 0xff ];
	}

	function unpackUint32(bytes) {
		return as_unsigned(bytes[0] << 24 | bytes[1] << 16 | bytes[2] << 8 | bytes[3], 32);
	}

	function packIEEE754(v, ebits, fbits) {

		var bias = (1 << (ebits - 1)) - 1, s, e, f, ln, i, bits, str, bytes;

		// Compute sign, exponent, fraction
		if (v !== v) {
			// NaN
			// http://dev.w3.org/2006/webapi/WebIDL/#es-type-mapping
			e = (1 << bias) - 1;
			f = Math.pow(2, fbits - 1);
			s = 0;
		} else if (v === Infinity || v === -Infinity) {
			e = (1 << bias) - 1;
			f = 0;
			s = (v < 0) ? 1 : 0;
		} else if (v === 0) {
			e = 0;
			f = 0;
			s = (1 / v === -Infinity) ? 1 : 0;
		} else {
			s = v < 0;
			v = Math.abs(v);

			if (v >= Math.pow(2, 1 - bias)) {
				// Normalized
				ln = Math.min(Math.floor(Math.log(v) / Math.LN2), bias);
				e = ln + bias;
				f = Math.round(v * Math.pow(2, fbits - ln) - Math.pow(2, fbits));
			} else {
				// Denormalized
				e = 0;
				f = Math.round(v / Math.pow(2, 1 - bias - fbits));
			}
		}

		// Pack sign, exponent, fraction
		bits = [];
		for (i = fbits; i; i -= 1) {
			bits.push(f % 2 ? 1 : 0);
			f = Math.floor(f / 2);
		}
		for (i = ebits; i; i -= 1) {
			bits.push(e % 2 ? 1 : 0);
			e = Math.floor(e / 2);
		}
		bits.push(s ? 1 : 0);
		bits.reverse();
		str = bits.join('');

		// Bits to bytes
		bytes = [];
		while (str.length) {
			bytes.push(parseInt(str.substring(0, 8), 2));
			str = str.substring(8);
		}
		return bytes;
	}

	function unpackIEEE754(bytes, ebits, fbits) {

		// Bytes to bits
		var bits = [], i, j, b, str, bias, s, e, f;

		for (i = bytes.length; i; i -= 1) {
			b = bytes[i - 1];
			for (j = 8; j; j -= 1) {
				bits.push(b % 2 ? 1 : 0);
				b = b >> 1;
			}
		}
		bits.reverse();
		str = bits.join('');

		// Unpack sign, exponent, fraction
		bias = (1 << (ebits - 1)) - 1;
		s = parseInt(str.substring(0, 1), 2) ? -1 : 1;
		e = parseInt(str.substring(1, 1 + ebits), 2);
		f = parseInt(str.substring(1 + ebits), 2);

		// Produce number
		if (e === (1 << ebits) - 1) {
			return f !== 0 ? NaN : s * Infinity;
		} else if (e > 0) {
			// Normalized
			return s * Math.pow(2, e - bias) * (1 + f / Math.pow(2, fbits));
		} else if (f !== 0) {
			// Denormalized
			return s * Math.pow(2, -(bias - 1)) * (f / Math.pow(2, fbits));
		} else {
			return s < 0 ? -0 : 0;
		}
	}

	function unpackFloat64(b) {
		return unpackIEEE754(b, 11, 52);
	}

	function packFloat64(v) {
		return packIEEE754(v, 11, 52);
	}

	function unpackFloat32(b) {
		return unpackIEEE754(b, 8, 23);
	}

	function packFloat32(v) {
		return packIEEE754(v, 8, 23);
	}

	//
	// 3 The ArrayBuffer Type
	//
	(function() {

		/** @constructor */
		var ArrayBuffer = function ArrayBuffer(length) {
			length = ECMAScript.ToInt32(length);
			if (length < 0) {
				throw new RangeError('ArrayBuffer size is not a small enough positive integer.');
			}

			this.byteLength = length;
			this._bytes = [];
			this._bytes.length = length;

			var i;
			for (i = 0; i < this.byteLength; i += 1) {
				this._bytes[i] = 0;
			}

			configureProperties(this);
		};

		//
		// 4 The ArrayBufferView Type
		//
		// NOTE: this constructor is not exported
		/** @constructor */
		var ArrayBufferView = function ArrayBufferView() {
			// this.buffer = null;
			// this.byteOffset = 0;
			// this.byteLength = 0;
		};

		//
		// 5 The Typed Array View Types
		//

		function makeTypedArrayConstructor(bytesPerElement, pack, unpack) {
			// Each TypedArray type requires a distinct constructor instance with
			// identical logic, which this produces.
			var ctor;
			ctor = function(buffer, byteOffset, length) {
				var array, sequence, i, s;

				if (!arguments.length || typeof arguments[0] === 'number') {
					// Constructor(unsigned long length)
					this.length = ECMAScript.ToInt32(arguments[0]);
					if (length < 0) {
						throw new RangeError('ArrayBufferView size is not a small enough positive integer.');
					}

					this.byteLength = this.length * this.BYTES_PER_ELEMENT;
					this.buffer = new ArrayBuffer(this.byteLength);
					this.byteOffset = 0;
				} else if (typeof arguments[0] === 'object' && arguments[0].constructor === ctor) {
					// Constructor(TypedArray array)
					array = arguments[0];

					this.length = array.length;
					this.byteLength = this.length * this.BYTES_PER_ELEMENT;
					this.buffer = new ArrayBuffer(this.byteLength);
					this.byteOffset = 0;

					for (i = 0; i < this.length; i += 1) {
						this._setter(i, array._getter(i));
					}
				} else if (typeof arguments[0] === 'object' && !(arguments[0] instanceof ArrayBuffer || ECMAScript.Class(arguments[0]) === 'ArrayBuffer')) {
					// Constructor(sequence<type> array)
					sequence = arguments[0];

					this.length = ECMAScript.ToUint32(sequence.length);
					this.byteLength = this.length * this.BYTES_PER_ELEMENT;
					this.buffer = new ArrayBuffer(this.byteLength);
					this.byteOffset = 0;

					for (i = 0; i < this.length; i += 1) {
						s = sequence[i];
						this._setter(i, Number(s));
					}
				} else if (typeof arguments[0] === 'object' && (arguments[0] instanceof ArrayBuffer || ECMAScript.Class(arguments[0]) === 'ArrayBuffer')) {
					// Constructor(ArrayBuffer buffer,
					// optional unsigned long byteOffset, optional unsigned long length)
					this.buffer = buffer;

					this.byteOffset = ECMAScript.ToUint32(byteOffset);
					if (this.byteOffset > this.buffer.byteLength) {
						throw new_INDEX_SIZE_ERR(); // byteOffset out of range
					}

					if (this.byteOffset % this.BYTES_PER_ELEMENT) {
						// The given byteOffset must be a multiple of the element
						// size of the specific type, otherwise an exception is raised.
						// throw new_INDEX_SIZE_ERR();
						throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");
					}

					if (arguments.length < 3) {
						this.byteLength = this.buffer.byteLength - this.byteOffset;

						if (this.byteLength % this.BYTES_PER_ELEMENT) {
							throw new_INDEX_SIZE_ERR(); // length of buffer minus byteOffset not a multiple of the element size
						}
						this.length = this.byteLength / this.BYTES_PER_ELEMENT;
					} else {
						this.length = ECMAScript.ToUint32(length);
						this.byteLength = this.length * this.BYTES_PER_ELEMENT;
					}

					if ((this.byteOffset + this.byteLength) > this.buffer.byteLength) {
						throw new_INDEX_SIZE_ERR(); // byteOffset and length reference an area beyond the end of the buffer
					}
				} else {
					throw new TypeError("Unexpected argument type(s)");
				}

				this.constructor = ctor;

				configureProperties(this);
				makeArrayAccessors(this);
			};

			ctor.prototype = new ArrayBufferView();
			ctor.prototype.BYTES_PER_ELEMENT = bytesPerElement;
			ctor.prototype._pack = pack;
			ctor.prototype._unpack = unpack;
			ctor.BYTES_PER_ELEMENT = bytesPerElement;

			// getter type (unsigned long index);
			ctor.prototype._getter = function(index) {
				if (arguments.length < 1) {
					throw new SyntaxError("Not enough arguments");
				}

				index = ECMAScript.ToUint32(index);
				if (index >= this.length) {
					// throw new_INDEX_SIZE_ERR(); // Array index out of range
					return (void 0); // undefined
				}

				var bytes = [], i, o;
				for (i = 0, o = this.byteOffset + index * this.BYTES_PER_ELEMENT; i < this.BYTES_PER_ELEMENT; i += 1, o += 1) {
					bytes.push(this.buffer._bytes[o]);
				}
				return this._unpack(bytes);
			};

			// NONSTANDARD: convenience alias for getter: type get(unsigned long index);
			ctor.prototype.get = ctor.prototype._getter;

			// setter void (unsigned long index, type value);
			ctor.prototype._setter = function(index, value) {
				if (arguments.length < 2) {
					throw new SyntaxError("Not enough arguments");
				}

				index = ECMAScript.ToUint32(index);
				if (index >= this.length) {
					// throw new_INDEX_SIZE_ERR(); // Array index out of range
					return;
				}

				var bytes = this._pack(value), i, o;
				for (i = 0, o = this.byteOffset + index * this.BYTES_PER_ELEMENT; i < this.BYTES_PER_ELEMENT; i += 1, o += 1) {
					this.buffer._bytes[o] = bytes[i];
				}
			};

			// void set(TypedArray array, optional unsigned long offset);
			// void set(sequence<type> array, optional unsigned long offset);
			ctor.prototype.set = function(index, value) {
				if (arguments.length < 1) {
					throw new SyntaxError("Not enough arguments");
				}
				var array, sequence, offset, len, i, s, d, byteOffset, byteLength, tmp;

				if (typeof arguments[0] === 'object' && arguments[0].constructor === this.constructor) {
					// void set(TypedArray array, optional unsigned long offset);
					array = arguments[0];
					offset = ECMAScript.ToUint32(arguments[1]);

					if (offset + array.length > this.length) {
						throw new_INDEX_SIZE_ERR(); // Offset plus length of array is out of range
					}

					byteOffset = this.byteOffset + offset * this.BYTES_PER_ELEMENT;
					byteLength = array.length * this.BYTES_PER_ELEMENT;

					if (array.buffer === this.buffer) {
						tmp = [];
						for (i = 0, s = array.byteOffset; i < byteLength; i += 1, s += 1) {
							tmp[i] = array.buffer._bytes[s];
						}
						for (i = 0, d = byteOffset; i < byteLength; i += 1, d += 1) {
							this.buffer._bytes[d] = tmp[i];
						}
					} else {
						for (i = 0, s = array.byteOffset, d = byteOffset; i < byteLength; i += 1, s += 1, d += 1) {
							this.buffer._bytes[d] = array.buffer._bytes[s];
						}
					}
				} else if (typeof arguments[0] === 'object' && typeof arguments[0].length !== 'undefined') {
					// void set(sequence<type> array, optional unsigned long offset);
					sequence = arguments[0];
					len = ECMAScript.ToUint32(sequence.length);
					offset = ECMAScript.ToUint32(arguments[1]);

					if (offset + len > this.length) {
						throw new_INDEX_SIZE_ERR(); // Offset plus length of array is out of range
					}

					for (i = 0; i < len; i += 1) {
						s = sequence[i];
						this._setter(offset + i, Number(s));
					}
				} else {
					throw new TypeError("Unexpected argument type(s)");
				}
			};

			// TypedArray subarray(long begin, optional long end);
			ctor.prototype.subarray = function(start, end) {
				function clamp(v, min, max) {
					return v < min ? min : v > max ? max : v;
				}

				start = ECMAScript.ToInt32(start);
				end = ECMAScript.ToInt32(end);

				if (arguments.length < 1) {
					start = 0;
				}
				if (arguments.length < 2) {
					end = this.length;
				}

				if (start < 0) {
					start = this.length + start;
				}
				if (end < 0) {
					end = this.length + end;
				}

				start = clamp(start, 0, this.length);
				end = clamp(end, 0, this.length);

				var len = end - start;
				if (len < 0) {
					len = 0;
				}

				return new this.constructor(this.buffer, start * this.BYTES_PER_ELEMENT, len);
			};

			return ctor;
		}

		var Int8Array = makeTypedArrayConstructor(1, packInt8, unpackInt8);
		var Uint8Array = makeTypedArrayConstructor(1, packUint8, unpackUint8);
		var Int16Array = makeTypedArrayConstructor(2, packInt16, unpackInt16);
		var Uint16Array = makeTypedArrayConstructor(2, packUint16, unpackUint16);
		var Int32Array = makeTypedArrayConstructor(4, packInt32, unpackInt32);
		var Uint32Array = makeTypedArrayConstructor(4, packUint32, unpackUint32);
		var Float32Array = makeTypedArrayConstructor(4, packFloat32, unpackFloat32);
		var Float64Array = makeTypedArrayConstructor(8, packFloat64, unpackFloat64);

		if (USE_NATIVE_IF_AVAILABLE) {
			global.ArrayBuffer = global.ArrayBuffer || ArrayBuffer;
			global.Int8Array = global.Int8Array || Int8Array;
			global.Uint8Array = global.Uint8Array || Uint8Array;
			global.Int16Array = global.Int16Array || Int16Array;
			global.Uint16Array = global.Uint16Array || Uint16Array;
			global.Int32Array = global.Int32Array || Int32Array;
			global.Uint32Array = global.Uint32Array || Uint32Array;
			global.Float32Array = global.Float32Array || Float32Array;
			global.Float64Array = global.Float64Array || Float64Array;
		} else {
			global.ArrayBuffer = ArrayBuffer;
			global.Int8Array = Int8Array;
			global.Uint8Array = Uint8Array;
			global.Int16Array = Int16Array;
			global.Uint16Array = Uint16Array;
			global.Int32Array = Int32Array;
			global.Uint32Array = Uint32Array;
			global.Float32Array = Float32Array;
			global.Float64Array = Float64Array;
		}
	}());

	//
	// 6 The DataView View Type
	//
	(function() {
		function r(array, index) {
			return ECMAScript.IsCallable(array.get) ? array.get(index) : array[index];
		}

		var IS_BIG_ENDIAN = (function() {
			var u16array = new Uint16Array([ 0x1234 ]), u8array = new Uint8Array(u16array.buffer);
			return r(u8array, 0) === 0x12;
		}());

		// Constructor(ArrayBuffer buffer,
		// optional unsigned long byteOffset,
		// optional unsigned long byteLength)
		/** @constructor */
		var DataView = function DataView(buffer, byteOffset, byteLength) {
			if (arguments.length === 0) {
				buffer = new ArrayBuffer(0);
			} else if (!(buffer instanceof ArrayBuffer || ECMAScript.Class(buffer) === 'ArrayBuffer')) {
				throw new TypeError("TypeError");
			}

			this.buffer = buffer || new ArrayBuffer(0);

			this.byteOffset = ECMAScript.ToUint32(byteOffset);
			if (this.byteOffset > this.buffer.byteLength) {
				throw new_INDEX_SIZE_ERR(); // byteOffset out of range
			}

			if (arguments.length < 3) {
				this.byteLength = this.buffer.byteLength - this.byteOffset;
			} else {
				this.byteLength = ECMAScript.ToUint32(byteLength);
			}

			if ((this.byteOffset + this.byteLength) > this.buffer.byteLength) {
				throw new_INDEX_SIZE_ERR(); // byteOffset and length reference an area beyond the end of the buffer
			}

			configureProperties(this);
		};

		// TODO: Reintroduce this to get correct hierarchy
		// if (typeof ArrayBufferView === 'function') {
		// DataView.prototype = new ArrayBufferView();
		// }

		function makeDataView_getter(arrayType) {
			return function(byteOffset, littleEndian) {

				byteOffset = ECMAScript.ToUint32(byteOffset);

				if (byteOffset + arrayType.BYTES_PER_ELEMENT > this.byteLength) {
					throw new_INDEX_SIZE_ERR(); // Array index out of range
				}
				byteOffset += this.byteOffset;

				var uint8Array = new Uint8Array(this.buffer, byteOffset, arrayType.BYTES_PER_ELEMENT), bytes = [], i;
				for (i = 0; i < arrayType.BYTES_PER_ELEMENT; i += 1) {
					bytes.push(r(uint8Array, i));
				}

				if (Boolean(littleEndian) === Boolean(IS_BIG_ENDIAN)) {
					bytes.reverse();
				}

				return r(new arrayType(new Uint8Array(bytes).buffer), 0);
			};
		}

		DataView.prototype.getUint8 = makeDataView_getter(Uint8Array);
		DataView.prototype.getInt8 = makeDataView_getter(Int8Array);
		DataView.prototype.getUint16 = makeDataView_getter(Uint16Array);
		DataView.prototype.getInt16 = makeDataView_getter(Int16Array);
		DataView.prototype.getUint32 = makeDataView_getter(Uint32Array);
		DataView.prototype.getInt32 = makeDataView_getter(Int32Array);
		DataView.prototype.getFloat32 = makeDataView_getter(Float32Array);
		DataView.prototype.getFloat64 = makeDataView_getter(Float64Array);

		function makeDataView_setter(arrayType) {
			return function(byteOffset, value, littleEndian) {

				byteOffset = ECMAScript.ToUint32(byteOffset);
				if (byteOffset + arrayType.BYTES_PER_ELEMENT > this.byteLength) {
					throw new_INDEX_SIZE_ERR(); // Array index out of range
				}

				// Get bytes
				var typeArray = new arrayType([ value ]), byteArray = new Uint8Array(typeArray.buffer), bytes = [], i, byteView;

				for (i = 0; i < arrayType.BYTES_PER_ELEMENT; i += 1) {
					bytes.push(r(byteArray, i));
				}

				// Flip if necessary
				if (Boolean(littleEndian) === Boolean(IS_BIG_ENDIAN)) {
					bytes.reverse();
				}

				// Write them
				byteView = new Uint8Array(this.buffer, byteOffset, arrayType.BYTES_PER_ELEMENT);
				byteView.set(bytes);
			};
		}

		DataView.prototype.setUint8 = makeDataView_setter(Uint8Array);
		DataView.prototype.setInt8 = makeDataView_setter(Int8Array);
		DataView.prototype.setUint16 = makeDataView_setter(Uint16Array);
		DataView.prototype.setInt16 = makeDataView_setter(Int16Array);
		DataView.prototype.setUint32 = makeDataView_setter(Uint32Array);
		DataView.prototype.setInt32 = makeDataView_setter(Int32Array);
		DataView.prototype.setFloat32 = makeDataView_setter(Float32Array);
		DataView.prototype.setFloat64 = makeDataView_setter(Float64Array);

		if (USE_NATIVE_IF_AVAILABLE) {
			global.DataView = global.DataView || DataView;
		} else {
			global.DataView = DataView;
		}

	}());

}(this));
</script><script language="javascript" id="dataViewJs" class="ggw_resource">
/* 
 * DataView.js:
 * An implementation of the DataView class on top of typed arrays.
 * Useful for Firefox 4 which implements TypedArrays but not DataView.
 *
 * Copyright 2011, David Flanagan
 *
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 *
 *   Redistributions of source code must retain the above copyright notice, 
 *   this list of conditions and the following disclaimer.
 *
 *   Redistributions in binary form must reproduce the above copyright notice, 
 *   this list of conditions and the following disclaimer in the documentation.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" 
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE 
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE 
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE 
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR 
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE 
 * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) 
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT 
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT 
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
"use strict";

(function(global) {
    // If DataView already exists, do nothing
    if (global.DataView) return;

    // If ArrayBuffer is not supported, fail with an error
    if (!global.ArrayBuffer) fail("ArrayBuffer not supported");

    // If ES5 is not supported, fail
    if (!Object.defineProperties) fail("This module requires ECMAScript 5");

    // Figure if the platform is natively little-endian.
    // If the integer 0x00000001 is arranged in memory as 01 00 00 00 then
    // we're on a little endian platform. On a big-endian platform we'd get
    // get bytes 00 00 00 01 instead.
    var nativele = new Int8Array(new Int32Array([1]).buffer)[0] === 1;

    // A temporary array for copying or reversing bytes into.
    // Since js is single-threaded, we only need this one static copy
    var temp = new Uint8Array(8);

    // The DataView() constructor
    global.DataView = function DataView(buffer, offset, length) {
        if (!(buffer instanceof ArrayBuffer)) fail("Bad ArrayBuffer");

        // Default values for omitted arguments
        offset = offset || 0;
        length = length || (buffer.byteLength - offset);

        if (offset < 0 || length < 0 || offset + length > buffer.byteLength) fail("Illegal offset and/or length");

        // Define the 3 read-only, non-enumerable ArrayBufferView properties
        Object.defineProperties(this, {
            buffer: {
                value: buffer,
                enumerable: false,
                writable: false,
                configurable: false
            },
            byteOffset: {
                value: offset,
                enumerable: false,
                writable: false,
                configurable: false
            },
            byteLength: {
                value: length,
                enumerable: false,
                writable: false,
                configurable: false
            },
            _bytes: {
                value: new Uint8Array(buffer, offset, length),
                enumerable: false,
                writable: false,
                configurable: false
            }
        });
    }

    // The DataView prototype object
    global.DataView.prototype = {
        constructor: DataView,

        getInt8: function getInt8(offset) {
            return get(this, Int8Array, 1, offset);
        },
        getUint8: function getUint8(offset) {
            return get(this, Uint8Array, 1, offset);
        },
        getInt16: function getInt16(offset, le) {
            return get(this, Int16Array, 2, offset, le);
        },
        getUint16: function getUint16(offset, le) {
            return get(this, Uint16Array, 2, offset, le);
        },
        getInt32: function getInt32(offset, le) {
            return get(this, Int32Array, 4, offset, le);
        },
        getUint32: function getUint32(offset, le) {
            return get(this, Uint32Array, 4, offset, le);
        },
        getFloat32: function getFloat32(offset, le) {
            return get(this, Float32Array, 4, offset, le);
        },
        getFloat64: function getFloat32(offset, le) {
            return get(this, Float64Array, 8, offset, le);
        },


        setInt8: function setInt8(offset, value) {
            set(this, Int8Array, 1, offset, value);
        },
        setUint8: function setUint8(offset, value) {
            set(this, Uint8Array, 1, offset, value);
        },
        setInt16: function setInt16(offset, value, le) {
            set(this, Int16Array, 2, offset, value, le);
        },
        setUint16: function setUint16(offset, value, le) {
            set(this, Uint16Array, 2, offset, value, le);
        },
        setInt32: function setInt32(offset, value, le) {
            set(this, Int32Array, 4, offset, value, le);
        },
        setUint32: function setUint32(offset, value, le) {
            set(this, Uint32Array, 4, offset, value, le);
        },
        setFloat32: function setFloat32(offset, value, le) {
            set(this, Float32Array, 4, offset, value, le);
        },
        setFloat64: function setFloat64(offset, value, le) {
            set(this, Float64Array, 8, offset, value, le);
        }
    };

    // The get() utility function used by the get methods


    function get(view, type, size, offset, le) {
        if (offset === undefined) fail("Missing required offset argument");

        if (offset < 0 || offset + size > view.byteLength) fail("Invalid index: " + offset);

        if (size === 1 || !! le === nativele) {
            // This is the easy case: the desired endianness 
            // matches the native endianness.
            // Typed arrays require proper alignment.  DataView does not.
            if ((view.byteOffset + offset) % size === 0) return (new type(view.buffer, view.byteOffset + offset, 1))[0];
            else {
                // Copy bytes into the temp array, to fix alignment
                for (var i = 0; i < size; i++)
                temp[i] = view._bytes[offset + i];
                // Now wrap that buffer with an array of the desired type
                return (new type(temp.buffer))[0];
            }
        } else {
            // If the native endianness doesn't match the desired, then
            // we have to reverse the bytes
            for (var i = 0; i < size; i++)
            temp[size - i - 1] = view._bytes[offset + i];
            return (new type(temp.buffer))[0];
        }
    }

    // The set() utility function used by the set methods


    function set(view, type, size, offset, value, le) {
        if (offset === undefined) fail("Missing required offset argument");
        if (value === undefined) fail("Missing required value argument");

        if (offset < 0 || offset + size > view.byteLength) fail("Invalid index: " + offset);

        if (size === 1 || !! le === nativele) {
            // This is the easy case: the desired endianness 
            // matches the native endianness.
            if ((view.byteOffset + offset) % size === 0) {
                (new type(view.buffer, view.byteOffset + offset, 1))[0] = value;
            } else {
                (new type(temp.buffer))[0] = value;
                // Now copy the bytes into the view's buffer
                for (var i = 0; i < size; i++)
                view._bytes[i + offset] = temp[i];
            }
        } else {
            // If the native endianness doesn't match the desired, then
            // we have to reverse the bytes
            // Store the value into our temporary buffer
            (new type(temp.buffer))[0] = value;

            // Now copy the bytes, in reverse order, into the view's buffer
            for (var i = 0; i < size; i++)
            view._bytes[offset + i] = temp[size - 1 - i];
        }
    }

    function fail(msg) {
        throw new Error(msg);
    }
}(this)); </script><script language="javascript" id="base64Js" class="ggw_resource">/// Code can be found at: https://gist.github.com/1284012

(function() {

	var a64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/', a256 = {
		indexOf : function(c) {
			return c.charCodeAt(0);
		},
		charAt : String.fromCharCode
	};

	function code(s, discard, alpha, beta, w1, w2) {
		s = String(s);
		var b = 0, x = '', i, c, bs = 1, sb = 1, length = s.length, tmp;
		for (i = 0; i < length || (!discard && sb > 1); i += 1) {
			b *= w1;
			bs *= w1;
			if (i < length) {
				c = alpha.indexOf(s.charAt(i));
				if (c <= -1 || c >= w1) {
					throw new RangeError();
				}
				sb *= w1;
				b += c;
			}
			while (bs >= w2) {
				bs /= w2;
				if (sb > 1) {
					tmp = b;
					b %= bs;
					x += beta.charAt((tmp - b) / bs);
					sb /= w2;
				}
			}
		}
		return x;
	}

	if (!("btoa" in window))
		window.btoa = function(s) {
			s = code(s, false, a256, a64, 256, 64);
			return s + '===='.slice((s.length % 4) || 4);
		};

	if (!("atob" in window))
		window.atob = function(s) {
			var i;
			s = String(s).split('=');
			for (i = s.length - 1; i >= 0; i -= 1) {
				if (s[i].length % 4 === 1) {
					throw new RangeError();
				}
				s[i] = code(s[i], true, a64, a256, 64, 256);
			}
			return s.join('');
		};

})();
</script><script language="javascript" id="realsenseinfoJs" class="ggw_resource">/*******************************************************************************

INTEL CORPORATION PROPRIETARY INFORMATION
This software is supplied under the terms of l license agreement or nondisclosure
agreement with Intel Corporation and may not be copied or disclosed except in
accordance with the terms of that agreement
Copyright(c) 2014 Intel Corporation. All Rights Reserved.

*******************************************************************************/

/**
 * @function RealSenseInfo
 * Returns information about platform compatibility with Intel� RealSense� and HTTP link(s) if installation/update required
 * 
 * @param [String] components   Array of strings with name of required components, for example ['face', 'hand']
 * @param {Function} callback   Callback receives object with the following properties
 *  IsReady             {Boolean} if true, platform ready to run Intel� RealSense� SDK
 *  IsBrowserSupported  {Boolean} if false, browser doesn't support web sockets
 *  IsPlatformSupported {Boolean} if false, platform doesn't have Intel� RealSense� 3D Camera
 *  Updates             {Array}   if not empty, array of required installation/update as array of object(s) with the following properties
                                    url  {String} HTTP address
                                    name {String} Friendly name
                                    href {String} HTTP link with address and name
 
 Example:
   RealSenseInfo(['face3d', 'hand'], function (info) {
      // check if (info.IsReady == true)
   })
*/

function RealSenseInfo(components, callback) {
    var RUNTIME_VERSION = "2.0";
    var RUNTIME_NAME = "Intel(R) RealSense(TM) SDK runtime setup";
    var RUNTIME_URL = "https://software.intel.com/en-us/realsense/websetup_v2.exe";

    versionCompare = function (left, right) {
        if (typeof left != 'string') return 0;
        var l = left.split('.');

        if (typeof right != 'string') return 0;
        var r = right.split('.');

        var length = Math.max(l.length, r.length);

        for (i = 0; i < length; i++) {
            if ((l[i] && !r[i] && parseInt(l[i]) > 0) || (parseInt(l[i]) > parseInt(r[i]))) {
                return 1;
            } else if ((r[i] && !l[i] && parseInt(r[i]) > 0) || (parseInt(l[i]) < parseInt(r[i]))) {
                return -1;
            }
        }

        return 0;
    }

    try {
        var xhr = new XMLHttpRequest();
        var url = 'http://localhost:4182/Intel/RealSense/v2/' + JSON.stringify(components);
        xhr.open("GET", url, true);
        xhr.timeout = 1000;
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4) {
                var info = JSON.parse(xhr.responseText);
                info.responseText = xhr.responseText;
                info.IsBrowserSupported = "WebSocket" in window;
                info.IsPlatformSupported = 'DCM' in info;
                info.Updates = new Array();
                if (info.IsPlatformSupported) {
                    var update = false;
                    //if (versionCompare(DCM_VERSION, info.DCM_version) > 0) info.Updates.push({ 'url': DCM_URL, 'name': DCM_NAME, 'href' : '<l href="' + DCM_URL + '">' + DCM_NAME + '</l>' });
                    if (!('runtime' in info) || versionCompare(RUNTIME_VERSION, info.runtime) > 0) update = true;
                    if (components != null) {
                        for (i = 0; i < components.length; i++) {
                            if (!(components[i] in info)) update = true;
                        }
                    }
                    if (update) info.Updates.push({ 'url': RUNTIME_URL, 'name': RUNTIME_NAME, 'href': '<l href="' + RUNTIME_URL + '">' + RUNTIME_NAME + '</l>' });
                }
                info.IsReady = info.IsPlatformSupported && info.IsBrowserSupported && info.Updates.length == 0;
                callback(info);
            }
        }
        xhr.ontimeout = function () {
            var info = new Object();
            info.responseText = 'Cannot get info from server';
            info.IsPlatformSupported = false;
            info.IsBrowserSupported = "WebSocket" in window;
            info.Updates = new Array();
            info.IsReady = false;
            callback(info);
        }
        xhr.send(null);
    } catch (exception) {
    }
}
</script><style class="ggw_resource">/*
 * MathQuillGGB is a fork of MathQuill used and incorporated in
 * the mobile, touch and web versions of GeoGebra.
 *
 *
 * Information on the original license of MathQuill:
 * LaTeX Math in pure HTML and CSS -- No images whatsoever
 * v0.xa
 * by Jay and Han
 * Lesser GPL Licensed: http: //www.gnu.org/licenses/lgpl.html
 * Project Website: http://mathquill.com
 *
 *
 * Information on MathQuillGGB:
 * This file was modified by Arpad Fekete on behalf of GeoGebra Inc.
 * The file became part of the web version of the software GeoGebra.
 * Appropriate license terms apply.
 *
 * This file is automatically included by mathquillggb.js
 */

.mathquillggb-editable {
  color: black;
  display: -moz-inline-box;
  display: inline-block;
  /*padding-top: .075em;? for GeoGebra */
  /*we should use the same padding/margin as the cursor did*/
  
  /*removed by Steffi to avoid jumping when editing is started and stopped*/
  /*padding: 4px 5px;
  margin: 2px 2px;*/
  margin-top: -1px;
  margin-bottom: -1px;
  position: relative;
  z-index: 3;
}

.GeoGebraFrame .mathquillggb-editable var,
.GeoGebraFrame .mathquillggb-editable span,
.GeoGebraFrame .mathquillggb-editable td{
	color:black;
}

.mathquillggb-editable .cursor {
  border-left: 1px solid black;
  margin-right: -1px;
  position: relative;
  z-index: 4;
  /*padding: 0;*/
  display: -moz-inline-box;
  display: inline-block;
}
.mathquillggb-editable .cursor.blink {
  visibility: hidden;
}
.mathquillggb-embedded-latex .mathquillggb-editable {
  /*border: 1px solid gray;*/
  padding: 2px;
}
.mathquillggb-embedded-latex .mathquillggb-editable {
  margin: 1px;
}
.hasCursorPermanent {
	position: relative;
	min-width: 100%;
	min-height: 50px;
	line-height: 50px;
	display: inline-block;
  	border-top: #6161FF solid 1px;
  	border-bottom: #6161FF solid 1px;
	background: #FFFFFF;
	padding: 4px 10px;
	box-sizing: border-box !important;
	-moz-box-sizing: border-box !important;
}
.hasCursorPermanent > span {
	vertical-align: middle;
	text-align: left;
}
.mathquillggb-editable.hasCursor {
  	/*border: #6161FF solid 1px;*/
  	border: 0px;
	background: #FFFFFF;
}
.mathquillggb-editable .hasCursor {
  	/*border: #6161FF solid 1px;*/
  	border: 0px;
	background: #FFFFFF;
	/*padding: 4px 5px;*/
	padding: 0px;
	/*margin: 2px 2px;*/
	margin: 0px;
}
.mathquillggb-editable .latex-command-input {
  color: inherit;
  font-family: "Courier New", monospace;
  border: 1px solid gray;
  padding-right: 1px;
  margin-right: 1px;
  margin-left: 2px;
}
.mathquillggb-editable .latex-command-input.empty {
  background: transparent;
}
.mathquillggb-editable .latex-command-input.hasCursor {
  /* System colors from CSS2, Firefox & IE */
  border-color: ActiveBorder;
}
.mathquillggb-editable.empty:after,
.mathquillggb-textbox:after,
.mathquillggb-rendered-math .empty:after {
  visibility: hidden;
  content: 'c';
}
.mathquillggb-editable .cursor:only-child:after,
.mathquillggb-editable .textarea + .cursor:last-child:after {
  visibility: hidden;
  content: 'c';
}
.mathquillggb-editable .text .cursor:only-child:after {
  content: '';
}
.mathquillggb-textbox {
  overflow-x: auto;
  overflow-y: hidden;
}
.mathquillggb-rendered-math {
/*  color: black; */
  font-variant: normal;
  font-weight: normal;
  font-style: normal;
  /*font-size: 115%;*/
  line-height: 1;
  display: -moz-inline-box;
  display: inline-block;
  white-space: nowrap;
}
.mathquillggb-rendered-math .text.quotationtext,
.mathquillggb-editable .text.quotationtext {
  /*
  monospace surely removes overline from sqrt sign,
  apart from that we shall only use specific fonts
  about which we know they do not add overline to the
  next character when sqrt sign is used! This
  selection comes from web-styles.css, so it is
  probably compatible with the current styles
  ... and adding the same to web-styles.css as sqrtFontFix
  */
  font-family: Arial Unicode MS, Arial, monospace !important;
}
.mathquillggb-rendered-math .non-leaf,
.mathquillggb-rendered-math .scaled {
  display: -moz-inline-box;
  display: inline-block;
}
.mathquillggb-rendered-math var,
.mathquillggb-rendered-math .text,
.mathquillggb-rendered-math .nonSymbola {
  /*font-family: geogebra-serif, "Times New Roman", serif;*/
  /*line-height: .9;*/
}
.mathquillggb-rendered-math * {
  font-size: inherit;
  line-height: inherit;
  margin: 0;
  padding: 0;
  border-color: black;/* Is this line needed? */
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
  white-space: pre;
}
.mathquillggb-rendered-math .empty {
  background: #ccc;
}
.mathquillggb-rendered-math.empty {
  background: transparent;
}
.mathquillggb-rendered-math .text {
/*
  font-size: 87%;
*/
}
.mathquillggb-rendered-math .font,
.mathquillggb-editable {
  /*font: 1em geogebra-serif, "Times New Roman", serif;*/
  font-size: 1em;
  font-style: normal;
  font-variant: normal;
  font-weight: normal;
  line-height: normal;
}
.mathquillggb-rendered-math .font *,
.mathquillggb-editable * {
  font-family: inherit;
  font-style: inherit;
}
.mathquillggb-rendered-math .font .text {
  /*font-family: geogebra-serif, "Times New Roman", serif;*/
}
.mathquillggb-rendered-math b,
.mathquillggb-rendered-math b.font {
  font-weight: bolder;
}
.mathquillggb-rendered-math var {
  font-style: normal;
}
.mathquillggb-rendered-math i,
.mathquillggb-rendered-math i.font {
  font-style: italic;
}
.mathquillggb-rendered-math var.florin {
  margin: 0 -0.1em;
}
.mathquillggb-rendered-math big {
  font-size: 125%;
}
.mathquillggb-rendered-math .roman {
  font-style: normal;
}
.mathquillggb-rendered-math .sans-serif {
  font-family: geogebra-sans-serif, sans-serif, serif;
}
.mathquillggb-rendered-math .monospace {
  font-family: monospace, serif;
}
.mathquillggb-rendered-math .text.sans-serif,
.mathquillggb-rendered-math .font .text.sans-serif,
.mathquillggb-editable .text.sans-serif {
  font-family: geogebra-sans-serif, sans-serif, serif;
}
.mathquillggb-rendered-math .overline {
  border-top: 1px solid;
  margin-top: 1px;
}
.mathquillggb-rendered-math .underline {
  border-bottom: 1px solid;
  margin-bottom: 1px;
}
.mathquillggb-rendered-math .binary-operator {
  padding: 0 0.2em;
  display: -moz-inline-box;
  display: inline-block;
}
.mathquillggb-rendered-math .unary-operator {
  padding-left: 0.2em;
}
.mathquillggb-rendered-math sup,
.mathquillggb-rendered-math sub {
  position: relative;
  font-size: 90%;
}
.mathquillggb-rendered-math sup .binary-operator,
.mathquillggb-rendered-math sub .binary-operator {
  padding: 0 .1em;
}
.mathquillggb-rendered-math sup .unary-operator,
.mathquillggb-rendered-math sub .unary-operator {
  padding-left: .1em;
}
.mathquillggb-rendered-math sup.nthroot,
.mathquillggb-rendered-math sub.nthroot {
  font-size: 80%;
}
.mathquillggb-rendered-math sup .limit,
.mathquillggb-rendered-math sub .limit {
  font-size: 100%;
  vertical-align: -0.4em;
}
.mathquillggb-rendered-math sup .fraction,
.mathquillggb-rendered-math sub .fraction {
  font-size: 70%;
  vertical-align: -0.4em;
}
.mathquillggb-rendered-math sup .limittop,
.mathquillggb-rendered-math sub .limittop,
.mathquillggb-rendered-math sup .numerator,
.mathquillggb-rendered-math sub .numerator {
  padding-bottom: 0;
}
.mathquillggb-rendered-math sup .limitbottom,
.mathquillggb-rendered-math sub .limitbottom,
.mathquillggb-rendered-math sup .denominator,
.mathquillggb-rendered-math sub .denominator {
  padding-top: 0;
}
.mathquillggb-rendered-math sup {
  vertical-align: .5em;
}
.mathquillggb-rendered-math sup.limit,
.mathquillggb-rendered-math sup.nthroot {
  vertical-align: 1em;
}
.mathquillggb-rendered-math sup.nthroot {
  margin-right: -0.6em;
  margin-left: .2em;
  min-width: .5em;
}
.mathquillggb-rendered-math sub {
  vertical-align: -0.4em;
}
.mathquillggb-rendered-math sub.limit {
  vertical-align: -0.6em;
}
.mathquillggb-rendered-math .paren {
  padding: 0 .1em;
  vertical-align: bottom;
  -webkit-transform-origin: bottom center;
  -moz-transform-origin: bottom center;
  -ms-transform-origin: bottom center;
  -o-transform-origin: bottom center;
  transform-origin: bottom center;
}
.mathquillggb-rendered-math .array {
  vertical-align: middle;
  text-align: center;
}
.mathquillggb-rendered-math .array > span {
  display: block;
}
.mathquillggb-rendered-math .non-italicized-function {
  font-family: geogebra-serif, "Times New Roman", serif;
  /*line-height: .9;*/
  font-style: normal;
  padding-right: .2em;
}
.mathquillggb-rendered-math .hat {
	padding-bottom: 0px;
	margin-bottom: -0.9em;
}
.mathquillggb-rendered-math .vbottom {
	vertical-align: bottom;
}
.mathquillggb-rendered-math .fraction {
  font-size: 90%;
  text-align: center;
  vertical-align: -0.5em;
  padding: 0 .2em;
}
.mathquillggb-rendered-math .fraction,
.mathquillggb-rendered-math .limit,
.mathquillggb-rendered-math x:-moz-any-link {
  display: -moz-groupbox;
}
.mathquillggb-rendered-math .fraction,
.mathquillggb-rendered-math .limit,
.mathquillggb-rendered-math x:-moz-any-link,
.mathquillggb-rendered-math x:default {
  display: inline-block;
}
.mathquillggb-rendered-math .limit {
  vertical-align: -0.8em;
  text-align: center;
  padding: 0 .2em;
}
.mathquillggb-rendered-math .limittop,
.mathquillggb-rendered-math .limitbottom,
.mathquillggb-rendered-math .numerator,
.mathquillggb-rendered-math .denominator {
  display: block;
}
.mathquillggb-rendered-math .numerator,
.mathquillggb-editable .hasCursor.numerator {
  width: 100%;
  border-bottom: 1px solid;
  padding: 0 0.1em;
  margin-right: -0.1em;
  margin-left: -0.1em;
  margin-bottom: -0.115em;
}
.mathquillggb-rendered-math .denominator,
.mathquillggb-editable .hasCursor.denominator {
  float: right;
  width: 100%;
  padding: 0 0.1em;
  margin-right: -0.1em;
  margin-left: -0.1em;
  margin-top: 0.2em;
}
.mathquillggb-rendered-math .limittop {
  width: 100%;
  padding: 0 0.1em;
  margin-right: -0.1em;
  margin-left: -0.1em;
  margin-bottom: -0.6em;
}
.mathquillggb-rendered-math .limitbottom {
  font-size: 80%;
  float: right;
  width: 100%;
  padding: 0 0.1em;
  margin-right: -0.1em;
  margin-left: -0.1em;
}
.mathquillggb-rendered-math .denominator .sqrt-parent {
  margin-top: 0.215em;
}
.mathquillggb-rendered-math .sqrt-parent,
.mathquillggb-rendered-math .paren-parent {
  margin-top: 1px;
  padding: 0px;
  margin-bottom:0px;
  margin-left:0px;
  margin-right:0px;
}
.paren-parent.paren-parent-colored > .paren {
  color: blue;
}
.mathquillggb-rendered-math .sqrt-prefix {
  padding-top: 0px;
  vertical-align: top;
  -webkit-transform-origin: right top;
  -moz-transform-origin: right top;
  -ms-transform-origin: right top;
  -o-transform-origin: right top;
  transform-origin: right top;
}
.mathquillggb-rendered-math .sqrt-stem,
.mathquillggb-editable .hasCursor.sqrt-stem {
  border-top: 1px solid;
  margin-top: 0px;
  padding-left: .15em;
  padding-right: .2em;
  margin-right: .1em;
}
.mathquillggb-rendered-math,
.mathquillggb-rendered-math .mathquillggb-editable {
  cursor: text;
  font-family: geogebra-serif, "Times New Roman", serif;
}
.mathquillggb-rendered-math table {
  border-collapse: collapse;
}
.mathquillggb-rendered-math td {
  width: auto;
  padding: 0.2em 0;
  text-align: center;
}
.mathquillggb-rendered-math td:first-child {
  text-align: right;
}
.mathquillggb-rendered-math td:last-child {
  text-align: left;
}
.mathquillggb-rendered-math td.empty {
  background-color: transparent;
}
.mathquillggb-rendered-math td.hackedmq,
.mathquillggb-rendered-math td.hackedmq:first-child,
.mathquillggb-rendered-math td.hackedmq:last-child {
	padding: 0px;
	text-align: center;
}
.mathquillggb-rendered-math td.hackedmq span.down {
	position: relative;
	bottom: -4px;
	top: 4px;
}
.mathquillggb-rendered-math td.hackedmq span.up {
	position: relative;
	bottom: 3px;
	top: -3px;
}	
.mathquillggb-eqnarray {
  display: block;
}
.mathquillggb-rendered-math .selection,
.mathquillggb-editable .selection,
.mathquillggb-rendered-math .selection .non-leaf,
.mathquillggb-editable .selection .non-leaf,
.mathquillggb-rendered-math .selection .scaled,
.mathquillggb-editable .selection .scaled {
  background: #B4D5FE /*!important*/;

  /* System colors from CSS2, Firefox & IE */
  /* considered harmful in modern browsers */
  /*background: Highlight !important;*/
  /*color: HighlightText;*/
  /*border-color: HighlightText;*/
}
.mathquillggb-rendered-math .selection.blur,
.mathquillggb-editable .selection.blur,
.mathquillggb-rendered-math .selection.blur .non-leaf,
.mathquillggb-editable .selection.blur .non-leaf {
  background: #D4D4D4 /*!important*/;
  color: black;
  border-color: black;
}

.mathquillggb-rendered-math .selectable{
	width:1px;
	overflow:hidden;	
}

.mathquillggb-editable .textarea,
.mathquillggb-rendered-math .textarea {
  -webkit-user-select: text;
  -moz-user-select: text;
  user-select: text;

  /* position: fixed does not work when transform or backface-visibility is used in Chrome */
  /*position:fixed; is doing a lot of trouble in Chrome, but  we may need it in IE */
  position: absolute;
  top: 0px;

  /* "left" will be adjusted with scrollLeft position */
  left: 0px;

  /* this should be invisible! */
  z-index: -32000;
  /* although clip is for absolute position, necessary! */
  /* as it is deprecated, may cause CSS challenges later */
  clip: rect(1em 1em 1em 1em);

  /* top/left will be specified dynamically, depending on scrollbar */

  /* why not? */
  width: 1px;
  height: 1px;
}

.mathquillggb-editable .textarea textarea,
.mathquillggb-rendered-math .textarea textarea {
  -webkit-user-select: text;
  -moz-user-select: text;
  user-select: text;
  /*position: relative;
  z-index: -32001;*/
  /*clip: rect(1em 1em 1em 1em);*/

  /* why not? */
  width: 1px;
  height: 1px;
}

.mathquillggb-editable .selectable,
.mathquillggb-rendered-math .selectable {
  /* above newer hacks not applied to non-textarea */
  /* old behaviour kept in this case */
  -webkit-user-select: text;
  -moz-user-select: text;
  user-select: text;
  position: absolute;
  clip: rect(1em 1em 1em 1em);
}
/**
 * The file contains styles for GWT widgets in the Clean theme.
 *
 * In order to maintain cross-browser compatibility, the following syntax is
 * used to create IE6 specific style rules:
 *    .gwt-Widget {
 *      property: rule applies to all browsers
 *      -property: rule applies only to IE6 (overrides previous rule)
 *    }
 *    * html .gwt-Widget {
 *      property: rule applies to all versions of IE
 *    }
 */
/* .GeoGebraFrame * {
	box-sizing: content-box;
	-webkit-box-sizing: content-box;
}

.GeoGebraFrame img {
	vertical-align: baseline;
}
.GeoGebraFrame {
	background-color: white;
} */
/**
 * The reference theme can be used to determine when this style sheet has
 * loaded.  Create a hidden div element with absolute position, assign the style
 * name below, and attach it to the DOM.  Use a timer to detect when the
 * element's height and width are set to 5px.
 */
.GeoGebraFrame button {
  border: none;
  background: none;
  padding: 0px;
  margin: 0px;
}
/* .InputTreeItem, */
.GeoGebraFrame .gwt-Tree .gwt-TreeItem .elem {
  position: relative;
}
.sqrtFontFix {
  /*
  monospace surely removes overline from sqrt sign,
  apart from that we shall only use specific fonts
  about which we know they do not add overline to the
  next character when sqrt sign is used! This
  selection comes from web-styles.css, so it is
  probably compatible with the current styles
  ... the same is there in mathquillggb.css
  */

  font-family: Arial Unicode MS, Arial, monospace !important;
}
.XButtonPanelParent {
  position: relative !important;
}
.GeoGebraFrame .InputTreeItemParent {
  /* afaik, ::after is relative this this element this way */

  position: relative !important;
  display: block !important;
  box-sizing: border-box;
  padding-right: 40px;
  width: 100%;
  /* moved here from another CSS rule with the same name */

  padding-top: 0px !important;
}
.InputTreeItemParent::after {
  /* Hiding .InputTreeItem scrollbar by overlapping it! */

  /* a different solution would use clipping (i.e. overflow: hidden) */

  /* with negative margins and/or relative positioning and/or */

  /* and/or vertical-align and/or absolute positioning, */

  /* but all of them turned out to be more difficult than this solution */

  content: "";
  position: absolute;
  display: block;
  bottom: 0px;
  left: 0px;
  right: 0px;
  height: 18px;
  width: 100%;
  /* on mobile browsers z-index is needed for whatever reason. 10 is not enough for Win8 */

  z-index: 98;
  /* or whatever is the background-color of Algebra View */

  /* TODO: may be put elsewhere in CSS too */

  background-color: white;
}
.InputTreeItem {
  overflow-x: scroll;
  overflow-y: hidden;
  direction: ltr;
  /* so that it shall have the same cursor as MathQuillGGB editing */

  cursor: text;
  /* push the scrollbar down so that ::after can kill it*/

  padding-bottom: 18px;
  /* may need to hide blue selected background */

  background-color: white;
}
.InputTreeItem * {
  /* some of its descendants would not naturally get it */

  /* probably because of GWT or web-styles.css */

  cursor: text !important;
}
.AdvancedFocusPanelsTextarea {
  position: absolute;
  top: 0px;
  left: 0px;
  width: 1px;
  height: 1px;
  z-index: -32000;
  /* almost good, but caret is still visible in IE */

  /* so we shall use things from MathQuillGGB */

  clip: rect(1em 1em 1em 1em);
  padding: 0px;
  font-size: 0px;
  -webkit-transform: scale(0);
  resize: none;
  -webkit-user-select: text;
  -moz-user-select: text;
  user-select: text;
}
/*hack for toolbar submenu, that is isn't hidden by 
 dockpanel standard div styling (overflow:hidden) */
/* .ggbdockpanelhack>div {
	overflow: visible !important;
} */
/* body.application,
.GeoGebraFrame,
.GeoGebraFrame span,
.GeoGebraFrame td,
.GeoGebraFrame th {
	color: #666666;
	font-size: 16px;
} */
/* .mathquillggb-editable span,
.mathquillggb-editable td{
	color:black;
} */
/* scroll overflow for minWidth*/
/*.GeoGebraFrame .ggbdockpanelhack.wholePanel {
	min-width: 760px;
}*/*.GeoGebraFrame.minWidth > div {
  overflow-x: auto !important;
}
/* end */
.GeoGebraFrame input[type="text"],
.GeoGebraFrame .gwt-TextBox,
.GeoGebraFrame select,
.GeoGebraFrame textarea,
.GeoGebraFrame .gwt-TextArea,
.GeoGebraFrame .gwt-SuggestBox,
.GeoGebraFrame iframe.objectPropertiesTextEditor {
  border: #DCDCDC solid 1px;
  background: #FFFFFF;
  padding: 4px 5px;
  color: #666666;
  -webkit-border-radius: 5px;
  -khtml-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  font-size: 100%;
  font-family: geogebra-sans-serif, Arial Unicode MS, Arial, sans-serif;
  box-shadow: inset 1px 1px rgba(102, 102, 102, 0.1);
}
.GeoGebraFrame input[type="text"]:focus,
.gwt-TextBox:focus,
.GeoGebraFrame select:focus,
.GeoGebraFrame textarea:focus,
.gwt-TextArea:focus,
.GeoGebraFrame iframe.objectPropertiesTextEditor:focus {
  border-color: #6161FF;
}
/* avoid 'x' in IE */
input[type="text"]::-ms-clear {
  display: none;
}
.GeoGebraFrame input[type="range"] {
  /*margin: 0px;*/

  padding: 5px 0px;
  margin: 0px 10px;
}
.gwt-TextBox-readonly,
.gwt-TextArea-readonly {
  color: #CCC;
}
.GeoGebraFrame hr {
  height: 0px;
  border: none;
  border-bottom: 1px solid #DCDCDC;
}
.clear {
  clear: both;
  margin: 0px;
  padding: 0px;
}
.gwt-Reference-clean {
  height: 5px;
  width: 5px;
  zoom: 1;
}
.gwt-FileUpload {
  margin-bottom: 10px;
  font-size: 80%;
}
.GeoGebraFrame .gwt-Button,
.buttonPanel .button,
.headerbar .headerSecond .signInButton,
.gwt-DialogBox .gwt-Button,
.DialogButtonPanel .gwt-Button,
.inputHelp-detailPanelTitle .gwt-Button,
.optionsPopup .gwt-Button {
  border-radius: 5px;
  -moz-border-radius: 5px;
  border: 1px solid #6161FF;
  color: #6161FF;
  background: none;
  font-size: 110%;
  padding: 4px 15px;
  box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.65), 0px 0px 2px rgba(204, 204, 204, 0.5);
  cursor: pointer;
  cursor: hand;
  margin-left: 5px;
  min-height: 0px;
}
/* Pop-up Exam Mode Dialog */
.ExamCheckboxPanel {
  margin: 10px 20px;
}
.examCheckbox {
  line-height: 2em;
  display: block;
}
.boxsize {
  width: 340px;
  max-width: 100%;
  /*height: 200px;*/

}
.examContent {
  /*min-width:260px;*/

}
.examScrollPanel {
  overflow: auto;
  min-height: 100px;
  max-height: 350px;
  /*min-width:275px;*/

  /*margin: 0px 10px 10px 10px;*/

  padding: 0px 10px 10px 5px;
}
.examMessagePanel {
  margin-right: 30px;
}
.webkitFullscreen:-webkit-full-screen {
  width: 100%;
  height: 100%;
}
.GeoGebraFrame .gwt-Button.minor {
  border-radius: 5px;
  -moz-border-radius: 5px;
  border: 1px solid #999999;
  color: #666666;
  background: none;
  font-size: 110%;
  padding: 4px 15px;
  box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.65), 0px 0px 2px rgba(204, 204, 204, 0.5);
  cursor: pointer;
  cursor: hand;
}
.gwt-Button.minor:hover {
  color: #666666 !important;
  background-color: rgba(204, 204, 204, 0.2);
}
.gwt-Button.minor:active {
  border: 1px inset #999999;
  background-color: rgba(204, 204, 204, 0.2);
}
.gwt-Button.minor[disabled="disabled"]:hover,
.gwt-Button.minor[disabled="disabled"]:active {
  border: 1px solid #999999;
  background-color: none;
}
.gwt-Button:active,
.buttonPanel .button:active,
.headerbar .headerSecond .signInButton:active {
  border: 1px inset #6666FF;
  background-color: rgba(204, 204, 255, 0.2);
}
.gwt-Button:hover,
.confirmDelete .button:hover,
.buttonPanel .button:hover,
.headerbar .headerSecond .signInButton:hover {
  background-color: rgba(204, 204, 255, 0.2);
}
.gwt-Button[disabled="disabled"],
.buttonPanel .button[disabled="disabled"] {
  cursor: default;
  opacity: .5;
  zoom: 1;
  filter: alpha(opacity = 50);
}
.gwt-Button[disabled="disabled"]:hover,
.buttonPanel .button[disabled="disabled"]:hover,
.gwt-Button[disabled="disabled"]:active,
.buttonPanel .button[disabled="disabled"]:active {
  background-color: none;
  border: 1px solid #6161FF;
}
.buttonPanel .button {
  float: right;
}
.textButton {
  color: #6161FF;
  cursor: pointer;
}
.textButton:hover {
  text-decoration: underline;
}
.gwt-CheckBox-disabled,
.checkBoxPanel-disabled {
  color: #CCCCCC;
}
/*.gwt-DecoratorPanel {
	
}

.gwt-DecoratorPanel .topCenter {
	border-top: 1px solid #bbb;
	line-height: 0px;
}

.gwt-DecoratorPanel .bottomCenter {
	border-bottom: 1px solid #bbb;
	line-height: 0px;
}

.gwt-DecoratorPanel .topCenterInner,.gwt-DecoratorPanel .bottomCenterInner
	{
	height: 1px;
	line-height: 0px;
	font-size: 1px;
}

.gwt-DecoratorPanel .middleLeft {
	border-left: 1px solid #bbb;
}

.gwt-DecoratorPanel .middleRight {
	border-right: 1px solid #bbb;
}

.gwt-DecoratorPanel .middleLeftInner,.gwt-DecoratorPanel .middleRightInner
	{
	width: 1px;
	line-height: 1px;
}

.gwt-DecoratorPanel .topLeftInner,.gwt-DecoratorPanel .topRightInner,.gwt-DecoratorPanel .bottomLeftInner,.gwt-DecoratorPanel .bottomRightInner
	{
	width: 5px;
	height: 5px;
	zoom: 1;
	font-size: 1px;
	overflow: hidden;
}

.gwt-DecoratorPanel .topLeft {
	line-height: 0px;
	background: url(images/circles.png) no-repeat 0px -6px;
	-background: url(images/circles_ie6.png) no-repeat 0px -6px;
}

.gwt-DecoratorPanel .topRight {
	line-height: 0px;
	background: url(images/circles.png) no-repeat -5px -6px;
	-background: url(images/circles_ie6.png) no-repeat -5px -6px;
}

.gwt-DecoratorPanel .bottomLeft {
	line-height: 0px;
	background: url(images/circles.png) no-repeat 0px -11px;
	-background: url(images/circles_ie6.png) no-repeat 0px -11px;
}

.gwt-DecoratorPanel .bottomRight {
	line-height: 0px;
	background: url(images/circles.png) no-repeat -5px -11px;
	-background: url(images/circles_ie6.png) no-repeat -5px -11px;
}

* html .gwt-DecoratorPanel .topLeftInner,* html .gwt-DecoratorPanel .topRightInner,* html .gwt-DecoratorPanel .bottomLeftInner,* html .gwt-DecoratorPanel .bottomRightInner
	{
	width: 5px;
	height: 5px;
	overflow: hidden;
}*/
.gwt-DisclosurePanel {
  margin-top: 5px;
}
.gwt-DisclosurePanel .header,
.gwt-DisclosurePanel .header a,
.gwt-DisclosurePanel .header td {
  text-decoration: none;
  /* Remove underline from header */

  cursor: pointer;
  cursor: hand;
  color: #666666;
}
.gwt-DisclosurePanel .content {
  border-left: 3px solid #e7e7e7;
  padding: 4px 0px 4px 8px;
  margin-left: 6px;
}
.gwt-Frame {
  border-top: 2px solid #666;
  border-left: 2px solid #666;
  border-right: 2px solid #bbb;
  border-bottom: 2px solid #bbb;
}
.gwt-HorizontalSplitPanel .hsplitter {
  cursor: move;
  border: 0px;
  background: #e7e7e7;
  line-height: 0px;
}
.gwt-VerticalSplitPanel .vsplitter {
  cursor: move;
  border: 0px;
  background: #e7e7e7;
  line-height: 0px;
}
.gwt-HTML {
  padding: 0 0px;
}
.gwt-Image {
  border: none;
}
body.application[dir=rtl] .gwt-Label {
  text-align: right;
}
.gwt-Label-highlighted {
  color: #6161FF;
}
/* .gwt-MenuBar {
	cursor: default;
}

.gwt-MenuBar .gwt-MenuItem {
	cursor: default;
	font-family: geogebra-sans-serif, Arial Unicode MS, Arial, sans-serif;
}

.gwt-MenuBar .gwt-MenuItem-selected {
	background: #CCCCFF;
} */
/*.gwt-MenuBar-horizontal {
  background: #e3e8f3 url(images/hborder.png) repeat-x 0px -2003px;
  border: 1px solid #e0e0e0;
}*/
.gwt-MenuBar-horizontal .gwt-MenuItem {
  /*padding: 5px 10px;*/

  /*vertical-align: bottom;*/
  /*color: #000;*/
  /*font-weight: bold;*/

}
.gwt-MenuBar .gwt-MenuItem-disabled,
.gwt-MenuBar-horizontal .gwt-MenuItem-disabled {
  color: #DCDCDC;
}
.gwt-MenuBar-horizontal .gwt-MenuItemSeparator {
  width: 1px;
  padding: 0px;
  margin: 0px;
  border: 0px;
  background: white;
  /*border-left: 1px solid #ccc;*/

}
.gwt-MenuBar-horizontal .gwt-MenuItemSeparator .menuSeparatorInner {
  width: 1px;
  height: 1px;
  background: white;
}
/*.gwt-MenuBar-vertical {
	margin-top: 0px;
}

body[dir=ltr] .gwt-MenuBar-vertical {
	margin-left: 0px;
}

body[dir=rtl] .gwt-MenuBar-vertical {
	margin-right: 0px;
}*/
/* .gwt-MenuBar-vertical table {
	border-collapse: collapse;
}

.gwt-MenuBar-vertical .gwt-MenuItem {
	padding: 2px 40px 2px 1px;
}

body[dir=rtl] .gwt-MenuBar-vertical .gwt-MenuItem {
	padding: 2px 1px 2px 40px;
	
}

.gwt-MenuBar-vertical .gwt-MenuItemSeparator {
	padding: 2px 0px;
}

.gwt-MenuBar-vertical .gwt-MenuItemSeparator .menuSeparatorInner {
	height: 1px;
	padding: 0px;
	border: 0px;
	border-top: 1px solid #E0E0E0;
	overflow: hidden;
}

.gwt-MenuBar-vertical .subMenuIcon {
	padding-right: 4px;
}

body[dir=rtl] .gwt-MenuBar-vertical .subMenuIcon {
	padding-left: 4px;
	
}

.gwt-MenuBar-vertical .subMenuIcon-selected {
	background: #CCCCFF;
} */
.gwt-MenuBarPopup {
  margin: 0px 0px 0px 3px;
  z-index: 100;
}
/*body[dir=rtl] .gwt-MenuBarPopup {
  margin: 0px 3px 0px 0px;
}
.gwt-MenuBarPopup .menuPopupTopCenter {
  background: url(images/hborder.png) 0px -12px repeat-x;
}
.gwt-MenuBarPopup .menuPopupBottomCenter {
  background: url(images/hborder.png) 0px -13px repeat-x;
  -background: url(images/hborder_ie6.png) 0px -13px repeat-x;
}
.gwt-MenuBarPopup .menuPopupMiddleLeft {
  background: url(images/vborder.png) -12px 0px repeat-y;
  -background: url(images/vborder_ie6.png) -12px 0px repeat-y;
}
.gwt-MenuBarPopup .menuPopupMiddleRight {
  background: url(images/vborder.png) -13px 0px repeat-y;
  -background: url(images/vborder_ie6.png) -13px 0px repeat-y;
}
.gwt-MenuBarPopup .menuPopupTopLeftInner {
  width: 5px;
  height: 5px;
  zoom: 1;
}
.gwt-MenuBarPopup .menuPopupTopRightInner {
  width: 8px;
  height: 5px;
  zoom: 1;
}
.gwt-MenuBarPopup .menuPopupBottomLeftInner {
  width: 5px;
  height: 8px;
  zoom: 1;
}
.gwt-MenuBarPopup .menuPopupBottomRightInner {
  width: 8px;
  height: 8px;
  zoom: 1;
}
.gwt-MenuBarPopup .menuPopupTopLeft {
  background: url(images/corner.png) no-repeat 0px -36px;
  -background: url(images/corner_ie6.png) no-repeat 0px -36px;
}
.gwt-MenuBarPopup .menuPopupTopRight {
  background: url(images/corner.png) no-repeat -5px -36px;
  -background: url(images/corner_ie6.png) no-repeat -5px -36px;
}
.gwt-MenuBarPopup .menuPopupBottomLeft {
  background: url(images/corner.png) no-repeat 0px -41px;
  -background: url(images/corner_ie6.png) no-repeat 0px -41px;
}
.gwt-MenuBarPopup .menuPopupBottomRight {
  background: url(images/corner.png) no-repeat -5px -41px;
  -background: url(images/corner_ie6.png) no-repeat -5px -41px;
}
* html .gwt-MenuBarPopup .menuPopupTopLeftInner {
  width: 5px;
  height: 5px;
  overflow: hidden;
}
* html .gwt-MenuBarPopup .menuPopupTopRightInner {
  width: 8px;
  height: 5px;
  overflow: hidden;
}
* html .gwt-MenuBarPopup .menuPopupBottomLeftInner {
  width: 5px;
  height: 8px;
  overflow: hidden;
}
* html .gwt-MenuBarPopup .menuPopupBottomRightInner {
  width: 8px;
  height: 8px;
  overflow: hidden;
}*/
.gwt-PasswordTextBox {
  padding: 5px 4px;
  border: 1px solid #ccc;
  border-top: 1px solid #999;
  font-size: 100%;
}
.gwt-PasswordTextBox-readonly {
  color: #888;
}
.gwt-PopupPanel {
  -webkit-border-radius: 10px;
  -khtml-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  padding: 5px;
  background-color: rgba(255, 255, 255, 0.9);
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  z-index: 500;
}
.gwt-PopupPanel.loadinganimation {
  background-color: rgba(255, 255, 255, 0);
  box-shadow: none;
  border-color: transparent;
}
.gwt-DecoratedPopupPanel .popupMiddleCenter {
  padding: 3px;
  background: #f1f1f1;
}
.gwt-DecoratedPopupPanel .popupTopCenter {
  background: url(images/hborder.png) 0px -2937px repeat-x;
}
.gwt-DecoratedPopupPanel .popupBottomCenter {
  background: url(images/hborder.png) repeat-x 0px -2938px;
  -background: url(images/hborder_ie6.png) repeat-x 0px -2138px;
}
.gwt-DecoratedPopupPanel .popupMiddleLeft {
  background: url(images/vborder.png) -21px 0px repeat-y;
}
.gwt-DecoratedPopupPanel .popupMiddleRight {
  background: url(images/vborder.png) repeat-y -24px 0px;
  -background: url(images/vborder_ie6.png) repeat-y -24px 0px;
}
.gwt-DecoratedPopupPanel .popupTopLeftInner {
  width: 6px;
  height: 5px;
  zoom: 1;
}
.gwt-DecoratedPopupPanel .popupTopRightInner {
  width: 6px;
  height: 5px;
  zoom: 1;
}
.gwt-DecoratedPopupPanel .popupBottomLeftInner {
  width: 6px;
  height: 6px;
  zoom: 1;
}
.gwt-DecoratedPopupPanel .popupBottomRightInner {
  width: 6px;
  height: 6px;
  zoom: 1;
}
.gwt-DecoratedPopupPanel .popupTopLeft {
  background: url(images/circles.png) no-repeat 0px -16px;
  -background: url(images/circles_ie6.png) no-repeat 0px -16px;
}
.gwt-DecoratedPopupPanel .popupTopRight {
  background: url(images/circles.png) no-repeat -6px -16px;
  -background: url(images/circles_ie6.png) no-repeat -6px -16px;
}
.gwt-DecoratedPopupPanel .popupBottomLeft {
  background: url(images/circles.png) no-repeat 0px -21px;
  -background: url(images/circles_ie6.png) no-repeat 0px -21px;
}
.gwt-DecoratedPopupPanel .popupBottomRight {
  background: url(images/circles.png) no-repeat -6px -21px;
  -background: url(images/circles_ie6.png) no-repeat -6px -21px;
}
* html .gwt-DecoratedPopupPanel .popupTopLeftInner {
  width: 6px;
  height: 5px;
  overflow: hidden;
}
* html .gwt-DecoratedPopupPanel .popupTopRightInner {
  width: 6px;
  height: 5px;
  overflow: hidden;
}
* html .gwt-DecoratedPopupPanel .popupBottomLeftInner {
  width: 6px;
  height: 6px;
  overflow: hidden;
}
* html .gwt-DecoratedPopupPanel .popupBottomRightInner {
  width: 6px;
  height: 6px;
  overflow: hidden;
}
.gwt-PopupPanelGlass {
  background-color: #FFF;
  opacity: 0.7;
  filter: alpha(opacity = 70);
  /* background-color: #000;
	opacity: 0.3;
	filter: ~'alpha(opacity = 30)'; */

  z-index: 100;
}
/*.gwt-PushButton-up,
.gwt-PushButton-up-hovering,
.gwt-PushButton-up-disabled,
.gwt-PushButton-down,
.gwt-PushButton-down-hovering,
.gwt-PushButton-down-disabled {
  margin: 0;
  text-decoration: none;
  border-radius: 2px;
  -moz-border-radius: 2px;
}*/
/*.gwt-PushButton-up,.gwt-PushButton-up-hovering,.gwt-PushButton-up-disabled
	{ 
	cursor: pointer;
	
}*/
/*.gwt-PushButton-up {
  border:1px solid #bbb;
  border-bottom: 1px solid #a0a0a0;
  cursor: pointer;
  cursor: hand;
}
.gwt-PushButton-up-hovering {
  border: 1px solid;
  border-color: #939393;
  cursor: pointer;
  cursor: hand;
}
.gwt-PushButton-up-disabled {
  border: 1px solid #bbb;
  cursor: default;
  opacity: .5;
  filter: alpha(opacity=45);
  zoom: 1;
}*/
.gwt-PushButton-down,
.gwt-PushButton-down-hovering,
.gwt-PushButton-down-disabled {
  /*padding: 4px 4px 2px 6px;*/
  /*outline:none;*/

}
.gwt-PushButton-down {
  /*border: 1px inset #666;*/
  /*cursor: pointer;
  cursor: hand;*/

}
/*.gwt-PushButton-down-hovering {
  border: 1px solid #939393;
  border-top: 1px solid #333333;
  cursor: pointer;
  cursor: hand;
}
.gwt-PushButton-down-disabled {
  border: 1px outset #ccc;
  cursor: default;
  opacity: 0.5;
  filter: alpha(opacity=45);
  zoom: 1;
}*/
.gwt-RadioButton-disabled {
  color: #888;
}
.hasRichTextToolbar {
  border: 0px;
}
.gwt-RichTextToolbar {
  background: #e3e8f3 url(images/hborder.png) repeat-x 0px -2003px;
  border-bottom: 1px solid #BBBBBB;
  padding: 3px;
  margin: 0px;
}
.gwt-RichTextToolbar .gwt-PushButton-up {
  padding: 0px 1px 0px 0px;
  margin-right: 4px;
  margin-bottom: 4px;
  border-width: 1px;
}
.gwt-RichTextToolbar .gwt-PushButton-up-hovering {
  margin-right: 4px;
  margin-bottom: 4px;
  padding: 0px 1px 0px 0px;
  border-width: 1px;
}
.gwt-RichTextToolbar .gwt-PushButton-down {
  margin-right: 4px;
  margin-bottom: 4px;
  padding: 0px 0px 0px 1px;
  border-width: 1px;
}
.gwt-RichTextToolbar .gwt-PushButton-down-hovering {
  margin-right: 4px;
  margin-bottom: 4px;
  padding: 0px 0px 0px 1px;
  border-width: 1px;
}
.gwt-RichTextToolbar .gwt-ToggleButton-up {
  margin-right: 4px;
  margin-bottom: 4px;
  padding: 0px 1px 0px 0px;
  border: 1px solid #bbb;
  border-bottom: 1px solid #a0a0a0;
}
.gwt-RichTextToolbar .gwt-ToggleButton-up-hovering {
  margin-right: 4px;
  margin-bottom: 4px;
  padding: 0px 1px 0px 0px;
  border-width: 1px;
}
.gwt-RichTextToolbar .gwt-ToggleButton-down {
  margin-right: 4px;
  margin-bottom: 4px;
  padding: 0px 0px 0px 1px;
  border-width: 1px;
}
.gwt-RichTextToolbar .gwt-ToggleButton-down-hovering {
  margin-right: 4px;
  margin-bottom: 4px;
  padding: 0px 0px 0px 1px;
  border-width: 1px;
}
.gwt-StackPanel .gwt-StackPanelItem {
  cursor: pointer;
  cursor: hand;
  font-size: 100%;
  padding: 7px 5px;
  border-top: 1px solid #DCDCDC;
  border-bottom: 1px solid #DCDCDC;
  background: #F8F8F8;
}
.gwt-StackPanel .gwt-StackPanelItem:hover {
  background: #EFEFEF;
}
.gwt-StackPanel .gwt-StackPanelItem-selected {
  background: #EFEFEF;
}
.gwt-StackPanel .gwt-StackPanelItem img {
  float: left;
  margin-right: 10px;
}
.gwt-StackPanel .gwt-StackPanelContent {
  background: #FFFFFF;
}
.gwt-DecoratedStackPanel {
  border-bottom: 1px solid #bbbbbb;
}
.gwt-DecoratedStackPanel .gwt-StackPanelContent {
  border: 1px solid #bbbbbb;
  border-bottom: 0px;
  background: white;
  padding: 2px 2px 10px 5px;
}
.gwt-DecoratedStackPanel .gwt-StackPanelItem {
  cursor: pointer;
  cursor: hand;
}
.gwt-DecoratedStackPanel .stackItemTopLeft,
.gwt-DecoratedStackPanel .stackItemTopRight {
  height: 6px;
  width: 6px;
  zoom: 1;
}
.gwt-DecoratedStackPanel .stackItemTopLeft {
  border-left: 1px solid #bbbbbb;
  background: #d3def6 url(images/corner.png) no-repeat 0px -49px;
  -background: #d3def6 url(images/corner_ie6.png) no-repeat 0px -49px;
}
.gwt-DecoratedStackPanel .stackItemTopRight {
  border-right: 1px solid #bbbbbb;
  background: #d3def6 url(images/corner.png) no-repeat -6px -49px;
  -background: #d3def6 url(images/corner_ie6.png) no-repeat -6px -49px;
}
.gwt-DecoratedStackPanel .stackItemTopLeftInner,
.gwt-DecoratedStackPanel .stackItemTopRightInner {
  width: 1px;
  height: 1px;
}
* html .gwt-DecoratedStackPanel .stackItemTopLeftInner,
* html .gwt-DecoratedStackPanel .stackItemTopRightInner {
  width: 6px;
  height: 6px;
  overflow: hidden;
}
.gwt-DecoratedStackPanel .stackItemTopCenter {
  background: url(images/hborder.png) 0px -21px repeat-x;
}
.gwt-DecoratedStackPanel .stackItemMiddleLeft {
  background: #d3def6 url(images/hborder.png) repeat-x 0px -989px;
  border-left: 1px solid #bbbbbb;
}
.gwt-DecoratedStackPanel .stackItemMiddleLeftInner,
.gwt-DecoratedStackPanel .stackItemMiddleRightInner {
  width: 1px;
  height: 1px;
}
.gwt-DecoratedStackPanel .stackItemMiddleRight {
  background: #d3def6 url(images/hborder.png) repeat-x 0px -989px;
  border-right: 1px solid #bbbbbb;
}
.gwt-DecoratedStackPanel .stackItemMiddleCenter {
  font-weight: bold;
  font-size: 1.3em;
  background: #d3def6 url(images/hborder.png) repeat-x 0px -989px;
}
.gwt-DecoratedStackPanel .gwt-StackPanelItem-first .stackItemTopRight,
.gwt-DecoratedStackPanel .gwt-StackPanelItem-first .stackItemTopLeft {
  border: 0px;
  background-color: white;
}
.gwt-DecoratedStackPanel .gwt-StackPanelItem-below-selected .stackItemTopLeft,
.gwt-DecoratedStackPanel .gwt-StackPanelItem-below-selected .stackItemTopRight {
  background-color: white;
}
.gwt-SuggestBox {
  padding: 2px;
  /*border: 1px solid #ccc;
  border-top: 1px solid #999;*/
  /*font-size: 100%;
  font-family: geogebra-sans-serif, Arial Unicode MS, Arial, sans-serif;*/

  /*width: 96%;*/

  /* temporary fix for the CAS input field --- if it is too wide, this percentage is too small */

  width: 100%;
  /* I think 100% works also fine */

}
.gwt-SuggestBoxPopup {
  -webkit-border-radius: 10px;
  -khtml-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  padding: 5px;
  background-color: rgba(255, 255, 255, 0.9);
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
}
.gwt-SuggestBoxPopup .item {
  padding: 5px 5px;
  cursor: default;
  /*font-size: 110%;*/

}
.gwt-SuggestBoxPopup .item-selected {
  /*background: #D5E2FF;*/

  color: #6666FF;
}
.gwt-ToggleButton-up,
.gwt-ToggleButton-up-hovering,
.gwt-ToggleButton-up-disabled,
.gwt-ToggleButton-down,
.gwt-ToggleButton-down-hovering,
.gwt-ToggleButton-down-disabled {
  /*margin: 0;
	text-decoration: none;*/

}
.TextToggleButton.gwt-ToggleButton-down,
.TextToggleButton.gwt-ToggleButton-down-hovering,
.MyToggleButton.gwt-ToggleButton-down,
.MyToggleButton.gwt-ToggleButton-down-hovering {
  /*color: #6666FF;*/

  border-color: #6666FF;
  cursor: pointer;
  cursor: hand;
}
.TextToggleButton.gwt-ToggleButton-up-hovering,
.MyToggleButton.gwt-ToggleButton-up-hovering,
.MyCanvasButton:hover {
  /*color: #6666FF;*/

  border-color: #CCCCFF;
  cursor: pointer;
  cursor: hand;
}
.TextToggleButton.gwt-ToggleButton-up-disabled,
.TextToggleButton.gwt-ToggleButton-down-disabled,
.button-up-disabled,
.MyToggleButton.gwt-ToggleButton-up-disabled,
.MyToggleButton.gwt-ToggleButton-down-disabled,
.MyCanvasButton.disabled {
  cursor: default !important;
  opacity: .5;
  zoom: 1;
  filter: alpha(opacity = 50);
  /* background: none !important; */

}
.MyCanvasButton.disabled:hover {
  border: #DCDCDC solid 1px;
}
.TextToggleButton.gwt-ToggleButton-up-disabled:focus,
.TextToggleButton.gwt-ToggleButton-down-disabled:focus,
.button-up-disabled:focus,
.MyToggleButton.gwt-ToggleButton-up-disabled:focus,
.MyToggleButton.gwt-ToggleButton-down-disabled:focus {
  outline: none;
}
.TextToggleButton.gwt-ToggleButton-up-disabled:active,
.TextToggleButton.gwt-ToggleButton-down-disabled:active,
.button-up-disabled:active,
.MyToggleButton.gwt-ToggleButton-up-disabled:active,
.MyToggleButton.gwt-ToggleButton-down-disabled:active {
  border: 1px solid #6161FF;
}
.gwt-Tree .gwt-TreeItem {
  padding: 1px 0px;
  margin: 0px;
  white-space: nowrap;
  cursor: hand;
  cursor: pointer;
}
.gwt-Tree .gwt-TreeItem-selected {
  background: #CCCCFF;
}
.gwt-TreeItem .gwt-RadioButton input,
.gwt-TreeItem .gwt-CheckBox input {
  margin-left: 0px;
}
* html .gwt-TreeItem .gwt-RadioButton input,
* html .gwt-TreeItem .gwt-CheckBox input {
  margin-left: -4px;
}
.gwt-DateBox {
  padding: 5px 4px;
  border: 1px solid #ccc;
  border-top: 1px solid #999;
  font-size: 100%;
}
.gwt-DateBox input {
  width: 8em;
}
.dateBoxFormatError {
  background: #ffcccc;
}
.gwt-DatePicker {
  border: 1px solid #ccc;
  border-top: 1px solid #999;
  cursor: default;
}
.gwt-DatePicker td,
.datePickerMonthSelector td:focus {
  outline: none;
}
.datePickerDays {
  width: 100%;
  background: white;
}
.datePickerDay,
.datePickerWeekdayLabel,
.datePickerWeekendLabel {
  font-size: 85%;
  text-align: center;
  padding: 4px;
  outline: none;
  font-weight: bold;
  color: #333;
  border-right: 1px solid #EDEDED;
  border-bottom: 1px solid #EDEDED;
}
.datePickerWeekdayLabel,
.datePickerWeekendLabel {
  background: #fff;
  padding: 0px 4px 2px;
  cursor: default;
  color: #666;
  font-size: 70%;
  font-weight: normal;
}
.datePickerDay {
  padding: 4px 7px;
  cursor: hand;
  cursor: pointer;
}
.datePickerDayIsWeekend {
  background: #f7f7f7;
}
.datePickerDayIsFiller {
  color: #999;
  font-weight: normal;
}
.datePickerDayIsValue {
  background: #d7dfe8;
}
.datePickerDayIsDisabled {
  color: #AAAAAA;
  font-style: italic;
}
.datePickerDayIsHighlighted {
  background: #F0E68C;
}
.datePickerDayIsValueAndHighlighted {
  background: #d7dfe8;
}
.datePickerDayIsToday {
  padding: 3px;
  color: #fff;
  background: url(images/hborder.png) repeat-x 0px -2607px;
}
.datePickerMonthSelector {
  width: 100%;
  padding: 1px 0 5px 0;
  background: #fff;
}
.GeoGebraFrame td.datePickerMonth {
  text-align: center;
  vertical-align: middle;
  white-space: nowrap;
  font-size: 100%;
  font-weight: bold;
  color: #333;
}
.datePickerPreviousButton,
.datePickerNextButton {
  font-size: 120%;
  line-height: 1em;
  color: #3a6aad;
  cursor: hand;
  cursor: pointer;
  font-weight: bold;
  padding: 0px 4px;
  outline: none;
}
.gwt-StackLayoutPanel {
  border-bottom: 1px solid #bbbbbb;
}
.gwt-StackLayoutPanel .gwt-StackLayoutPanelHeader {
  cursor: pointer;
  cursor: hand;
  font-weight: bold;
  font-size: 1.3em;
  padding: 3px;
  border: 1px solid #bbbbbb;
  border-bottom: 0px;
  background: #d3def6 url(images/hborder.png) repeat-x 0px -989px;
}
.gwt-StackLayoutPanel .gwt-StackLayoutPanelHeader-hovering {
  background: #d3def6;
}
.gwt-StackLayoutPanel .gwt-StackLayoutPanelContent {
  border: 1px solid #bbbbbb;
  border-bottom: 0px;
  background: white;
  padding: 2px 2px 10px 5px;
}
.gwt-TabLayoutPanel {
  background-color: #F8F8F8;
}
.gwt-TabLayoutPanel .gwt-TabLayoutPanelTabs,
.gwt-TabBar {
  border-bottom: 1px solid #DCDCDC;
}
.gwt-TabLayoutPanel .gwt-TabLayoutPanelTab,
.gwt-TabBar .gwt-TabBarItem {
  position: relative;
  bottom: -1px;
}
.gwt-TabLayoutPanel .gwt-TabLayoutPanelTab,
.gwt-TabBar .gwt-TabBarItem {
  margin-right: 4px;
  padding: 4px 8px;
  height: 30px;
  cursor: pointer;
  cursor: hand;
  font-weight: normal;
  text-align: center;
  background: #FFFFFF;
  -moz-border-radius: 3px 3px 0px 0px;
  border-radius: 3px 3px 0px 0px;
  border: 1px solid #DCDCDC;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
}
.gwt-TabBarItem div.gwt-Label {
  margin: 0px;
}
.gwt-TabLayoutPanel .gwt-TabLayoutPanelTab img {
  height: 15px;
}
.gwt-TabLayoutPanel .gwt-TabLayoutPanelTab-selected,
.gwt-TabBar .gwt-TabBarItem-selected {
  cursor: default;
  background: white;
  color: #6666FF;
  border-bottom: 1px solid white;
}
.gwt-TabBar .gwt-TabBarItem-disabled {
  display: none;
}
.gwt-TabLayoutPanel .gwt-TabLayoutPanelContent,
.gwt-TabPanelBottom,
.objectPropertiesPanel {
  overflow: auto;
  padding-left: 8px;
  padding-right: 8px;
  padding-top: 8px;
  background-color: #FFFFFF;
  border: 1px solid #DCDCDC;
  border-top: none;
}
.GeoGebraFrame .objectPropertiesPanel {
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  height: 100%;
  border-bottom: none;
}
.GeoGebraFrame .algebraOptions {
  background-color: white;
  height: 100%;
}
.gwt-TabBar .gwt-TabBarFirst,
.gwt-TabBar .gwt-TabBarRest {
  width: 0px;
}
.gwt-DecoratedTabBar {
  background: #ccc;
  padding-top: 6px;
}
.gwt-DecoratedTabBar .gwt-TabBarFirst {
  width: 5px;
  /* first tab distance from the left */

}
.gwt-DecoratedTabBar .gwt-TabBarItem {
  border-collapse: collapse;
  margin-left: 4px;
}
.gwt-DecoratedTabBar .tabTopCenter {
  padding: 0px;
  background: #8E8E8E;
}
.gwt-DecoratedTabBar .tabTopLeft,
.gwt-DecoratedTabBar .tabTopRight {
  padding: 0px;
  zoom: 1;
}
.gwt-DecoratedTabBar .tabTopLeftInner,
.gwt-DecoratedTabBar .tabTopRightInner {
  width: 3px;
  height: 3px;
}
.gwt-DecoratedTabBar .tabTopLeft {
  background: url(images/circles.png) no-repeat 0px 0px;
  -background: url(images/circles_ie6.png) no-repeat 0px 0px;
}
.gwt-DecoratedTabBar .tabTopRight {
  background: url(images/circles.png) no-repeat -3px 0px;
  -background: url(images/circles_ie6.png) no-repeat -3px 0px;
}
* html .gwt-DecoratedTabBar .tabTopLeftInner,
* html .gwt-DecoratedTabBar .tabTopRightInner {
  width: 3px;
  height: 3px;
  overflow: hidden;
}
.gwt-DecoratedTabBar .tabMiddleLeft,
.gwt-DecoratedTabBar .tabMiddleRight {
  width: 3px;
  padding: 0px;
  background: #8E8E8E;
}
.gwt-DecoratedTabBar .tabMiddleLeftInner,
.gwt-DecoratedTabBar .tabMiddleRightInner {
  width: 1px;
  height: 1px;
}
.gwt-DecoratedTabBar .tabMiddleCenter {
  padding: 0px 5px 4px 5px;
  cursor: pointer;
  cursor: hand;
  color: #fff;
  font-weight: normal;
  text-align: center;
  background: #8E8E8E;
}
.gwt-DecoratedTabBar .gwt-TabBarItem-selected .tabTopCenter {
  background: #fff;
}
.gwt-DecoratedTabBar .gwt-TabBarItem-selected .tabTopLeft {
  background: url(images/circles.png) no-repeat -6px 0px;
  -background: url(images/circles_ie6.png) no-repeat -6px 0px;
}
.gwt-DecoratedTabBar .gwt-TabBarItem-selected .tabTopRight {
  background: url(images/circles.png) no-repeat -9px 0px;
  -background: url(images/circles_ie6.png) no-repeat -9px 0px;
}
.gwt-DecoratedTabBar .gwt-TabBarItem-selected .tabMiddleLeft,
.gwt-DecoratedTabBar .gwt-TabBarItem-selected .tabMiddleRight {
  background: #fff;
}
.gwt-DecoratedTabBar .gwt-TabBarItem-selected .tabMiddleCenter {
  cursor: default;
  background: #fff;
  color: #333;
  font-weight: bold;
}
.gwt-DecoratedTabBar .gwt-TabBarItem-disabled .tabMiddleCenter {
  cursor: default;
  color: #999999;
}
.GeoGebraFrame .gwt-SplitLayoutPanel-HDragger {
  cursor: col-resize;
  background: #F8F8F8;
  border-left: 1px solid #DCDCDC;
  border-right: 1px solid #DCDCDC;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
}
.gwt-SplitLayoutPanel-HDragger.disabled {
  cursor: default;
}
.GeoGebraFrame .gwt-SplitLayoutPanel-VDragger {
  cursor: row-resize;
  background: #F8F8F8;
  border-top: 1px solid #DCDCDC;
  border-bottom: 1px solid #DCDCDC;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
}
.gwt-SplitLayoutPanel-HDragger:ACTIVE {
  background: #6161FF;
  border-left: 1px solid #C6C6C6;
  border-right: 1px solid #C6C6C6;
}
.gwt-SplitLayoutPanel-HDragger.disabled:ACTIVE {
  background: #F8F8F8;
  border-left: 1px solid #DCDCDC;
  border-right: 1px solid #DCDCDC;
}
.gwt-SplitLayoutPanel-VDragger:ACTIVE {
  background: #6161FF;
  border-top: 1px solid #C6C6C6;
  border-bottom: 1px solid #C6C6C6;
}
/* Selector used for android chrome */
.gwt-SplitLayoutPanel-Dragger-ACTIVE {
  background: #6161FF;
  border-left: 1px solid #C6C6C6;
  border-right: 1px solid #C6C6C6;
  border-top: 1px solid #C6C6C6;
  border-bottom: 1px solid #C6C6C6;
}
/*************************************************************/
/*           GeoGebraWeb styles from here                    */
/*============ App common styles ============*/
.GeoGebraFrame,
.GeoGebraPopup,
.DialogBox,
.gwt-PopupPanel,
.gwt-SuggestBoxPopup,
.ToolTip,
.PhoneGUI {
  font: 100%/120% geogebra-sans-serif, Frutiger, "Frutiger Linotype", Univers, Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans Condensed", "Liberation Sans", "Nimbus Sans L", Tahoma, Geneva, "Helvetica Neue", Helvetica, Arial, sans-serif;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
}
.GeoGebraFrame *:focus,
.GeoGebraPopup *:focus,
.DialogBox *:focus {
  outline: none;
  /* Fixing Chrome's default outline on focus */

}
.GeoGebraFrame select,
.GeoGebraPopup select,
.DialogBox select {
  /*border: 1px solid gray;*/

  /* Undo fixed styling of Safari dropdowns  */
  /*font-size: smaller;*/

  /*color: #666666;*/

}
/*.GeoGebraPopup {
	padding: 0px;
}*/
.geogebraweb {
  display: inline-block;
  -ms-touch-action: none;
  /* Direct all pointer events to JavaScript code. */

  -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
  /* avoid flash on Android http://stackoverflow.com/questions/5210481/*/

}
.geogebraweb .jsloaded {
  border: 1px solid black;
  position: relative;
}
.GeoGebraFrame.applet-focused {
  border-color: #000000;
}
.GeoGebraFrame.applet-unfocused {
  border-color: #D3D3D3;
}
.geogebraweb .splash {
  position: absolute;
}
/*not let user select the canvas*/
.geogebraweb canvas {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
}
.EuclidianPanel {
  right: 0px;
  left: 0px;
  top: 0px;
  bottom: 0px;
}
/*#####################################################################################
###      CURSORS
#####################################################################################*/
.cursor_wait {
  cursor: wait;
}
.cursor_default {
  cursor: crosshair;
}
.cursor_hit {
  cursor: default;
}
.cursor_drag {
  cursor: pointer;
  cursor: hand;
}
.cursor_resizeXAxis {
  cursor: e-resize;
}
.cursor_resizeYAxis {
  cursor: n-resize;
}
.cursor_move {
  cursor: move;
}
.cursor_transparent {
  cursor: none;
}
/*#####################################################################################
###       GEOGEBRA MENUBAR
#####################################################################################*/
/*.linktoggbtube {
	position:absolute;
	right:20px;
	top:7px;
}

body[dir=rtl] .linktoggbtube {
    right : auto;
    left : 20px;
}

.signIn {
	position:absolute;
	right: 50px;
}

body[dir=rtl] .signIn {
	position:absolute;
	right: auto;
	left: 50px;
}*/
/* .menuContainer {
	left: auto !important;
	top: 53px !important; should be equal to GLookAndFeelI.TOOLBAR_HEIGHT
	z-index: 100;
} */
/* .ggbmenubarwrapper {
	width: 100%;
	height: 100%;
}

.menubarSMART {
	margin-left: 2px;
	box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
	overflow-y: auto;
	background-color: #F8F8F8;
	border-left: 1px solid #DCDCDC;
	height: 100%;
}

.menubarSMART .menuPanel {
	width: 100%;
	border-collapse: collapse;
} */
/* .menubarSMART .gwt-MenuBar .gwt-MenuItem-selected {
	background: none;
}
.menubarSMART .gwt-MenuBar .gwt-MenuItem:hover,
.menubarSMART .gwt-MenuBar .gwt-MenuItem:active {
	background: #CCCCFF;
}


.GeoGebraMenuBar>table {
	margin-top: 5px;
	margin-bottom: 8px;
	width: 100%;
} */
/* .GeoGebraMenuBar .gwt-MenuItem {
	padding: 4px 5px 4px 35px;
	position: relative;
	display: block;
	cursor: pointer;
}

.GeoGebraMenuBar .gwt-RadioButton {
	cursor: pointer;
}

.GeoGebraMenuBar .gwt-MenuItem .GeoGebraMenuImage {
	width: 20px;
	height: 20px;
	position: absolute;
	top: 4px;
	left: 5px;
} */
/* Submenus just for SMART */
/* .GeoGebraMenuBar.subMenuLeftSide {
	right: 280px;
	white-space: nowrap;
	top: -5px;
	position: absolute;
	z-index: 600;
	-webkit-border-radius: 10px;
	-khtml-border-radius: 10px;
	-moz-border-radius: 10px;
	border-radius: 10px;
	padding: 5px;
	background-color: rgba(255, 255, 255, 0.9);
	box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
} */
/* Workaround due to GWT's bug, see ticket #4819 */
/* .GeoGebraMenuBar.subMenuLeftSide.subMenuLeftSide2 {
	right: 10px;
} */
/* .gwt-PopupPanel.subMenuLeftSidePopup {
	box-shadow: none;
	padding: 0px;
	border-radius: 0px;
} */
/* .GeoGebraMenuBar.subMenuLeftSide .gwt-MenuItem {
	padding: 3px 10px;
}

.GeoGebraMenuBar.subMenuLeftSide .arrowSubmenu {
	position: absolute;
	top: 3px;
	right: -15px;
} */
/*.gwt-PopupPanel .popupContent .subMenuLeftSide .arrowSubmenu {
	display: none;
}*/
/* .GeoGebraMenuBar.subMenuLeftSide>table {
	margin: 0px;
}

.GeoGebraMenuBar.subMenuLeftSide input[type="radio"] {
	margin: 0px 5px 0px 0px;
} */
/* .GeoGebraMenuBar.subMenuLeftSide .RadioButtonMenuItem label {
	color: #666666;
	font-size: 100%;
	font-family: geogebra-sans-serif, Arial Unicode MS, Arial, sans-serif;
} */
/* for Tablets */
/* .Tablet .menubarSMART {
	font-size: 115%;
	line-height: 153%;
}

.Tablet .menubarSMART .gwt-StackPanel .gwt-StackPanelItem img {
	margin-top: 5px;
}

.Tablet .menubarSMART .GeoGebraMenuBar .gwt-MenuItem .GeoGebraMenuImage
	{
	top: 8px;
} */
/*#####################################################################################
###       CONTEXT MENU
#####################################################################################*/
/*
Paddings for menuitems.
*/
.gwt-MenuBar-vertical .mi_no_image {
  padding-left: 45px;
}
.gwt-MenuBar-vertical .mi_with_image {
  padding-left: 21px;
}
.gPopupMenu_item {
  white-space: nowrap;
}
.gPopupMenu_item .gwt-HTML {
  margin-top: 2px;
}
.gPopupMenu_item img,
.gwt-MenuItem img {
  vertical-align: top;
  width: 20px !important;
  height: 20px !important;
}
/*#####################################################################################
###       STYLEBAR
#####################################################################################*/
.closeButtonPanel {
  padding: 7px;
}
.ButtonPopupMenu {
  outline: 0 none;
}
.ButtonPopupMenu div:focus {
  border: 1px solid transparent;
}
/*.SelectionTable a {
	text-decoration:none;
	color:black;
	border-radius:none;
    display:block;
    padding:1px;
}

.SelectionTable .gwt-Label:hover,
.SelectionTable .gwt-Label:focus,
.SelectionTable canvas:hover,
.SelectionTable canvas:focus  {
	background: #CCCCFF;
}

.SelectionTable .gwt-Label.selected {
	color: #6161FF;
}*/
/*.SelectionTable canvas {
	border:1px solid transparent;
}

.SelectionTable canvas.selected {
	border: 1px solid black;
}*/
.TitleBarPanel {
  z-index: 11;
  left: auto !important;
  bottom: auto !important;
}
body.application[dir=rtl] .TitleBarPanel {
  left: 0px !important;
  right: auto !important;
}
.TitleBarPanel-open {
  left: 0px !important;
}
.TitleBarPanelContent {
  height: 32px;
  padding: 5px;
  border-bottom-left-radius: 5px;
  background-color: rgba(255, 255, 255, 0.9);
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  padding-right: 40px;
}
body.application[dir=rtl] .TitleBarPanelContent {
  border-bottom-left-radius: 0px;
  border-bottom-right-radius: 5px;
  padding-right: 5px;
  padding-left: 40px;
}
.DragPanel {
  height: 32px;
  padding: 5px;
  border-bottom-left-radius: 5px;
  background-color: rgba(255, 255, 255, 0.9);
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
}
body.application[dir=rtl] .DragPanel {
  border-bottom-left-radius: 0px;
  border-bottom-right-radius: 5px;
}
.TitleBarPanel .toggleStyleBar {
  border: none;
  position: absolute;
  right: 0px;
  background-color: white;
  padding-right: 5px;
  padding-top: 4px;
  padding-left: 5px;
}
.TitleBarPanel .toggleStyleBar.dataAnalysisToggleButton {
  padding-top: 0px;
}
body.application[dir=rtl] .TitleBarPanel .toggleStyleBar {
  right: auto;
  left: 0px;
}
.TitleBarPanel .dragPanel {
  padding-top: 1px;
}
.TitleBarLabel {
  /*font-size: 10px;*/
  /*font-size: 100%;*/

  /*font-weight: bold;*/

}
.StyleBarPanel {
  /*margin: auto 0;
	margin-top: 0px;
	height: 42px;
	box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);*/

  /*display: inline-block;*/

  padding-left: 31px;
}
body.application[dir=rtl] .StyleBarPanel {
  padding-left: 0px;
  padding-right: 31px;
}
.StyleBarPanel_ {
  /*margin: auto 0;
	margin-top: 0px;
	height: 42px;
	box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);*/

  /*display: inline-block;*/

  float: left;
  margin-left: -4px;
}
body.application[dir=rtl] .StyleBarPanel {
  float: right;
  margin-left: 0px;
  margin-right: -4px;
}
.Separator {
  height: 1px;
  background-color: #DCDCDC;
}
.CloseButton {
  padding: 5px;
  margin: 0px;
  width: 15px;
  height: 15px;
}
.DockGlassPane,
.TitleBarPanel {
  cursor: pointer;
  cursor: hand;
  -moz-user-focus: ignore;
  -moz-user-input: disabled;
  -moz-user-select: none;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
}
.VerticalSeparator {
  margin: 0px 2px 0px 5px;
  width: 1px;
  background-color: #DCDCDC;
}
body.application[dir=rtl] .VerticalSeparator {
  margin: 0px 5px 0px 2px;
}
.TextToggleButton,
.MyToggleButton,
.MyCanvasButton {
  text-align: center;
  -webkit-border-radius: 5px;
  -khtml-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  border: #DCDCDC solid 1px;
  background-color: #FFFFFF;
  padding: 3px;
  width: 24px;
  height: 24px;
  margin-left: 4px;
  cursor: pointer;
}
body.application[dir=rtl] .MyToggleButton,
body.application[dir=rtl] .TextToggleButton,
body.application[dir=rtl] .MyCanvasButton {
  margin-left: 0px;
  margin-right: 4px;
}
.MyCanvasButton-borderless {
  border: none;
  padding: 4px;
  /* more padding for the missing border*/

}
.MyCanvasButton-rightaligned {
  float: right;
}
body.application[dir=rtl] .MyCanvasButton-rightaligned {
  float: left;
}
.TextToggleButton.selected,
.MyToggleButton.selected,
.MyCanvasButton.selected {
  border-color: #6666FF;
}
.MyCanvasButton .buttonContent {
  background-repeat: no-repeat;
  background-position: center center;
  width: 24px;
  height: 24px;
}
.MyCanvasButton.btnTextColor .buttonContent,
.btnBold .html-face,
.btnItalic .html-face,
.btnUseAsText .html-face {
  line-height: 22px;
  font-size: 22px;
}
.btnBold .html-face {
  font-weight: bold;
  color: #999999;
}
.btnItalic .html-face {
  font-style: italic;
  color: #999999;
}
.btnSerif {
  width: auto;
}
.btnLatex {
  width: auto;
}
.SelectionTable .gwt-Label {
  background-repeat: no-repeat;
  background-position: center center;
  /*width: 24px;*/
  /*height: 24px;*/
  /*text-align: center;*/

  /* 	-webkit-border-radius: 5px; */
  /* 	-khtml-border-radius: 5px; */

  /* 	-moz-border-radius: 5px; */
  /* 	border-radius: 5px; */

  /* 	border: #DCDCDC solid 1px; */

  padding: 3px;
  cursor: pointer;
}
.gwt-Label.stylebarButton {
  height: 24px;
  width: 24px;
}
.SelectionTable .gwt-Label.border:hover,
.SelectionTable .gwt-Label.border:active,
.SelectionTable .gwt-Label.border.selected {
  background-color: transparent !important;
  border: 1px solid #6161FF;
}
.gwt-Label.border {
  -webkit-border-radius: 5px;
  -khtml-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  border: #DCDCDC solid 1px;
  height: 24px;
  width: 24px;
}
.gwt-Label.textIconButton {
  background-position: center left;
  padding-left: 28px;
  border: none;
  text-align: left;
}
body.application[dir=rtl] .gwt-Label.textIconButton {
  padding-left: 0px;
  padding-right: 28px;
  text-align: right;
  background-position: center right;
}
.gwt-Label.textIconButton:hover,
.gwt-Label.textIconButton:active {
  background-color: none;
}
.SelectionTable .gwt-Label.borderButton {
  border: 1px solid;
  -webkit-border-radius: 5px;
  -khtml-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  height: 24px;
  width: 24px;
}
.SelectionTable a {
  text-decoration: none;
  color: #666666;
  border-radius: none;
  display: block;
  padding: 1px;
}
.SelectionTable a:hover,
.SelectionTable a:focus,
.SelectionTable .gwt-Label:hover,
.SelectionTable .gwt-Label:focus,
.SelectionTable .stylebarButton.selected,
.SelectionTable canvas:hover,
.SelectionTable canvas:focus {
  background-color: #CCCCFF;
}
.SelectionTable .gwt-Label.selected {
  color: #6161FF;
}
.SpreadsheetEditorCell input,
.SpreadsheetEditorCell input[type="text"] {
  border-radius: 0px;
  box-sizing: content-box;
  -webkit-box-sizing: content-box;
  padding: 1px 1px;
  margin: -3px;
}
.editorPanel {
  padding-top: 1px;
  padding-left: 1px;
}
/**
 * The view buttons for these stylebars should take all the remaining place
 * so that they will be right aligned
 */
.SpreadsheetStyleBar td:last-child {
  width: 100%;
}
.CASStyleBar td:last-child {
  width: 100%;
}
.SpreadsheetWrapView {
  background-color: #FFFFFF;
}
.geogebraweb-dummy-invisible {
  position: absolute;
  display: block;
  width: 0px;
  height: 0px;
  line-height: 0px;
  padding: 0px;
  margin: 0px;
  border: 0px;
  outline: 0px;
}
/**
 * According to the CSS2 specification, width will be the greater of
 * this width property and the computed width...
 */
.geogebraweb-table-spreadsheet {
  table-layout: fixed;
  width: 0px;
  cursor: default;
  -ms-touch-action: none;
  empty-cells: show;
}
.geogebraweb-table-spreadsheet td {
  border-right: 1px solid #CCCCCC;
  border-bottom: 1px solid #CCCCCC;
  overflow: hidden;
  padding: 2px 4px;
  white-space: nowrap;
  -ms-touch-action: none;
}
.geogebraweb-table-spreadsheet.off td {
  border-right: 0px;
  border-bottom: 0px;
}
.geogebraweb-table-spreadsheet.upperCorner td {
  background-color: #F8F8F8;
  color: #F8F8F8 !important;
}
.geogebraweb-table-spreadsheet td.SVCenterTD {
  overflow: hidden;
  /* for some reason, overflow:hidden only works well here */

}
.geogebraweb-table-spreadsheet td .SVCenterParent {
  position: relative;
  /* needed as frame of absolute positioning of content */

  overflow: visible;
  /* need overflow:hidden one level up */

  height: 100%;
  /* required to follow the size of TD */

  width: 100%;
  /* required to follow the size of TD */

  top: 0px;
  /* might be required to follow the size of TD - works! */

  left: 0px;
  /* might be required to follow the size of TD - works! */

}
.geogebraweb-table-spreadsheet td .SVCenterParent .SVCenterContent {
  /* this hack is pretty fixed, although its parents can change */

  position: absolute;
  /* needed for overflow to the left/top etc */

  margin: auto;
  /* center to the center of .SVCenterParent (hack) */

  top: -8192px;
  /* needed in case the image is bigger than the cell */

  left: -8192px;
  /* needed in case the image is bigger than the cell */

  bottom: -8192px;
  /* needed in case the image is bigger than the cell */

  right: -8192px;
  /* needed in case the image is bigger than the cell */

}
.geogebraweb-table-spreadsheet td.SVheader {
  padding-left: 0px;
  padding-right: 0px;
  text-align: center;
  background-color: #F8F8F8;
}
.geogebraweb-table-spreadsheet td.SVheader.selected {
  background-color: #CCCCFF;
  color: #333333;
  border-color: #999999;
}
.geogebraweb-table-spreadsheet-lowerLeftCorner {
  border-right: 1px solid #CCCCCC;
  padding: 0px 0px;
}
.geogebraweb-popup-spreadsheet {
  z-index: 11;
}
.geogebraweb-popup-spreadsheet .gwt-MenuBar {
  background-color: white;
}
.geogebraweb-button-spreadsheet,
.geogebraweb-checkbox-spreadsheet,
.geogebraweb-select-spreadsheet {
  position: relative;
  z-index: 10;
}
.geogebraweb-button-spreadsheet {
  text-align: center;
  width: 100%;
  height: 100%;
  padding: 0px;
  margin: 0px;
}
.geogebraweb-checkbox-spreadsheet {
  display: -moz-inline-box;
  display: inline-block;
}
.geogebraweb-select-spreadsheet {
  width: 100%;
}
.geogebraweb-selectionframe-spreadsheet {
  z-index: 6;
  border-style: solid;
  /*border-width: 2px;*/

  border-color: #0000FF;
  -ms-touch-action: none;
  /* prevent scrolling on IE tablets */

}
/*#####################################################################################
###       ALGEBRA INPUT
#####################################################################################*/
.GeoGebraFrame .AlgebraInput {
  background-color: #F8F8F8;
  border-top: 1px solid #DCDCDC;
  display: table;
  box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  box-sizing: border-box;
  width: 100%;
  height: 43px;
  /* 100% breaks applets */

  -moz-box-sizing: border-box;
  z-index: 50;
}
.AlgebraInput > * {
  display: table-cell;
  vertical-align: middle;
  text-align: center;
}
.AlgebraInputLabel {
  padding: 0px 10px;
}
.InputPanel {
  overflow: hidden;
}
.InputPanel .TextField {
  width: 100%;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
}
.InputPanel .html-face,
.AutoCompleteTextFieldW .html-face {
  cursor: hand;
  cursor: pointer;
}
.inputHelp-toggleButton {
  padding: 0px 10px;
}
.inputHelp-toggleButton img {
  cursor: pointer;
}
.SymbolTable td {
  padding: 5px;
}
.SymbolTable td:hover,
.SymbolTable td.focus {
  background: #CCCCFF;
  color: #6666FF;
}
/*.InputPanel input.TextField {
    display:block;
}*/
.historyList {
  min-width: 200px;
  font-size: inherit;
  border: none;
  margin: 0px;
}
.inputHelpToggleButton {
  text-decoration: none;
  border: none;
  background: none;
  width: 100%;
}
/*#####################################################################################
###       TOOLTIP
#####################################################################################*/
.ToolTip {
  display: block;
  font-family: geogebra-sans-serif, Arial Unicode MS, Arial, sans-serif;
  -webkit-border-radius: 10px;
  -khtml-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  padding: 5px 10px;
  background-color: rgba(255, 255, 255, 0.9);
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  z-index: 1000;
}
.toolTipHTML {
  font-size: 80%;
}
/* don't hardcode position here, must work in applets */
.infoTooltip {
  display: block;
  font-family: geogebra-sans-serif, Arial Unicode MS, Arial, sans-serif;
  -webkit-border-radius: 10px;
  -khtml-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  padding: 3px;
  background-color: rgba(51, 51, 51, 0.7);
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  z-index: 1000;
  position: absolute;
  left: 50%;
  color: #FFFFFF;
}
.infoTooltip .infoText {
  padding: 5px 50px;
  display: inline-block;
  cursor: default;
  color: #FFFFFF;
}
.infoTooltip .manualLink {
  border-left: 1px solid #FFFFFF;
  padding: 10px 20px;
  display: inline-block;
  background-repeat: no-repeat;
  background-position: center center;
  padding-top: 100%;
  cursor: pointer;
}
/*#####################################################################################
###       TOOLBAR
#####################################################################################*/
/* .toolbarPanel {
	background-color: #F8F8F8;
	border-bottom: 1px solid #DCDCDC;
	box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
	padding: 5px;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
	z-index: 100;
} */
.toolbarPanelExam {
  background-color: #CCCCFF;
}
/* .GeoGebraFrame .toolbarPanel ul {
	margin: 0px;
	padding: 0px;
} */
/* .toolbar_mainItem {
	margin-right: 50px;
}
body.application[dir=rtl] .toolbar_mainItem {
	margin-right: 0px;
	margin-left: 50px;
} */
/* .GeoGebraFrame li.toolbar_item {
	margin: 0px 5px 0px 0px;
	text-align: center;
	position: relative;
	width: 40px;
	height: 40px;
	display: block;
	float: left;
	list-style-type: none;
	cursor: pointer;
}
body.application[dir=rtl] .toolbar_item {
	float: right;
	margin: 0px 0px 0px 5px;
} */
/* .toolbar_button {
	-webkit-border-radius: 5px;
	-khtml-border-radius: 5px;
	-moz-border-radius: 5px;
	border-radius: 5px;
	border: #DCDCDC solid 1px;
	background-color: #FFFFFF;
	padding: 3px;
	width: 32px;
	height: 32px;
} */
/* .toolbar_button:hover[isSelected=false] {
	border-color: #9999FF;
}

.toolbar_button[isSelected=true] {
	border: 2px solid #6666FF;
	padding: 2px;
}

.toolbar_button[isSelected=false] {
	border-color: #DCDCDC;
} */
/*.red_triangle {
	position: relative;
	width: 8px;
	height: 5px;
	top: -19px;
}*/
/* .furtherToolsTriangle {
	position: absolute;
	bottom: -2px;
	right: -2px;
} */
table.AVmenuListContainer {
  z-index: 501;
  table-layout: auto;
  white-space: nowrap;
}
.AVmenuListContainer .AVmenuListContent {
  z-index: 250;
  padding-top: 3px !important;
  background-color: rgba(255, 255, 255, 0.9);
  overflow-y: auto;
  overflow-x: hidden;
  border: 0px;
  padding: 0px;
  margin: 0px;
}
.AVmenuListContainer .AVmenuListContent li {
  white-space: nowrap;
  list-style-type: none;
  /*height: 32px;*/

  padding: 5px 0px;
  text-align: left;
  cursor: pointer;
}
body.application[dir=rtl] .AVmenuListContainer .AVmenuListContent li {
  text-align: right;
}
.AVmenuListContainer .AVmenuListContent li:hover,
.AVmenuListContainer .AVmenuListContent li:focus {
  color: #333333;
  background-color: #CCCCFF;
}
.AVmenuListContainer .AVmenuListContent img {
  float: left;
  padding-left: 5px;
  padding-right: 5px;
  display: inline;
}
body.application[dir=rtl] .AVmenuListContainer .AVmenuListContent img {
  float: right;
}
.AVmenuListContainer .AVmenuListContent .gwt-Label {
  display: inline;
  /*padding: 7px 5px 0 10px;*/

}
body.application[dir=rtl] .AVmenuListContainer .AVmenuListContent .gwt-Label {
  /*padding: 7px 10px 0 5px;*/

}
/* .toolbar_submenu {
	position: absolute;
	z-index: 501;
	display: none;
}

.toolbar_submenu.visible {
	display: block;
}

.toolbar_submenu .submenuArrow {
	position: absolute;
	z-index: 300;
	left: 4px;
}
body.application[dir=rtl] .toolbar_submenu .submenuArrow {
	left: auto;
	right: 4px;
} */
/* .toolbar_submenu .submenuContent {
	position: absolute;
	top: 15px;	
	z-index: 250;
	-webkit-border-radius: 10px;
	-khtml-border-radius: 10px;
	-moz-border-radius: 10px;
	border-radius: 10px;
	padding: 5px;
	padding-top: 3px !important;
	background-color: rgba(255, 255, 255, 0.9);
	box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
	overflow-y:auto;
	overflow-x:hidden;
} */
/* .toolbar_submenu .submenuContent li {
	white-space: nowrap;
	list-style-type: none;
	height: 32px;
	padding: 5px 0px;
	text-align: left;
	cursor: pointer;
}
body.application[dir=rtl] .toolbar_submenu .submenuContent li {
	text-align: right;
} */
/* .toolbar_submenu .submenuContent li:hover,
.toolbar_submenu .submenuContent li:focus {
	color: #333333;
	background-color: #CCCCFF;
} */
/* .toolbar_button:focus {
	border: 1px solid #6666FF;
} */
/* .toolbar_submenu .submenuContent img {
	float: left;
	padding-left: 5px;
	padding-right: 5px;
}
body.application[dir=rtl] .toolbar_submenu .submenuContent img {
	float: right;
} */
/* .toolbar_submenu .submenuContent .gwt-Label {
	padding: 7px 10px 0 40px;
}
body.application[dir=rtl] .toolbar_submenu .submenuContent .gwt-Label {
	padding: 7px 40px 0 10px;
} */
.gwt-MenuBar-horizontal .toolbarItemSeparator {
  width: 5px;
  padding: 0px;
  margin: 0px;
  border: 0px;
  background: none;
}
.toolbar_menuitem_label {
  position: relative;
  vertical-align: middle;
  margin-left: 5px;
  margin-right: 5px;
  font-size: 80%;
}
.captionPanel td {
  vertical-align: middle;
}
.tdForCaptionLabel {
  vertical-align: middle;
}
.buttonPanel {
  margin: auto;
}
/* .toolBPanel {
	float: left;
	padding-top: 1px;
}
body.application[dir=rtl] .toolBPanel {
	float: right;
}

.smartButtonPanel {
	float: right;
	margin: 5px 0px;
}
body.application[dir=rtl] .smartButtonPanel {
	float: left;
} */
/* .smartButtonPanel .button {
	margin: 0px 5px 0px 10px;
	cursor: pointer;
	float: left;
	width: 30px;	height: 30px;
	padding: 2px;
}
body.application[dir=rtl] .smartButtonPanel .button {
	float: right;
	margin: 0px 10px 0px 5px;
} */
/* .button.redoButton {
	margin-left: 0px;
}
body.application[dir=rtl] .button.redoButton {
	margin-left: 5px;
	margin-right: 0px;
} */
/* .rightButtonPanel .selectedButton {
	padding: 0px;
} */
/*#####################################################################################
###       DIALOGS
#####################################################################################*/
.DialogBox,
.gwt-DialogBox {
  z-index: 501;
  /*box-shadow: 1px 1px 6px 1px #666666;*/

  background-color: rgba(255, 255, 255, 0.9);
  border-radius: 10px;
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  padding: 15px;
}
.gwt-DialogBox .Caption {
  cursor: default;
  font-family: geogebra-sans-serif, Arial Unicode MS, Arial, sans-serif;
  font-size: 110%;
  /*padding: 10px;*/

  padding-bottom: 5px;
  color: #333333;
  border-bottom: 1px solid #DCDCDC;
  margin-bottom: 15px;
  /*background-image: linear-gradient(top, rgb(237, 237, 237) 0%,
		rgb(247, 247, 247) 100% );
	background-image: -o-linear-gradient(top, rgb(237, 237, 237) 0%,
		rgb(247, 247, 247) 100% );
	background-image: -moz-linear-gradient(top, rgb(237, 237, 237) 0%,
		rgb(247, 247, 247) 100% );
	background-image: -webkit-linear-gradient(top, rgb(237, 237, 237) 0%,
		rgb(247, 247, 247) 100% );
	background-image: -ms-linear-gradient(top, rgb(237, 237, 237) 0%,
		rgb(247, 247, 247) 100% );*/

  /*background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, rgb(140,
		150, 170) ), color-stop(1, rgb(247, 247, 247) ) );*/

}
.dialogContent {
  color: #666666;
  /*background-color: #F8F8F8;*/

  /*padding: 0px;
	background-image: none;
	border: none;
	-webkit-border-radius: 0px;
	-khtml-border-radius: 0px;
	-moz-border-radius: 0px;
	border-radius: 0px;*/

}
.dialogContent table {
  width: 100%;
}
.dialogContent input[type="text"],
.dialogContent select {
  margin-top: 5px;
  margin-bottom: 10px;
  /* width: 98%; */

  width: 100%;
}
.dialogContent textarea {
  margin-top: 5px;
}
.dialogContent .optionsPanel > * {
  margin: 3px 0px;
}
.panelRow.rows > * {
  width: 100%;
  display: block;
}
.dialogContent .gwt-CheckBox {
  margin-right: 10px;
}
body.application[dir=rtl] .dialogContent .gwt-CheckBox {
  margin-right: 0px;
  margin-left: 10px;
}
.Dialog-messagePanel {
  margin-bottom: 10px;
}
.Dialog-errorPanel {
  color: red;
}
.Dialog-messagePanel img {
  /* margin: 10px; */

  margin-right: 10px;
}
body.application[dir=rtl] .Dialog-messagePanel img {
  /* margin: 10px; */

  margin-left: 10px;
  margin-right: 0px;
}
.DialogRbPanel {
  margin-top: 10px;
}
.DialogRbPanel td {
  padding-right: 20px;
}
body.application[dir=rtl] .DialogRbPanel td {
  padding-right: 0px;
  padding-left: 20px;
}
.DialogButtonPanel {
  text-align: right;
  padding-top: 10px;
  min-width: 250px;
  max-width: 100%;
}
body.application[dir=rtl] .DialogButtonPanel {
  text-align: left;
}
.DialogButtonPanel button {
  margin-left: 5px;
}
body.application[dir=rtl] .DialogButtonPanel button {
  margin-left: 0px;
  margin-right: 5px;
}
.DialogBox .infoText {
  padding-bottom: 10px;
}
.DialogBox .dialogToolIcon {
  padding: 3px;
  border-radius: 5px;
  border: 1px solid #DCDCDC;
  background-color: #FFF;
}
.DialogBox .DialogButtonPanel .gwt-Button.button-up-disabled,
.DialogBox .buttonPanel .button.button-up-disabled,
.DialogBox .buttonPanel .button.button-up-disabled:hover,
.DialogBox .buttonPanel .button.button-up-disabled:active {
  opacity: 0.3;
  filter: alpha(opacity=30);
  /* For IE8 and earlier */

  cursor: default;
}
.DialogBox .gwt-Button,
.DialogBox .saveButton {
  background-color: #6161FF;
  border: 1px solid #6161FF;
  color: #FFF;
  font-size: 100%;
  box-shadow: none;
  font-weight: normal;
  margin-left: 15px;
}
.DialogBox .gwt-Button:hover,
.DialogBox .saveButton:hover {
  /*border: 1px solid #3333FF;*/

  background-color: #CCCCFF;
  color: #6161FF;
}
.DialogBox .gwt-Button:active,
.DialogBox .saveButton:active {
  /* box-shadow: 0 1px 1px rgba(0,0,0,0.2) inset; */

  box-shadow: 0 1px 3px 0 rgba(51, 51, 255, 0.5) inset;
  /*border: 1px solid #3333FF;*/

  background-color: #CCCCFF;
  color: #6161FF;
}
.DialogBox .gwt-Button.cancelBtn,
.DialogBox .button.cancelBtn,
.DialogBox .gwt-Button.resetBtn,
.DialogBox .button.resetBtn {
  color: #666666;
  border: none;
  background: none;
  text-decoration: underline;
  padding: 5px 0;
  font-size: 100%;
  box-shadow: none;
  font-weight: normal;
}
.DialogBox .gwt-Button.cancelBtn:hover,
.DialogBox .gwt-Button.cancelBtn:active,
.DialogBox .button.cancelBtn:hover,
.DialogBox .button.cancelBtn:active,
.DialogBox .gwt-Button.resetBtn:hover,
.DialogBox .gwt-Button.resetBtn:active,
.DialogBox .button.resetBtn:hover,
.DialogBox .button.resetBtn:active {
  color: #6161FF;
  background-color: none;
  border: none;
}
.TextInputDialog .gwt-ToggleButton {
  padding-right: 6px;
  cursor: hand;
  cursor: pointer;
}
/*--------- saveDialog ---------------------------*/
.buttonPanel .visibility {
  position: absolute;
  left: 55px;
  width: 131px;
  top: 106px;
}
.cancelSaveButton {
  position: absolute;
  top: 10px;
  right: 15px;
  cursor: pointer;
  cursor: hand;
}
/* .GeoGebraFileChooser .buttonPanel .saveButton,
.GeoGebraFileChooser .buttonPanel .saveButton.button-up-disabled {
	background-color: #6161FF !important;
	color: #FFFFFF;
} */
/*---------------- SHARE DIALOG -------------*/
.GeoGebraTabLayout {
  width: 500px;
  height: 200px;
}
.GeoGebraLinkPanel {
  height: 100%;
}
.GeoGebraCopyLinkPanel img {
  margin-top: 10px;
  margin-left: 5px;
  margin-bottom: 10px;
}
.GeoGebraIconPanel {
  display: block;
}
.GeoGebraIconPanel img {
  margin: 5px;
}
.GeoGebraEmailPanel {
  height: 100%;
}
.GeoGebraEmailPanel textarea {
  resize: none;
  width: 100%;
}
.GeoGebraImagePanel {
  height: 100%;
}
/*-------- RECOVER AUTO SAVED DIALOG ------------*/
.RecoverAutoSavedDialog .buttonPanel {
  float: right;
}
.RecoverAutoSavedDialog {
  max-width: 500px;
}
/*-------- SLIDER DIALOG ------------------------*/
.dialogContent .sliderIntervalPanel div,
.dialogContent .sliderWidthPanel div {
  margin-right: 10px;
  display: inline-block;
}
body.application[dir=rtl] .dialogContent .sliderIntervalPanel div,
body.application[dir=rtl] .dialogContent .sliderWidthPanel div {
  margin-right: 0px;
  margin-left: 10px;
  float: right;
}
.dialogContent .sliderIntervalPanel .gwt-Label {
  display: block;
}
.dialogContent .sliderWidthPanel .gwt-Label {
  padding-top: 7px;
}
.dialogContent .sliderPanelWidget {
  min-width: 400px;
  margin-top: 10px;
}
.sliderDialog .dialogContent .gwt-TabPanelBottom {
  min-height: 150px;
  margin-bottom: 15px;
  padding-left: 15px;
  padding-right: 15px;
}
/* ----------- BUTTON DIALOG -------------*/
.buttonDialog .dialogContent {
  min-width: 400px;
}
.buttonDialog .scriptArea {
  width: 100%;
  height: 200px;
}
/* ------------ IMAGE DIALOG -------------*/
.GeoGebraPopup.image .dialogContent .gwt-Label {
  cursor: pointer;
}
.GeoGebraPopup.image .dialogContent .gwt-Label.gwt-Label-highlighted {
  cursor: default;
}
/* Touch */
.GeoGebraPopup.image .inputPanel {
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;
}
/* ----------- TOOLCREATION DIALOG -------------*/
.toolCreationDialog .dialogContent {
  min-width: 400px;
}
/*========= End Dialogs ===========*/
/*========= FileChooser ===========*/
.GeoGebraFileChooser .titlePanel {
  width: 100%;
  padding: 5px;
}
.GeoGebraFileChooser .titlePanel input {
  float: right;
  min-width: 450px;
}
body.application[dir=rtl] .GeoGebraFileChooser .titlePanel input {
  float: left;
}
.GeoGebraFileChooser .titlePanel .gwt-Label {
  padding-right: 10px;
}
body.application[dir=rtl] .GeoGebraFileChooser .titlePanel .gwt-Label {
  padding-right: 0px;
  padding-left: 10px;
}
.GeoGebraFileChooser .descriptionPanel {
  width: 100%;
  padding: 5px;
}
.GeoGebraFileChooser .descriptionPanel textarea {
  float: right;
  min-width: 450px;
}
.GeoGebraFileChooser .descriptionPanel .gwt-Label {
  padding-right: 10px;
}
.GeoGebraFileChooser .radioButtonPanel {
  text-align: center;
  padding-bottom: 10px;
  padding-top: 3px;
}
.GeoGebraFileChooser .radioButtonPanel .gwt-RadioButton {
  padding: 10px;
}
.GeoGebraFileChooser .buttonPanel {
  /* padding: 5px; */

  float: right;
}
.GeoGebraFileChooser .buttonPanel button {
  float: right;
  margin-left: 5px;
}
.GeoGebraFileChooser .buttonPanel a {
  float: right;
  margin-left: 5px;
}
.GoogleFileDescriptors {
  font-size: 80%;
}
.GoogleFileDescriptors .fileLabel {
  padding-right: 3px;
  font-weight: bold;
}
.GoogleFileDescriptors .fileName {
  text-decoration: underline;
}
/*.RadioButtonMenuItem {
	font-size: 80%;
}*/
.linkDownload {
  font: -webkit-small-control;
}
body.application[dir=rtl] .GeoGebraMenuBar table {
  margin-left: auto;
}
.downloadGGB_label {
  margin: 5px;
}
.menuTitle {
  font-weight: bold;
}
.filesPanel {
  width: 100%;
  padding: 20px;
  position: relative;
}
.filesPanel .spinner {
  top: 50%;
  padding-top: 150px;
}
.ggbfilelink {
  display: block;
  text-decoration: underline;
  cursor: pointer;
  padding: 2px 0 2px 20px;
  background: #ffffff url("images/ggb-logo-16x16-white.png") no-repeat left center;
}
.ggbfilelink.selected,
.ggbfilelink:hover {
  background-color: #E3E8F3;
}
.GeoGebraFileChooser {
  font-family: geogebra-sans-serif, Arial Unicode MS, Arial, sans-serif;
}
.GeoGebraFileChooser .buttonPanel .save,
.GeoGebraFileChooser .buttonPanel .cancel {
  width: 60px;
  text-align: center;
  margin: auto;
}
/*========= End FileChooser ===========*/
/*#####################################################################################
###       CAS
#####################################################################################*/
.casView table {
  width: 100%;
  border-collapse: collapse;
}
.CAS_commentLabel {
  color: gray;
  float: left;
  padding-left: 5px;
  padding-right: 10px;
}
.CAS_inputPanel {
  padding: 5px;
  overflow: hidden;
  height: 100%;
}
.CAS-table > tbody > tr > td {
  border-bottom: 1px solid #DCDCDC;
}
.CAS-table .AutoCompleteTextFieldW {
  margin: 4px;
}
.cas_header {
  width: 1px;
  height: 2.5em;
  background-color: #F8F8F8;
}
.cas_header.selected {
  background-color: #CCCCFF;
  color: #333333;
}
.cas_header table td {
  text-align: center;
  padding-left: 2px;
  padding-right: 2px;
}
.CAS_substitute_editTextCell input[type="text"],
.cas_sub_editTextCell select {
  width: 100%;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
.CAS_table_first_row_selected {
  background-color: white;
  position: relative;
  z-index: 20;
}
.CAS_subDialog .gwt-Button {
  width: 40px;
  margin: 3px;
}
/*#####################################################################################
###       SIGN IN DIALOG
#####################################################################################*/
.signInDialog {
  border: 1px solid #5a5d5e;
  border-radius: 5px;
  font-size: 12px;
  color: #5a5d5e;
}
.signInDialog .ggtFrame {
  width: 900px;
  height: 500px;
}
.signInDialog .gwt-Button {
  font-size: 12px;
  background: #fff;
  border: 1px solid #5a5d5e;
}
.signInDialog .gwt-Button:hover {
  border: 1px solid #fff;
  color: #fff;
  background: #5a5d5e;
}
.signInDialog .Caption,
.signInDialog .signInDialogContainer,
.signInDialog .dialogMiddleLeft,
.signInDialog .dialogMiddleRight,
.signInDialog .dialogBottomCenter,
.signInDialog .dialogTopLeft,
.signInDialog .dialogTopRight,
.signInDialog .dialogBottomLeft,
.signInDialog .dialogBottomRight {
  background: #fff;
}
.signInDialog .Caption {
  border: 1px solid transparent;
}
.signInDialog .dialogTopLeft {
  border-top-left-radius: 5px;
}
.signInDialog .dialogTopRight {
  border-top-right-radius: 5px;
}
.signInDialog .dialogBottomLeft {
  border-bottom-left-radius: 5px;
}
.signInDialog .dialogBottomRight {
  border-bottom-right-radius: 5px;
}
.signInDialog .dialogMiddleCenter {
  padding: 0;
}
.signInDialog .headerPanel {
  width: 0px;
  position: realtive;
}
.signInDialog .headerPanel .gwt-Button {
  position: absolute;
  right: -5px;
  top: -5px;
  border-radius: 50%;
  font-weight: bold;
}
body.application[dir=rtl] .signInDialog .headerPanel .gwt-Button {
  right: auto;
  left: -5px;
}
.ggtLoginPanel {
  background-color: #fff;
}
.headerLabel {
  border: 1px solid #5a5d5e;
  padding: 5px;
  font-weight: bold;
  text-align: center;
  font-size: 16px;
  border-radius: 5px;
  background-color: rgba(153, 153, 255, 0.3);
}
/*#####################################################################################
###       NAVIGATION BAR
#####################################################################################*/
.GeoGebraFrame .consProtNav {
  position: absolute;
  background-color: #F8F8F8;
  width: 100%;
  bottom: 0px;
  box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.3);
  border-top: 1px solid #EDEDED;
  cursor: default;
  display: table;
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  padding: 3px;
}
.consProtNav .gwt-Label {
  display: inline;
  padding: 0px 8px;
}
.consProtNav .gwt-PushButton {
  padding: 0px 6px;
  display: inline-block;
  vertical-align: text-top;
}
.consProtNav img.gwt-Image {
  vertical-align: middle;
}
.consProtNav button.gwt-Button {
  margin: 5px;
  background: #FFFFFF;
  border: 1px solid #CDCDCD;
  box-shadow: none;
}
/*.consProtNav .navbar_leftPanel button.gwt-Button {
	padding: 3px;
	width: 35px;
	height: 25px;
}*/
.consProtNav button:hover {
  border-color: #9999FF;
}
.consProtNav button.gwt-Button:active,
.Tablet .consProtNav button.gwt-Button:active {
  border: 1px solid #6666FF !important;
}
/* no border-color for touch */
.Tablet .consProtNav button.gwt-Button:hover {
  border: 1px solid #CDCDCD;
}
.navbar_leftPanel {
  text-align: center;
  white-space: nowrap;
  display: table-cell;
}
.navbar_playPanel {
  text-align: center;
  white-space: nowrap;
  display: table-cell;
}
.navbar_playPanel.navbar_playPanel_padding {
  padding-right: 50px;
}
.consProtNav .navbar_playPanel img.gwt-Image {
  padding-right: 5px;
}
.navbar_btOpenWindow {
  position: absolute;
  right: 8px;
  top: 2px;
}
.consProtNav .navbar_btOpenWindow.consProtIsOpen,
.Tablet .consProtNav button.navbar_btOpenWindow.consProtIsOpen {
  border-color: #6666FF;
}
.ggbSpinner {
  max-width: 60px;
}
/*#####################################################################################
###       Data collection
#####################################################################################*/
/* View - Settings */
.dataCollectionView .closeButtonPanel {
  position: absolute;
  top: 0px;
  right: 0px;
  padding: 5px;
  cursor: pointer;
  cursor: hand;
}
.dataCollectionView .gwt-Label {
  cursor: default;
}
.dataCollectionView .gwt-TabLayoutPanel {
  height: 100%;
}
.dataCollectionView .panelTitle {
  margin-bottom: 10px;
  margin-top: 10px;
  height: 20px;
}
/** CONNECTION */
.dataCollectionView .connection .panelIndent .gwt-TextBox {
  float: left;
  width: 80px;
}
.dataCollectionView .connectButton {
  margin-left: 20px;
  float: left;
}
.dataCollectionView .connectButton:hover {
  border: 1px solid #6666ff;
  cursor: pointer;
  cursor: hand;
}
.dataCollectionView .connectButton.gwt-ToggleButton-down {
  border-color: #DCDCDC !important;
}
.dataCollectionView .sharingCodePanel {
  padding-bottom: 0px;
}
.dataCollectionView .appIdTextBox {
  text-transform: uppercase;
}
/** SETTINGS */
.dataCollectionView .panelIndent {
  display: inline-block;
}
.dataCollectionView .panelIndent .gwt-Label {
  float: left;
  padding-top: 5px;
  padding-right: 15px;
}
.dataCollectionView .collapse {
  float: right;
  padding-top: 2px;
  cursor: pointer;
  cursor: hand;
}
.dataCollectionView .panelTitle .gwt-Label {
  float: left;
  padding-top: 2px;
}
.dataCollectionView .rowContainer {
  display: inline-block;
  width: 100%;
  padding-bottom: 5px;
}
.dataCollectionView .gwt-ListBox {
  float: left;
  height: 31px;
  min-width: 80px;
}
.dataCollectionView .gwt-TextBox.disabled {
  opacity: 0.5;
  pointer-events: none;
}
.dataCollectionView .sensorOnOffButton {
  float: left;
  padding-right: 5px;
}
/*#####################################################################################
###       CONSTRUCTION PROTOCOL
#####################################################################################*/
.cpTable {
  width: 100%;
}
.cpTable th:FIRST-CHILD,
.cpTable td:FIRST-CHILD {
  max-width: 35px;
  min-width: 35px;
}
.cpTable .isDragging {
  background: #CCCCFF;
  cursor: move;
}
.cpTable input[type="text"] {
  width: 100%;
}
.cpScrollPanel {
  width: 100%;
  height: 100%;
  cursor: default;
  background-color: #FFFFFF;
}
.cpTable thead th {
  text-shadow: none;
  color: #666666;
  border-bottom: 2px solid #666666;
  text-align: center;
  background-color: #f8f8f8;
  border-right: 1px solid #DDDDDD;
  border-bottom: 1px solid #DDDDDD;
  padding-left: 2px;
  padding-right: 2px;
  font-weight: normal;
}
.cpScrollPanel tbody tr:hover {
  background: #CCCCFF;
  cursor: move;
}
.cpScrollPanel tbody tr {
  background-color: transparent;
  opacity: 0.9;
}
.cpTable td {
  border: none;
  border-bottom: 1px solid #DDDDDD;
  border-right: 1px solid #DDDDDD;
  padding-left: 2px;
  padding-right: 2px;
}
.cpScrollPanel tbody tr td:FIRST-CHILD {
  background-color: #f8f8f8;
  text-align: center;
}
.cpTable input[type="text"] {
  background-color: transparent;
  border: none;
  box-shadow: none;
}
.cpUpperRightCorner {
  width: 15px;
  background-color: #F8F8F8;
}
.headerTable tbody {
  display: none;
}
.overflowYScroll {
  overflow-y: scroll;
  overflow-x: hidden;
}
.hiddenheader {
  position: relative;
  top: -30px;
}
.hiddenheader thead {
  visibility: hidden;
}
/*
.CpHeaderContainer >*{
	display: inline-block;
}
*/
/* TOUCH */
.dummyDragElem div {
  padding: 10px 15px 10px 15px;
}
/*=========== Construction protocol end =============*/
/*#####################################################################################
###       TEXT EDITOR
#####################################################################################*/
.textEditor {
  border: 1px solid #DCDCDC;
  background-color: #FFFFFF;
  width: 380px;
  height: 100px;
}
.textEditorAdvancedPanel {
  width: 380px;
  height: 180px;
}
.textEditorDisclosurePanelContent {
  margin: 0px;
  padding: 0px;
  border: none;
  font-size: 80%;
}
.textEditorDisclosurePanelHeader {
  /*font-size: 80%;*/

  margin-bottom: 3px;
}
/* ========== Text Editor end ============ */
/*#####################################################################################
###      INPUT HELP
#####################################################################################*/
.inputHelp-tree {
  border: none;
  font-size: 85%;
  line-height: 100%;
  padding: 10px 4px;
}
.inputHelp-treeItem {
  padding: 0px 8px;
  font-weight: bold;
}
.inputHelp-leaf {
  font-weight: normal;
}
.inputHelp-leaf:hover {
  background: #CCCCFF;
}
.inputHelp-detailPanelTitle {
  width: 100%;
  font-size: 85%;
  font-weight: bold;
  padding: 1px 10px;
  border-bottom: 1px solid lightgray;
  cursor: default;
}
.inputHelp-cmdSyntax {
  font-size: 85%;
  margin: 4px;
  padding-top: 10px;
  padding-left: 35px;
  text-indent: -25px;
  line-height: 120%;
  word-wrap: normal;
  cursor: hand;
  cursor: pointer;
}
body.application[dir=rtl] .inputHelp-cmdSyntax {
  padding-left: 0px;
  padding-right: 35px;
}
.inputHelp-CAScmdSyntax {
  font-style: italic;
  color: darkred;
}
.inputHelp-headerCAS {
  font-style: italic;
  color: darkred;
  text-decoration: underline;
}
.inputHelp-functionTable {
  font-size: 85%;
  padding: 10px;
}
.inputHelp-functionTable td {
  padding: 0px 4px;
  line-height: 160%;
  white-space: nowrap;
}
.inputHelp-toggleButton {
  background: none;
  text-decoration: none;
  border: none;
}
.algebraHelpButton {
  display: inline-block;
  padding: 1px 3px 1px 5px;
}
.algebraHelpButton img {
  width: 26px;
  padding-top: 15px;
}
/* ========== Input Help  end ============ */
/* first td of heading table should have width: 0% */
.algebraView {
  height: 100%;
}
.algebraView div table:not(.spec) {
  width: 100%;
  border-collapse: collapse;
}
.algebraView div table:not(.spec) tr > td:first-child {
  display: none;
}
.algebraView div table:not(.spec) tr > td + td {
  width: 100%;
  padding: 0px;
}
/*.algebraView div div>div {*/
.algebraView > div > div > div {
  margin-left: 0px !important;
  /* 	width: 100%; */

}
.algebraView .avItem,
.algebraView .avInputItem {
  /*padding: 3px 10px !important;*/

  padding: 0px !important;
  z-index: 1;
  margin-top: -2px;
}
.avItem.avSelectedRow {
  z-index: 3;
}
.elemHeading {
  border-bottom: 1px solid #EDEDED;
  position: relative;
  z-index: 3;
}
/* .algebraView div table+div {
	margin-top: 5px;
} */
.elemHeadingName {
  padding: 15px 10px 10px 40px;
}
body.application[dir=rtl] .elemHeadingName {
  padding: 15px 40px 10px 10px;
}
.Tablet .elemHeadingName,
.Tablet .gwt-InlineHTML {
  font-size: 115%;
}
.elemHeadingDummy {
  padding: 10px 10px 10px 0px;
  cursor: default;
}
.algebraOpenButton {
  position: absolute;
  top: 17px;
  left: 10px;
}
body.application[dir=rtl] .algebraOpenButton {
  left: auto;
  right: 0;
}
.GeoGebraFrame .avItem,
.avItem .gwt-TreeItem,
.avItem .gwt-TreeItem > * {
  width: 100%;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
.avItem .gwt-TreeItem,
.avItem .gwt-TreeItem-selected {
  display: inline-block !important;
  background: none;
}
/*.algebraView .avItem .AlgebraViewObjectStylebar {
 	top: 0px;
 } */
.algebraView .panelRow > * {
  margin: 0px;
}
.NewRadioButtonTreeItemParent {
  /* AlgebraViewObjectStylebar was not at right position, needs position absolute */

  position: absolute;
  width: 100%;
  z-index: 4;
}
.NewRadioButtonTreeItemParent .AlgebraViewObjectStylebar .gwt-PushButton {
  padding: 0px 0px 2px 5px;
}
.avItem .gwt-TreeItem {
  padding: 0px;
  /*padding-bottom: 1px;*/

  margin-top: 1px;
  border-top: 1px solid #DCDCDC;
  border-bottom: 1px solid #DCDCDC;
  background-color: transparent !important;
}
.avItem.avSelectedRow .gwt-TreeItem {
  padding: 0px;
  /*margin-top: 1px;*/

  /* 	border-top: 1px solid #6161FF;
	border-bottom: 1px solid #6161FF; */

}
.avItem.avSelectedRow .marblePanel {
  /* background-color: #CCCCFF; */

  background-color: #DCDCDC;
  /*border-right: 1px solid #DCDCDC;*/

}
/* Colors will be overwritten in java code
** see: org.geogebra.web.web.gui.view.algebra.Marble.java
*/
.GeoGebraFrame .marblePanel {
  /*margin: 0px !important;*/

  position: absolute;
  height: 100%;
  margin-top: -1px;
  padding: 1px 7px;
  /*box-sizing: border-box;
 	-moz-box-sizing: border-box;
 	-webkit-box-sizing: border-box;*/

}
.GeoGebraFrame .algebraHelpButton,
.GeoGebraFrame .marblePanel {
  border-right: 1px solid #DCDCDC;
}
.avItem .marblePanel + * {
  padding-left: 40px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  margin-right: 0px;
}
body.application[dir=rtl] .avItem .marblePanel + * {
  padding-left: 0px;
  padding-right: 40px;
  margin-left: 0px;
}
.marble {
  height: 18px;
  width: 18px;
  background-color: #6161FF;
  border: 1px solid #000000;
  border-radius: 18px;
  position: relative;
  top: 50%;
  margin-top: -10px;
}
.marble.elemHidden {
  background-color: #FFFFFF;
}
.marble.elemShown {
  background-color: #6161FF;
  border: 1px solid #CCCCFF;
}
.GeoGebraFrame .avItem .elemText {
  padding-top: 7px;
  padding-bottom: 7px;
  display: inline-block;
}
.GeoGebraFrame label {
  display: inline;
  /*color:black;*/

  font-weight: normal;
}
.algebraPanel.NoHorizontalScroll {
  overflow-x: hidden !important;
  overflow-y: auto !important;
}
.algebraSimpleP {
  height: 100%;
  background-color: #FFFFFF;
}
.tb_img {
  width: 32px;
  height: 32px;
}
.bold {
  font-weight: bold;
}
.italic {
  font-style: italic;
}
#imageList {
  width: 16px;
  list-style-type: none;
  margin: 0px;
  padding: 0px;
  border: none;
}
#imageList img {
  width: 16px;
  height: 16px;
}
#imageList li {
  margin-top: 2px;
  margin-bottom: 2px;
}
#imageList li.selected {
  background-color: #0000ff;
}
.imageCorner {
  background-repeat: no-repeat;
  align: left;
  display: inline-block;
  padding-left: 20px;
}
body.application[dir=rtl] .imageCorner {
  align: right;
  padding-left: 0px;
  padding-right: 20px;
}
/*============ AutocompleteTextFieldW =======*/
.GeoGebraFrame .AutoCompleteTextFieldW {
  box-sizing: border-box;
  position: relative;
}
.AutoCompleteTextFieldW .TextField {
  display: inline-block;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  padding-left: 5px;
  padding-right: 5px;
  /*width: 100% !important;*/

}
.GeoGebraFrame .AutoCompleteTextFieldW.FromDrawTextFieldNew input[type="text"].TextField {
  padding-left: 2px;
  padding-right: 2px;
}
.AutoCompleteTextFieldW.FromDrawTextField .TextField {
  margin: 0px;
}
.InputTreeItem .hasCursorPermanent {
  border-color: #DCDCDC;
}
.NoHorizontalScroll .InputTreeItem .hasCursorPermanent {
  border-color: #6161FF;
}
.AutoCompleteTextFieldW.SymbolCanBeShown .TextField,
.GeoGebraFrame .AutoCompleteTextFieldW.SymbolCanBeShown.FromDrawTextFieldNew input[type="text"].TextField {
  padding-right: 40px;
}
body.application[dir=rtl] .AutoCompleteTextFieldW.SymbolCanBeShown .TextField,
body.application[dir=rtl] .GeoGebraFrame .AutoCompleteTextFieldW.SymbolCanBeShown.FromDrawTextFieldNew input[type="text"].TextField {
  padding-right: 0px;
  padding-left: 40px;
}
.SymbolToggleButton {
  width: 20px;
  height: 20px;
  line-height: 20px;
  display: none;
  text-align: center;
}
.GeoGebraFrame .XButton,
.GeoGebraFrame .XButtonNeighbour {
  width: 24px;
  height: 24px;
  line-height: 24px;
  text-align: center;
  display: none;
}
.AutoCompleteTextFieldW .SymbolToggleButton {
  position: absolute;
  right: 0.6em;
  top: 50%;
  margin-top: -0.66em;
}
.GeoGebraFrame .AlgebraViewObjectStylebar {
  position: absolute;
  top: 2px;
  right: 0px;
  z-index: 10;
  padding: 4px 4px 2px 0px;
  border-bottom-left-radius: 5px;
  background-color: rgba(255, 255, 255, 0.9);
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
}
body.application[dir=rtl] .GeoGebraFrame .AlgebraViewObjectStylebar {
  right: auto;
  left: 0px;
  border-bottom-right-radius: 5px;
  border-bottom-left-radius: 0px;
}
.GeoGebraFrame .AlgebraViewObjectStylebar.smallStylebar {
  padding: 2px 2px 2px 0px;
}
.GeoGebraFrame .AlgebraViewObjectStylebar > * {
  display: inline-block;
  vertical-align: middle;
}
.GeoGebraFrame .elemRow > * {
  display: inline-block;
  padding-left: 4px;
  vertical-align: middle;
}
body.application[dir=rtl] .GeoGebraFrame .elemRow > * {
  padding-left: 0px;
  padding-right: 4px;
}
.GeoGebraFrame .InputTreeItemParent .XButton,
.GeoGebraFrame .InputTreeItemParent .XButtonNeighbour,
.GeoGebraFrame .XButtonPanelParent .XButton,
.GeoGebraFrame .XButtonPanelParent .XButtonNeighbour {
  cursor: pointer;
  padding-left: 4px;
}
.advanced-TextButtonPanel .AutoCompleteTextFieldW .SymbolToggleButton {
  right: 1.6em;
}
body.application[dir=rtl] .AutoCompleteTextFieldW .SymbolToggleButton {
  right: auto;
  left: 0.6em;
}
.AutoCompleteTextFieldW .SymbolToggleButton.shown,
.AutoCompleteTextFieldW .SymbolToggleButton.ShowSymbolButtonFocused,
.InputTreeItemParent .XButton.shown,
.InputTreeItemParent .XButton.ShowSymbolButtonFocused,
.InputTreeItemParent .XButtonNeighbour.shown,
.InputTreeItemParent .XButtonNeighbour.ShowSymbolButtonFocused,
.XButtonPanelParent .XButton.shown,
.XButtonPanelParent .XButton.ShowSymbolButtonFocused,
.XButtonPanelParent .XButtonNeighbour.shown,
.XButtonPanelParent .XButtonNeighbour.ShowSymbolButtonFocused {
  display: inline-block;
}
/*=========== Checkbox menuitem =============*/
/* Stefi do you magic here :-) */
.gwt-MenuBar-horizontal .GChecBoxMenuItem,
.gwt-MenuBar-vertical .GChecBoxMenuItem {
  margin: 0;
  padding: 0;
  vertical-align: top;
  overflow: hidden;
}
.gwt-MenuBar-horizontal .GChecBoxMenuItem.selected,
.gwt-MenuBar-vertical .GChecBoxMenuItem.selected {
  background: #CCCCFF;
}
.GChecBoxMenuItem .gwt-CheckBox {
  float: left;
}
body.application[dir=rtl] .GChecBoxMenuItem .gwt-CheckBox {
  float: right;
}
.GChecBoxMenuItem .gwt-HTML {
  float: right;
}
body.application[dir=rtl] .GChecBoxMenuItem .gwt-HTML {
  float: left;
}
.ggb-AlgebraViewSuggestionPopup {
  /* overcoming the z-index of the onScreen keyboard PopupPanel */

  z-index: 600;
}
.ggb-AlgebraViewSuggestionList {
  overflow-x: hidden !important;
  overflow-y: auto !important;
}
/*#################################################################
	PROPERTIES
###################################################################*/
.PropertiesViewW {
  background-color: #F8F8F8;
  border-radius: 0px;
  -moz-border-radius: 0px;
  padding: 0px;
}
.contentsPanel {
  overflow-x: auto;
  overflow-y: hidden;
  height: 100%;
}
.contentsPanel > table.gwt-TabPanel {
  width: 100%;
}
.propertiesStyleBar {
  width: 34px;
  position: absolute;
  right: 0px;
  top: 30px;
}
.menuProperties {
  margin: 0px;
  padding: 0px;
}
.menuProperties table {
  cellpadding: 0px;
  cellspacing: 0px;
  border-collapse: collapse;
}
.menuProperties .gwt-MenuItem {
  padding: 5px;
  cursor: pointer;
}
.menuProperties .gwt-MenuItem:hover {
  background: #F0F0F0;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
}
.propertiesStyleBar .selected,
.propertiesStyleBar .gwt-MenuItem.selected:hover {
  background-image: -webkit-linear-gradient(left, #dcdcdc, #f8f8f8);
  background-image: -moz-linear-gradient(left, #dcdcdc, #f8f8f8);
  background-image: -ms-linear-gradient(left, #dcdcdc, #f8f8f8);
  background-image: -o-linear-gradient(left, #dcdcdc, #f8f8f8);
  background-image: linear-gradient(left, #dcdcdc, #f8f8f8);
  filter: progid:dximagetransform.microsoft.gradient(GradientType=1, startColorstr='#DCDCDC', endColorstr='#F8F8F8');
  zoom: 1;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
}
.menuProperties .gwt-MenuItem img {
  width: 24px !important;
  height: 24px !important;
}
/* EUCLIDIAN PROPERTIES */
.axisPanel > * > *:first-child {
  min-width: 110px;
}
.axisPanel > .checkBoxPanel > *:first-child {
  min-width: 0px;
}
/* OBJECT PROPERTIES */
.propertiesTab {
  overflow: auto;
  padding-right: 8px;
}
.propertiesTabPanel {
  width: 100%;
}
.propertiesTab > *,
.axisPanel > .checkBoxPanel {
  margin-bottom: 10px;
  display: block;
}
.objectPropertiesPanel > .checkBoxPanel {
  white-space: nowrap;
  margin-bottom: 10px;
}
.objectPropertiesPanel > .checkBoxPanel:last-child {
  margin-bottom: 0px;
}
.propertiesTab .panelRow + .checkBoxPanel {
  margin-top: 10px;
}
.propertiesTab .panelTitle:first-child {
  margin-top: 0px;
}
.propertiesTab .scriptTabPanel {
  display: table;
}
.propertiesTab .MyCanvasButton,
.propertiesTab .gwt-Button {
  margin-left: 0px;
}
.panelTitle {
  padding-bottom: 5px;
  color: #6666FF;
  display: block;
  border-bottom: 1px solid #CCCCFF;
}
.checkBoxPanel,
.panelRow,
.panelRowIndent,
.panelIndent,
.listBoxPanel,
.optionsInput,
.optionsPanel,
.optionsPanel .optionsPanelIndent,
.propertiesTab .sliderIntervalPanel,
.propertiesTab .sliderWidthPanel,
.minMaxPanel {
  display: block;
}
.panelIndent,
.panelRowIndent,
.optionsPanelIndent {
  padding-left: 25px;
}
.optionsInput,
.optionsPanel,
.propertiesTab .sliderIntervalPanel,
.propertiesTab .sliderWidthPanel,
.textPropertiesTab > * {
  margin-bottom: 10px;
}
.checkBoxPanel > *,
.panelRow > *,
.listBoxPanel > *,
.panelRowIndent > *,
.propertiesTab .gwt-CheckBox > *,
.panelRowCell > *,
.panelRowCell > *,
.optionsPanel > *,
.optionsPanelIndent > *,
.optionsPanelCell > *,
.propertiesTab .sliderIntervalPanel > *,
.propertiesTab .sliderWidthPanel > *,
.textOptionsToolBar > *,
.BackgroundColorPanel > *,
.minMaxPanel > * {
  display: inline-block;
  vertical-align: middle;
  margin: 3px 10px 3px 0px;
}
.optionsInput > *,
.propertiesTab .sliderIntervalPanel > div > *,
.CustomColorPreview > * {
  display: block;
  margin: 3px 0px 3px 0px;
}
.panelRowCell {
  white-space: nowrap;
  margin-right: 20px;
}
.checkBoxPanel .gwt-Label,
.panelRow .gwt-Label,
.listBoxPanel .gwt-Label,
.panelRowIndent .gwt-Label,
.optionsPanel .gwt-Label,
.optionsPanelIndent .gwt-Label {
  margin-right: 10px;
}
.optionsPanelCell {
  display: block;
}
.optionsPanelCell .gwt-Label {
  min-width: 100px;
}
.numberInput {
  width: 70px;
  margin-right: 20px;
}
.optionsInput table {
  display: inline-table;
}
.textOptionsToolBar {
  display: inline-block;
}
.objectPropertiesTextEditor {
  width: 100%;
  height: 100px;
}
.colorChooserPreview,
.optionsSlider {
  display: table-row;
  margin-top: 5px;
}
.colorChooserPreview > *,
.optionsSlider > * {
  display: table-cell;
  vertical-align: middle;
  margin-right: 20px;
}
.CustomColorPreview canvas,
.colorChooserPreview canvas {
  padding: 3px;
  -webkit-border-radius: 5px;
  -khtml-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  border: 1px solid #DCDCDC;
}
.propertiesTab .colorChooserPreview canvas {
  cursor: pointer;
  cursor: hand;
}
.gwt-PopupPanel .panelTitle {
  padding: 5px 10px 10px 10px;
}
.textOptionsToolBar .gwt-ToggleButton {
  display: inline-block;
}
.GeoGebraFrame iframe.objectPropertiesTextEditor {
  margin-bottom: 10px;
}
.propertiesTab .gwt-TabLayoutPanel {
  background: #FFFFFF;
}
.colorComponent {
  display: block;
  margin-top: 5px;
  margin-bottom: 5px;
}
.colorComponent > * {
  display: inline-block;
}
.colorSlider {
  margin-right: 20px;
  /* display: table-row; */

  display: inline-block;
}
.colorSlider > * {
  display: inline-block;
  /* display: table-cell; */

  vertical-align: middle;
}
/* .ColorDialog-content {
	padding: 8px;
} */
/*.CustomColorPreview {
	align: center;
}*/
.GeoGebraFrame .CustomColorButtonParent {
  width: 100%;
}
.GeoGebraFrame button.CustomColorButton {
  position: relative;
  left: 227px;
  top: 1px;
  border: 2px solid #555555 !important;
  cursor: pointer;
  background-color: #ffffff !important;
  width: 14px;
  height: 14px;
}
.GeoGebraFrame button.CustomColorButton:hover {
  background-color: #ccccff !important;
}
.GeoGebraFrame button.CustomColorButton:active {
  border: 2px inset #555555 !important;
}
.propertiesTab .gwt-TabPanelBottom {
  /* height: 100%; FIXME breaks scripting tab in Chrome */

  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.scriptArea {
  height: 300px;
  width: 100%;
}
.scriptTabPanel {
  width: 100%;
}
/* disabled styles */
.disabled > .panelIndent,
.disabled > div > .panelRowIndent {
  color: #CCCCCC;
}
.disabled .gwt-ListBox {
  opacity: 0.4;
  cursor: default;
}
/*++++++++++++++++ ADVANCED LIST ++++++++++++++++++++++++++++++++++++++++++++++++++++++*/
.advanced-TextButtonPanel {
  position: relative;
  margin: 3px 0px;
}
.advanced-TextButtonPanel input[disabled=""],
.advanced-TextButtonPanel .choice-button-up-disabled {
  opacity: 1;
  cursor: default;
}
.advanced-TextButtonPanel input.selected-value {
  padding-right: 1.3em;
}
.advanced-TextButtonPanel .choice-button {
  position: absolute;
  right: 0.3em;
  top: 0.3em;
  cursor: pointer;
}
.advanced-ListPopupPanel {
  -webkit-border-radius: 5px;
  -khtml-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  padding: 5px;
  background-color: rgba(255, 255, 255, 0.9);
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  overflow: visible;
  position: absolute;
  background-color: white;
  font-family: geogebra-sans-serif, Arial Unicode MS, Arial, sans-serif;
}
.advanced-ListPopupPanel .item {
  cursor: pointer;
  padding: 0px 5px;
}
.advanced-ListPopupPanel .item:hover {
  background: #CCCCFF;
}
.geoSelectFirst {
  width: 50%;
}
/*#####################################################################################
###       PROPABILITY CALCULATOR
#####################################################################################*/
.ProbabilityCalculatorStyleBarW .gwt-MenuItem {
  margin: 0;
  padding: 0;
}
.ProbCalcPanel {
  overflow: auto;
}
.ProbCalcPanel .PlotPanelPlus {
  float: left;
  margin: 0;
  margin-top: 6px;
  padding: 0;
}
.ProbCalcPanel .ProbabilityTableW {
  float: right;
  margin: 0;
  padding: 0;
  padding-left: 10px;
  overflow: auto;
}
.ProbCalcPanel .ProbabilityTableW table {
  border-collapse: collapse;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.ProbCalcPanel .ProbabilityTableW td {
  border: 1px solid #DCDCDC;
  padding: 2px;
}
.ProbCalcPanel .ProbabilityTableW td.headercell {
  font-weight: bold;
}
.ProbCalcPanel .ProbabilityTableW tr:hover,
.ProbCalcPanel .ProbabilityTableW tr.selected {
  background: #CCCCFF;
}
.plotPanelOptions {
  display: block;
  white-space: nowrap;
  overflow: hidden;
}
.lblMeanSigma {
  padding: 5px;
  float: left;
}
.btnExport,
.btnNormalOverlay {
  float: right;
}
.controlPanel {
  float: left;
  overflow: auto;
}
.controlPanel > div {
  padding: 5px 0px;
  margin-right: 30px;
  float: left;
  white-space: nowrap;
}
.controlPanel > div.clear {
  padding: 0px;
  margin: 0px;
}
.cbPanel .gwt-ToggleButton,
.cbPanel .gwt-ListBox {
  display: inline-block;
  margin-right: 10px;
}
.cbPanel .gwt-ToggleButton {
  float: left;
}
.parameterPanel > *,
.resultPanel > * {
  display: inline-block;
  margin: 0 5px;
  padding: 0px;
}
/*.parameterPanel .gwt-SuggestBox,
.resultPanel .gwt-SuggestBox,
.StatisticsCalculatorW .gwt-SuggestBox {
	margin: 0px;
	padding: 0px;
}*/
.intervalPanel > * {
  display: inline-block;
}
/* --------- STATISTICS CALCULATOR --------------- */
.StatisticsCalculatorW .panelControl {
  margin: 5px 0 5px 0px;
}
.StatisticsCalculatorW .scroller {
  overflow: auto;
  padding-bottom: 8px;
}
.StatisticsCalculatorW .lineBreak {
  height: 0px;
  margin: 0px;
  padding: 0px;
  width: 100%;
}
.StatisticsCalculatorW .gwt-RadioButton label,
.StatisticsCalculatorW .gwt-CheckBox label {
  margin: 0 20px 0 5px;
}
.StatisticsCalculatorW span.gwt-CheckBox {
  margin-top: 10px;
  min-width: 170px;
}
.StatisticsCalculatorW .lblSampleStat {
  min-width: 80px;
  text-align: right;
}
.StatisticsCalculatorW .gwt-Label,
.StatisticsCalculatorW .AutoCompleteTextFieldW,
.StatisticsCalculatorW .gwt-ListBox,
.StatisticsCalculatorW .gwt-CheckBox,
.StatisticsCalculatorW .gwt-RadioButton {
  display: inline-block;
  margin: 3px 5px;
}
.StatisticsCalculatorW .panelSample1,
.StatisticsCalculatorW .panelSample2 {
  text-align: center;
  max-width: 50%;
  margin-right: 20px;
  display: inline-block;
  margin-top: 10px;
  white-space: nowrap;
}
.StatisticsCalculatorW .panelSample1 .gwt-Label:first-child,
.StatisticsCalculatorW .panelSample2 .gwt-Label:first-child {
  display: block;
}
.StatisticsCalculatorW .pnlControl .gwt-Label {
  min-width: 80px;
}
.StatisticsCalculatorW .pnlCount {
  overflow: auto;
  text-align: right;
  display: table;
  border-collapse: collapse;
}
.StatisticsCalculatorW .chirow {
  display: table-row;
}
.StatisticsCalculatorW .chirow .ChiSquarePanelW {
  display: table-cell;
  margin: 5px;
  vertical-align: middle;
}
.StatisticsCalculatorW .chirow .inputcell {
  border: 1px solid #DCDCDC;
}
.StatisticsCalculatorW .chirow .ChiSquarePanelW > * {
  display: block;
  text-align: center;
}
.StatisticsCalculatorW .chirow input {
  text-align: center;
}
.StatisticsCalculatorW .chirow .headercell input {
  background: #CCCCFF;
  border: 1px solid #6666FF;
}
.StatisticsCalculatorW .chirow .headercell input:focus {
  background: white;
}
.StatisticsCalculatorW .resultPane {
  margin-top: 5px;
}
.resultPane table td {
  padding: 3px;
  padding-right: 40px;
}
.StatisticsCalculatorW .gwt-Label.lblHeading {
  margin-top: 20px;
  padding-bottom: 5px;
  color: #6666FF;
  display: block;
  border-bottom: 1px solid #CCCCFF;
}
/*=========== Probability Calculator End =============*/
.ggw_glabel {
  white-space: nowrap;
  margin-right: 10px;
}
.ggw_glabel.ggw_glabel_nomargin {
  margin-right: 0px;
}
/*###################################################################################################################
###		OPEN SCREEN FROM TOUCH
###################################################################################################################*/
.GeoGebraFrame .headerbar {
  background-color: #F8F8F8;
  border-bottom: 1px solid #EDEDED;
  box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  color: #666666;
  height: 61px;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  position: relative;
  z-index: 100;
  width: 100%;
  margin-bottom: 1px;
}
.optionsPopup {
  float: right;
  background: none;
  box-shadow: none;
  margin-top: 20px;
}
.headerFirst {
  padding-top: 15px;
  cursor: pointer;
  float: left;
  width: 80px;
}
.headerFirst .ggbLogoPanel,
.headerFirst .backButton {
  float: left;
}
.ggbLogoPanel {
  margin-right: 5px;
}
.locationTitle {
  font-size: 150%;
  color: #6666FF;
  float: left;
  padding-top: 22px;
}
.languageGUI .locationTitle {
  text-align: center;
  float: none;
}
.headerSecond {
  padding-top: 10px;
  padding-right: 10px;
  float: right;
}
.GeoGebraFrame button.gwt-Button.signInButton {
  margin-top: 6px;
}
.profilePanel {
  cursor: pointer;
  text-align: center;
  padding-right: 10px;
  width: 40px;
  height: 40px;
  overflow: hidden;
}
.profilePanel .profileImage {
  max-width: 70px;
}
.profilePanel .optionsArrow {
  position: absolute;
  right: 0px;
  bottom: 0px;
}
.profileOptionsPanel {
  position: relative;
  z-index: 200;
}
.profileOptionsPanel .arrow {
  position: absolute;
  z-index: 300;
  right: 15px;
}
.profileOptionsPanel .profileOptionsContent {
  position: relative;
  top: 15px;
  margin-left: 5px;
  z-index: 200;
  -webkit-border-radius: 10px;
  -khtml-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  padding: 5px;
  background-color: rgba(255, 255, 255, 0.9);
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
}
.profileOptionsContent .logoutButton {
  margin: 20px 10px 10px;
  min-width: 75px;
}
.backButton {
  cursor: pointer;
  padding: 8px 10px 10px 10px;
}
.backButton img {
  height: 20px;
  width: 11px;
}
/*+++++++++++++++++++++++++++++++++++++++++++++++
PROVIDERS
+++++++++++++++++++++++++++++++++++++++++++++++*/
.providers {
  width: 70px;
  float: right;
  padding-left: 2px;
}
.providers .button {
  width: 50px;
  height: 50px;
  padding: 10px;
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  border: none;
  background: none;
  position: relative;
  cursor: pointer;
}
.providers .button.selected {
  background-image: -webkit-linear-gradient(left, #ededed, #fafafa);
  background-image: -moz-linear-gradient(left, #ededed, #fafafa);
  background-image: -ms-linear-gradient(left, #ededed, #fafafa);
  background-image: -o-linear-gradient(left, #ededed, #fafafa);
  background-image: linear-gradient(left, #ededed, #fafafa);
  filter: progid:dximagetransform.microsoft.gradient(GradientType=1, startColorstr='#EDEDED', endColorstr='#FAFAFA');
  zoom: 1;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
}
/* +++ BrowseGUI CONTENT +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++*/
.browsegui {
  background-color: white;
}
/* to avoid scrollbars on tablets and mac */
.browsegui > div:nth-child(1),
.browsegui > div:nth-child(1) > div,
.languageGUI > div:nth-child(1),
.languageGUI > div:nth-child(1) > div {
  overflow: hidden !important;
}
.searchDiv {
  margin: 15px 10px;
  position: relative;
  float: left;
}
.searchDiv .searchButton {
  position: absolute;
  top: 6px;
  left: 6px;
  z-index: 10;
  cursor: pointer;
}
.searchDiv input.gwt-TextBox {
  padding-left: 35px;
  padding-right: 35px;
  z-index: 5;
  color: #999999;
  width: 100%;
}
.searchDiv .cancelButton {
  z-index: 10;
  position: absolute;
  top: 8px;
  right: 8px;
  cursor: pointer;
}
/* ++++++  MaterialListPanel   ++++++++ */
.GeoGebraFrame .materialListPanel {
  padding: 20px;
  overflow-y: scroll;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  background-color: white;
}
.ggbChapterName {
  clear: both;
  font-size: 30px;
  padding-bottom: 10px;
}
.materialListElement {
  width: 182px;
  height: 250px;
  margin-right: 15px;
  margin-bottom: 15px;
  float: left;
  position: relative;
}
.materialElementContent {
  position: relative;
}
.materialListElement .fileImage {
  width: 170px;
  height: 170px;
  padding: 5px;
  overflow: hidden;
  border-radius: 5px;
  border: 1px solid #CCCCCC;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
}
.materialListElement .fileImage .background {
  width: 170px;
  height: 170px;
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;
}
.materialListElement .infoPanel .sharedPanel {
  font-size: 80%;
  padding-bottom: 5px;
}
/** default style of material **/
.materialListElement.default {
  cursor: pointer;
}
.materialListElement.default:hover .fileImage {
  border-color: #6161FF;
}
.materialListElement .infoPanel .fileTitle {
  max-height: 40px;
  overflow: hidden;
  padding-top: 7px;
  word-wrap: break-word;
}
/** Material is selected **/
.materialListElement.selected .materialElementContent {
  border-radius: 10px;
  border: 1px solid #CCCCCC;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  cursor: default;
  padding: 15px;
  z-index: 100;
  background-color: rgba(255, 255, 255, 0.9);
  box-shadow: 1px 1px 6px rgba(0, 0, 0, 0.25);
  position: absolute;
  top: -16px;
  left: -16px;
}
.materialListElement.selected .infoPanel .fileTitle {
  max-height: 70px;
}
.materialListElement.selected .infoPanel .renameBox {
  margin-left: -5px;
  width: 192px;
  margin-right: -5px;
  margin-top: 2px;
}
.materialListElement.selected .fileImage {
  border-color: #6161FF;
  cursor: pointer;
}
.materialListElement.selected .infoPanel .button {
  cursor: pointer;
  padding: 2px 0px 2px 0px;
}
.PhoneGUI .materialListElement.selected .infoPanel .button,
.Tablet .materialListElement.selected .infoPanel .button {
  padding-top: 5px;
  padding-bottom: 5px;
}
.materialListElement.default .infoPanel .Separator {
  display: none;
}
.materialListElement .infoPanel .Separator {
  display: none;
}
.materialListElement.selected .infoPanel .Separator {
  margin-bottom: 5px;
  display: block;
}
.materialListElement .infoPanel .button:hover,
.materialListElement .infoPanel .button:active {
  background-color: #CCCCFF;
}
.materialListElement .button .gwt-Image {
  vertical-align: middle;
  display: inline-block;
  margin-right: 5px;
}
.materialListElement .infoPanel.detailed .button .gwt-Label {
  display: inline-block;
  vertical-align: middle;
}
.materialListElement.selected .infoPanel.detailed .deleteActive {
  color: #6161FF;
}
.materialListElement.selected .infoPanel.detailed .confirmDelete {
  margin-top: 5px;
}
.materialListElement.selected .infoPanel.detailed .confirmDelete .button {
  text-align: center;
  width: 80%;
  margin-bottom: 5px;
  padding: 4px 14px;
}
.materialListElement .cancelButton {
  float: right;
}
.materialListElement .deleteButton {
  float: left;
}
/** Material is unselected **/
.materialListElement.unselected {
  opacity: 0.2;
  filter: alpha(opacity = 20);
}
.materialListElement.unselected:hover {
  cursor: default;
}
.materialListElement.unselected:hover .fileImage {
  border-color: #CCCCCC;
  cursor: default;
}
/*#####################################################################################
###        LANGUAGE GUI
#####################################################################################*/
.languageGUI > div {
  overflow: auto !important;
}
.languageGUI .contentPanel {
  padding: 15px 20px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
}
.languageGUI .contentPanel .gwt-Label {
  float: left;
  width: 350px;
  line-height: 30px;
  cursor: pointer;
}
.languageGUI .contentPanel .gwt-Label:hover,
.languageGUI .activeLanguage {
  color: #6666FF;
}
.languageGUI:last-child {
  background-color: white;
}
/*#####################################################################################
###       ZOOM
#####################################################################################*/
.zoomed {
  -webkit-transform: scale(0.8, 0.8);
  -moz-transform: scale(0.8, 0.8);
  width: 125%;
  height: 125%;
  -webkit-transform-origin: 0% 0%;
  -moz-transform-origin: 0% 0%;
  transform-origin: 0% 0%;
}
.zoomed2 {
  -webkit-transform: scale(0.6, 0.6);
  -moz-transform: scale(0.6, 0.6);
  width: 166.6%;
  height: 166.6%;
  -webkit-transform-origin: 0% 0%;
  -moz-transform-origin: 0% 0%;
  transform-origin: 0% 0%;
}
body.zoomedBody .gwt-DialogBox,
body.zoomedBody .infoTooltip {
  -webkit-transform-origin: 50% 50%;
  -moz-transform-origin: 50% 50%;
  transform-origin: 50% 50%;
  -webkit-transform: scale(0.6, 0.6);
  -moz-transform: scale(0.6, 0.6);
}
body.zoomedBody .gwt-PopupPanel {
  -webkit-transform-origin: 100% 0%;
  -moz-transform-origin: 100% 0%;
  transform-origin: 100% 0%;
  -webkit-transform: scale(0.6, 0.6);
  -moz-transform: scale(0.6, 0.6);
}
body.zoomedBody .gwt-PopupPanel.KeyBoard {
  -moz-transform: none;
  -webkit-transform: none;
  transform: none;
}
body.zoomedBody .gwt-PopupPanel.SymbolTablePopup {
  -webkit-transform: scale(0.6, 0.6);
  -moz-transform: scale(0.6, 0.6);
  -webkit-transform-origin: 0% 0%;
  -moz-transform-origin: 0% 0%;
  transform-origin: 0% 0%;
}
body.zoomedBody .gwt-PopupPanel.helpPopup {
  -webkit-transform-origin: 100% 100%;
  -moz-transform-origin: 100% 100%;
  transform-origin: 100% 100%;
  -webkit-transform: scale(0.6, 0.6);
  -moz-transform: scale(0.6, 0.6);
}
body.zoomedBody .gwt-PopupPanel.PropertiesViewW {
  -webkit-transform: scale(1, 1);
  -moz-transform: scale(1, 1);
}
body.zoomedBody .gwt-MenuBarPopup .subMenuLeftSide {
  -webkit-transform-origin: 100% 0%;
  -moz-transform-origin: 100% 0%;
  transform-origin: 100% 0%;
  -webkit-transform: scale(0.6, 0.6);
  -moz-transform: scale(0.6, 0.6);
}
body.zoomedBody .gwt-SuggestBoxPopup {
  -webkit-transform: scale(0.6, 0.6);
  -moz-transform: scale(0.6, 0.6);
  -webkit-transform-origin: 0% 100%;
  -moz-transform-origin: 0% 100%;
  transform-origin: 0% 100%;
}
body.zoomedBody .geogebraweb-table-spreadsheet td {
  border-right: 2px solid #CCCCCC;
  border-bottom: 2px solid #CCCCCC;
}
.AppFrameParent {
  border: 1px #DCDCDC solid;
}
.selectedButton {
  border: 2px #6666FF solid;
  border-radius: 5px;
  -moz-border-radius: 5px;
  -webkit-border-radius: 5px;
}
.bookDecoration {
  background-image: url(https://tube.geogebra.org/images/book-icon-small.png);
  width: 22px;
  height: 22px;
  opacity: 0.8;
  left: 115px;
  top: 85px;
  float: left;
}
.syncDecoration {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA0AAAANABeWPPlAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAPoSURBVEiJxZZNaFxVFMd/576PVEI6k5pYPwoqiiC4KCjd6MJk68pCqvi5EHEnSk3RphDUpFKsC12pW93oXoVCMi1WjW1K0ja2ZmrTNElNGDPfSaczmXnHxZtJMzMvM5NG8MDjDvfed37n/M+5942oKv+H2c029BwJvSzKZyiCIICUlxr8lq9Hh1OHtgUWtB9kt3EDlJH6KV0TVLUf2B64Qm9/IB+Aqbebiy6lvGm6rzVwYCwC4qsvUpkRRJpDWwYLYMSqAfhlXR/LAQgKNG/YVqXGtpz13vIBtzNezxwBKfyHYMA2Tg0gSGZBWGvNX2tYwbYcgmSuVcFfa26tdQJgG9d/LAfbONWj5ZTX3HIgAaGLyFNviSPlyERV6R0IvQvsB1xE20TFVWgDaQPdbYxYDz/RJfUZsyFjf202GiO3mgfIgtigtoCllSRVzo8eTe21ARSeF3jGj8yoGDAiIsZ3uOuedr/GG+Wtqvdtme/dczeLc8sAHSKVfZDPr1EqlgAvDuUai9E38WRcRNoffKxb2nY4TQH1R8kfw2GXznCoKshcLs+lC38pkNCS8/q61AC9A+EDoN+5Oxx95PH7xDJWQwABMgcFqZ5y8cK05m7eQuC5keH0T1VggN7Doc8R3g7v6uChR+/fEqA2uMr+K9MzxGLLCHpsZDjzfmBXZ+KZ94CxVCJLIpbBqnRrUDeb6m6u7nB/XI4licWWAX7x3OyRjawq8PhXulYS+wAQn7++pLdWCwEAtw7gj+W18lw+V+DKlasqQkKL9ouRQS1uCgY4NRSfF09eQlWj09dUPak/tw1VcBG1mLp0WT3PQz1ejRyLL9RyAi+QkU9SJzz4qJAvSHT6KpbZmszT0SirK6uCyKejR9M/BjE2vbmedTMfI5xIJJLMzS1sWsdamReXllj4+wbAr+qkBzbzL43+c/V8uLNLCmYCdM++J/fR3dW9fiXWdjgIK6tZTp6OqKelZBF776mh+Pxmvhve1ZHBzLKK9gHFyYuTulYo+rKXM7QqKhgHwXB24oyWvBKqvNYI2hQMEBlKjyEcLBQKcm5yHGOsepktl/NTE2SyGQE5Pjqc/qGZ35a+TqND6S+A7+PJOH9cnqqr8dyN61ybn0HgN3XTh1vx2fJnUd22N4BodOZPFhYXEDEIQiab5szEmIIki2K/UHtetw2ODMZWsLz9ILmxc6c1u5KhWCry89mTWvKKqHpN67rRGnZ1kPUMhF4R+CYc6tTwzk6ZnZ9BRY5HhlL9W/HTcsYViwynv1X4MpVOymy5rjjpD7bqZ8tggLuymXeA34F/TMmqu4dbMlW9o6evD+vpQ10dd/r+v3wi10dmzgk1AAAAAElFTkSuQmCC);
  background-size: 22px 22px;
  width: 22px;
  height: 22px;
  opacity: 0.8;
  left: 115px;
  top: 85px;
}
/* make sure dummy canvas does not force a scrollbar */
.dummyParent {
  position: absolute;
  left: 1px;
  top: 1px;
}
/*#####################################################################################
###       FUNCTION INSPECTOR
#####################################################################################*/
.functionInspectorMainPanel {
  background-color: #f8f8f8;
}
.functionInspectorMainPanel .gwt-TabPanelBottom {
  height: 100%;
  padding-right: 0px;
}
.functionInspectorMainPanel .propertiesTab {
  padding-right: 0px;
}
.functionInspectorMainPanel .panelRow > .panelRow {
  float: right;
  top: 32px;
  right: 15px;
  position: relative;
}
.functionInspectorMainPanel img.gwt-Image {
  vertical-align: middle;
}
.functionInspectorMainPanel > .panelRow .gwt-Label {
  padding: 10px;
  font-size: 115%;
}
.functionInspectorMainPanel .panelRowIndent .MyToggleButton {
  /* bigger buttons needed, because of wrong size of images */

  width: 30px;
  height: 30px;
}
.inspectorTable {
  border-collapse: collapse;
  min-width: 200px;
}
.inspectorTable tr {
  background-color: white;
}
.inspectorTable tr.selected,
.inspectorTable tr:hover {
  background-color: #CCCCFF;
}
.inspectorTable td {
  border: 1px solid;
  padding: 5px;
  min-width: 105px;
  height: 18px;
}
.inspectorTableHeader,
.inspectorTableHeader:hover {
  background-color: #CCCCCC;
  color: #666666;
  font-weight: bold;
}
.inspectorTableData {
  min-width: 50px;
}
.inspectorTableEditor {
  width: 50px;
}
.functionInspectorToolButtons {
  float: right;
}
/* Spreadseet tools */
.createObjectsPreview {
  min-width: 200px;
  vertical-align: top;
  height: 110px;
}
.createObjectsScrollArea {
  width: 100%;
  height: 100%;
}
/* ##########################################
   ##########################################
   #### 								 ####
   ####             PHONE                ####
   #### 								 ####
   ##########################################
   ########################################## */
/* ########################################
   ###              HEADER              ###
   ######################################## */
.PhoneGUI *:FOCUS {
  outline: none;
}
.PhoneGUI .PhoneHeader {
  background-color: #F8F8F8;
  border-bottom: 1px solid #DCDCDC;
}
body > div:nth-child (4) > div:nth-child (2) > div > div:nth-child (2) > table > tbody > tr:nth-child (1) > td {
  height: 43px;
}
.PhoneGUI .tab {
  float: left;
  padding: 0px 10px;
}
.PhoneGUI .tabContainer {
  float: right;
  display: inline-block;
}
.PhoneGUI .tabLeft {
  float: left;
  height: 43px;
  width: 43px;
}
.PhoneGUI .tabLeft .toolbar_button {
  width: 30px;
  height: 30px;
  margin: 2px 0px 0px 2px;
}
.PhoneGUI .activeTab {
  height: 40px;
  border-bottom: 3px solid #6666FF;
}
.PhoneGUI .headerTitlePanel {
  color: #999999;
  font-size: 20px;
  padding: 11px 0px 0px 8px;
  display: inline-block;
}
.PhoneGUI .phoneHeaderButton {
  border: none !important;
  background: transparent;
  width: 26px;
  height: 26px;
  margin: 0 auto;
  padding-top: 5px;
}
.PhoneGUI .phoneHeaderButton .image {
  width: 26px;
  height: 26px;
  padding-top: 5px;
  background-color: #F8F8F8;
}
.PhoneGUI .phoneHeaderButton:focus {
  outline: none;
}
.phoneToolButton {
  margin: 0px 0px 5px 0px;
  text-align: center;
  position: relative;
  width: 40px;
  height: 40px;
  display: block;
  float: none;
  list-style-type: none;
}
/* ########################################
   ###          ALGEBRA VIEW            ###
   ######################################## */
.PhoneGUI .algebraViewPanel {
  background-color: #FFFFFF;
  font-size: 16px;
  overflow: auto;
}
.PhoneGUI .elemHeadingName {
  padding: 10px 8px 10px 32px;
}
.PhoneGUI .arrowBottom.algebraOpenButton {
  margin-top: 3px;
}
/* ########################################
   ###        EUCLIDIAN VIEW            ###
   ######################################## */
.GGWToolbar .phonetoolbar_mainItem {
  padding: 0px;
  margin: 0px;
}
.GGWToolbar-opened {
  width: 85px;
}
.PhoneGUI .StyleBar_ {
  float: left;
  padding-right: 5px;
}
.PhoneGUI .StyleBar_ .toggleStyleBar {
  float: right;
}
/* ########################################
   ###           BROWSE VIEW            ###
   ######################################## */
.PhoneGUI .searchDiv {
  margin: 5px 0px 0px 5px;
}
.PhoneGUI .materialListElement {
  padding-right: 10px;
  padding-bottom: 10px;
}
.PhoneGUI .materialListElement.selected .materialElementContent {
  padding: 15px;
}
.PhoneHeader .searchDiv input.gwt-TextBox {
  padding-left: 32px;
  padding-right: 2px;
  width: 32px;
}
.PhoneHeader .searchDiv input.gwt-TextBox:FOCUS {
  padding-left: 32px;
  padding-right: 35px;
  width: 200px;
}
/* ########################################
   ###           MENU VIEW              ###
   ######################################## */
.phoneMenu {
  margin-left: 0px;
  border-left: none;
  box-shadow: none;
}
/* ##########################################
   ##########################################
   #### 								 ####
   ####        END  PHONE                ####
   #### 								 ####
   ##########################################
   ########################################## */
/* ########################################
   ###        DATA ANALYSIS VIEW        ###
   ######################################## */
.dataSplitLayout {
  width: 100%;
  height: 100%;
}
.dataAnalysisPanel {
  width: 100%;
  height: 100%;
}
.daOptionButtons {
  width: 100px;
}
.daImagePanel,
.daPlotPanel {
  width: 100%;
  height: 100%;
}
.daOptionsTabPanel {
  width: 505px;
}
.daScrollPanel {
  height: 300px;
}
.frequencyTable table {
  width: 100%;
  border: 1px solid;
  border-collapse: collapse;
}
.frequencyTable table td,
.frequencyTable table th,
.frequencyTable table tr {
  border: 1px dotted;
}
.frequencyTable table .headercell {
  background-color: #acacac;
  color: #545454;
  font-weight: bold;
}
.spFrequencyTable {
  width: 100%;
  height: 150px;
}
.daMultiVarStatistics {
  overflow: auto;
}
.daTwoVarInference table,
.daANNOVA table,
.daMultiVarStatistics table,
.daStatistics table {
  width: 100%;
  border: 1px solid;
  border-collapse: collapse;
}
.daMainSplit {
  width: 100%;
  height: 100%;
}
.daData table {
  width: 100%;
  min-width: 100px;
  max-width: 100px;
  border: 1px solid;
  border-collapse: collapse;
}
.daRegressionData table {
  width: 100%;
  min-width: 200px;
  max-width: 200px;
  border: 1px solid;
  border-collapse: collapse;
}
.daTwoVarInference table td,
.daTwoVarInference table th,
.daTwoVarInference table tr,
.daData table td,
.daData table th,
.daData table tr,
.daANNOVA table td,
.daANNOVA table th,
.daANNOVA table tr,
.daMultiVarStatistics table td,
.daMultiVarStatistics table th,
.daMultiVarStatistics table tr,
.daStatistics table td,
.daStatistics table th,
.daStatistics table tr {
  border: 1px dotted;
}
.daTwoVarInference table tr td:first-child,
.daANNOVA table tr td:first-child,
.daData table tr td:first-child,
.daStatistics table tr td:first-child {
  width: 40px;
  background-color: #acacac;
  color: #545454;
  font-weight: bold;
}
.daTwoVarInference table tr:first-child,
.daTwoVarInference table tr td:first-child,
.daANNOVA table tr:first-child,
.daANNOVA table tr td:first-child,
.daMultiVarStatistics table tr:first-child,
.daMultiVarStatistics table tr td:first-child {
  width: 150px;
  background-color: #acacac;
  color: #545454;
  font-weight: bold;
}
.daTwoVarInference table tr:first-child,
.daTwoVarInference table tr td:first-child {
  width: 180px;
}
.daTwoVarInference table tr td:first-child .gwt-ListBox {
  background: #acacac;
}
.daRegressionData table tr td:first-child {
  width: 60px;
  background-color: #acacac;
  color: #545454;
  font-weight: bold;
}
.comboSplitLayout .panelRow {
  vertical-align: top;
}
.dataDisplayMain {
  min-width: 1000px;
}
.dataDisplayMain .panelRow > * {
  margin: 0px 0px 0px 0px;
}
.daRegressionPanel {
  width: 100%;
  min-height: 50px;
}
.daRegEquation {
  width: 100%;
  color: red;
}
.daSwapXYButton {
  width: 48px;
  height: 24px;
}
/* ########################################
   ###    END OF DATA ANALYSIS VIEW     ###
   ######################################## */
.cbCreationList {
  width: 80%;
  overflow: auto;
}
.RelationTool {
  list-style-position: inside;
  padding-left: 2em;
  text-indent: -1em;
}
.timer {
  font-size: 170%;
  float: left;
  font: "Helvetica";
  padding: 5px 5px 7px;
}
/* ########################################
   ###       CUSTOMIZE TOOLBAR GUI      ###
   ######################################## */
.usedToolsPanel {
  float: left;
  padding: 20px 0px 0px 20px;
}
.allToolsPanel {
  padding: 20px 0px 0px 20px;
  position: absolute;
  right: 20px;
}
.allToolsPanelContent .customizableToolbarItem {
  padding-left: 5px;
  margin-left: 20px;
}
.usedToolsPanel:first-child,
.allToolsPanel:first-child {
  overflow-y: hidden;
}
.usedToolsPanel .panelTitle,
.allToolsPanel .panelTitle {
  cursor: default;
}
.toolBarDropping {
  background-color: rgba(204, 204, 255, 0.3);
}
.insertBeforeBorder {
  border-top: 1px solid transparent;
}
.insertAfterBorder {
  border-bottom: 1px solid transparent;
}
.insertBeforeLeaf {
  width: 99%;
  /*border-top: 1px solid;*/

  border-top-color: #6161FF;
}
.insertAfterLeaf {
  width: 99%;
  /*border-bottom: 1px solid;*/

  /*border-bottom: -11px;*/

  border-bottom-color: #6161FF;
}
.insertBeforeBranch {
  /*border-top: 5px solid;*/

  border-top-color: #6161FF;
}
.insertAfterBranch {
  /*border-bottom: 5px solid;  */

  border-bottom-color: #6161FF;
}
.customizableToolbarItem {
  cursor: pointer;
  cursor: hand;
  padding-left: 5px;
}
.customizableToolbarItem:hover {
  background-color: #CCCCFF;
}
.insertAfterBranch > *,
.insertAfterBranch > * > *,
.insertBeforeBranch > *,
.insertBeforeBranch > * > * {
  pointer-events: none;
}
.customizeToolbarButtonPanel {
  text-align: right;
  padding: 10px;
  background-color: #F8F8F8;
  border-top: 1px solid #EDEDED;
  box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
}
.customizeToolbarButtonPanel .gwt-Button {
  margin-left: 10px;
}
/*
   ########################################
   ###   END OF CUSTOMIZE TOOLBAR GUI   ###
   ######################################## */
/*
   ########################################
   ###       MANAGE TOOLS DIALOG        ###
   ######################################## */
.manageToolsList {
  display: block;
}
.manageToolsList > * {
  display: inline-block;
  vertical-align: middle;
  margin: 3px 10px 3px 0px;
}
.manageToolsList .gwt-ListBox {
  width: 600px;
}
.manageToolsList .gwt-Button {
  display: block;
}
/*
   ########################################
   ###    END OF MANAGE TOOLS DIALOG    ###
   ######################################## */
.popupSliderLabel,
.ggbFavorite {
  float: right;
}
.red {
  background: red;
}
/* make sure popup glass pane hides KB button too*/
div.openKeyboardButton {
  z-index: 99;
}
div.SymbolTablePopup,
div.providersPopup {
  z-index: 501;
}
.deleteAlgebra {
  margin: 0px;
}
.deleteAlgebra {
  float: right;
}
body.application[dir=rtl] .deleteAlgebra {
  float: left;
}
.GeoGebraFrame .binop-dot {
  visibility: hidden;
  padding: 0px;
}
/* AV Extensions *//*.avSelectedRow .gwt-TreeItem-selected {
	background: #CCCCFF;
}*/
.avItemContent {
  width: 100%;
  padding-top: 2px;
  padding-bottom: 8px;
}
.avItemContent img {
  vertical-align: middle;
}
.avItemContent .avSliderSpeedControlPanel {
  height: 21px;
  margin-right: 0px;
}
.avItemContent .avSliderSpeedControlPanel > * {
  margin-right: 7px;
}
.avSpeedButton {
  display: inline;
  cursor: pointer;
  width: 24px;
}
.avSpeedButton.hidden {
  width: 0px;
  overflow: hidden;
  padding: 0px;
}
.avPlayButton {
  height: 24px;
  border: none;
  outline: none;
  cursor: pointer;
}
.GeoGebraFrame .avSpeedButton > * {
  /* height is wrong otherwise */

  float: left;
}
.GeoGebraFrame .AlgebraViewObjectStylebar .speedValue {
  display: inline-block;
  width: 40px;
  font-size: 0.8em;
  text-align: center;
  border: none;
  outline: none;
  overflow: hidden;
  height: 19px;
}
.GeoGebraFrame .AlgebraViewObjectStylebar .speedValue.hidden {
  width: 0px;
  padding: 0px;
}
.GeoGebraFrame .AlgebraViewObjectStylebar .speedValue:hover {
  color: #6161FF;
}
.GeoGebraFrame .slideIn {
  -moz-transition: width 0.5s ease;
  -ms-transition: width 0.5s ease;
  -o-transition: width 0.5s ease;
  -webkit-transition: width 0.5s ease;
  /* Safari */

  transition: width 0.5s ease;
}
/* Options Slider */
.avItemContent .optionsSlider .gwt-Label {
  margin: 0px;
  display: inline-block;
}
.avItemContent .optionsSlider .gwt-Label:first-child {
  padding-right: 15px;
}
.avItemContent .optionsSlider .gwt-Label:last-child {
  padding-left: 15px;
}
.avItemContent .optionsSlider .ui-slider {
  margin: 0px;
}
/*.avItemContent .optionsSlider .ui-slider.ui-slider-horizontal.ui-widget.ui-widget-content.ui-corner-all*/
.avItemContent .optionsSlider .ui-slider {
  background: none;
  border: none;
  /* overwrite background-color with real color of the slider */

  background-color: rgba(0, 0, 0, 0.4);
  /* white outline for better contrast */

  box-shadow: 0px 0px 1px 1px rgba(255, 255, 255, 0.4);
}
.avItemContent .optionsSlider .ui-slider-horizontal {
  height: 5px;
  display: inline-block;
}
.avItemContent .optionsSlider .ui-state-default,
.avItemContent .optionsSlider .ui-widget-content .ui-state-default,
.avItemContent .optionsSlider .ui-widget-header .ui-state-default {
  /* overwrite background-color and border-color with real color of the slider */

  background-color: #000000;
  border: 3px solid rgba(0, 0, 0, 0.4);
  -moz-background-clip: padding;
  /* Firefox 3.6 */

  -webkit-background-clip: padding;
  /* Safari 4? Chrome 6? */

  background-clip: padding-box;
  /* Firefox 4, Safari 5, Opera 10, IE 9 */

  /* white outline for better contrast */

  box-shadow: 0px 0px 1px 1px rgba(255, 255, 255, 0.4);
}
.gwt-TreeItem-selected .avItemContent .optionsSlider .ui-state-default,
.avItemContent .optionsSlider .ui-state-hover,
.avItemContent .optionsSlider .ui-state-focus,
.avItemContent .optionsSlider .ui-state-active,
.avItemContent .optionsSlider .ui-widget-content .ui-state-hover,
.avItemContent .optionsSlider .ui-widget-content .ui-state-focus,
.avItemContent .optionsSlider .ui-widget-content .ui-state-active,
.avItemContent .optionsSlider .ui-widget-header .ui-state-hover,
.avItemContent .optionsSlider .ui-widget-header .ui-state-focus,
.avItemContent .optionsSlider .ui-widget-header .ui-state-active {
  border-width: 6px;
}
.avItemContent .optionsSlider .ui-slider .ui-slider-handle {
  width: 12px;
  height: 12px;
  border-radius: 12px;
  -webkit-border-radius: 12px;
  -moz-border-radius: 12px;
}
.avItemContent .optionsSlider .ui-slider .ui-slider-handle span {
  width: 10px;
  height: 10px;
  position: absolute;
  border-radius: 10px;
  -webkit-border-radius: 10px;
  -moz-border-radius: 10px;
  border: 1px solid #000000;
}
.avItemContent .optionsSlider .ui-slider-horizontal .ui-slider-handle {
  top: -6px;
  margin-left: -9px;
}
.gwt-TreeItem-selected .avItemContent .optionsSlider .ui-state-default,
.avItemContent .optionsSlider .ui-slider-horizontal .ui-slider-handle.ui-state-hover,
.avItemContent .optionsSlider .ui-slider-horizontal .ui-slider-handle.ui-state-focus,
.avItemContent .optionsSlider .ui-slider-horizontal .ui-slider-handle.ui-state-active {
  top: -9px;
  margin-left: -12px;
}
.minMaxPanel > * {
  margin: 0px;
}
.minMaxPanel .gwt-Label {
  margin-left: 5px;
  margin-right: 5px;
}
.ggbScreenshot .InputTreeItem {
  overflow-x: hidden;
}
.GeoGebraFrame .cpScrollPanel td {
  color: inherit;
}
/* CAS Context menu */
.gwt-PopupPanel td.gwt-MenuItemSeparator {
  height: 0px;
  padding: 0px;
  border: 0px;
  border-top: 1px solid #dcdcdc;
  overflow: hidden;
}
/*
   ########################################
   ###       Printing                   ###
   ######################################## */
.previewTable {
  font-size: 40px;
}
.printScalePanel div {
  display: inline-block;
}
.printScalePanel input {
  width: 60px !important;
  margin: 10px;
}
.printScalePanel select {
  width: auto;
}
.aPixelsOnScreen {
  margin: 10px;
}
@media screen {
  .printPanel {
    position: absolute;
    left: 10000px;
    max-width: 10000px !important;
  }
}
.pagebreakbefore {
  display: block;
  page-break-before: always;
}
@media print {
  .sqrtFontFix {
    width: 100vw;
    white-space: normal;
  }
  .GeoGebraFrame {
    /*display: none; */
  
    visibility: hidden;
  }
  .printableView {
    visibility: visible;
    position: absolute;
    top: 0px;
    left: 0px;
  }
  .GeoGebraPopup {
    width: 95%;
    height: 95%;
    position: absolute;
    top: 0px;
    left: 0px;
  }
  @page  {
    margin: 2cm;
  }
  .avItem {
    page-break-inside: avoid;
  }
  .marble {
    -webkit-print-color-adjust: exact;
    margin-top: auto;
  }
  .avItemContent .panelRow {
    display: none;
  }
}
@media print and (orientation: portrait) {
  .preview_portrait {
    display: block;
    visibility: visible;
  }
  .preview_landscape {
    display: none;
    visibility: hidden;
  }
}
@media print and (orientation: landscape) {
  .preview_portrait {
    display: none;
    visibility: hidden;
  }
  .preview_landscape {
    display: block;
    visibility: visible;
  }
}
.hiddenInputLabel {
  visibility: hidden;
  position: absolute;
  z-index: 10;
}
/** Created by stefanie.bogner
*	14.09.2015
*	contains definition for colors etc for web
**/
/*!
* direction.less v0.1.0
*
* Copyright 2013 Moshe Simantov
* Licensed under the MIT license
* 
* Keep tracking: https://github.com/DevelopmentIL/direction.less
*/
/** Created by stefanie.bogner
*	14.09.2015
*	contains functions for web
**/
/* Cross browser rounded corners */
/* Cross browser box shadow */
/* Gradient */
/** Created by stefanie.bogner
*	14.09.2015
*	contains general styles for web
*
*	Make sure everything is placed in .GeoGebraFrame!
**/
/** Created by stefanie.bogner
*	14.09.2015
*	contains definition for colors etc for web
**/
/*!
* direction.less v0.1.0
*
* Copyright 2013 Moshe Simantov
* Licensed under the MIT license
* 
* Keep tracking: https://github.com/DevelopmentIL/direction.less
*/
/** Created by stefanie.bogner
*	14.09.2015
*	contains functions for web
**/
/* Cross browser rounded corners */
/* Cross browser box shadow */
/* Gradient */
/**
 * In order to maintain cross-browser compatibility, the following syntax is
 * used to create IE6 specific style rules:
 *    .gwt-Widget {
 *      property: rule applies to all browsers
 *      -property: rule applies only to IE6 (overrides previous rule)
 *    }
 *    * html .gwt-Widget {
 *      property: rule applies to all versions of IE
 *    }
 */
.GeoGebraFrame {
  background-color: #ffffff;
  color: #666666;
  font-size: 16px;
}
.GeoGebraFrame body.application,
.GeoGebraFrame span,
.GeoGebraFrame td,
.GeoGebraFrame th {
  color: #666666;
  font-size: 16px;
}
.GeoGebraFrame * {
  box-sizing: content-box;
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  letter-spacing: normal;
  font-weight: normal;
  font-variant: normal;
  font-stretch: normal;
  font-kerning: auto;
  text-decoration: none;
}
.GeoGebraFrame img {
  vertical-align: baseline;
}
.GeoGebraFrame .button,
.GeoGebraFrame .gwt-PushButton,
.GeoGebraFrame .gwt-MenuItem {
  cursor: pointer;
}
.GeoGebraFrame .button.button-up-disabled,
.GeoGebraFrame .gwt-PushButton.button-up-disabled,
.GeoGebraFrame .gwt-MenuItem.button-up-disabled,
.GeoGebraFrame .button.gwt-PushButton-up-disabled,
.GeoGebraFrame .gwt-PushButton.gwt-PushButton-up-disabled,
.GeoGebraFrame .gwt-MenuItem.gwt-PushButton-up-disabled {
  cursor: default;
  opacity: 0.3;
  filter: alpha(opacity=30);
  /* For IE8 and earlier */

  opacity: 0.3;
  filter: alpha(opacity=30);
  /* For IE8 and earlier */

  opacity: 0.3;
  filter: alpha(opacity=30);
  /* For IE8 and earlier */

}
.GeoGebraFrame .gwt-MenuItem-disabled {
  cursor: default;
  opacity: 0.3;
  filter: alpha(opacity=30);
  /* For IE8 and earlier */

  opacity: 0.3;
  filter: alpha(opacity=30);
  /* For IE8 and earlier */

  opacity: 0.3;
  filter: alpha(opacity=30);
  /* For IE8 and earlier */

}
.GeoGebraFrame .gwt-MenuBar {
  cursor: default;
}
.GeoGebraFrame .gwt-MenuBar .gwt-MenuItem-selected {
  background: #CCCCFF;
}
.GeoGebraFrame .gwt-MenuBar-vertical table {
  border-collapse: collapse;
}
.GeoGebraFrame .gwt-MenuBar-vertical .subMenuIcon {
  padding-right: 4px;
}
.GeoGebraFrame .gwt-MenuBar-vertical .subMenuIcon-selected {
  background: #CCCCFF;
}
.GeoGebraFrame .gwt-MenuBar-vertical .gwt-MenuItem {
  padding: 2px 40px 2px 1px;
  padding: 2px 40px 2px 1px;
  padding: 2px 40px 2px 1px;
}
.GeoGebraFrame .gwt-MenuBar-vertical .gwt-MenuItemSeparator {
  padding: 1px 0px;
}
.GeoGebraFrame .gwt-MenuBar-vertical .gwt-MenuItemSeparator .menuSeparatorInner {
  height: 0px;
  padding: 0px;
  border: 0px;
  border-top: 1px solid #dcdcdc;
  overflow: hidden;
}
.GeoGebraFrame input[type="text"],
.GeoGebraFrame input[type="number"],
.GeoGebraFrame select {
  min-height: 0;
  min-width: 0;
}
.GeoGebraFrame .titlePanel input[type="text"] {
  min-width: 450px;
}
/** Created by stefanie.bogner
*	16.09.2015
*	contains styles for the toolbar in web
* 	Everything in "toolbarPanel" and the menu in "menuContainer"
* 
*	Make sure everything is placed in .GeoGebraFrame!
**/
/** Created by stefanie.bogner
*	14.09.2015
*	contains definition for colors etc for web
**/
/*!
* direction.less v0.1.0
*
* Copyright 2013 Moshe Simantov
* Licensed under the MIT license
* 
* Keep tracking: https://github.com/DevelopmentIL/direction.less
*/
/** Created by stefanie.bogner
*	14.09.2015
*	contains functions for web
**/
/* Cross browser rounded corners */
/* Cross browser box shadow */
/* Gradient */
.GeoGebraFrame {
  /*hack for toolbar submenu, that is isn't hidden by 
	 dockpanel standard div styling (overflow:hidden) */

  /**
	 * GeoGebra Menu
	 */

}
.GeoGebraFrame .ggbdockpanelhack > div {
  overflow: visible !important;
}
.GeoGebraFrame .toolbarPanel {
  background-color: #f8f8f8;
  border-bottom: 1px solid #dcdcdc;
  -webkit-box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  -moz-box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  -webkit-box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  -moz-box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  -webkit-box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  -moz-box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  padding: 5px;
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  z-index: 100;
}
.GeoGebraFrame .toolbarPanel .toolBPanel {
  float: left;
  float: left;
  float: left;
  padding-top: 1px;
}
.GeoGebraFrame .toolbarPanel .toolBPanel ul {
  margin: 0px;
  padding: 0px;
}
.GeoGebraFrame .toolbarPanel .toolBPanel li.toolbar_item {
  margin: 0px 5px 0px 0px;
  margin: 0px 5px 0px 0px;
  margin: 0px 5px 0px 0px;
  text-align: center;
  position: relative;
  width: 40px;
  height: 40px;
  display: block;
  float: left;
  float: left;
  float: left;
  list-style-type: none;
  cursor: pointer;
}
.GeoGebraFrame .toolbarPanel .toolBPanel .toolbar_button {
  -webkit-border-radius: 5px;
  -khtml-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  -khtml-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  -khtml-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  border: 1px solid #dcdcdc;
  background-color: #ffffff;
  padding: 3px;
  width: 32px;
  height: 32px;
}
.GeoGebraFrame .toolbarPanel .toolBPanel .toolbar_button[isSelected=false] {
  border-color: #dcdcdc;
}
.GeoGebraFrame .toolbarPanel .toolBPanel .toolbar_button:hover[isSelected=false],
.GeoGebraFrame .toolbarPanel .toolBPanel .toolbar_button:focus[isSelected=false] {
  border-color: #6161ff;
}
.GeoGebraFrame .toolbarPanel .toolBPanel .toolbar_button[isSelected=true] {
  border: 2px solid #6161ff;
  padding: 2px;
}
.GeoGebraFrame .toolbarPanel .toolBPanel .toolbar_submenu {
  position: absolute;
  z-index: 501;
  display: none;
}
.GeoGebraFrame .toolbarPanel .toolBPanel .toolbar_submenu.visible {
  display: block;
}
.GeoGebraFrame .toolbarPanel .toolBPanel .toolbar_submenu .submenuArrow {
  position: absolute;
  z-index: 300;
  left: 4px;
  left: 4px;
  left: 4px;
}
.GeoGebraFrame .toolbarPanel .toolBPanel .toolbar_submenu .submenuContent {
  position: absolute;
  top: 15px;
  z-index: 250;
  -webkit-border-radius: 10px;
  -khtml-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  -webkit-border-radius: 10px;
  -khtml-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  -webkit-border-radius: 10px;
  -khtml-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  padding-top: 3px !important;
  background-color: #ffffff;
  background-color: rgba(255, 255, 255, 0.9);
  -webkit-box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  -moz-box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  -webkit-box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  -moz-box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  -webkit-box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  -moz-box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
}
.GeoGebraFrame .toolbarPanel .toolBPanel .toolbar_submenu .submenuContent li {
  white-space: nowrap;
  list-style-type: none;
  height: 32px;
  padding: 5px 0px;
  text-align: left;
  text-align: left;
  text-align: left;
  cursor: pointer;
}
.GeoGebraFrame .toolbarPanel .toolBPanel .toolbar_submenu .submenuContent li:hover,
.GeoGebraFrame .toolbarPanel .toolBPanel .toolbar_submenu .submenuContent li:focus {
  color: #333333;
  background-color: #ccccff;
}
.GeoGebraFrame .toolbarPanel .toolBPanel .toolbar_submenu .submenuContent img {
  float: left;
  float: left;
  float: left;
  padding-left: 5px;
  padding-right: 5px;
}
.GeoGebraFrame .toolbarPanel .toolBPanel .toolbar_submenu .submenuContent .gwt-Label {
  padding: 7px 10px 0 40px;
  padding: 7px 10px 0 40px;
  padding: 7px 10px 0 40px;
}
.GeoGebraFrame .toolbarPanel .rightButtonPanel {
  float: right;
  float: right;
  float: right;
  margin: 6px;
}
.GeoGebraFrame .toolbarPanel .rightButtonPanel  > * {
  margin: 0px 5px 0px 10px;
  margin: 0px 5px 0px 10px;
  margin: 0px 5px 0px 10px;
  float: left;
  float: left;
  float: left;
}
.GeoGebraFrame .toolbarPanel .rightButtonPanel .redoButton {
  margin-left: 0px;
  margin-left: 0px;
  margin-left: 0px;
}
.GeoGebraFrame .toolbarPanel .rightButtonPanel .selectedButton {
  padding: 0px;
}
.GeoGebraFrame .toolbarPanel .rightButtonPanel .MyToggleButton {
  padding: 0px;
  border: none;
  background: none;
}
.GeoGebraFrame .menuContainer {
  left: auto !important;
  top: 53px !important;
  /* should be equal to GLookAndFeelI.TOOLBAR_HEIGHT */

  z-index: 100;
}
.GeoGebraFrame .ggbmenubarwrapper {
  width: 100%;
  height: 100%;
}
.GeoGebraFrame .menubarSMART {
  margin-left: 2px;
  margin-left: 2px;
  margin-left: 2px;
  -webkit-box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  -moz-box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  -webkit-box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  -moz-box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  -webkit-box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  -moz-box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  box-shadow: 0px 0px 2px rgba(204, 204, 204, 0.5);
  overflow-y: auto;
  background-color: #f8f8f8;
  border-left: 1px;
  border-left: 1px;
  border-left: 1px;
  border-left-color: #dcdcdc;
  border-left-color: #dcdcdc;
  border-left-color: #dcdcdc;
  border-left-style: solid;
  border-left-style: solid;
  border-left-style: solid;
  height: 100%;
}
.GeoGebraFrame .menubarSMART .menuPanel {
  width: 100%;
  border-collapse: collapse;
}
.GeoGebraFrame .menubarSMART .GeoGebraMenuBar  > table {
  width: 100%;
}
.GeoGebraFrame .menubarSMART .GeoGebraMenuBar .gwt-MenuItem {
  padding: 6px 5px 6px 35px;
  padding: 6px 5px 6px 35px;
  padding: 6px 5px 6px 35px;
  position: relative;
  display: block;
}
.GeoGebraFrame .menubarSMART .GeoGebraMenuBar .gwt-MenuItem .GeoGebraMenuImage {
  width: 20px;
  height: 20px;
  position: absolute;
  top: 50%;
  margin-top: -10px;
  left: 5px;
  left: 5px;
  left: 5px;
}
.GeoGebraFrame .menubarSMART .GeoGebraMenuBar .gwt-MenuItem-selected {
  background: none;
}
.GeoGebraFrame .menubarSMART .GeoGebraMenuBar .gwt-MenuItem:hover,
.GeoGebraFrame .menubarSMART .GeoGebraMenuBar .gwt-MenuItem:active {
  background: #ccccff;
}
.GeoGebraFrame .menubarSMART .GeoGebraMenuBar .RadioButtonMenuItem label {
  cursor: pointer;
}
.subMenuLeftSidePopup {
  box-shadow: none;
  padding: 0px;
  -webkit-border-radius: 0px;
  -khtml-border-radius: 0px;
  -moz-border-radius: 0px;
  border-radius: 0px;
  -webkit-border-radius: 0px;
  -khtml-border-radius: 0px;
  -moz-border-radius: 0px;
  border-radius: 0px;
  -webkit-border-radius: 0px;
  -khtml-border-radius: 0px;
  -moz-border-radius: 0px;
  border-radius: 0px;
}
.subMenuLeftSidePopup .GeoGebraMenuBar.subMenuLeftSide {
  right: 280px;
  white-space: nowrap;
  top: -5px;
  position: absolute;
  z-index: 600;
  -webkit-border-radius: 10px;
  -khtml-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  -webkit-border-radius: 10px;
  -khtml-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  -webkit-border-radius: 10px;
  -khtml-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  padding: 5px;
  background-color: rgba(255, 255, 255, 0.9);
  -webkit-box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  -moz-box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  -webkit-box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  -moz-box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  -webkit-box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  -moz-box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  box-shadow: 0px 0px 2px 1px rgba(102, 102, 102, 0.3);
  /* Workaround due to GWT's bug, see ticket #4819 */

}
.subMenuLeftSidePopup .GeoGebraMenuBar.subMenuLeftSide .arrowSubmenu {
  position: absolute;
  top: 3px;
  right: -15px;
}
.subMenuLeftSidePopup .GeoGebraMenuBar.subMenuLeftSide .gwt-MenuItem {
  padding: 3px 10px;
}
.subMenuLeftSidePopup .GeoGebraMenuBar.subMenuLeftSide input[type="radio"] {
  margin: 0px 5px 0px 0px;
  margin: 0px 5px 0px 0px;
  margin: 0px 5px 0px 0px;
}
.subMenuLeftSidePopup .GeoGebraMenuBar.subMenuLeftSide.subMenuLeftSide2 {
  right: 10px;
  right: 10px;
  right: 10px;
}
/** Created by stefanie.bogner
*	14.09.2015
*	contains definition for colors etc for web
**/
/*!
* direction.less v0.1.0
*
* Copyright 2013 Moshe Simantov
* Licensed under the MIT license
* 
* Keep tracking: https://github.com/DevelopmentIL/direction.less
*/
/** Created by stefanie.bogner
*	14.09.2015
*	contains functions for web
**/
/* Cross browser rounded corners */
/* Cross browser box shadow */
/* Gradient */
/** Created by stefanie.bogner
*	16.09.2015
*	contains styles for algebra view in web
* 
*	Make sure everything is placed in .GeoGebraFrame!
**/
/** Created by stefanie.bogner
*	14.09.2015
*	contains definition for colors etc for web
**/
/*!
* direction.less v0.1.0
*
* Copyright 2013 Moshe Simantov
* Licensed under the MIT license
* 
* Keep tracking: https://github.com/DevelopmentIL/direction.less
*/
/** Created by stefanie.bogner
*	14.09.2015
*	contains functions for web
**/
/* Cross browser rounded corners */
/* Cross browser box shadow */
/* Gradient */
.GeoGebraFrame {
  /*
	tempHasCursorPermanent used only because before releasing of inputhelp showing in AV (GGB-574)
	hasCursorPermanent has different padding in stable and in prereleased version. Later
	.NewRadioButtonTreeItemParent .hasCursorPermanent will have this padding
	*/

}
.GeoGebraFrame .algebraSimpleP input[type="checkbox"] {
  width: 24px;
  height: 24px;
  margin: 5px 7px 5px 0px;
  margin: 5px 7px 5px 0px;
}
.GeoGebraFrame .avHelpButtonParent {
  position: absolute;
  z-index: 7;
  height: 100%;
  line-height: 53px;
}
.GeoGebraFrame .NewRadioButtonTreeItemParent .hasCursorPermanent {
  padding-left: 10px;
}
.GeoGebraFrame .NewRadioButtonTreeItemParent .tempHasCursorPermanent {
  padding-left: 40px;
}
.GeoGebraFrame .avTextItem {
  display: inline-block;
}
.GeoGebraFrame .avPlainTextItem {
  display: inline-block;
}
.GeoGebraFrame .avDummyLabel {
  display: inline-block;
  color: #999999;
}
.GeoGebraFrame .avDefinition {
  height: 40px;
}
.GeoGebraFrame .avOutput {
  min-height: 40px;
  margin-left: 10px;
  font-weight: bold;
}
.GeoGebraFrame .avOutput > * {
  display: inline-block;
}
.GeoGebraFrame .avValue {
  height: 40px;
}
/*! jQuery UI - v1.11.4 - 2015-07-20
* http://jqueryui.com
* Includes: core.css, slider.css, theme.css
* To view and modify this theme, visit http://jqueryui.com/themeroller/?ffDefault=Trebuchet%20MS%2CTahoma%2CVerdana%2CArial%2Csans-serif&fwDefault=bold&fsDefault=1.1em&cornerRadius=4px&bgColorHeader=f6a828&bgTextureHeader=gloss_wave&bgImgOpacityHeader=35&borderColorHeader=e78f08&fcHeader=ffffff&iconColorHeader=ffffff&bgColorContent=eeeeee&bgTextureContent=highlight_soft&bgImgOpacityContent=100&borderColorContent=dddddd&fcContent=333333&iconColorContent=222222&bgColorDefault=f6f6f6&bgTextureDefault=glass&bgImgOpacityDefault=100&borderColorDefault=cccccc&fcDefault=1c94c4&iconColorDefault=ef8c08&bgColorHover=fdf5ce&bgTextureHover=glass&bgImgOpacityHover=100&borderColorHover=fbcb09&fcHover=c77405&iconColorHover=ef8c08&bgColorActive=ffffff&bgTextureActive=glass&bgImgOpacityActive=65&borderColorActive=fbd850&fcActive=eb8f00&iconColorActive=ef8c08&bgColorHighlight=ffe45c&bgTextureHighlight=highlight_soft&bgImgOpacityHighlight=75&borderColorHighlight=fed22f&fcHighlight=363636&iconColorHighlight=228ef1&bgColorError=b81900&bgTextureError=diagonals_thick&bgImgOpacityError=18&borderColorError=cd0a0a&fcError=ffffff&iconColorError=ffd27a&bgColorOverlay=666666&bgTextureOverlay=diagonals_thick&bgImgOpacityOverlay=20&opacityOverlay=50&bgColorShadow=000000&bgTextureShadow=flat&bgImgOpacityShadow=10&opacityShadow=20&thicknessShadow=5px&offsetTopShadow=-5px&offsetLeftShadow=-5px&cornerRadiusShadow=5px
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */

/* Layout helpers
----------------------------------*/
.ui-helper-hidden {
	display: none;
}
.ui-helper-hidden-accessible {
	border: 0;
	clip: rect(0 0 0 0);
	height: 1px;
	margin: -1px;
	overflow: hidden;
	padding: 0;
	position: absolute;
	width: 1px;
}
.ui-helper-reset {
	margin: 0;
	padding: 0;
	border: 0;
	outline: 0;
	line-height: 1.3;
	text-decoration: none;
	font-size: 100%;
	list-style: none;
}
.ui-helper-clearfix:before,
.ui-helper-clearfix:after {
	content: "";
	display: table;
	border-collapse: collapse;
}
.ui-helper-clearfix:after {
	clear: both;
}
.ui-helper-clearfix {
	min-height: 0; /* support: IE7 */
}
.ui-helper-zfix {
	width: 100%;
	height: 100%;
	top: 0;
	left: 0;
	position: absolute;
	opacity: 0;
	filter:Alpha(Opacity=0); /* support: IE8 */
}

.ui-front {
	z-index: 100;
}


/* Interaction Cues
----------------------------------*/
.ui-state-disabled {
	cursor: default !important;
}


/* Icons
----------------------------------*/

/* states and images */
.ui-icon {
	display: block;
	text-indent: -99999px;
	overflow: hidden;
	background-repeat: no-repeat;
}


/* Misc visuals
----------------------------------*/

/* Overlays */
.ui-widget-overlay {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}
.ui-slider {
	position: relative;
	text-align: left;
}
.ui-slider .ui-slider-handle {
	position: absolute;
	z-index: 2;
	width: 1.2em;
	height: 1.2em;
	cursor: default;
	-ms-touch-action: none;
	touch-action: none;
}
.ui-slider .ui-slider-range {
	position: absolute;
	z-index: 1;
	font-size: .7em;
	display: block;
	border: 0;
	background-position: 0 0;
}

/* support: IE8 - See #6727 */
.ui-slider.ui-state-disabled .ui-slider-handle,
.ui-slider.ui-state-disabled .ui-slider-range {
	filter: inherit;
}

.ui-slider-horizontal {
	height: .8em;
}
.ui-slider-horizontal .ui-slider-handle {
	top: -.3em;
	margin-left: -.6em;
}
.ui-slider-horizontal .ui-slider-range {
	top: 0;
	height: 100%;
}
.ui-slider-horizontal .ui-slider-range-min {
	left: 0;
}
.ui-slider-horizontal .ui-slider-range-max {
	right: 0;
}

.ui-slider-vertical {
	width: .8em;
	height: 100px;
}
.ui-slider-vertical .ui-slider-handle {
	left: -.3em;
	margin-left: 0;
	margin-bottom: -.6em;
}
.ui-slider-vertical .ui-slider-range {
	left: 0;
	width: 100%;
}
.ui-slider-vertical .ui-slider-range-min {
	bottom: 0;
}
.ui-slider-vertical .ui-slider-range-max {
	top: 0;
}

/* Component containers
----------------------------------*/
.ui-widget {
	font-family: Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;
	font-size: 1.1em;
}
.ui-widget .ui-widget {
	font-size: 1em;
}
.ui-widget input,
.ui-widget select,
.ui-widget textarea,
.ui-widget button {
	font-family: Trebuchet MS,Tahoma,Verdana,Arial,sans-serif;
	font-size: 1em;
}
.ui-widget-content {
	border: 1px solid #dddddd;
	color: #333333;
}
.ui-widget-content a {
	color: #333333;
}
.ui-widget-header {
	border: 1px solid #e78f08;
	color: #ffffff;
	font-weight: bold;
}
.ui-widget-header a {
	color: #ffffff;
}

/* Interaction states
----------------------------------*/
.ui-state-default,
.ui-widget-content .ui-state-default,
.ui-widget-header .ui-state-default {
	border: 1px solid #cccccc;
	font-weight: bold;
	color: #1c94c4;
}
.ui-state-default a,
.ui-state-default a:link,
.ui-state-default a:visited {
	color: #1c94c4;
	text-decoration: none;
}
.ui-state-hover,
.ui-widget-content .ui-state-hover,
.ui-widget-header .ui-state-hover,
.ui-state-focus,
.ui-widget-content .ui-state-focus,
.ui-widget-header .ui-state-focus {
	border: 1px solid #fbcb09;
	font-weight: bold;
	color: #c77405;
}
.ui-state-hover a,
.ui-state-hover a:hover,
.ui-state-hover a:link,
.ui-state-hover a:visited,
.ui-state-focus a,
.ui-state-focus a:hover,
.ui-state-focus a:link,
.ui-state-focus a:visited {
	color: #c77405;
	text-decoration: none;
}
.ui-state-active,
.ui-widget-content .ui-state-active,
.ui-widget-header .ui-state-active {
	border: 1px solid #fbd850;
	font-weight: bold;
	color: #eb8f00;
}
.ui-state-active a,
.ui-state-active a:link,
.ui-state-active a:visited {
	color: #eb8f00;
	text-decoration: none;
}

/* Interaction Cues
----------------------------------*/
.ui-state-highlight,
.ui-widget-content .ui-state-highlight,
.ui-widget-header .ui-state-highlight {
	border: 1px solid #fed22f;
	color: #363636;
}
.ui-state-highlight a,
.ui-widget-content .ui-state-highlight a,
.ui-widget-header .ui-state-highlight a {
	color: #363636;
}
.ui-state-error,
.ui-widget-content .ui-state-error,
.ui-widget-header .ui-state-error {
	border: 1px solid #cd0a0a;
	color: #ffffff;
}
.ui-state-error a,
.ui-widget-content .ui-state-error a,
.ui-widget-header .ui-state-error a {
	color: #ffffff;
}
.ui-state-error-text,
.ui-widget-content .ui-state-error-text,
.ui-widget-header .ui-state-error-text {
	color: #ffffff;
}
.ui-priority-primary,
.ui-widget-content .ui-priority-primary,
.ui-widget-header .ui-priority-primary {
	font-weight: bold;
}
.ui-priority-secondary,
.ui-widget-content .ui-priority-secondary,
.ui-widget-header .ui-priority-secondary {
	opacity: .7;
	filter:Alpha(Opacity=70); /* support: IE8 */
	font-weight: normal;
}
.ui-state-disabled,
.ui-widget-content .ui-state-disabled,
.ui-widget-header .ui-state-disabled {
	opacity: .35;
	filter:Alpha(Opacity=35); /* support: IE8 */
	background-image: none;
}
.ui-state-disabled .ui-icon {
	filter:Alpha(Opacity=35); /* support: IE8 - See #6059 */
}

/* Icons
----------------------------------*/

/* states and images */
.ui-icon {
	width: 16px;
	height: 16px;
}

/* Misc visuals
----------------------------------*/

/* Corner radius */
.ui-corner-all,
.ui-corner-top,
.ui-corner-left,
.ui-corner-tl {
	border-top-left-radius: 4px;
}
.ui-corner-all,
.ui-corner-top,
.ui-corner-right,
.ui-corner-tr {
	border-top-right-radius: 4px;
}
.ui-corner-all,
.ui-corner-bottom,
.ui-corner-left,
.ui-corner-bl {
	border-bottom-left-radius: 4px;
}
.ui-corner-all,
.ui-corner-bottom,
.ui-corner-right,
.ui-corner-br {
	border-bottom-right-radius: 4px;
}

/* Overlays */
.ui-widget-overlay {
	opacity: .5;
	filter: Alpha(Opacity=50); /* support: IE8 */
}
.ui-widget-shadow {
	margin: -5px 0 0 -5px;
	padding: 5px;
	opacity: .2;
	filter: Alpha(Opacity=20); /* support: IE8 */
	border-radius: 5px;
}
/* ### onScreenKeyboard ### */

.openKeyboardButton:active {
	box-shadow: inset 0px 0px 1px 0px #cdcdcd;
}

.openKeyboardButton:hover {
	border: 1px solid #9999FF;
}

.openKeyboardButton {
	position:absolute;
	bottom:0px;
	width: 48px;
	height: 21px;
	padding-top: 0px;
	padding-bottom: 8px;
	padding-left: 0px;
	background-color: #f8f8f8;
	border-radius: 0px;
	cursor: pointer;
	cursor: hand;
	border: 1px solid #DCDCDC;
	box-shadow: 0px 0px 1px 0px rgba(102, 102, 102, 0.3);
	text-align: center;
}

.keyBoardClosePanel {
	position: absolute;
	top: 0px;
	right: 0px;
	width: 30px;
	height: 30px;
	cursor: pointer;
	cursor: hand;
	text-align: center;
	background-color: #666666;
	border-top-left-radius: 5px;
}

.keyBoardClosePanel .closeIcon {
	padding-top: 6px;
}

/* special css for Springboard */
.GeoGebraFrame .KeyBoard table {
    border-collapse: separate;
}

.KeyBoard {
	border-radius: 0px;
	-webkit-border-radius: 0px;
	background-color: #666666;
	color: #000;
	box-shadow: none;
	font-family: geogebra-sans-serif;
	position: relative;
	padding: 5px;
}

.KeyBoard .SymbolTable {
	display: none;
}

.KeyBoardContentNumbers,
.KeyBoardContentSpecialChars {
	margin: 0 auto;
	max-width: 745px !important;
}

.KeyPanelLetters {
	margin: 0 auto;
	position: relative;
}

.KeyPanelFunction,
.KeyPanelNum, 
.normal .contentLetters {
	padding-right: 20px;
}

.KeyPanelRow {
	margin: 0 auto;
}

.KeyBoard .KeyBoardButton {
	padding: 10px;
	height: 20px;
	text-align: center;
	margin: 2px;
	font-size: 120%;
	cursor: pointer;
	border-radius: 5px;
	background-color: #F8F8F8;
	white-space: nowrap;
	color: #000;
}

.lowerHeight .KeyBoardButton {
	height: 10px;
	padding-top: 3px;
    padding-bottom: 13px;
}

.KeyBoardButton.accentDown {
	background-color: #dcdcdc;
}

.KeyBoardButton.supScript .gwt-Label {
	margin-top: -6px;
}

.KeyBoard td.hidden {
	display: none;
}

.normal .KeyBoardButton {
	width: 50px;
}

.KeyBoardButton:active {
	box-shadow: inset 0px 0px 0px 1px #7C7C7C;
}

.KeyBoardButton.colored {
	background-color: #AFAFAF;
}

.KeyBoardButton.backspace {
	padding-top: 8px;
	padding-bottom: 12px;
}

.lowerHeight .KeyBoardButton.backspace {
    padding-top: 1px;
    padding-bottom: 15px;
}

/* -- NUMBERS -- */
.normal .KeyBoardButton.backspace,
.normal .KeyBoardButton.enter {
	width: 64px;
}

.normal .KeyBoardButton.arrow {
	width: 20px;
	padding-left: 9px;
	padding-right: 11px;
}

.KeyBoardButton.enter {
	height: 64px;
}

.lowerHeight .KeyBoardButton.enter {
    height: 41px;
}

.lowerHeight .KeyBoardButton.enter img {
	padding-top: 15px;	
}

.KeyBoardButton.enter img {
	padding-top: 23px;	
}

/* -- LETTERS -- */
.normal .KeyBoardButton.shift {
	width: 80px;
	position: absolute;
	left: 0px;
}

.normal .KeyBoardButton.delete {
	width: 80px;
	position: absolute;
	right: 0px;
}

.normal .KeyBoardButton.delete.small, 
.normal .KeyBoardButton.shift.small {
	width: 50px;
}

/* last row */
.KeyPanelLetters > tbody > tr:nth-child(4) .KeyPanelRow {
	width: 100%;
}

/* cell of space button */
.KeyPanelLetters > tbody > tr:nth-child(4) > td > table > tbody > tr > td:nth-child(4) {
	width: 100%
}

.normal .KeyBoardButton.space {
	width: 99%;
	padding: 0px 0px 20px 0px;
	margin: 2px 2px 0px 2px;
}

/* 
 * SCALE CONTENT OF KEYBOARD
 */

.scale .keyBoardClosePanel {
	top: -25px;
	right: 0px;
	width: 35px;
	height: 25px;
}

.scale .KeyPanelRow, 
.scale .KeyBoardContentNumbers, 
.scale .KeyBoardContentSpecialChars,
.scale .KeyPanelControl,
.scale .KeyPanelLetters,
.scale .KeyPanelFunction,
.scale .KeyPanelNum {
	width: 100% !important;
}

.scale .KeyPanelRow td {
	width: 25%;
}

.scale .KeyPanelLetters .KeyPanelRow td {
	width: 7%;
}

.scale .KeyBoardButton {
	padding-left: 0%;
	padding-right: 0%;
}

.scale .KeyPanelControl {
	padding-right: 0px;
}

.scale.smallerFont {
	font-size: 100% !important;
}

.scale.smallerFont .switchKeyboard {
	font-size: 10pt;
}

.scale.smallerFont .KeyBoardContentNumbers .KeyBoardButton.colored {
	font-size: 86% !important;
}


.scale.smallerFont .KeyBoardContentSpecialChars .KeyPanelFunction {
	font-size: 75% !important;
}

.scale.smallerFont .KeyBoardButton.supScript .gwt-Label {
	margin-top: -5px;
}

.scale .KeyPanelFunction,
.scale .KeyPanelNum {
	padding-right: 2%;
}

.scale .KeyBoardContentSpecialChars>tbody>tr>td,
.scale .KeyBoardContentSpecialChars>tbody>tr>td:nth-child(2),
.scale .KeyBoardContentNumbers>tbody>tr>td, 
.scale .KeyBoardContentNumbers>tbody>tr>td:nth-child(2) {
 	width: 45%;
}

/* -- LETTERS -- */

/* space */
.scale .KeyPanelLetters tr:nth-child(4) > td td:nth-child(4) {
	width: 50%;
}
/* width of panel with enter, delete, left, right */
.scale .KeyPanelLetters .KeyPanelRow td {
	width: 9%;
}

/* ### End onScreenKeyboard ### */</style><style>.GF-3RJSCED{border-top:2px solid #6f7277;padding:3px 15px;text-align:left;color:#4b4a4a;text-shadow:#ddf 1px 1px 0;overflow:hidden;}.GF-3RJSCFD{border-bottom:2px solid #6f7277;padding:3px 15px;text-align:left;color:#4b4a4a;text-shadow:#ddf 1px 1px 0;overflow:hidden;}.GF-3RJSCOC{padding:2px 15px;overflow:hidden;}.GF-3RJSCDE{cursor:pointer;cursor:hand;}.GF-3RJSCDE:hover{color:#6c6b6b;}.GF-3RJSCPC{background:#fff;}.GF-3RJSCAD{border:2px solid #fff;}.GF-3RJSCPD{background:#f3f7fb;}.GF-3RJSCAE{border:2px solid #f3f7fb;}.GF-3RJSCGD{background:#eee;}.GF-3RJSCHD{border:2px solid #eee;}.GF-3RJSCJD{background:#ffc;}.GF-3RJSCKD{border:2px solid #ffc;}.GF-3RJSCBE{background:#628cd5;color:white;height:auto;overflow:auto;}.GF-3RJSCCE{border:2px solid #628cd5;}.GF-3RJSCID{border:2px solid #d7dde8;}.GF-3RJSCOD{margin:30px;}</style></head>

    <body class="ws">

    
<div class="page" itemscope="" itemtype="http://schema.org/CreativeWork">
    <div style="direction: ltr">

        
            
<div class="j-ws-header sWs-header " data-title="Napoleon&#39;s Theorem" style="height: auto;">

    <ul class="sWs-title">
                <li>
                <a class="icon icon-navigate-back jCancel jClose" href="https://tube.geogebra.org/dancer1214?p=materials" title="Close worksheet" data-confirm="">
                </a>
            </li>
                <li>
            <a class="sWs-logo icon icon-header-logo jCancel jClose" href="https://tube.geogebra.org/dancer1214?p=materials" title="Close worksheet" data-confirm="">
            </a>
        </li>
    </ul>


    <ul class="sWs-tools jWs-tools" data-id="3177287" data-pe_id="" data-user_id="3344311" data-loginmsg="" data-loginurl="" data-inbook="" data-doneurl="https://tube.geogebra.org/dancer1214?p=materials" data-saveurl="" data-yes="Yes" data-no="No" data-cancel="Cancel">


    
                
                                                                <li><a class="active-icon bigger icon-favorite jKeep " href="https://tube.geogebra.org/material/favorite/id/3177287" title="Add to Favorites"></a>
                </li>
            
                                                            <li class="hide-editmode"><a class="active-icon bigger icon-edit jEdit" href="https://tube.geogebra.org/material/edit/id/3177287?doneurl=https%3A%2F%2Ftube.geogebra.org%2Fdancer1214%3Fp%3Dmaterials" data-copy="" data-owner-username="dancer1214" title="Edit material"></a>
                </li>
                                    

    
        <li><a class="active-icon bigger icon-share" href="https://tube.geogebra.org/material/show/id/3177287#share-popup" title="Share this Material with Others"></a></li>
    
                <li>
            <div class="worksheet-menu">
                <a href="javascript: void(0)" class="j-worksheet-actions-button active-icon bigger icon-menu"></a>
                <div class="ggbSubmenuPopup j-worksheet-menu-content">
                    <div class="submenu-arrow"></div>
                    <ul id="worksheet-actions" class="submenu-content left">

                                    <li class="icon icon-embed">
                            <a href="https://tube.geogebra.org/material/show/id/3177287#embed-popup" title="Embed this material in your private website, blog, your material plattform, or anywhere else where HTML is permitted.">Embed</a>
                        </li>
                                                <li class="icon icon-download">
                            <a href="https://tube.geogebra.org/material/show/id/3177287#download-popup" title="">Download</a>
                        </li>
                                                <li class="icon icon-copy jCopy" data-confirm="Are you sure that you want to create a copy of this material?" data-confirm-yes="Copy material" data-confirm-no="Cancel">
                                                    <a href="https://tube.geogebra.org/material/copy/id/3177287" title="Copy a material if you want to enhance or translate it. A reference to the original material is automatically added.">Make a Copy                            </a>
                        </li>
            
                                    <li class="icon icon-delete jDelete" data-confirm="Are you sure you want to delete this material?" data-confirm-yes="Delete" data-confirm-no="Cancel">
                            <a href="https://tube.geogebra.org/material/delete/id/3177287">Delete</a>
                        </li>
            
                        <li class="icon icon-about">
                            <a href="https://tube.geogebra.org/material/show/id/3177287">About</a>
                        </li>
                                            </ul>
                </div>
            </div>
        </li>
        </ul>


    
    <div class="clear"></div>
</div>


<!-- Popup dialog for editing materials owned by other users -->
<div id="popup-edit-hasotherowner" class="message-dialog" style="display:none;">
    <div class="message-text">
        This worksheet was created by '{$1}'. Do you want to modify the original worksheet or create your own copy instead?    </div>
    <br><br>
    <span class="button-bar">
        <button class="button edit-original-edit">Edit this worksheet</button>
        <button class="button edit-original-copy">Create a copy</button>
    </span>
</div>
<!-- Popup dialog for editing materials owned by other users END -->

<!-- Popup dialog for editing materials without edit rights -->
<div id="popup-edit-noeditrights" class="message-dialog" style="display:none;">
    <div class="message-text">
        This worksheet was created by '{$1}' and you lack the permission to edit it. Do you want to create your own copy instead and add it to the book?    </div>
    <br><br>
    <span class="button-bar">
        <button class="button edit-original-copy">Create a copy</button>
        <button class="button cancel">Cancel</button>
    </span>
</div>
<!-- Popup dialog for editing materials without edit rights END -->

        <script>
        window.GGBT_ws_header_footer.setDefaults({
            msg_favorite_add: "The material '{$1}' was added to your favorites.",
            msg_favorite_remove: "The material '{$1}' was removed from your favorites.",
            btn_favorite_view: "View favorite materials",
            btn_ok: "OK",
            favorites_url: "/user/profile/id/3344311/p/favorites"
        });
    </script>


            <div class="wsf-ws-scroller " data-id="3177287" data-mode="view" style="height: auto; width: 100%;">
                <div class="wsf-wrapper">

                    
                    
<script type="text/javascript">
    window.worksheet_applet_ids_3177287 = [];
</script>

<div class="worksheet_tbl">
    <h1 itemprop="headline" class="wsf-worksheet-title">Napoleon's Theorem            </h1>
    
    <div id="worksheet_element_534113" class="worksheet_element wsf-content-added" data-mat-id="534113" data-type="G" style="max-width: 1288px; width: 1288px;">

    
<div class="ws-element-header notitle">
    <ul class="wsf-buttons wsf-element-toolbar" style="right: -25px;">

    </ul>
    <div class="clear"></div>
</div>

            <div style="padding: 0px; height: 531px; width: 1288px;" class="ws-element-applet">

            
<script type="text/javascript">
    var parameters = {"id":"ggbApplet3177289","width":"1341","height":"553","showToolBar":false,"showMenuBar":false,"showAlgebraInput":false,"allowStyleBar":false,"showResetIcon":true,"enableLabelDrags":false,"enableShiftDragZoom":true,"enableRightClick":false,"showToolBarHelp":false,"errorDialogsActive":true,"useBrowserForJS":false,"filename":"https://tube.geogebra.org/files/00/03/17/72/material-3177289.ggb?v=1460575040","isPreloader":false,"screenshotGenerator":false,"preventFocus":true,"showSplash":false,"scale":"1","fixApplet":false,"prerelease":false,"playButtonAutoDecide":false,"playButton":false,"canary":false};
    parameters.appletOnLoad = function() {
        if (typeof $ === "function" && window.GGBT_wsf_view !== undefined) {
            var container =  $("#applet_container_3177289");
            window.GGBT_wsf_view.postProcessApplet(container);
        }
    };
    /** is3D=is 3D applet using 3D view, AV=Algebra View, SV=Spreadsheet View, CV=CAS View, EV2=Graphics View 2, CP=Construction Protocol, PC=Probability Calculator, DA=Data Analysis, FI=Function Inspector, PV=Python, macro=Macro View */
    var views = {"is3D":0,"AV":0,"SV":0,"CV":0,"EV2":0,"CP":1,"PC":0,"DA":0,"FI":0,"PV":0,"macro":0};
    var applet_3177289 = new GGBApplet('5.0', parameters, views);

    applet_3177289.setJNLPBaseDir('https://tube.geogebra.org/webstart/');
    applet_3177289.setPreviewImage(null, 'https://tube.geogebra.org/images/GeoGebra_loading.png?v=1460366000', 'https://tube.geogebra.org/images/applet_play.png?v=1460366000');
    applet_3177289.setGiacJSURL('https://tube.geogebra.org/webstart/4.4/giac.js');
    var appletType_3177289 = 'auto';
    $(function($) {
        applet_3177289.inject('applet_container_3177289', 'auto');
    });
</script>

    <div style="display: block; width: 1288px; height: 531.144px;" class="applet_container" id="applet_container_3177289">
    <div class="applet_scaler" style="position: relative; display: block; width: 1341px; height: 553px; transform-origin: 0% 0% 0px; transform: scale(0.960477, 0.960477);"><article class="notranslate" data-param-id="ggbApplet3177289" data-param-width="1341" data-param-height="553" data-param-showtoolbar="false" data-param-showmenubar="false" data-param-showalgebrainput="false" data-param-allowstylebar="false" data-param-showreseticon="true" data-param-enablelabeldrags="false" data-param-enableshiftdragzoom="true" data-param-enablerightclick="false" data-param-showtoolbarhelp="false" data-param-errordialogsactive="true" data-param-usebrowserforjs="false" data-param-filename="https://tube.geogebra.org/files/00/03/17/72/material-3177289.ggb?v=1460575040" data-param-ispreloader="false" data-param-screenshotgenerator="false" data-param-preventfocus="true" data-param-showsplash="false" data-param-fixapplet="false" data-param-prerelease="false" data-param-playbuttonautodecide="false" data-param-playbutton="false" data-param-canary="false" data-scalex="0.9604772557792692" data-scaley="0.9604772557792692" id="ggbApplet3177289" style="border-style: solid; border-width: 0px; display: inline-block;"><div class="GeoGebraFrame jsloaded applet-unfocused" style="width: auto; height: auto; border-width: 1px; border-style: solid;"><div class="gwt-SplitLayoutPanel" style="position: relative; width: 1339px; height: 551px;"><div aria-hidden="true" style="position: absolute; z-index: -32767; top: -20ex; width: 10em; height: 10ex; visibility: hidden;">&nbsp;</div><div style="position: absolute; overflow: hidden; left: 0px; top: 0px; right: 0px; bottom: 0px;"><div class="ggbdockpanelhack" style="right: 0px; bottom: 0px; position: absolute; left: 0px; top: 0px;"><div aria-hidden="true" style="position: absolute; z-index: -32767; top: -20ex; width: 10em; height: 10ex; visibility: hidden;">&nbsp;</div><div style="position: absolute; overflow: hidden; left: 0px; right: 0px; bottom: 0px; height: 0px;"><div style="right: 0px; bottom: 0px; position: absolute; left: 0px; top: 0px;"></div></div><div style="position: absolute; overflow: hidden; left: 0px; top: 0px; right: 0px; bottom: 0px;"><div style="right: 0px; bottom: 0px; position: absolute; left: 0px; top: 0px;"><div class="EuclidianPanel" style="position: relative; overflow: visible; bottom: -1px; right: -1px; width: 1339px; height: 515px;"><canvas height="515" width="1339" dir="ltr" tabindex="10000" style="position: relative; z-index: 0; width: 1339px; height: 515px;" class="cursor_default"></canvas></div><div class="consProtNav"><div class="navbar_leftPanel"><div tabindex="0" class="gwt-PushButton gwt-PushButton-up" role="button" aria-pressed="false"><input type="text" tabindex="-1" role="presentation" style="opacity: 0; height: 1px; width: 1px; z-index: -1; overflow: hidden; position: absolute;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAo0lEQVR42mNgGAWjYGiBqVOnGkybNm0/kE7AJj958mQHoFwDNrn+/n4BoNx8vBZADfiPbsj06dMVQJpBciAHYHFYAxC/B8mTZAHUVXDN6BZA1d+HyZFkAdCgAHTNMAtAPoIG5X90TKwF77FpJkJu8FjQgC18kYMIyF5PkQUwsSlTphQQiOTzFFmAnMZxJVNkR1CU0UDy+DIaUG//aHE1CoYgAACHlkKAA6SrGwAAAABJRU5ErkJggg==" width="24" height="24" class="gwt-Image"></div><div tabindex="0" class="gwt-PushButton gwt-PushButton-up" role="button" aria-pressed="false"><input type="text" tabindex="-1" role="presentation" style="opacity: 0; height: 1px; width: 1px; z-index: -1; overflow: hidden; position: absolute;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAp0lEQVR42mNgGAWjYPiA/v5+gWnTpvVPnTq1AZv85MmTHYDy+8kyHGhoAhC/B+L/6BZMnz5dASg2Hyr3nySDQa4CajoP04xuAYiNZDHxFkBdtR7NYLgFwKAIANL3sckTDGeoq/7jwe/xyRMT3g0EDKHMAmwRhx5E0Li5T7YF6EkPVyRPmTKlgKxIxpFM72NLptB4m0+RBWgJoAGHIwzIzmijYBQMLAAAzHAaDLKcmcsAAAAASUVORK5CYII=" width="24" height="24" class="gwt-Image"></div><div class="gwt-Label">44 / 44</div><div tabindex="0" class="gwt-PushButton gwt-PushButton-up" role="button" aria-pressed="false"><input type="text" tabindex="-1" role="presentation" style="opacity: 0; height: 1px; width: 1px; z-index: -1; overflow: hidden; position: absolute;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAkUlEQVR42mNgGAWjYGiByZMnO0ybNm3/1KlTDbDJA8UbQLi/v1+AbAuABvyH4vnoBkEtAMm9B+IESi2AGdSAxQIwBvkWpIcSC2D4PlSuAYf8/OnTpytQYgGyj/DJNQxaC84TCiKiUha2SJ4yZUoBvkjGlaQJWgDU3I8nmd4HygeQndFwpQiQbyjKaKNgFAxOAAChuisGh7wdqgAAAABJRU5ErkJggg==" width="24" height="24" class="gwt-Image"></div><div tabindex="0" class="gwt-PushButton gwt-PushButton-up" role="button" aria-pressed="false"><input type="text" tabindex="-1" role="presentation" style="opacity: 0; height: 1px; width: 1px; z-index: -1; overflow: hidden; position: absolute;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAn0lEQVR42mNgGAWjYGiBqVOnGkybNq0fCARwyDdMnjzZAYdcAlDvfrwWgDQDFf4H4vdTpkwpQJcHGQCVn4/uCJDlIDliLYDh+8guRrIA7AiQoZRaAMPrp0+froBmAdwRQPEASi1AdjVeOUoseE9LC+bjCyKoPrKC6Dy+SEZOaaRaAPJuAq5kii2vEGUBKKOBFOLLaKCgIjujjYJRMDgBAFX3QBJc2MwQAAAAAElFTkSuQmCC" width="24" height="24" class="gwt-Image"></div></div><div class="navbar_playPanel navbar_playPanel_padding"><div tabindex="0" class="gwt-PushButton gwt-PushButton-up" role="button" aria-pressed="false"><input type="text" tabindex="-1" role="presentation" style="opacity: 0; height: 1px; width: 1px; z-index: -1; overflow: hidden; position: absolute;"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABIElEQVR42sWVMQqEMBBFPcoeYY/gETyFp7ETtRGsrTyBbG9naSUI1oKVXdYnWYmuii4m+2FAJjP/ZyZjYln/hO/7dhAEyWj1aGJl+JIsy+zLxFEUPcIwfEEUx7HI81yUZSnatp2Mb3ysEUMsOafIx2BnTOpIhmgYBrEH1oqi+Ah15J4hF2mair7vxVkQS46sxtltC7sg8GjXR9VIkW6zXfSRUq/sfKsSOOBakDMJlEc/VbAjz/Nma5pmMtVHjAo45JQ9ZwHGDeV1ayBwXXe2qqomU33ErFslDz1RBWrGbo1fBABccKoC00jeJQAXnAsBfqC7BOAyL6C7RdoPWfuYPrX+aNqvCiOXnfbreuvBoZ+3PjhGnkwVcroOH/2vaTGNN13kQjuiHwsxAAAAAElFTkSuQmCC" width="24" height="24" class="gwt-Image"></div><input type="number" class="gwt-TextBox ggbSpinner" min="0.25" max="10" step="0.25"><div class="gwt-Label">s</div></div><div class="MyCanvasButton navbar_btOpenWindow" title="Construction Protocol"><div class="buttonContent stylebarButton" style="background-image: url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABoklEQVR42r1UO2rDQBDVEXIEH8GgC7hyZzC4UreNZBcuAqrcbeVKkMKVqnRpXeQAvoDBdSp1aQ25wGbfMk+MhDeOEmTBY1ejN/N2PqskeeSz2Wxm9zh5nk+xGmOePH/S/0Y71n7wSVEUzpPMHYETVs+9elgdHP44pOxfOo7r9foVDh4XJWgJvMOZjrK3OobwZvogCdPFiWCULKY/CNjBAigLyX5dIptIjyB61AJia7SA5g1++rWVei/7w9La6rq2Y2J8ATXTs3v3QM84uHrWOQTcJzdq1qC+HNPIHTAyEEdC9aYR2zPWjogSsBwvThYhQY5oKqEF5N2KgO00XgQuFIoJKHEEa/jbUPwLx7VzRxhYbvOVQdgX1hYllF/BSbIx6iCO3/WFG9RkOlOc/xw2+N+X7E+Pn1U3JryAc2PiMQJV9ekWiyKAe9qzzLrD4atdrT23wHesxlR+guqwjwrM51kAnUmAGAJst2+Bh0AEeTxcNAMQV6syYLc7dchl+e7SNA3Bb2Ww338EPg6HfbQHcACBadMOG4RjNQZfY3CTY46/xTcCV6sjAmkwuAAAAABJRU5ErkJggg==&quot;); background-size: 24px;"></div></div></div></div></div></div></div></div><div aria-hidden="true" class="DockGlassPane" style="position: absolute; overflow: hidden; display: none; width: 1341px; height: 553px; top: 0px; left: 0px; z-index: 5000;"><div aria-hidden="true" style="border: 4px solid gray; display: none;"></div></div></div></article></div><script type="text/javascript">
//<![CDATA[
WebFontConfig = {
   loading: function() {},
   active: function() {},
   inactive: function() {},
   fontloading: function(familyName, fvd) {},
   fontactive: function(familyName, fvd) {},
   fontinactive: function(familyName, fvd) {},
   custom: {
       families: ["geogebra-sans-serif", "geogebra-serif"],
           urls: [ "https://app.geogebra.org/5.0/web/css/fonts.css" ]
   }
};
//]]>

</script><script type="text/javascript" src="./Napoleon&#39;s Theorem - GeoGebra_files/webfont.js"></script><script src="./Napoleon&#39;s Theorem - GeoGebra_files/web.nocache.js"></script></div>

            <script type="text/javascript">
                window.worksheet_applet_ids_3177287.push(3177289);
            </script>
        </div>
    
        
        </div>


    <div class="save-wrapper" data-doneurl="https://tube.geogebra.org/dancer1214?p=materials" data-saveurl="/worksheet/saveexercise/id/3177287">

        <div class="wsf-btn-bar-left">
                    </div>
    </div>

</div>

                                            
<div id="save-info-inprogress" class="msg-box" style="display: none">
    <div class="message">Saving…</div>
</div>
<div id="save-info-successful" class="msg-box" style="display: none">
    <div class="message">All changes saved</div>
</div>
<div id="save-info-error" class="msg-box" style="display: none">
    <div class="message">Error</div>
</div>
                                    </div>

                


<div class="jWS-footer sWs-footer">
    <div class="sWs-footer-content">
        <a class="sWs-GeoGebra" href="https://tube.geogebra.org/dancer1214?p=materials"></a>
            –
        <span itemprop="creator" itemscope="" itemtype="http://schema.org/Person"> <a href="https://tube.geogebra.org/dancer1214"><span class="notranslate" itemprop="name">dancer1214</span></a></span>    

        </div>
</div>

            <div class="wsf-info-wrapper">

        <div class="wsf-info-scroller" style="height: 537px;">
            <div class="wsf-wrapper">
                <a class="wsf-button-information-close" title="Hide information"></a>
                <h1 id="wsf-info-title" class="wsf-title">Information: Napoleon's Theorem</h1>
                <ul id="wsf-content-info"></ul>
            </div>
        </div>

    </div></div>

            

    <script>
        if (window.GGBT_wsf_general) {
            window.GGBT_wsf_general.setDefaults({
                base_url: "https://tube.geogebra.org",
                info: {
                    wsfButtonInformation : {
                        title: {
                            show: "Show information for this worksheet",
                            hide: "Hide information"
                        }
                    },
                    title: {
                        text : "Information"
                    }
                },
                url: {
                    link: "Link"                }
            });
        }
    </script>

            </div>

</div>

    
<iframe src="javascript:&quot;&quot;" id="web" tabindex="-1" style="position: absolute; width: 0px; height: 0px; border: none; left: -1000px; top: -1000px;"></iframe><div aria-hidden="true" style="position: absolute; z-index: -32767; top: -20cm; width: 10cm; height: 10cm; visibility: hidden;">&nbsp;</div><div class="ToolTip" aria-hidden="true" style="display: none;"><div class="toolTipHTML"></div></div><table cellspacing="0" cellpadding="0" class="infoTooltip" aria-hidden="true" style="display: none;"><tbody><tr><td align="left" style="vertical-align: top;"><div class="infoText"></div></td></tr></tbody></table></body></html>